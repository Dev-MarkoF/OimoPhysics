/* OimoPhysics 1.2.2 (c) 2020 saharan, The MIT License */ 'use strict';(function(){function Qj(){this.position=new n;this.rotation=new I;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}function Ka(a){this.Ic=-1;this.ha=new Ua;this.ja=new Ua;this.a=new Ua;var b=a.position;this.ha.v=b.x;this.ha.A=b.y;this.ha.B=b.z;b=a.rotation;this.ha.o=b.e00;this.ha.f=b.e01;this.ha.h=b.e02;this.ha.i=b.e10;this.ha.m=b.e11;this.ha.j=b.e12;this.ha.l=b.e20;this.ha.g=b.e21;this.ha.s=b.e22;var b=this.ja,e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Ak=a.restitution;this.pk=a.friction;this.Vk=a.density;this.Fb=a.geometry;this.kk=a.collisionGroup;this.lk=a.collisionMask;this.im=a.contactCallback;this.u=new eb;this.ub=null;this.mc=new n}function Qe(){}function Rj(){this.position=new n;this.rotation=new I;this.linearVelocity=new n;this.angularVelocity=new n;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0}function x(a){this.Yi=this.Gc=this.ia=this.M=null;this.Rg=0;this.ic=this.Mb=null;this.Ne=0;this.ff=this.Me=null;this.Ah=0;var b=a.linearVelocity;this.jb=b.x;this.kb=b.y;this.lb=b.z;b=a.angularVelocity;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.jd=this.hd=this.gd=this.td=this.sd=this.rd=0;this.ja=new Ua;this.a=new Ua;b=a.position;this.ja.v=b.x;this.ja.A=b.y;this.ja.B=b.z;b=a.rotation;this.ja.o=b.e00;this.ja.f=b.e01;this.ja.h=b.e02;this.ja.i=b.e10;this.ja.m=b.e11;this.ja.j=b.e12;this.ja.l=b.e20;this.ja.g=b.e21;this.ja.s=b.e22;var b=this.a,e=this.ja;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Jb=a.type;this.wb=0;this.Bb=!1;this.Tk=a.autoSleep;this.$=this.Z=this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.Si=this.Ri=this.Qi=this.Pi=this.Oi=this.Ni=this.Mi=this.Li=this.Ki=this.$a=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.ae=this.$d=this.Zd=this.Yd=this.Xd=this.Wd=this.Vd=this.Ud=this.Td=this.qb=this.Lf=0;this.sk=a.linearDamping;this.hk=a.angularDamping;this.th=this.sh=this.rh=this.yh=this.xh=this.wh=this.Qf=this.Pf=this.Of=this.ci=this.bi=this.ai=0;this.O=new n(1,1,1);this.lg=!1;this.vh=1;this.jc=null}function fj(){this.mass=0;this.localInertia=new I}function Rb(a){Ob.call(this);this.ga=a;this.info=new gj;this.Wb=Array(F.maxJacobianRows);a=0;for(var b=this.Wb.length;a<b;)this.Wb[a++]=new hj}function Pb(a){Ob.call(this);this.aj=a;this.info=new Sj;this.Wb=Array(F.maxManifoldPoints);a=0;for(var b=this.Wb.length;a<b;)this.Wb[a++]=new Tj}function rj(a){this.Ug=a;this.Ok=Array(this.Ug);this.qb=Array(this.Ug);this.rj=Array(this.Ug);a=0;for(var b=this.Ug;a<b;){var e=a++;this.Ok[e]=Array(this.Ug);this.qb[e]=Array(this.Ug);this.rj[e]=Array(this.Ug);for(var d=0,c=this.Ug;d<c;){var f=d++;this.Ok[e][f]=0;this.qb[e][f]=0;this.rj[e][f]=0}}this.tk=1<<this.Ug;this.jk=Array(this.tk);this.Uk=Array(this.tk);a=0;for(b=this.tk;a<b;){e=a++;d=(e&85)+(e>>1&85);d=(d&51)+(d>>2&51);d=(d&15)+(d>>4&15);c=Array(d);for(f=0;f<d;){var h=f++;c[h]=Array(d);for(var l=0;l<d;)c[h][l++]=0}this.jk[e]=!1;this.Uk[e]=c}}function Wb(a){Ob.call(this);this.ga=a;this.info=new gj;a=F.maxJacobianRows;this.yi=new rj(a);this.$e=new sj(a);this.Wb=Array(a);for(var b=0,e=this.Wb.length;b<e;)this.Wb[b++]=new hj;b=this.$e.li.length;this.em=new Mi(b);this.bj=new Mi(b);this.kh=Array(a);this.ri=Array(a);this.Wf=Array(a);this.Oj=Array(a);for(b=0;b<a;)e=b++,this.kh[e]=0,this.ri[e]=0,this.Wf[e]=0,this.Oj[e]=0}function Mi(a){this.n=a;this.nc=Array(a);this.tf=Array(a);for(var b=0;b<a;){var e=b++;this.nc[e]=e}}function sj(a){this.zo=a;this.sf=0;this.li=Array(1<<a);this.lf=new Uj(a)}function Uj(a){this.size=a;this.ed=0;this.Nh=Array(a);this.Sh=Array(a);this.Ae=0;this.hh=Array(a)}function tj(a){this.Nh=Array(a);this.hh=Array(a);this.Sh=Array(a);this.zl=Array(a);this.Ae=this.ed=0}function hj(){this.Zf=this.mass=this.Jd=this.Id=this.Hd=this.Gd=this.Fd=this.Ed=this.Pd=this.Od=this.Nd=this.Md=this.Ld=this.Kd=0}function Tj(){this.Tm=this.Sm=this.Rm=this.Qm=this.ze=this.Jk=this.Ik=this.Hk=this.Gk=this.Fk=this.Ek=this.Pl=this.Ol=this.Nl=this.Ml=this.Ll=this.Kl=this.Xj=this.Wj=this.Vj=this.Uj=this.Tj=this.Sj=this.Vl=this.Ul=this.Tl=this.Sl=this.Rl=this.Ql=this.xg=this.wg=this.vg=this.ug=this.tg=this.sg=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=0}function vf(){}function Kf(){Gb.call(this);this.localAxis1=new n(1,0,0);this.localAxis2=new n(1,0,0);this.springDamper1=new Hb;this.springDamper2=new Hb;this.limitMotor1=new $b;this.limitMotor2=new $b}function Bb(a){N.call(this,a,Mb.UNIVERSAL);var b=a.localAxis1;this.Ma=b.x;this.Na=b.y;this.Oa=b.z;b=a.localAxis2;this.nd=b.x;this.od=b.y;this.pd=b.z;this.In();this.Bf=this.qh=this.Af=0;this.fk=this.ek=this.dk=!1;this.ol=a.springDamper1.clone();this.pl=a.springDamper2.clone();this.hl=a.limitMotor1.clone();this.il=a.limitMotor2.clone()}function tc(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Hb(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function Lf(){Gb.call(this);this.springDamper=new Hb}function se(a){N.call(this,a,0);this.Pe=a.springDamper.clone()}function $b(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function ff(){Gb.call(this);this.localAxis1=new n(1,0,0);this.localAxis2=new n(1,0,0);this.springDamper=new Hb;this.limitMotor=new $b}function Qb(a){N.call(this,a,1);var b=a.localAxis1;this.Ma=b.x;this.Na=b.y;this.Oa=b.z;b=a.localAxis2;this.Sb=b.x;this.Tb=b.y;this.Ub=b.z;this.Al();this.Se=this.Re=this.angle=0;this.N=new Ui(this);this.Pe=a.springDamper.clone();this.fi=a.limitMotor.clone()}function Jg(){Gb.call(this);this.localTwistAxis1=new n(1,0,0);this.localTwistAxis2=new n(1,0,0);this.localSwingAxis1=new n(0,1,0);this.twistSpringDamper=new Hb;this.swingSpringDamper=new Hb;this.twistLimitMotor=new $b;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function pb(a){N.call(this,a,Mb.RAGDOLL);var b=a.localTwistAxis1;this.Ma=b.x;this.Na=b.y;this.Oa=b.z;b=a.localSwingAxis1;this.sc=b.x;this.tc=b.y;this.uc=b.z;b=a.localTwistAxis2;this.Sb=b.x;this.Tb=b.y;this.Ub=b.z;this.Jn();this.wl=a.twistSpringDamper.clone();this.vl=a.twistLimitMotor.clone();this.ql=a.swingSpringDamper.clone();this.uk=a.maxSwingAngle1;this.vk=a.maxSwingAngle2;this.uk<F.minRagdollMaxSwingAngle&&(this.uk=F.minRagdollMaxSwingAngle);this.vk<F.minRagdollMaxSwingAngle&&(this.vk=F.minRagdollMaxSwingAngle);this.Fl=new $b;this.Fl.lowerLimit=-1;this.Ci=this.Bi=this.Ai=this.De=this.Ce=this.Be=this.bk=this.Hj=this.zj=this.Fl.upperLimit=0}function Kg(){Gb.call(this);this.localAxis1=new n(1,0,0);this.localAxis2=new n(1,0,0);this.limitMotor=new tc;this.springDamper=new Hb}function Jb(a){N.call(this,a,Mb.PRISMATIC);var b=a.localAxis1;this.Ma=b.x;this.Na=b.y;this.Oa=b.z;b=a.localAxis2;this.Sb=b.x;this.Tb=b.y;this.Ub=b.z;this.Al();this.N=new Ui(this);this.Se=this.Re=this.Jh=this.Yf=this.Xf=this.Bg=0;this.Pe=a.springDamper.clone();this.fi=a.limitMotor.clone()}function Mb(){}function qc(a){this.gl=a}function Vj(){this.vb=this.Dd=this.qa=0}function Lg(){Gb.call(this);this.localBasis1=new I;this.localBasis2=new I;var a=[];a.push((new tc).mh(0,0));a.push((new tc).mh(0,0));a.push((new tc).mh(0,0));this.translationalLimitMotors=a;a=[];a.push((new $b).mh(0,0));a.push((new $b).mh(0,0));a.push((new $b).mh(0,0));this.rotationalLimitMotors=a;this.translationalSpringDampers=[new Hb,new Hb,new Hb];this.rotationalSpringDampers=[new Hb,new Hb,new Hb]}function Sb(a){N.call(this,a,Mb.GENERIC);var b;b=a.localBasis1;0>b.e00*(b.e11*b.e22-b.e12*b.e21)-b.e01*(b.e10*b.e22-b.e12*b.e20)+b.e02*(b.e10*b.e21-b.e11*b.e20)?b=!0:(b=a.localBasis2,b=0>b.e00*(b.e11*b.e22-b.e12*b.e21)-b.e01*(b.e10*b.e22-b.e12*b.e20)+b.e02*(b.e10*b.e21-b.e11*b.e20));b&&console.log("src/oimo/dynamics/constraint/joint/GenericJoint.hx:46:","[warning] joint basis must be right handed");var e,d,c,f,h,l,g,k,m,p,r,q,t,A,L,u,z;k=a.localBasis1;b=k.e00;e=k.e01;d=k.e02;c=k.e10;f=k.e11;h=k.e12;l=k.e20;g=k.e21;k=k.e22;z=a.localBasis2;m=z.e00;p=z.e01;r=z.e02;q=z.e10;t=z.e11;A=z.e12;L=z.e20;u=z.e21;z=z.e22;this.Ma=b;this.Na=c;this.Oa=l;this.sc=e;this.tc=f;this.uc=g;this.Pc=d;this.Qc=h;this.Rc=k;this.Sb=m;this.Tb=q;this.Ub=L;this.gi=p;this.hi=t;this.ii=u;this.nd=r;this.od=A;this.pd=z;this.cm=this.translationY=this.translationX=this.Bf=this.qh=this.Af=0;this.fk=this.ek=this.dk=!1;this.qg=Array(3);this.Rf=Array(3);this.pg=Array(3);this.Tg=Array(3);this.qg[0]=a.translationalLimitMotors[0].clone();this.qg[1]=a.translationalLimitMotors[1].clone();this.qg[2]=a.translationalLimitMotors[2].clone();this.Rf[0]=a.translationalSpringDampers[0].clone();this.Rf[1]=a.translationalSpringDampers[1].clone();this.Rf[2]=a.translationalSpringDampers[2].clone();this.pg[0]=a.rotationalLimitMotors[0].clone();this.pg[1]=a.rotationalLimitMotors[1].clone();this.pg[2]=a.rotationalLimitMotors[2].clone();this.Tg[0]=a.rotationalSpringDampers[0].clone();this.Tg[1]=a.rotationalSpringDampers[1].clone();this.Tg[2]=a.rotationalSpringDampers[2].clone()}function wf(){Gb.call(this);this.localAxis1=new n(1,0,0);this.localAxis2=new n(1,0,0);this.translationalLimitMotor=new tc;this.translationalSpringDamper=new Hb;this.rotationalLimitMotor=new $b;this.rotationalSpringDamper=new Hb}function Gb(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new n;this.localAnchor2=new n;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function Fb(a){N.call(this,a,2);var b=a.localAxis1;this.Ma=b.x;this.Na=b.y;this.Oa=b.z;b=a.localAxis2;this.Sb=b.x;this.Tb=b.y;this.Ub=b.z;this.Al();this.Yf=this.Xf=this.Bg=this.Se=this.Re=this.angle=0;this.N=new Ui(this);this.ul=a.translationalSpringDamper.clone();this.tl=a.translationalLimitMotor.clone();this.nl=a.rotationalSpringDamper.clone();this.ml=a.rotationalLimitMotor.clone()}function N(a,b){this.rb=new qc(this);this.sb=new qc(this);this.Sg=F.defaultJointPositionCorrectionAlgorithm;this.Jb=b;this.jc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.Sk=a.allowCollision;this.nj=a.breakForce;this.oj=a.breakTorque;switch(a.solverType){case 0:this.Ck=new Rb(this);break;case 1:this.Ck=new Wb(this)}b=a.localAnchor1;this.sj=b.x;this.tj=b.y;this.uj=b.z;a=a.localAnchor2;this.vj=a.x;this.wj=a.y;this.xj=a.z;this.pd=this.od=this.nd=this.ii=this.hi=this.gi=this.Ub=this.Tb=this.Sb=this.Rc=this.Qc=this.Pc=this.uc=this.tc=this.sc=this.Oa=this.Na=this.Ma=this.zf=this.yf=this.xf=this.wf=this.vf=this.uf=this.fc=this.ec=this.dc=this.cc=this.bc=this.ac=0;this.Eb=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;)this.Eb[a++]=new Vj}function Ui(a){this.ga=a;this.Nc=this.Mc=this.Lc=this.Ac=this.zc=this.yc=this.rc=this.qc=this.pc=0}function Wj(){this.va=new gf;this.tb=this.motorSpeed=this.Ga=this.Ha=this.Ka=this.Fa=0;this.qa=null}function gj(){this.Ze=this.Ye=null;this.Da=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;)this.rows[a++]=new Wj}function Xj(){this.yg=new gf;this.Zj=new gf;this.Yj=new gf;this.friction=this.Ka=this.Fa=0;this.qa=null}function Sj(){this.Ze=this.Ye=null;this.Da=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;)this.rows[a++]=new Xj}function gf(){this.Cc=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.za=this.ya=this.xa=this.ua=this.ta=this.sa=0}function uj(a){this.Ia=a;this.Yl=0;this.Zl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;)this.Zl[a++]=new Lb}function Lb(){this.Oc=this.ge=this.fe=this.ee=this.de=this.ce=this.be=this.$b=this.Zb=this.Yb=this.Ab=this.zb=this.yb=this.Kf=this.Jf=this.If=this.Hf=this.Gf=this.Ff=0;this.ne=new vj;this.mg=this.kf=!1;this.Ic=-1}function Tb(){this.oe=this.mj=this.lj=this.kj=this.Cj=this.Bj=this.Aj=this.Qg=this.Pg=this.Og=0;this.Bc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;)this.Bc[a++]=new Lb}function vj(){this.pf=this.nf=this.mf=this.vb=this.Jc=this.Kc=this.dd=0}function Uc(a){this.Ck=new Pb(this);this.Ia=a}function jc(){}function Ob(){this.D=this.C=null;this.lg=!1}function Ce(){}function wj(){this.basisColorZ=new n(0,0,1);this.basisColorY=new n(0,1,0);this.basisColorX=new n(1,0,0);this.basisLength=.5;this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new n(1,.1,.1);this.jointLineColor=new n(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new n(.2,.2,1);this.contactTangentColor=new n(.1,.8,.1);this.contactNormalColor=new n(1,.1,.1);this.disabledContactColor=new n(.5,.1,.1);this.newContactColor=new n(1,1,.1);this.contactColor4=new n(.8,.1,1);this.contactColor3=new n(.1,.8,.6);this.contactColor2=new n(1,.6,.1);this.contactColor=new n(1,.1,.1);this.pairColor=new n(1,1,.1);this.bvhNodeColor=new n(.4,.4,.4);this.aabbColor=new n(1,.1,.1);this.kinematicShapeColor=new n(1,.5,.1);this.staticShapeColor=new n(.7,.7,.7);this.sleepingShapeColor2=new n(.2,.8,.5);this.sleepingShapeColor1=new n(.3,.3,.8);this.sleepyShapeColor2=new n(.6,.8,.3);this.sleepyShapeColor1=new n(.5,.25,.6);this.shapeColor2=new n(1,.8,.1);this.shapeColor1=new n(.7,.2,.4)}function Mg(){this.p=new Nb;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawBases=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.Nk=Array(5);this.Yh=Array(5);this.Pk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.Nk[b]=Array(e);this.Yh[b]=Array(e);this.Pk[b]=Array(e);for(e=0;8>e;){var d=e++,c=.7853981633974475*b,f=.7853981633974475*d;this.Nk[b][d]=new n(Math.sin(c)*Math.cos(f),Math.cos(c),-Math.sin(c)*Math.sin(f));this.Yh[b][d]=new n;this.Pk[b][d]=new n}}this.Mj=Array(8);this.vm=Array(8);this.Ee=Array(8);this.af=Array(8);this.fg=Array(8);for(a=0;8>a;)b=a++,this.Mj[b]=new n(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.vm[b]=new n(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.Ee[b]=new n,this.af[b]=new n,this.fg[b]=new n;this.style=new wj}function hf(){this.position=new n;this.normal=new n;this.shape=null;this.fraction=1;this.position.R();this.normal.R();this.hit=!1}function Ni(){}function xj(){}function yj(){}function Vi(){this.u=new eb;this.sn=null}function ij(){this.dj=new Oi;this.Jj=new Ua;this.Bg=new n;this.R=new n;this.wm=this.Lj=null}function Pi(){this.dj=new Oi;this.Jj=new n;this.end=new n;this.Lj=null}function Ca(a,b){null==a&&(a=2);switch(a){case 1:this.hc=new pc;break;case 2:this.hc=new Kb}this.Hi=new De(this.hc);null==b&&(b=new n(0,-9.80665,0));this.Xk=new n(b.x,b.y,b.z);this.Ti=this.di=this.Xi=this.Nf=null;this.xk=this.jl=this.Rg=this.yj=0;this.ll=10;this.kl=5;this.zk=new Pi;this.qj=new ij;this.Qk=new Vi;this.Ng=new zj;this.hf=Array(F.islandInitialConstraintArraySize);this.Fh=Array(F.islandInitialRigidBodyArraySize);this.ji=new Aj;this.ra=new Nb;this.om=0}function Aj(){this.invDt=this.dt=0;this.dtRatio=1}function zj(){this.cg=Array(F.islandInitialRigidBodyArraySize);this.dg=Array(F.islandInitialConstraintArraySize);this.Xh=Array(F.islandInitialConstraintArraySize);this.Wh=Array(F.islandInitialConstraintArraySize);this.Oh=this.Ph=this.bg=this.ag=0}function De(a){this.hc=a;this.tn=new hi;this.Ui=0}function Zb(){this.ad=this.me=this.M=this.ia=null}function ac(){this.ia=this.M=null;this.rb=new Zb;this.sb=new Zb;this.$h=this.D=this.C=this.Fc=this.Ec=null;this.pj=new Bj;this.un=new jf;this.Bk=this.rk=!1;this.Ia=new Tb;this.qm=new uj(this.Ia);this.ef=new Uc(this.Ia);this.Hh=!1}function wa(a,b,e,d){null==d&&(d=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=d;wa.numCreations++}function Nb(){this.c=Array(256);this.b=0;this.bb=Array(256);this.cb=0;this.eg=Array(256);this.Ag=0;this.le=Array(256);this.re=0}function pa(){}function J(a,b,e,d,c,f,h,l,g,k,m,p,r,q,t,A){null==A&&(A=1);null==t&&(t=0);null==q&&(q=0);null==r&&(r=0);null==p&&(p=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==c&&(c=0);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=p;this.e30=r;this.e31=q;this.e32=t;this.e33=A;J.numCreations++}function I(a,b,e,d,c,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==c&&(c=1);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;I.numCreations++}function Pc(){}function dc(){}function lb(){this.La=Array(4);this.eb=Array(4);this.ib=Array(4);this.Ij=Array(3);this.Ij[0]=new n(1,0,0);this.Ij[1]=new n(0,1,0);this.Ij[2]=new n(0,0,1);this.Jo=new n;this.Ko=new n;this.Co=new n;this.Bo=new n;this.Io=new Ua;this.La[0]=new n;this.eb[0]=new n;this.ib[0]=new n;this.La[1]=new n;this.eb[1]=new n;this.ib[1]=new n;this.La[2]=new n;this.eb[2]=new n;this.ib[2]=new n;this.La[3]=new n;this.eb[3]=new n;this.ib[3]=new n;this.dir=new n;this.closest=new n;this.closestPoint1=new n;this.closestPoint2=new n;this.ih=new Cj}function F(){}function Ua(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function n(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;n.numCreations++}function Dj(){this.$l=new n}function te(){this.Rd=new n;this.eb=new n;this.ib=new n}function Ee(){this.id=++Ee.Kb;this.ia=this.M=null;this.wk=new n;this.sl=this.nk=0;this.Gj=!1;this.Ca=Array(3);this.Hb=Array(3);this.Ib=Array(3);this.zi=new n;this.Sc=Array(3);this.Sc[0]=1;this.Sc[1]=2;this.Sc[2]=0}function Cj(){this.Ca=Array(F.maxEPAVertices);this.Gi=new n;this.We=0;this.cd=this.Cd=null;this.Bh=0;this.jf=this.Qe=null}function ii(){this.oh=!1}function ji(a){this.oh=a}function ki(a){this.oh=a}function li(){this.oh=!1}function mi(){this.oh=!1}function Bj(){}function Ej(){this.gc=this.fd=this.Rj=this.w=0;this.Xb=Array(8);this.Gb=Array(8);this.Xb[0]=new kc;this.Gb[0]=new kc;this.Xb[1]=new kc;this.Gb[1]=new kc;this.Xb[2]=new kc;this.Gb[2]=new kc;this.Xb[3]=new kc;this.Gb[3]=new kc;this.Xb[4]=new kc;this.Gb[4]=new kc;this.Xb[5]=new kc;this.Gb[5]=new kc;this.Xb[6]=new kc;this.Gb[6]=new kc;this.Xb[7]=new kc;this.Gb[7]=new kc}function kc(){this.Ra=this.Qa=this.Pa=this.y=this.x=0}function ni(){this.oh=!1;this.Xg=new Ej}function lc(a){this.oh=a}function Fj(){this.position1=new n;this.position2=new n;this.id=this.depth=0}function jf(){this.numPoints=0;this.normal=new n;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;)this.points[a++]=new Fj}function hi(){this.xb=Array(8);this.xb[0]=Array(8);this.xb[1]=Array(8);this.xb[2]=Array(8);this.xb[3]=Array(8);this.xb[4]=Array(8);this.xb[5]=Array(8);var a=new li;this.xb[0][0]=new ii;this.xb[0][1]=new ki(!1);this.xb[0][2]=a;this.xb[0][3]=a;this.xb[0][4]=new ji(!1);this.xb[0][5]=a;this.xb[1][0]=new ki(!0);this.xb[1][1]=new ni;this.xb[1][2]=a;this.xb[1][3]=a;this.xb[1][4]=a;this.xb[1][5]=a;this.xb[2][0]=a;this.xb[2][1]=a;this.xb[2][2]=a;this.xb[2][3]=a;this.xb[2][4]=a;this.xb[2][5]=a;this.xb[3][0]=a;this.xb[3][1]=a;this.xb[3][2]=a;this.xb[3][3]=a;this.xb[3][4]=a;this.xb[3][5]=a;this.xb[4][0]=new ji(!0);this.xb[4][1]=a;this.xb[4][2]=a;this.xb[4][3]=a;this.xb[4][4]=new mi;this.xb[4][5]=a;this.xb[5][0]=a;this.xb[5][1]=a;this.xb[5][2]=a;this.xb[5][3]=a;this.xb[5][4]=a;this.xb[5][5]=a}function ue(a){Qa.call(this,0);this.Rb=this.ab=a;this.Xe()}function Oi(){this.position=new n;this.normal=new n;this.fraction=0}function bc(){}function Qd(a,b){Qa.call(this,2);this.ab=a;this.Db=b;this.Xe()}function kf(a){Qa.call(this,5);this.We=a.length;this.Ca=Array(this.We);this.Vg=Array(this.We);for(var b=0,e=this.We;b<e;){var d=b++;this.Ca[d]=a[d];this.Vg[d]=new n}this.rm=!0;this.Xe()}function Fe(a,b){Qa.call(this,3);this.ab=a;this.Db=b;this.Mk=a/Math.sqrt(a*a+4*b*b);this.Dk=2*b/Math.sqrt(a*a+4*b*b);this.Xe()}function Wc(a,b){Qa.call(this,4);this.ab=a;this.Db=b;this.Rb=this.ab;this.Xe()}function Hd(a){Qa.call(this,1);this.Te=a.x;this.Ue=a.y;this.Ve=a.z;this.Yk=a.x;this.al=this.$k=this.Zk=0;this.bl=a.y;this.el=this.dl=this.cl=0;this.fl=a.z;this.Xe();a=a.x<a.y?a.z<a.x?a.z:a.x:a.z<a.y?a.z:a.y;this.Rb>.2*a&&(this.Rb=.2*a)}function eb(){this.ma=this.la=this.ka=this.pa=this.oa=this.na=0}function Gj(){this.Nb=null;this.yk=0;this.Zi=new Hj;this.qf=this.zg=this.qd=null;this.zi=Array(1024)}function Hj(){this.mm=0;this.ik=!1}function Wi(a,b){Qc.call(this,a,b);this.ei=null;this.zh=!1}function oi(){this.ng=this.og=this.M=null;this.F=Array(2);this.Ja=0;this.Ea=null;this.P=0;this.ub=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function Kb(){ub.call(this,2);this.qk=!0;this.ye=new Gj;this.rf=Array(1024);this.$f=0}function pc(){ub.call(this,1);this.qk=!1}function ve(){this.Dh=this.Ch=null}function Qc(a,b){this.userData=a;this.Ic=b;this.M=this.ia=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function pi(){}function we(){}function Xi(){Qa.call(this,-1);this.min=new n;this.max=new n}function jj(){Qa.call(this,-1)}function Qa(a){wc.call(this,a);this.Rb=F.defaultGJKMargin;this.rm=!1}function wc(a){this.Jb=a;this.Sf=0}function ub(a){this.Jb=a;this.Vi=0;this.pe=this.gf=this.Oe=null;this.qk=!1;this.Dj=0;this.Eh=null;this.lm=0;this.mk=new jj;this.u=new Xi;this.rg=new Ua;this.R=new n;this.dj=new Oi}function Ij(){}function gb(a,b){a=Object.create(a);for(var e in b)a[e]=b[e];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}Ij.lc=function(){window.OIMO={};window.OIMO.DebugDraw=Mg;window.OIMO.BroadPhase=ub;ub.prototype.createProxy=ub.prototype.ni;ub.prototype.destroyProxy=ub.prototype.oi;ub.prototype.moveProxy=ub.prototype.Qd;ub.prototype.isOverlapping=ub.prototype.Kb;ub.prototype.collectPairs=ub.prototype.$i;ub.prototype.getProxyPairList=ub.prototype.wa;ub.prototype.isIncremental=ub.prototype.Cb;ub.prototype.getTestCount=ub.prototype.mb;ub.prototype.rayCast=ub.prototype.ke;ub.prototype.convexCast=ub.prototype.Vf;ub.prototype.aabbTest=ub.prototype.Ih;window.OIMO.Geometry=wc;wc.prototype.getType=wc.prototype.mb;wc.prototype.getVolume=wc.prototype.wa;wc.prototype.rayCast=wc.prototype.ke;window.OIMO.ConvexGeometry=Qa;Qa.prototype.getGjkMergin=Qa.prototype.Xn;Qa.prototype.setGjkMergin=Qa.prototype.Go;Qa.prototype.computeLocalSupportingVertex=Qa.prototype.he;Qa.prototype.rayCast=Qa.prototype.ke;window.OIMO.BroadPhaseProxyCallback=we;we.prototype.process=we.prototype.process;window.OIMO.BroadPhaseType=pi;window.OIMO.Proxy=Qc;Qc.prototype.getId=Qc.prototype.Cb;Qc.prototype.getFatAabb=Qc.prototype.wa;Qc.prototype.getFatAabbTo=Qc.prototype.mb;window.OIMO.ProxyPair=ve;ve.prototype.getProxy1=ve.prototype.wa;ve.prototype.getProxy2=ve.prototype.mb;ve.prototype.getNext=ve.prototype.Cb;window.OIMO.BruteForceBroadPhase=pc;pc.prototype.createProxy=pc.prototype.ni;pc.prototype.destroyProxy=pc.prototype.oi;pc.prototype.moveProxy=pc.prototype.Qd;pc.prototype.collectPairs=pc.prototype.$i;pc.prototype.rayCast=pc.prototype.ke;pc.prototype.convexCast=pc.prototype.Vf;pc.prototype.aabbTest=pc.prototype.Ih;window.OIMO.BvhBroadPhase=Kb;Kb.prototype.createProxy=Kb.prototype.ni;Kb.prototype.destroyProxy=Kb.prototype.oi;Kb.prototype.moveProxy=Kb.prototype.Qd;Kb.prototype.collectPairs=Kb.prototype.$i;Kb.prototype.rayCast=Kb.prototype.ke;Kb.prototype.convexCast=Kb.prototype.Vf;Kb.prototype.aabbTest=Kb.prototype.Ih;Kb.prototype.getTreeBalance=Kb.prototype.so;window.OIMO.Aabb=eb;eb.prototype.init=eb.prototype.Aa;eb.prototype.getMin=eb.prototype.Uc;eb.prototype.getMinTo=eb.prototype.Vc;eb.prototype.setMin=eb.prototype.ie;eb.prototype.getMax=eb.prototype.Dc;eb.prototype.getMaxTo=eb.prototype.Hc;eb.prototype.setMax=eb.prototype.vd;eb.prototype.getCenter=eb.prototype.Cb;eb.prototype.getCenterTo=eb.prototype.Kb;eb.prototype.getExtents=eb.prototype.kc;eb.prototype.getExtentsTo=eb.prototype.lc;eb.prototype.combine=eb.prototype.wa;eb.prototype.combined=eb.prototype.mb;eb.prototype.overlap=eb.prototype.Wc;eb.prototype.getIntersection=eb.prototype.wc;eb.prototype.getIntersectionTo=eb.prototype.xc;eb.prototype.copyFrom=eb.prototype.qe;eb.prototype.clone=eb.prototype.clone;window.OIMO.BoxGeometry=Hd;Hd.prototype.getHalfExtents=Hd.prototype.Yn;Hd.prototype.getHalfExtentsTo=Hd.prototype.Zn;Hd.prototype.computeLocalSupportingVertex=Hd.prototype.he;window.OIMO.CapsuleGeometry=Wc;Wc.prototype.getRadius=Wc.prototype.pi;Wc.prototype.getHalfHeight=Wc.prototype.Pj;Wc.prototype.computeLocalSupportingVertex=Wc.prototype.he;window.OIMO.ConeGeometry=Fe;Fe.prototype.getRadius=Fe.prototype.pi;Fe.prototype.getHalfHeight=Fe.prototype.Pj;Fe.prototype.computeLocalSupportingVertex=Fe.prototype.he;window.OIMO.ConvexHullGeometry=kf;kf.prototype.getVertices=kf.prototype.wo;kf.prototype.computeLocalSupportingVertex=kf.prototype.he;window.OIMO.CylinderGeometry=Qd;Qd.prototype.getRadius=Qd.prototype.pi;Qd.prototype.getHalfHeight=Qd.prototype.Pj;Qd.prototype.computeLocalSupportingVertex=Qd.prototype.he;window.OIMO.GeometryType=bc;window.OIMO.RayCastHit=Oi;window.OIMO.SphereGeometry=ue;ue.prototype.getRadius=ue.prototype.pi;ue.prototype.computeLocalSupportingVertex=ue.prototype.he;window.OIMO.CollisionMatrix=hi;hi.prototype.getDetector=hi.prototype.wa;window.OIMO.DetectorResult=jf;jf.prototype.getMaxDepth=jf.prototype.Em;jf.prototype.clear=jf.prototype.clear;window.OIMO.DetectorResultPoint=Fj;window.OIMO.Detector=lc;lc.prototype.detect=lc.prototype.zm;window.OIMO.BoxBoxDetector=ni;window.OIMO.CapsuleCapsuleDetector=mi;window.OIMO.GjkEpaDetector=li;window.OIMO.SphereBoxDetector=ki;window.OIMO.SphereCapsuleDetector=ji;window.OIMO.SphereSphereDetector=ii;window.OIMO.Vec3=n;n.prototype.init=n.prototype.Aa;n.prototype.zero=n.prototype.R;n.prototype.add=n.prototype.ie;n.prototype.add3=n.prototype.wa;n.prototype.addScaled=n.prototype.Cb;n.prototype.sub=n.prototype.cf;n.prototype.sub3=n.prototype.jg;n.prototype.scale=n.prototype.Ke;n.prototype.scale3=n.prototype.hg;n.prototype.dot=n.prototype.Ge;n.prototype.cross=n.prototype.kc;n.prototype.addEq=n.prototype.Fe;n.prototype.add3Eq=n.prototype.mb;n.prototype.addScaledEq=n.prototype.Kb;n.prototype.subEq=n.prototype.gg;n.prototype.sub3Eq=n.prototype.kg;n.prototype.scaleEq=n.prototype.bf;n.prototype.scale3Eq=n.prototype.ig;n.prototype.crossEq=n.prototype.lc;n.prototype.mulMat3=n.prototype.wc;n.prototype.mulMat4=n.prototype.Dc;n.prototype.mulTransform=n.prototype.Uc;n.prototype.mulMat3Eq=n.prototype.xc;n.prototype.mulMat4Eq=n.prototype.Hc;n.prototype.mulTransformEq=n.prototype.Vc;n.prototype.length=n.prototype.length;n.prototype.lengthSq=n.prototype.He;n.prototype.normalized=n.prototype.Je;n.prototype.normalize=n.prototype.Ie;n.prototype.negate=n.prototype.Wc;n.prototype.negateEq=n.prototype.vd;n.prototype.copyFrom=n.prototype.qe;n.prototype.clone=n.prototype.clone;n.prototype.toString=n.prototype.toString;window.OIMO.Transform=Ua;Ua.prototype.identity=Ua.prototype.rg;Ua.prototype.getPosition=Ua.prototype.Cb;Ua.prototype.getPositionTo=Ua.prototype.Kb;Ua.prototype.setPosition=Ua.prototype.Hc;Ua.prototype.translate=Ua.prototype.Wc;Ua.prototype.getRotation=Ua.prototype.kc;Ua.prototype.getRotationTo=Ua.prototype.lc;Ua.prototype.setRotation=Ua.prototype.Uc;Ua.prototype.setRotationXyz=Ua.prototype.Vc;Ua.prototype.rotate=Ua.prototype.wc;Ua.prototype.rotateXyz=Ua.prototype.xc;Ua.prototype.getOrientation=Ua.prototype.wa;Ua.prototype.getOrientationTo=Ua.prototype.mb;Ua.prototype.setOrientation=Ua.prototype.Dc;Ua.prototype.clone=Ua.prototype.clone;Ua.prototype.copyFrom=Ua.prototype.qe;window.OIMO.Setting=F;window.OIMO.GjkEpa=lb;lb.prototype.computeClosestPoints=lb.prototype.wa;lb.prototype.computeDistance=lb.prototype.mb;lb.prototype.convexCast=lb.prototype.Vf;lb.prototype.rayCast=lb.prototype.ke;lb.getInstance=lb.kc;window.OIMO.GjkEpaResultState=dc;window.OIMO.SimplexUtil=Pc;Pc.projectOrigin2=Pc.wc;Pc.projectOrigin3=Pc.xc;Pc.projectOrigin4=Pc.Dc;window.OIMO.Mat3=I;I.prototype.init=I.prototype.Aa;I.prototype.identity=I.prototype.rg;I.prototype.add=I.prototype.Dc;I.prototype.sub=I.prototype.ig;I.prototype.scale=I.prototype.gg;I.prototype.mul=I.prototype.He;I.prototype.addEq=I.prototype.Hc;I.prototype.subEq=I.prototype.jg;I.prototype.scaleEq=I.prototype.hg;I.prototype.mulEq=I.prototype.Ie;I.prototype.prependScale=I.prototype.bf;I.prototype.appendScale=I.prototype.Wc;I.prototype.prependRotation=I.prototype.Je;I.prototype.appendRotation=I.prototype.Uc;I.prototype.prependScaleEq=I.prototype.cf;I.prototype.appendScaleEq=I.prototype.vd;I.prototype.prependRotationEq=I.prototype.Ke;I.prototype.appendRotationEq=I.prototype.Vc;I.prototype.transpose=I.prototype.Di;I.prototype.transposeEq=I.prototype.Ei;I.prototype.determinant=I.prototype.ie;I.prototype.trace=I.prototype.ph;I.prototype.inverse=I.prototype.Fe;I.prototype.inverseEq=I.prototype.Ge;I.prototype.toArray=I.prototype.kg;I.prototype.copyFrom=I.prototype.qe;I.prototype.clone=I.prototype.clone;I.prototype.fromQuat=I.prototype.Cb;I.prototype.toQuat=I.prototype.gk;I.prototype.fromEulerXyz=I.prototype.mb;I.prototype.toEulerXyz=I.prototype.Fi;I.prototype.getRow=I.prototype.wc;I.prototype.getCol=I.prototype.kc;I.prototype.getRowTo=I.prototype.xc;I.prototype.getColTo=I.prototype.lc;I.prototype.fromRows=I.prototype.Kb;I.prototype.fromCols=I.prototype.wa;I.prototype.toString=I.prototype.toString;window.OIMO.Mat4=J;J.prototype.init=J.prototype.Aa;J.prototype.identity=J.prototype.rg;J.prototype.add=J.prototype.kc;J.prototype.sub=J.prototype.gg;J.prototype.scale=J.prototype.bf;J.prototype.mul=J.prototype.ie;J.prototype.addEq=J.prototype.lc;J.prototype.subEq=J.prototype.hg;J.prototype.scaleEq=J.prototype.cf;J.prototype.mulEq=J.prototype.Fe;J.prototype.prependScale=J.prototype.Je;J.prototype.appendScale=J.prototype.Dc;J.prototype.prependRotation=J.prototype.He;J.prototype.appendRotation=J.prototype.wc;J.prototype.prependTranslation=J.prototype.Ei;J.prototype.appendTranslation=J.prototype.wa;J.prototype.prependScaleEq=J.prototype.Ke;J.prototype.appendScaleEq=J.prototype.Hc;J.prototype.prependRotationEq=J.prototype.Ie;J.prototype.appendRotationEq=J.prototype.xc;J.prototype.prependTranslationEq=J.prototype.Fi;J.prototype.appendTranslationEq=J.prototype.mb;J.prototype.transpose=J.prototype.kg;J.prototype.transposeEq=J.prototype.ph;J.prototype.determinant=J.prototype.Uc;J.prototype.trace=J.prototype.jg;J.prototype.inverse=J.prototype.Wc;J.prototype.inverseEq=J.prototype.vd;J.prototype.lookAt=J.prototype.Kb;J.prototype.perspective=J.prototype.Ge;J.prototype.ortho=J.prototype.Di;J.prototype.toArray=J.prototype.ig;J.prototype.copyFrom=J.prototype.qe;J.prototype.fromMat3=J.prototype.Vc;J.prototype.fromTransform=J.prototype.Cb;J.prototype.clone=J.prototype.clone;J.prototype.toString=J.prototype.toString;window.OIMO.MathUtil=pa;pa.abs=pa.abs;pa.sin=pa.sin;pa.cos=pa.cos;pa.tan=pa.tan;pa.asin=pa.asin;pa.acos=pa.acos;pa.atan=pa.atan;pa.safeAsin=pa.ie;pa.safeAcos=pa.vd;pa.atan2=pa.atan2;pa.sqrt=pa.sqrt;pa.clamp=pa.Cb;pa.rand=pa.Hc;pa.randIn=pa.Uc;pa.randVec3In=pa.Wc;pa.randVec3=pa.Vc;window.OIMO.Pool=Nb;Nb.prototype.vec3=Nb.prototype.Dc;Nb.prototype.mat3=Nb.prototype.lc;Nb.prototype.mat4=Nb.prototype.wc;Nb.prototype.quat=Nb.prototype.xc;Nb.prototype.dispose=Nb.prototype.wa;Nb.prototype.disposeVec3=Nb.prototype.kc;Nb.prototype.disposeMat3=Nb.prototype.mb;Nb.prototype.disposeMat4=Nb.prototype.Cb;Nb.prototype.disposeQuat=Nb.prototype.Kb;window.OIMO.Quat=wa;wa.prototype.identity=wa.prototype.rg;wa.prototype.init=wa.prototype.Aa;wa.prototype.add=wa.prototype.wa;wa.prototype.sub=wa.prototype.Hc;wa.prototype.scale=wa.prototype.xc;wa.prototype.addEq=wa.prototype.mb;wa.prototype.subEq=wa.prototype.Uc;wa.prototype.scaleEq=wa.prototype.Dc;wa.prototype.length=wa.prototype.length;wa.prototype.lengthSq=wa.prototype.kc;wa.prototype.dot=wa.prototype.Cb;wa.prototype.normalized=wa.prototype.wc;wa.prototype.normalize=wa.prototype.lc;wa.prototype.setArc=wa.prototype.Vc;wa.prototype.slerp=wa.prototype.Wc;wa.prototype.copyFrom=wa.prototype.qe;wa.prototype.clone=wa.prototype.clone;wa.prototype.fromMat3=wa.prototype.Kb;wa.prototype.toMat3=wa.prototype.vd;wa.prototype.toString=wa.prototype.toString;window.OIMO.Contact=ac;ac.prototype.getShape1=ac.prototype.kc;ac.prototype.getShape2=ac.prototype.lc;ac.prototype.isTouching=ac.prototype.Kk;ac.prototype.getManifold=ac.prototype.mb;ac.prototype.getContactConstraint=ac.prototype.wa;ac.prototype.getPrev=ac.prototype.Kb;ac.prototype.getNext=ac.prototype.Cb;window.OIMO.ContactLink=Zb;Zb.prototype.getContact=Zb.prototype.wa;Zb.prototype.getOther=Zb.prototype.Cb;Zb.prototype.getPrev=Zb.prototype.Kb;Zb.prototype.getNext=Zb.prototype.mb;window.OIMO.ContactManager=De;De.prototype.getNumContacts=De.prototype.mb;De.prototype.getContactList=De.prototype.wa;window.OIMO.TimeStep=Aj;window.OIMO.World=Ca;Ca.prototype.step=Ca.prototype.Fe;Ca.prototype.addRigidBody=Ca.prototype.mb;Ca.prototype.removeRigidBody=Ca.prototype.Ge;Ca.prototype.addJoint=Ca.prototype.wa;Ca.prototype.removeJoint=Ca.prototype.bm;Ca.prototype.setDebugDraw=Ca.prototype.He;Ca.prototype.getDebugDraw=Ca.prototype.lc;Ca.prototype.debugDraw=Ca.prototype.Cb;Ca.prototype.rayCast=Ca.prototype.ke;Ca.prototype.convexCast=Ca.prototype.Vf;Ca.prototype.aabbTest=Ca.prototype.Ih;Ca.prototype.getRigidBodyList=Ca.prototype.vd;Ca.prototype.getJointList=Ca.prototype.xc;Ca.prototype.getBroadPhase=Ca.prototype.Kb;Ca.prototype.getContactManager=Ca.prototype.kc;Ca.prototype.getNumRigidBodies=Ca.prototype.Vc;Ca.prototype.getNumJoints=Ca.prototype.Hc;Ca.prototype.getNumShapes=Ca.prototype.ie;Ca.prototype.getNumIslands=Ca.prototype.Dc;Ca.prototype.getNumVelocityIterations=Ca.prototype.Wc;Ca.prototype.setNumVelocityIterations=Ca.prototype.Ke;Ca.prototype.getNumPositionIterations=Ca.prototype.Uc;Ca.prototype.setNumPositionIterations=Ca.prototype.Je;Ca.prototype.getGravity=Ca.prototype.wc;Ca.prototype.setGravity=Ca.prototype.Ie;window.OIMO.AabbTestCallback=yj;window.OIMO.ContactCallback=xj;window.OIMO.RayCastCallback=Ni;window.OIMO.RayCastClosest=hf;hf.prototype.clear=hf.prototype.clear;hf.prototype.process=hf.prototype.process;window.OIMO.DebugDrawStyle=wj;window.OIMO.Performance=Ce;window.OIMO.ConstraintSolver=Ob;Ob.prototype.preSolveVelocity=Ob.prototype.Qh;Ob.prototype.warmStart=Ob.prototype.Zh;Ob.prototype.solveVelocity=Ob.prototype.Vh;Ob.prototype.postSolveVelocity=Ob.prototype.cj;Ob.prototype.preSolvePosition=Ob.prototype.jh;Ob.prototype.solvePositionSplitImpulse=Ob.prototype.Uh;Ob.prototype.solvePositionNgs=Ob.prototype.Th;Ob.prototype.postSolve=Ob.prototype.postSolve;window.OIMO.PositionCorrectionAlgorithm=jc;window.OIMO.ContactConstraint=Uc;Uc.prototype.getShape1=Uc.prototype.mb;Uc.prototype.getShape2=Uc.prototype.Cb;Uc.prototype.getManifold=Uc.prototype.wa;Uc.prototype.isTouching=Uc.prototype.Kk;window.OIMO.Manifold=Tb;Tb.prototype.getNormal=Tb.prototype.Cb;Tb.prototype.getNormalTo=Tb.prototype.Kb;Tb.prototype.getTangent=Tb.prototype.wc;Tb.prototype.getTangentTo=Tb.prototype.xc;Tb.prototype.getBinormal=Tb.prototype.wa;Tb.prototype.getBinormalTo=Tb.prototype.mb;Tb.prototype.getPoints=Tb.prototype.lc;Tb.prototype.getNumPoints=Tb.prototype.kc;window.OIMO.ManifoldPoint=Lb;Lb.prototype.getPosition1=Lb.prototype.Kb;Lb.prototype.getPosition1To=Lb.prototype.kc;Lb.prototype.getPosition2=Lb.prototype.lc;Lb.prototype.getPosition2To=Lb.prototype.wc;Lb.prototype.getDepth=Lb.prototype.mb;Lb.prototype.isWarmStarted=Lb.prototype.Dc;Lb.prototype.getNormalImpulse=Lb.prototype.Cb;Lb.prototype.getTangentImpulse=Lb.prototype.xc;Lb.prototype.getBinormalImpulse=Lb.prototype.wa;Lb.prototype.isEnabled=Lb.prototype.Hc;window.OIMO.Joint=N;N.prototype.getRigidBody1=N.prototype.Ke;N.prototype.getRigidBody2=N.prototype.bf;N.prototype.getType=N.prototype.hg;N.prototype.getAnchor1=N.prototype.mb;N.prototype.getAnchor2=N.prototype.Kb;N.prototype.getAnchor1To=N.prototype.Cb;N.prototype.getAnchor2To=N.prototype.kc;N.prototype.getLocalAnchor1=N.prototype.Fe;N.prototype.getLocalAnchor2=N.prototype.He;N.prototype.getLocalAnchor1To=N.prototype.Ge;N.prototype.getLocalAnchor2To=N.prototype.Ie;N.prototype.getBasis1=N.prototype.Hc;N.prototype.getBasis2=N.prototype.Vc;N.prototype.getBasis1To=N.prototype.Uc;N.prototype.getBasis2To=N.prototype.Wc;N.prototype.getAllowCollision=N.prototype.wa;N.prototype.setAllowCollision=N.prototype.ig;N.prototype.getBreakForce=N.prototype.vd;N.prototype.setBreakForce=N.prototype.jg;N.prototype.getBreakTorque=N.prototype.ie;N.prototype.setBreakTorque=N.prototype.kg;N.prototype.getPositionCorrectionAlgorithm=N.prototype.Je;N.prototype.setPositionCorrectionAlgorithm=N.prototype.ph;N.prototype.getAppliedForce=N.prototype.lc;N.prototype.getAppliedForceTo=N.prototype.wc;N.prototype.getAppliedTorque=N.prototype.xc;N.prototype.getAppliedTorqueTo=N.prototype.Dc;N.prototype.getPrev=N.prototype.gg;N.prototype.getNext=N.prototype.cf;window.OIMO.CylindricalJoint=Fb;Fb.prototype.getAxis1=Fb.prototype.Zg;Fb.prototype.getAxis2=Fb.prototype.ah;Fb.prototype.getAxis1To=Fb.prototype.$g;Fb.prototype.getAxis2To=Fb.prototype.bh;Fb.prototype.getLocalAxis1=Fb.prototype.dh;Fb.prototype.getLocalAxis2=Fb.prototype.fh;Fb.prototype.getLocalAxis1To=Fb.prototype.eh;Fb.prototype.getLocalAxis2To=Fb.prototype.gh;Fb.prototype.getTranslationalSpringDamper=Fb.prototype.po;Fb.prototype.getRotationalSpringDamper=Fb.prototype.eo;Fb.prototype.getTranslationalLimitMotor=Fb.prototype.no;Fb.prototype.getRotationalLimitMotor=Fb.prototype.bo;Fb.prototype.getAngle=Fb.prototype.Gl;Fb.prototype.getTranslation=Fb.prototype.Jl;window.OIMO.JointConfig=Gb;window.OIMO.CylindricalJointConfig=wf;wf.prototype.init=wf.prototype.Aa;window.OIMO.GenericJoint=Sb;Sb.prototype.getAxisX=Sb.prototype.Un;Sb.prototype.getAxisY=Sb.prototype.Vn;Sb.prototype.getAxisZ=Sb.prototype.Wn;Sb.prototype.getTranslationalSpringDampers=Sb.prototype.qo;Sb.prototype.getRotationalSpringDampers=Sb.prototype.fo;Sb.prototype.getTranslationalLimitMotors=Sb.prototype.oo;Sb.prototype.getRotationalLimitMotors=Sb.prototype.co;Sb.prototype.getAngles=Sb.prototype.Tn;Sb.prototype.getTranslations=Sb.prototype.ro;window.OIMO.GenericJointConfig=Lg;Lg.prototype.init=Lg.prototype.Aa;window.OIMO.JointLink=qc;qc.prototype.getContact=qc.prototype.wa;qc.prototype.getOther=qc.prototype.Cb;qc.prototype.getPrev=qc.prototype.Kb;qc.prototype.getNext=qc.prototype.mb;window.OIMO.JointType=Mb;window.OIMO.PrismaticJoint=Jb;Jb.prototype.getAxis1=Jb.prototype.Zg;Jb.prototype.getAxis2=Jb.prototype.ah;Jb.prototype.getAxis1To=Jb.prototype.$g;Jb.prototype.getAxis2To=Jb.prototype.bh;Jb.prototype.getLocalAxis1=Jb.prototype.dh;Jb.prototype.getLocalAxis2=Jb.prototype.fh;Jb.prototype.getLocalAxis1To=Jb.prototype.eh;Jb.prototype.getLocalAxis2To=Jb.prototype.gh;Jb.prototype.getSpringDamper=Jb.prototype.Qj;Jb.prototype.getLimitMotor=Jb.prototype.Il;Jb.prototype.getTranslation=Jb.prototype.Jl;window.OIMO.PrismaticJointConfig=Kg;Kg.prototype.init=Kg.prototype.Aa;window.OIMO.RagdollJoint=pb;pb.prototype.getAxis1=pb.prototype.Zg;pb.prototype.getAxis2=pb.prototype.ah;pb.prototype.getAxis1To=pb.prototype.$g;pb.prototype.getAxis2To=pb.prototype.bh;pb.prototype.getLocalAxis1=pb.prototype.dh;pb.prototype.getLocalAxis2=pb.prototype.fh;pb.prototype.getLocalAxis1To=pb.prototype.eh;pb.prototype.getLocalAxis2To=pb.prototype.gh;pb.prototype.getTwistSpringDamper=pb.prototype.vo;pb.prototype.getTwistLimitMotor=pb.prototype.uo;pb.prototype.getSwingSpringDamper=pb.prototype.mo;pb.prototype.getSwingAxis=pb.prototype.ko;pb.prototype.getSwingAxisTo=pb.prototype.lo;pb.prototype.getSwingAngle=pb.prototype.jo;pb.prototype.getTwistAngle=pb.prototype.to;window.OIMO.RagdollJointConfig=Jg;Jg.prototype.init=Jg.prototype.Aa;window.OIMO.RevoluteJoint=Qb;Qb.prototype.getAxis1=Qb.prototype.Zg;Qb.prototype.getAxis2=Qb.prototype.ah;Qb.prototype.getAxis1To=Qb.prototype.$g;Qb.prototype.getAxis2To=Qb.prototype.bh;Qb.prototype.getLocalAxis1=Qb.prototype.dh;Qb.prototype.getLocalAxis2=Qb.prototype.fh;Qb.prototype.getLocalAxis1To=Qb.prototype.eh;Qb.prototype.getLocalAxis2To=Qb.prototype.gh;Qb.prototype.getSpringDamper=Qb.prototype.Qj;Qb.prototype.getLimitMotor=Qb.prototype.Il;Qb.prototype.getAngle=Qb.prototype.Gl;window.OIMO.RevoluteJointConfig=ff;ff.prototype.init=ff.prototype.Aa;window.OIMO.RotationalLimitMotor=$b;$b.prototype.setLimits=$b.prototype.mh;$b.prototype.setMotor=$b.prototype.wa;$b.prototype.clone=$b.prototype.clone;window.OIMO.SphericalJoint=se;se.prototype.getSpringDamper=se.prototype.Qj;window.OIMO.SphericalJointConfig=Lf;Lf.prototype.init=Lf.prototype.Aa;window.OIMO.SpringDamper=Hb;Hb.prototype.setSpring=Hb.prototype.wa;Hb.prototype.setSymplecticEuler=Hb.prototype.mb;Hb.prototype.clone=Hb.prototype.clone;window.OIMO.TranslationalLimitMotor=tc;tc.prototype.setLimits=tc.prototype.mh;tc.prototype.setMotor=tc.prototype.wa;tc.prototype.clone=tc.prototype.clone;window.OIMO.UniversalJoint=Bb;Bb.prototype.getAxis1=Bb.prototype.Zg;Bb.prototype.getAxis2=Bb.prototype.ah;Bb.prototype.getAxis1To=Bb.prototype.$g;Bb.prototype.getAxis2To=Bb.prototype.bh;Bb.prototype.getLocalAxis1=Bb.prototype.dh;Bb.prototype.getLocalAxis2=Bb.prototype.fh;Bb.prototype.getLocalAxis1To=Bb.prototype.eh;Bb.prototype.getLocalAxis2To=Bb.prototype.gh;Bb.prototype.getSpringDamper1=Bb.prototype.ho;Bb.prototype.getSpringDamper2=Bb.prototype.io;Bb.prototype.getLimitMotor1=Bb.prototype.$n;Bb.prototype.getLimitMotor2=Bb.prototype.ao;Bb.prototype.getAngle1=Bb.prototype.Rn;Bb.prototype.getAngle2=Bb.prototype.Sn;window.OIMO.UniversalJointConfig=Kf;Kf.prototype.init=Kf.prototype.Aa;window.OIMO.ConstraintSolverType=vf;window.OIMO.DirectJointConstraintSolver=Wb;Wb.prototype.preSolveVelocity=Wb.prototype.Qh;Wb.prototype.warmStart=Wb.prototype.Zh;Wb.prototype.solveVelocity=Wb.prototype.Vh;Wb.prototype.postSolveVelocity=Wb.prototype.cj;Wb.prototype.preSolvePosition=Wb.prototype.jh;Wb.prototype.solvePositionSplitImpulse=Wb.prototype.Uh;Wb.prototype.solvePositionNgs=Wb.prototype.Th;Wb.prototype.postSolve=Wb.prototype.postSolve;window.OIMO.PgsContactConstraintSolver=Pb;Pb.prototype.preSolveVelocity=Pb.prototype.Qh;Pb.prototype.warmStart=Pb.prototype.Zh;Pb.prototype.solveVelocity=Pb.prototype.Vh;Pb.prototype.preSolvePosition=Pb.prototype.jh;Pb.prototype.solvePositionSplitImpulse=Pb.prototype.Uh;Pb.prototype.solvePositionNgs=Pb.prototype.Th;Pb.prototype.postSolve=Pb.prototype.postSolve;window.OIMO.PgsJointConstraintSolver=Rb;Rb.prototype.preSolveVelocity=Rb.prototype.Qh;Rb.prototype.warmStart=Rb.prototype.Zh;Rb.prototype.solveVelocity=Rb.prototype.Vh;Rb.prototype.postSolveVelocity=Rb.prototype.cj;Rb.prototype.preSolvePosition=Rb.prototype.jh;Rb.prototype.solvePositionSplitImpulse=Rb.prototype.Uh;Rb.prototype.solvePositionNgs=Rb.prototype.Th;Rb.prototype.postSolve=Rb.prototype.postSolve;window.OIMO.MassData=fj;window.OIMO.RigidBody=x;x.prototype.getPosition=x.prototype.Om;x.prototype.getPositionTo=x.prototype.Pm;x.prototype.setPosition=x.prototype.Po;x.prototype.translate=x.prototype.cn;x.prototype.getRotation=x.prototype.Vm;x.prototype.getRotationTo=x.prototype.Wm;x.prototype.setRotation=x.prototype.Qo;x.prototype.setRotationXyz=x.prototype.Ro;x.prototype.rotate=x.prototype.Ho;x.prototype.rotateXyz=x.prototype.Mo;x.prototype.getOrientation=x.prototype.Mm;x.prototype.getOrientationTo=x.prototype.Nm;x.prototype.setOrientation=x.prototype.No;x.prototype.getTransform=x.prototype.Xm;x.prototype.getTransformTo=x.prototype.Ym;x.prototype.setTransform=x.prototype.So;x.prototype.getMass=x.prototype.ph;x.prototype.getLocalInertia=x.prototype.cf;x.prototype.getLocalInertiaTo=x.prototype.gg;x.prototype.getMassData=x.prototype.Di;x.prototype.getMassDataTo=x.prototype.Ei;x.prototype.setMassData=x.prototype.ln;x.prototype.getRotationFactor=x.prototype.fm;x.prototype.setRotationFactor=x.prototype.mn;x.prototype.getLinearVelocity=x.prototype.Ke;x.prototype.getLinearVelocityTo=x.prototype.bf;x.prototype.setLinearVelocity=x.prototype.kn;x.prototype.getAngularVelocity=x.prototype.Wc;x.prototype.getAngularVelocityTo=x.prototype.vd;x.prototype.setAngularVelocity=x.prototype.fn;x.prototype.addLinearVelocity=x.prototype.mb;x.prototype.addAngularVelocity=x.prototype.wa;x.prototype.applyImpulse=x.prototype.wc;x.prototype.applyLinearImpulse=x.prototype.xc;x.prototype.applyAngularImpulse=x.prototype.Kb;x.prototype.applyForce=x.prototype.kc;x.prototype.applyForceToCenter=x.prototype.lc;x.prototype.applyTorque=x.prototype.Dc;x.prototype.getLinearContactImpulse=x.prototype.He;x.prototype.getLinearContactImpulseTo=x.prototype.Ie;x.prototype.getAngularContactImpulse=x.prototype.Hc;x.prototype.getAngularContactImpulseTo=x.prototype.Uc;x.prototype.getGravityScale=x.prototype.Fe;x.prototype.setGravityScale=x.prototype.hn;x.prototype.getLocalPoint=x.prototype.hg;x.prototype.getLocalPointTo=x.prototype.ig;x.prototype.getLocalVector=x.prototype.jg;x.prototype.getLocalVectorTo=x.prototype.kg;x.prototype.getWorldPoint=x.prototype.um;x.prototype.getWorldPointTo=x.prototype.ym;x.prototype.getWorldVector=x.prototype.Am;x.prototype.getWorldVectorTo=x.prototype.Bm;x.prototype.getNumShapes=x.prototype.Jm;x.prototype.getShapeList=x.prototype.sm;x.prototype.getNumContectLinks=x.prototype.Fi;x.prototype.getContactLinkList=x.prototype.ie;x.prototype.getNumJointLinks=x.prototype.gk;x.prototype.getJointLinkList=x.prototype.Ge;x.prototype.addShape=x.prototype.Cb;x.prototype.removeShape=x.prototype.dn;x.prototype.getType=x.prototype.Eo;x.prototype.setType=x.prototype.nn;x.prototype.wakeUp=x.prototype.pn;x.prototype.sleep=x.prototype.on;x.prototype.isSleeping=x.prototype.Dm;x.prototype.getSleepTime=x.prototype.tm;x.prototype.setAutoSleep=x.prototype.gn;x.prototype.getLinearDamping=x.prototype.Je;x.prototype.setLinearDamping=x.prototype.jn;x.prototype.getAngularDamping=x.prototype.Vc;x.prototype.setAngularDamping=x.prototype.en;x.prototype.getPrev=x.prototype.Um;x.prototype.getNext=x.prototype.Im;window.OIMO.RigidBodyConfig=Rj;window.OIMO.RigidBodyType=Qe;window.OIMO.Shape=Ka;Ka.prototype.getFriction=Ka.prototype.wc;Ka.prototype.setFriction=Ka.prototype.Ke;Ka.prototype.getRestitution=Ka.prototype.Uc;Ka.prototype.setRestitution=Ka.prototype.cf;Ka.prototype.getLocalTransform=Ka.prototype.Dc;Ka.prototype.getLocalTransformTo=Ka.prototype.Hc;Ka.prototype.getTransform=Ka.prototype.ie;Ka.prototype.getTransformTo=Ka.prototype.Fe;Ka.prototype.setLocalTransform=Ka.prototype.bf;Ka.prototype.getDensity=Ka.prototype.lc;Ka.prototype.setDensity=Ka.prototype.Je;Ka.prototype.getAabb=Ka.prototype.wa;Ka.prototype.getAabbTo=Ka.prototype.mb;Ka.prototype.getGeometry=Ka.prototype.xc;Ka.prototype.getRigidBody=Ka.prototype.Vc;Ka.prototype.getCollisionGroup=Ka.prototype.Cb;Ka.prototype.setCollisionGroup=Ka.prototype.Ge;Ka.prototype.getCollisionMask=Ka.prototype.Kb;Ka.prototype.setCollisionMask=Ka.prototype.He;Ka.prototype.getContactCallback=Ka.prototype.kc;Ka.prototype.setContactCallback=Ka.prototype.Ie;Ka.prototype.getPrev=Ka.prototype.vd;Ka.prototype.getNext=Ka.prototype.Wc;window.OIMO.ShapeConfig=Qj};ub.prototype={ni:function(){return null},oi:function(){},Qd:function(){},Kb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},$i:function(){},wa:function(){return this.pe},Cb:function(){return this.qk},mb:function(){return this.Dj},ke:function(){},Vf:function(){},Ih:function(){}};wc.prototype={Xe:function(){},Lb:function(){},Wi:function(){return!1},mb:function(){return this.Jb},wa:function(){return this.Sf},ke:function(a,b,e,d){var c,f,h,l;c=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;c-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.Wi(e.o*c+e.i*f+e.l*a,e.f*c+e.m*f+e.g*a,e.h*c+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,d)){var g,k;b=d.position;c=b.x;f=b.y;h=b.z;b=d.normal;l=b.x;g=b.y;k=b.z;var m,p;m=e.o*c+e.f*f+e.h*h;p=e.i*c+e.m*f+e.j*h;h=e.l*c+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;c=m+e.v;f=p+e.A;h+=e.B;e=d.position;e.x=c;e.y=f;e.z=h;d=d.normal;d.x=b;d.y=a;d.z=l;return!0}return!1}};Qa.wa=wc;Qa.prototype=gb(wc.prototype,{Xn:function(){return this.Rb},Go:function(a){0>a&&(a=0);this.Rb=a},he:function(){},ke:function(a,b,e,d){return this.rm?lb.mb.ke(this,e,a,b,d):wc.prototype.ke.call(this,a,b,e,d)}});jj.wa=Qa;jj.prototype=gb(Qa.prototype,{Aa:function(a,b,e){this.Kn=a;var d,c,f;d=e.x;c=e.y;f=e.z;var h;e=b.o*d+b.i*c+b.l*f;h=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;d=this.Xl=new n;d.x=e;d.y=h;d.z=b;this.Rb=a.Rb},he:function(a,b){this.Kn.he(a,b);var e=this.Xl;0<a.x*e.x+a.y*e.y+a.z*e.z&&(a=this.Xl,b.x+=a.x,b.y+=a.y,b.z+=a.z)}});Xi.wa=Qa;Xi.prototype=gb(Qa.prototype,{he:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z}});we.prototype={process:function(){}};Qc.prototype={Cb:function(){return this.Ic},wa:function(){var a=new eb;a.na=this.J;a.oa=this.K;a.pa=this.L;a.ka=this.G;a.la=this.H;a.ma=this.I;return a},mb:function(a){a.na=this.J;a.oa=this.K;a.pa=this.L;a.ka=this.G;a.la=this.H;a.ma=this.I}};ve.prototype={wa:function(){return this.Ch},mb:function(){return this.Dh},Cb:function(){return this.M}};pc.wa=ub;pc.prototype=gb(ub.prototype,{ni:function(a,b){a=new Qc(a,this.lm++);this.Vi++;null==this.Oe?this.Oe=a:(this.gf.M=a,a.ia=this.gf);this.gf=a;a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;return a},oi:function(a){this.Vi--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Oe&&(this.Oe=this.Oe.M);a==this.gf&&(this.gf=this.gf.ia);a.M=null;a.ia=null;a.userData=null},Qd:function(a,b){a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma},$i:function(){var a=this.pe;if(null!=a){for(;a.Ch=null,a.Dh=null,a=a.M,null!=a;);this.pe.M=this.Eh;this.Eh=this.pe;this.pe=null}this.Dj=0;for(a=this.Oe;null!=a;){for(var b=a.M,e=a.M;null!=e;){var d=e.M;this.Dj++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var c=this.Eh;null!=c?(this.Eh=c.M,c.M=null):c=new ve;null!=this.pe&&(c.M=this.pe);this.pe=c;c.Ch=a;c.Dh=e}e=d}a=b}},ke:function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.Oe;null!=l;){var g=l.M,k=d,m=c,p=a,r=f,q=h,t=b,A=l.J,L=l.K,u=l.L,z=l.G,n=l.H,D=l.I;if(A>(k>r?k:r)||z<(k<r?k:r)||L>(m>q?m:q)||n<(m<q?m:q)||u>(p>t?p:t)||D<(p<t?p:t))r=!1;else{var r=r-k,q=q-m,Ib=t-p,t=0>r?-r:r,y=0>q?-q:q,B=0>Ib?-Ib:Ib,E=.5*(z-A),K=.5*(n-L),H=.5*(D-u),k=k-.5*(z+A),m=m-.5*(n+L),p=p-.5*(D+u),u=m*Ib-p*q;0<(0>u?-u:u)-(K*B+H*y)?p=!0:(p=p*r-k*Ib,p=0<(0>p?-p:p)-(H*t+E*B));p?r=!0:(r=k*q-m*r,r=0<(0>r?-r:r)-(E*y+K*t));r=r?!1:!0}r&&e.process(l);l=g}},Vf:function(a,b,e,d){for(var c=this.Oe;null!=c;){var f=c.M,h=this.u.min;h.x=c.J;h.y=c.K;h.z=c.L;h=this.u.max;h.x=c.G;h.y=c.H;h.z=c.I;this.mk.Aa(a,b,e);h=lb.mb;0==h.Nj(this.mk,this.u,b,this.rg,null,!1)&&0>=h.distance&&d.process(c);c=f}},Ih:function(a,b){for(var e=this.Oe;null!=e;){var d=e.M;a.na<e.G&&a.ka>e.J&&a.oa<e.H&&a.la>e.K&&a.pa<e.I&&a.ma>e.L&&b.process(e);e=d}}});Kb.wa=ub;Kb.prototype=gb(ub.prototype,{Kh:function(a,b){this.Dj++;var e=0==a.P,d=0==b.P;a==b?e||(this.Kh(a.F[0],b),this.Kh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&d?(e=this.Eh,null!=e?(this.Eh=e.M,e.M=null):e=new ve,null!=this.pe&&(e.M=this.pe),this.pe=e,e.Ch=a.ub,e.Dh=b.ub):d||a.P>b.P?(this.Kh(a.F[0],b),this.Kh(a.F[1],b)):(this.Kh(b.F[0],a),this.Kh(b.F[1],a)))},am:function(a,b,e,d,c,f,h,l){var g=a.J,k=a.K,m=a.L,p=a.G,r=a.H,q=a.I,t;if(g>(b>c?b:c)||p<(b<c?b:c)||k>(e>f?e:f)||r<(e<f?e:f)||m>(d>h?d:h)||q<(d<h?d:h))t=!1;else{var A=c-b,L=f-e,u=h-d;t=0>A?-A:A;var z=0>L?-L:L,n=0>u?-u:u,D=.5*(p-g),Ib=.5*(r-k),y=.5*(q-m),g=b-.5*(p+g),k=e-.5*(r+k),m=d-.5*(q+m),q=k*u-m*L;0<(0>q?-q:q)-(Ib*n+y*z)?n=!0:(u=m*A-g*u,n=0<(0>u?-u:u)-(y*t+D*n));n?t=!0:(A=g*L-k*A,t=0<(0>A?-A:A)-(D*z+Ib*t));t=t?!1:!0}t&&(0==a.P?l.process(a.ub):(this.am(a.F[0],b,e,d,c,f,h,l),this.am(a.F[1],b,e,d,c,f,h,l)))},El:function(a,b,e,d,c){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.mk.Aa(b,e,d);f=lb.mb;0==f.Nj(this.mk,this.u,e,this.rg,null,!1)&&0>=f.distance&&(0==a.P?c.process(a.ub):(this.El(a.F[0],b,e,d,c),this.El(a.F[1],b,e,d,c)))},yl:function(a,b,e){a.J<b.ka&&a.G>b.na&&a.K<b.la&&a.H>b.oa&&a.L<b.ma&&a.I>b.pa&&(0==a.P?e.process(a.ub):(this.yl(a.F[0],b,e),this.yl(a.F[1],b,e)))},ni:function(a,b){a=new Wi(a,this.lm++);this.Vi++;null==this.Oe?this.Oe=a:(this.gf.M=a,a.ia=this.gf);this.gf=a;a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.ye;var e=b.qd;null!=e?(b.qd=e.M,e.M=null):e=new oi;var d=e;d.ub=a;a.ei=d;d.J=a.J;d.K=a.K;d.L=a.L;d.G=a.G;d.H=a.H;d.I=a.I;b.yk++;null==b.zg?b.zg=d:(b.qf.ng=d,d.og=b.qf);b.qf=d;if(null==b.Nb)b.Nb=d;else{for(var c=b.Nb;0<c.P&&(e=b.Zi.jm(c,d),-1!=e);)c=c.F[e];var f=c.Ea,e=b.qd;null!=e?(b.qd=e.M,e.M=null):e=new oi;if(null==f)b.Nb=e;else{var h=c.Ja;f.F[h]=e;e.Ea=f;e.Ja=h}f=c.Ja;e.F[f]=c;c.Ea=e;c.Ja=f;c=c.Ja^1;e.F[c]=d;d.Ea=e;for(d.Ja=c;null!=e;){if(b.Zi.ik&&!(2>e.P)){var d=e.Ea,f=e.F[0],h=e.F[1],l=f.P-h.P,c=e.Ja;1<l?(h=f.F[0],l=f.F[1],h.P>l.P?(f.F[1]=e,e.Ea=f,e.Ja=1,e.F[0]=l,l.Ea=e,l.Ja=0):(f.F[0]=e,e.Ea=f,e.Ja=0,e.F[0]=h,h.Ea=e,h.Ja=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].P,l=f.F[1].P,f.P=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].P,l=e.F[1].P,e.P=(h>l?h:l)+1,null!=d?(d.F[c]=f,f.Ea=d,f.Ja=c):(b.Nb=f,f.Ea=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.P>l.P?(h.F[1]=e,e.Ea=h,e.Ja=1,e.F[1]=l,l.Ea=e,l.Ja=1):(h.F[0]=e,e.Ea=h,e.Ja=0,e.F[1]=f,f.Ea=e,f.Ja=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].P,l=h.F[1].P,h.P=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].P,l=e.F[1].P,e.P=(f>l?f:l)+1,null!=d?(d.F[c]=h,h.Ea=d,h.Ja=c):(b.Nb=h,h.Ea=null),e=h)}d=e.F[0].P;c=e.F[1].P;e.P=(d>c?d:c)+1;d=e.F[0];c=e.F[1];e.J=d.J<c.J?d.J:c.J;e.K=d.K<c.K?d.K:c.K;e.L=d.L<c.L?d.L:c.L;e.G=d.G>c.G?d.G:c.G;e.H=d.H>c.H?d.H:c.H;e.I=d.I>c.I?d.I:c.I;e=e.Ea}}if(!a.zh){a.zh=!0;if(this.rf.length==this.$f){b=Array(this.$f<<1);e=0;for(d=this.$f;e<d;)c=e++,b[c]=this.rf[c],this.rf[c]=null;this.rf=b}this.rf[this.$f++]=a}return a},oi:function(a){this.Vi--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Oe&&(this.Oe=this.Oe.M);a==this.gf&&(this.gf=this.gf.ia);a.M=null;a.ia=null;b=this.ye;e=a.ei;b.yk--;var d=e.og,c=e.ng;null!=d&&(d.ng=c);null!=c&&(c.og=d);e==b.zg&&(b.zg=b.zg.ng);e==b.qf&&(b.qf=b.qf.og);e.ng=null;e.og=null;if(b.Nb==e)b.Nb=null;else{var d=e.Ea,c=d.F[e.Ja^1],f=d.Ea;if(null==f)c.Ea=null,c.Ja=0,b.Nb=c,d.F[0]=null,d.F[1]=null,d.Ja=0,d.Ea=null,d.P=0,d.ub=null,d.M=b.qd,b.qd=d;else{var h=d.Ja;f.F[h]=c;c.Ea=f;c.Ja=h;d.F[0]=null;d.F[1]=null;d.Ja=0;d.Ea=null;d.P=0;d.ub=null;d.M=b.qd;b.qd=d;for(d=f;null!=d;){if(b.Zi.ik&&!(2>d.P)){var c=d.Ea,h=d.F[0],l=d.F[1],g=h.P-l.P,f=d.Ja;1<g?(l=h.F[0],g=h.F[1],l.P>g.P?(h.F[1]=d,d.Ea=h,d.Ja=1,d.F[0]=g,g.Ea=d,g.Ja=0):(h.F[0]=d,d.Ea=h,d.Ja=0,d.F[0]=l,l.Ea=d,l.Ja=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].P,g=h.F[1].P,h.P=(l>g?l:g)+1,l=d.F[0],g=d.F[1],d.J=l.J<g.J?l.J:g.J,d.K=l.K<g.K?l.K:g.K,d.L=l.L<g.L?l.L:g.L,d.G=l.G>g.G?l.G:g.G,d.H=l.H>g.H?l.H:g.H,d.I=l.I>g.I?l.I:g.I,l=d.F[0].P,g=d.F[1].P,d.P=(l>g?l:g)+1,null!=c?(c.F[f]=h,h.Ea=c,h.Ja=f):(b.Nb=h,h.Ea=null),d=h):-1>g&&(h=l.F[0],g=l.F[1],h.P>g.P?(l.F[1]=d,d.Ea=l,d.Ja=1,d.F[1]=g,g.Ea=d,g.Ja=1):(l.F[0]=d,d.Ea=l,d.Ja=0,d.F[1]=h,h.Ea=d,h.Ja=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].P,g=l.F[1].P,l.P=(h>g?h:g)+1,h=d.F[0],g=d.F[1],d.J=h.J<g.J?h.J:g.J,d.K=h.K<g.K?h.K:g.K,d.L=h.L<g.L?h.L:g.L,d.G=h.G>g.G?h.G:g.G,d.H=h.H>g.H?h.H:g.H,d.I=h.I>g.I?h.I:g.I,h=d.F[0].P,g=d.F[1].P,d.P=(h>g?h:g)+1,null!=c?(c.F[f]=l,l.Ea=c,l.Ja=f):(b.Nb=l,l.Ea=null),d=l)}c=d.F[0].P;f=d.F[1].P;d.P=(c>f?c:f)+1;c=d.F[0];f=d.F[1];d.J=c.J<f.J?c.J:f.J;d.K=c.K<f.K?c.K:f.K;d.L=c.L<f.L?c.L:f.L;d.G=c.G>f.G?c.G:f.G;d.H=c.H>f.H?c.H:f.H;d.I=c.I>f.I?c.I:f.I;d=d.Ea}}}a.ei=null;e.F[0]=null;e.F[1]=null;e.Ja=0;e.Ea=null;e.P=0;e.ub=null;e.M=b.qd;b.qd=e;a.userData=null;a.M=null;a.ia=null;a.zh&&(a.zh=!1)},Qd:function(a,b,e){if(!(a.J<=b.na&&a.G>=b.ka&&a.K<=b.oa&&a.H>=b.la&&a.L<=b.pa&&a.I>=b.ma)){a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var d;b=e.x;d=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<d?0:d;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>d?0:d;a.I+=0>e?0:e}if(!a.zh){a.zh=!0;if(this.rf.length==this.$f){e=Array(this.$f<<1);b=0;for(d=this.$f;b<d;){var c=b++;e[c]=this.rf[c];this.rf[c]=null}this.rf=e}this.rf[this.$f++]=a}}},$i:function(){var a=this.pe;if(null!=a){for(;a.Ch=null,a.Dh=null,a=a.M,null!=a;);this.pe.M=this.Eh;this.Eh=this.pe;this.pe=null}this.Dj=0;if(!(2>this.Vi)){for(var b=this.$f/this.Vi<F.bvhIncrementalCollisionThreshold,e=0,d=this.$f;e<d;){var c=e++,f=this.rf[c];if(f.zh){var h=this.ye,l=f.ei;h.yk--;var g=l.og,k=l.ng;null!=g&&(g.ng=k);null!=k&&(k.og=g);l==h.zg&&(h.zg=h.zg.ng);l==h.qf&&(h.qf=h.qf.og);l.ng=null;l.og=null;if(h.Nb==l)h.Nb=null;else{var m=l.Ea,p=m.F[l.Ja^1],r=m.Ea;if(null==r)p.Ea=null,p.Ja=0,h.Nb=p,m.M=null,m.Ja=0,m.F[0]=null,m.F[1]=null,m.Ja=0,m.Ea=null,m.P=0,m.ub=null,m.M=h.qd,h.qd=m;else{p.Ea=r;var q=m.Ja;r.F[q]=p;p.Ea=r;p.Ja=q;m.M=null;m.Ja=0;m.F[0]=null;m.F[1]=null;m.Ja=0;m.Ea=null;m.P=0;m.ub=null;m.M=h.qd;h.qd=m;for(var t=r;null!=t;){if(h.Zi.ik&&!(2>t.P)){var A=t.Ea,L=t.F[0],u=t.F[1],z=L.P-u.P,n=t.Ja;if(1<z){var D=L.F[0],Ib=L.F[1];if(D.P>Ib.P){L.F[1]=t;t.Ea=L;t.Ja=1;t.F[0]=Ib;Ib.Ea=t;Ib.Ja=0;var y=L.F[0],B=L.F[1];L.J=y.J<B.J?y.J:B.J;L.K=y.K<B.K?y.K:B.K;L.L=y.L<B.L?y.L:B.L;L.G=y.G>B.G?y.G:B.G;L.H=y.H>B.H?y.H:B.H;L.I=y.I>B.I?y.I:B.I;var E=L.F[0].P,K=L.F[1].P;L.P=(E>K?E:K)+1;var H=t.F[0],mc=t.F[1];t.J=H.J<mc.J?H.J:mc.J;t.K=H.K<mc.K?H.K:mc.K;t.L=H.L<mc.L?H.L:mc.L;t.G=H.G>mc.G?H.G:mc.G;t.H=H.H>mc.H?H.H:mc.H;t.I=H.I>mc.I?H.I:mc.I;var R=t.F[0].P,x=t.F[1].P;t.P=(R>x?R:x)+1}else{L.F[0]=t;t.Ea=L;t.Ja=0;t.F[0]=D;D.Ea=t;D.Ja=0;var X=L.F[0],dd=L.F[1];L.J=X.J<dd.J?X.J:dd.J;L.K=X.K<dd.K?X.K:dd.K;L.L=X.L<dd.L?X.L:dd.L;L.G=X.G>dd.G?X.G:dd.G;L.H=X.H>dd.H?X.H:dd.H;L.I=X.I>dd.I?X.I:dd.I;var Da=L.F[0].P,qa=L.F[1].P;L.P=(Da>qa?Da:qa)+1;var Ub=t.F[0],ya=t.F[1];t.J=Ub.J<ya.J?Ub.J:ya.J;t.K=Ub.K<ya.K?Ub.K:ya.K;t.L=Ub.L<ya.L?Ub.L:ya.L;t.G=Ub.G>ya.G?Ub.G:ya.G;t.H=Ub.H>ya.H?Ub.H:ya.H;t.I=Ub.I>ya.I?Ub.I:ya.I;var Jj=t.F[0].P,Ea=t.F[1].P;t.P=(Jj>Ea?Jj:Ea)+1}null!=A?(A.F[n]=L,L.Ea=A,L.Ja=n):(h.Nb=L,L.Ea=null);t=L}else if(-1>z){var O=u.F[0],sa=u.F[1];if(O.P>sa.P){u.F[1]=t;t.Ea=u;t.Ja=1;t.F[1]=sa;sa.Ea=t;sa.Ja=1;var ba=u.F[0],za=u.F[1];u.J=ba.J<za.J?ba.J:za.J;u.K=ba.K<za.K?ba.K:za.K;u.L=ba.L<za.L?ba.L:za.L;u.G=ba.G>za.G?ba.G:za.G;u.H=ba.H>za.H?ba.H:za.H;u.I=ba.I>za.I?ba.I:za.I;var Ta=u.F[0].P,C=u.F[1].P;u.P=(Ta>C?Ta:C)+1;var Aa=t.F[0],na=t.F[1];t.J=Aa.J<na.J?Aa.J:na.J;t.K=Aa.K<na.K?Aa.K:na.K;t.L=Aa.L<na.L?Aa.L:na.L;t.G=Aa.G>na.G?Aa.G:na.G;t.H=Aa.H>na.H?Aa.H:na.H;t.I=Aa.I>na.I?Aa.I:na.I;var La=t.F[0].P,Ba=t.F[1].P;t.P=(La>Ba?La:Ba)+1}else{u.F[0]=t;t.Ea=u;t.Ja=0;t.F[1]=O;O.Ea=t;O.Ja=1;var ta=u.F[0],S=u.F[1];u.J=ta.J<S.J?ta.J:S.J;u.K=ta.K<S.K?ta.K:S.K;u.L=ta.L<S.L?ta.L:S.L;u.G=ta.G>S.G?ta.G:S.G;u.H=ta.H>S.H?ta.H:S.H;u.I=ta.I>S.I?ta.I:S.I;var ha=u.F[0].P,ea=u.F[1].P;u.P=(ha>ea?ha:ea)+1;var da=t.F[0],M=t.F[1];t.J=da.J<M.J?da.J:M.J;t.K=da.K<M.K?da.K:M.K;t.L=da.L<M.L?da.L:M.L;t.G=da.G>M.G?da.G:M.G;t.H=da.H>M.H?da.H:M.H;t.I=da.I>M.I?da.I:M.I;var T=t.F[0].P,w=t.F[1].P;t.P=(T>w?T:w)+1}null!=A?(A.F[n]=u,u.Ea=A,u.Ja=n):(h.Nb=u,u.Ea=null);t=u}}var V=t.F[0].P,ia=t.F[1].P;t.P=(V>ia?V:ia)+1;var Y=t.F[0],oa=t.F[1];t.J=Y.J<oa.J?Y.J:oa.J;t.K=Y.K<oa.K?Y.K:oa.K;t.L=Y.L<oa.L?Y.L:oa.L;t.G=Y.G>oa.G?Y.G:oa.G;t.H=Y.H>oa.H?Y.H:oa.H;t.I=Y.I>oa.I?Y.I:oa.I;t=t.Ea}}}f.ei=null;l.M=null;l.Ja=0;l.F[0]=null;l.F[1]=null;l.Ja=0;l.Ea=null;l.P=0;l.ub=null;l.M=h.qd;h.qd=l;var ua=this.ye,ca=ua.qd;null!=ca?(ua.qd=ca.M,ca.M=null):ca=new oi;var Ma=ca;Ma.ub=f;f.ei=Ma;Ma.J=f.J;Ma.K=f.K;Ma.L=f.L;Ma.G=f.G;Ma.H=f.H;Ma.I=f.I;ua.yk++;null==ua.zg?ua.zg=Ma:(ua.qf.ng=Ma,Ma.og=ua.qf);ua.qf=Ma;if(null==ua.Nb)ua.Nb=Ma;else{for(var va=ua.Nb;0<va.P;){var Z=ua.Zi.jm(va,Ma);if(-1==Z)break;else va=va.F[Z]}var Pa=va.Ea,Fa=ua.qd;null!=Fa?(ua.qd=Fa.M,Fa.M=null):Fa=new oi;var Q=Fa;if(null==Pa)ua.Nb=Q;else{var aa=va.Ja;Pa.F[aa]=Q;Q.Ea=Pa;Q.Ja=aa}var fa=va.Ja;Q.F[fa]=va;va.Ea=Q;va.Ja=fa;var I=va.Ja^1;Q.F[I]=Ma;Ma.Ea=Q;for(Ma.Ja=I;null!=Q;){if(ua.Zi.ik&&!(2>Q.P)){var ja=Q.Ea,Ga=Q.F[0],P=Q.F[1],Ya=Ga.P-P.P,N=Q.Ja;if(1<Ya){var wb=Ga.F[0],J=Ga.F[1];if(wb.P>J.P){Ga.F[1]=Q;Q.Ea=Ga;Q.Ja=1;Q.F[0]=J;J.Ea=Q;J.Ja=0;var Vb=Ga.F[0],Ab=Ga.F[1];Ga.J=Vb.J<Ab.J?Vb.J:Ab.J;Ga.K=Vb.K<Ab.K?Vb.K:Ab.K;Ga.L=Vb.L<Ab.L?Vb.L:Ab.L;Ga.G=Vb.G>Ab.G?Vb.G:Ab.G;Ga.H=Vb.H>Ab.H?Vb.H:Ab.H;Ga.I=Vb.I>Ab.I?Vb.I:Ab.I;var ib=Ga.F[0].P,hb=Ga.F[1].P;Ga.P=(ib>hb?ib:hb)+1;var ka=Q.F[0],Ia=Q.F[1];Q.J=ka.J<Ia.J?ka.J:Ia.J;Q.K=ka.K<Ia.K?ka.K:Ia.K;Q.L=ka.L<Ia.L?ka.L:Ia.L;Q.G=ka.G>Ia.G?ka.G:Ia.G;Q.H=ka.H>Ia.H?ka.H:Ia.H;Q.I=ka.I>Ia.I?ka.I:Ia.I;var ab=Q.F[0].P,bb=Q.F[1].P;Q.P=(ab>bb?ab:bb)+1}else{Ga.F[0]=Q;Q.Ea=Ga;Q.Ja=0;Q.F[0]=wb;wb.Ea=Q;wb.Ja=0;var Wa=Ga.F[0],Va=Ga.F[1];Ga.J=Wa.J<Va.J?Wa.J:Va.J;Ga.K=Wa.K<Va.K?Wa.K:Va.K;Ga.L=Wa.L<Va.L?Wa.L:Va.L;Ga.G=Wa.G>Va.G?Wa.G:Va.G;Ga.H=Wa.H>Va.H?Wa.H:Va.H;Ga.I=Wa.I>Va.I?Wa.I:Va.I;var qb=Ga.F[0].P,kb=Ga.F[1].P;Ga.P=(qb>kb?qb:kb)+1;var Sa=Q.F[0],Na=Q.F[1];Q.J=Sa.J<Na.J?Sa.J:Na.J;Q.K=Sa.K<Na.K?Sa.K:Na.K;Q.L=Sa.L<Na.L?Sa.L:Na.L;Q.G=Sa.G>Na.G?Sa.G:Na.G;Q.H=Sa.H>Na.H?Sa.H:Na.H;Q.I=Sa.I>Na.I?Sa.I:Na.I;var Za=Q.F[0].P,vb=Q.F[1].P;Q.P=(Za>vb?Za:vb)+1}null!=ja?(ja.F[N]=Ga,Ga.Ea=ja,Ga.Ja=N):(ua.Nb=Ga,Ga.Ea=null);Q=Ga}else if(-1>Ya){var mb=P.F[0],xb=P.F[1];if(mb.P>xb.P){P.F[1]=Q;Q.Ea=P;Q.Ja=1;Q.F[1]=xb;xb.Ea=Q;xb.Ja=1;var nb=P.F[0],fb=P.F[1];P.J=nb.J<fb.J?nb.J:fb.J;P.K=nb.K<fb.K?nb.K:fb.K;P.L=nb.L<fb.L?nb.L:fb.L;P.G=nb.G>fb.G?nb.G:fb.G;P.H=nb.H>fb.H?nb.H:fb.H;P.I=nb.I>fb.I?nb.I:fb.I;var Re=P.F[0].P,Db=P.F[1].P;P.P=(Re>Db?Re:Db)+1;var G=Q.F[0],sb=Q.F[1];Q.J=G.J<sb.J?G.J:sb.J;Q.K=G.K<sb.K?G.K:sb.K;Q.L=G.L<sb.L?G.L:sb.L;Q.G=G.G>sb.G?G.G:sb.G;Q.H=G.H>sb.H?G.H:sb.H;Q.I=G.I>sb.I?G.I:sb.I;var jb=Q.F[0].P,Xb=Q.F[1].P;Q.P=(jb>Xb?jb:Xb)+1}else{P.F[0]=Q;Q.Ea=P;Q.Ja=0;Q.F[1]=mb;mb.Ea=Q;mb.Ja=1;var ob=P.F[0],cb=P.F[1];P.J=ob.J<cb.J?ob.J:cb.J;P.K=ob.K<cb.K?ob.K:cb.K;P.L=ob.L<cb.L?ob.L:cb.L;P.G=ob.G>cb.G?ob.G:cb.G;P.H=ob.H>cb.H?ob.H:cb.H;P.I=ob.I>cb.I?ob.I:cb.I;var zb=P.F[0].P,Xa=P.F[1].P;P.P=(zb>Xa?zb:Xa)+1;var tb=Q.F[0],v=Q.F[1];Q.J=tb.J<v.J?tb.J:v.J;Q.K=tb.K<v.K?tb.K:v.K;Q.L=tb.L<v.L?tb.L:v.L;Q.G=tb.G>v.G?tb.G:v.G;Q.H=tb.H>v.H?tb.H:v.H;Q.I=tb.I>v.I?tb.I:v.I;var W=Q.F[0].P,U=Q.F[1].P;Q.P=(W>U?W:U)+1}null!=ja?(ja.F[N]=P,P.Ea=ja,P.Ja=N):(ua.Nb=P,P.Ea=null);Q=P}}var db=Q.F[0].P,cc=Q.F[1].P;Q.P=(db>cc?db:cc)+1;var Ra=Q.F[0],Ha=Q.F[1];Q.J=Ra.J<Ha.J?Ra.J:Ha.J;Q.K=Ra.K<Ha.K?Ra.K:Ha.K;Q.L=Ra.L<Ha.L?Ra.L:Ha.L;Q.G=Ra.G>Ha.G?Ra.G:Ha.G;Q.H=Ra.H>Ha.H?Ra.H:Ha.H;Q.I=Ra.I>Ha.I?Ra.I:Ha.I;Q=Q.Ea}}b&&this.Kh(this.ye.Nb,f.ei);f.zh=!1}this.rf[c]=null}b||this.Kh(this.ye.Nb,this.ye.Nb);this.$f=0}},ke:function(a,b,e){null!=this.ye.Nb&&this.am(this.ye.Nb,a.x,a.y,a.z,b.x,b.y,b.z,e)},Vf:function(a,b,e,d){null!=this.ye.Nb&&this.El(this.ye.Nb,a,b,e,d)},Ih:function(a,b){null!=this.ye.Nb&&this.yl(this.ye.Nb,a,b)},so:function(){return this.ye.An()}});Wi.wa=Qc;Wi.prototype=gb(Qc.prototype,{});Hj.prototype={jm:function(a,b){switch(this.mm){case 0:var e,d,c;e=b.J+b.G;d=b.K+b.H;c=b.L+b.I;var f=a.F[0];a=a.F[1];var h,l,g;h=f.J+f.G;b=f.K+f.H;f=f.L+f.I;l=a.J+a.G;g=a.K+a.H;a=a.L+a.I;h-=e;b-=d;f-=c;l-=e;g-=d;a-=c;return h*h+b*b+f*f<l*l+g*g+a*a?0:1;case 1:f=a.F[0];h=a.F[1];var k=a.H-a.K,m=a.I-a.L,p,r;e=a.J<b.J?a.J:b.J;p=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;d=a.G>b.G?a.G:b.G;r=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;c=r-p;l=g-l;e=2*((d-e)*(c+l)+c*l);c=2*e;a=2*(e-2*((a.G-a.J)*(k+m)+k*m));e=f.J<b.J?f.J:b.J;p=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;d=f.G>b.G?f.G:b.G;r=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.P?(f=r-p,l=g-l,f=a+2*((d-e)*(f+l)+f*l)):(k=r-p,l=g-l,g=f.H-f.K,m=f.I-f.L,f=a+(2*((d-e)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m)));e=h.J<b.J?h.J:b.J;p=h.K<b.K?h.K:b.K;l=h.L<b.L?h.L:b.L;d=h.G>b.G?h.G:b.G;r=h.H>b.H?h.H:b.H;g=h.I>b.I?h.I:b.I;0==h.P?(h=r-p,b=g-l,e=a+2*((d-e)*(h+b)+h*b)):(b=r-p,l=g-l,g=h.H-h.K,k=h.I-h.L,e=a+(2*((d-e)*(b+l)+b*l)-2*((h.G-h.J)*(g+k)+g*k)));return c<f?c<e?-1:1:f<e?0:1;default:return console.log("src/oimo/collision/broadphase/bvh/BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.mm),-1}}};Gj.prototype={An:function(){return this.Hl(this.Nb)},Hl:function(a){if(null==a||0==a.P)return 0;var b=a.F[0].P-a.F[1].P;0>b&&(b=-b);return b+this.Hl(a.F[0])+this.Hl(a.F[1])}};eb.prototype={Aa:function(a,b){this.na=a.x;this.oa=a.y;this.pa=a.z;this.ka=b.x;this.la=b.y;this.ma=b.z;return this},Uc:function(){var a=new n;a.x=this.na;a.y=this.oa;a.z=this.pa;return a},Vc:function(a){a.x=this.na;a.y=this.oa;a.z=this.pa},ie:function(a){this.na=a.x;this.oa=a.y;this.pa=a.z;return this},Dc:function(){var a=new n;a.x=this.ka;a.y=this.la;a.z=this.ma;return a},Hc:function(a){a.x=this.ka;a.y=this.la;a.z=this.ma},vd:function(a){this.ka=a.x;this.la=a.y;this.ma=a.z;return this},Cb:function(){var a=new n,b,e,d;b=this.na+this.ka;e=this.oa+this.la;d=this.pa+this.ma;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},Kb:function(a){var b,e,d;b=this.na+this.ka;e=this.oa+this.la;d=this.pa+this.ma;a.x=.5*b;a.y=.5*e;a.z=.5*d},kc:function(){var a=new n,b,e,d;b=this.ka-this.na;e=this.la-this.oa;d=this.ma-this.pa;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},lc:function(a){var b,e,d;b=this.ka-this.na;e=this.la-this.oa;d=this.ma-this.pa;a.x=.5*b;a.y=.5*e;a.z=.5*d},wa:function(a){this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.pa=this.pa<a.pa?this.pa:a.pa;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;this.ma=this.ma>a.ma?this.ma:a.ma;return this},mb:function(a){var b=new eb;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.pa=this.pa<a.pa?this.pa:a.pa;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;b.ma=this.ma>a.ma?this.ma:a.ma;return b},Wc:function(a){return this.na<a.ka&&this.ka>a.na&&this.oa<a.la&&this.la>a.oa&&this.pa<a.ma?this.ma>a.pa:!1},wc:function(a){var b=new eb;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.pa=this.pa>a.pa?this.pa:a.pa;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;b.ma=this.ma<a.ma?this.ma:a.ma;return b},xc:function(a,b){b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.pa=this.pa>a.pa?this.pa:a.pa;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;b.ma=this.ma<a.ma?this.ma:a.ma},qe:function(a){this.na=a.na;this.oa=a.oa;this.pa=a.pa;this.ka=a.ka;this.la=a.la;this.ma=a.ma;return this},clone:function(){var a=new eb;a.na=this.na;a.oa=this.oa;a.pa=this.pa;a.ka=this.ka;a.la=this.la;a.ma=this.ma;return a}};Hd.wa=Qa;Hd.prototype=gb(Qa.prototype,{Yn:function(){var a=new n;a.x=this.Te;a.y=this.Ue;a.z=this.Ve;return a},Zn:function(a){a.x=this.Te;a.y=this.Ue;a.z=this.Ve},Xe:function(){this.Sf=8*this.Te*this.Ue*this.Ve;var a,b,e;a=this.Te*this.Te;b=this.Ue*this.Ue;e=this.Ve*this.Ve;this.Dg=.3333333333333333*(b+e);this.Gg=this.Fg=this.Eg=0;this.Hg=.3333333333333333*(e+a);this.Kg=this.Jg=this.Ig=0;this.Lg=.3333333333333333*(a+b)},Lb:function(a,b){var e,d,c,f,h;f=b.o*this.Yk+b.f*this.Zk+b.h*this.$k;h=b.i*this.Yk+b.m*this.Zk+b.j*this.$k;e=b.l*this.Yk+b.g*this.Zk+b.s*this.$k;var l,g;l=b.o*this.al+b.f*this.bl+b.h*this.cl;g=b.i*this.al+b.m*this.bl+b.j*this.cl;d=b.l*this.al+b.g*this.bl+b.s*this.cl;var k,m;k=b.o*this.dl+b.f*this.el+b.h*this.fl;m=b.i*this.dl+b.m*this.el+b.j*this.fl;c=b.l*this.dl+b.g*this.el+b.s*this.fl;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>d?-d:d)+(0>c?-c:c);a.na=b.v-f;a.oa=b.A-h;a.pa=b.B-e;a.ka=b.v+f;a.la=b.A+h;a.ma=b.B+e},he:function(a,b){var e,d,c;c=d=e=this.Rb;e=e<this.Te?e:this.Te;d=d<this.Ue?d:this.Ue;c=c<this.Ve?c:this.Ve;e=this.Te-e;d=this.Ue-d;c=this.Ve-c;b.x=0<a.x?e:-e;b.y=0<a.y?d:-d;b.z=0<a.z?c:-c},Wi:function(a,b,e,d,c,f,h){var l=this.Te,g=this.Ue,k=this.Ve;d-=a;c-=b;f-=e;var m=0,p=0,r=0,q=1,t=1,A=1;if(-1E-6<d&&1E-6>d){if(a<=-l||a>=l)return!1}else{var L=1/d,u=(-l-a)*L,l=(l-a)*L;u>l&&(L=u,u=l,l=L);0<u&&(m=u);1>l&&(q=l)}if(-1E-6<c&&1E-6>c){if(b<=-g||b>=g)return!1}else u=1/c,l=(-g-b)*u,g=(g-b)*u,l>g&&(u=l,l=g,g=u),0<l&&(p=l),1>g&&(t=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(r=g),1>k&&(A=k);if(1<=m||1<=p||1<=r||0>=q||0>=t||0>=A)return!1;k=m;m=0;p>k&&(k=p,m=1);r>k&&(k=r,m=2);t<q&&(q=t);A<q&&(q=A);if(k>q||!k)return!1;switch(m){case 0:h.normal.Aa(0<d?-1:1,0,0);break;case 1:h.normal.Aa(0,0<c?-1:1,0);break;case 2:h.normal.Aa(0,0,0<f?-1:1)}h.position.Aa(a+k*d,b+k*c,e+k*f);h.fraction=k;return!0}});Wc.wa=Qa;Wc.prototype=gb(Qa.prototype,{pi:function(){return this.ab},Pj:function(){return this.Db},Xe:function(){var a=this.ab*this.ab,b=this.Db*this.Db,e=6.28318530717958*a*this.Db,d=3.14159265358979*a*this.ab*4/3,c=(this.Sf=e+d)?1/this.Sf:0;this.Dg=b=c*(e*(.25*a+b/3)+d*(.4*a+this.Db*this.ab*.75+b));this.Gg=this.Fg=this.Eg=0;this.Hg=c*(e*a*.5+d*a*.4);this.Kg=this.Jg=this.Ig=0;this.Lg=b},Lb:function(a,b){var e,d,c;c=d=e=this.ab;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Db;h=(0>h?-h:h)*this.Db;l=(0>l?-l:l)*this.Db;e+=f;d+=h;c+=l;a.na=b.v-e;a.oa=b.A-d;a.pa=b.B-c;a.ka=b.v+e;a.la=b.A+d;a.ma=b.B+c},he:function(a,b){0<a.y?b.Aa(0,this.Db,0):b.Aa(0,-this.Db,0)},Wi:function(a,b,e,d,c,f,h){var l=this.Db,g=d-a,k=f-e,m,p=g*g+k*k,r=a*g+e*k;m=a*a+e*e-this.ab*this.ab;var q=r*r-p*m;if(0>q)return!1;if(0<p){if(q=Math.sqrt(q),m=(-r-q)/p,1<=m||0>=(-r+q)/p)return!1}else{if(0<=m)return!1;m=0}p=b+(c-b)*m;if(p>-l&&p<l)return 0<m?(f=m,r=h.normal.Aa(a+g*f,0,e+k*f),b=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z),0<b&&(b=1/b),r.x*=b,r.y*=b,r.z*=b,h.position.Aa(a+f*g,p,e+f*k),h.fraction=f,!0):!1;var t,g=0>p?-l:l;t=a-0;l=b-g;k=e-0;a=d-a;b=c-b;e=f-e;p=a*a+b*b+e*e;r=t*a+l*b+k*e;m=t*t+l*l+k*k-this.ab*this.ab;q=r*r-p*m;if(0>q)return!1;f=(-r-Math.sqrt(q))/p;if(0>f||1<f)return!1;a=t+a*f;p=l+b*f;e=k+e*f;r=a*a+p*p+e*e;0<r&&(r=1/Math.sqrt(r));b=h.position;b.x=a+0;b.y=p+g;b.z=e+0;g=h.normal;g.x=a*r;g.y=p*r;g.z=e*r;h.fraction=f;return!0}});Fe.wa=Qa;Fe.prototype=gb(Qa.prototype,{pi:function(){return this.ab},Pj:function(){return this.Db},Xe:function(){var a=this.ab*this.ab,b=this.Db*this.Db*4;this.Sf=3.14159265358979*a*this.Db*2/3;this.Dg=.05*(3*a+2*b);this.Gg=this.Fg=this.Eg=0;this.Hg=.3*a;this.Kg=this.Jg=this.Ig=0;this.Lg=.05*(3*a+2*b)},Lb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Db;d*=this.Db;c*=this.Db;var g,k,m,p,r,q;g=-e-f;k=-d-h;m=-c-l;p=-e+f;r=-d+h;q=-c+l;l=g>p?g:p;h=k>r?k:r;f=m>q?m:q;g=g<p?g:p;k=k<r?k:r;m=m<q?m:q;a.na=b.v+(g<e?g:e);a.oa=b.A+(k<d?k:d);a.pa=b.B+(m<c?m:c);a.ka=b.v+(l>e?l:e);a.la=b.A+(h>d?h:d);a.ma=b.B+(f>c?f:c)},he:function(a,b){var e=a.x,d=a.y,c=a.z;0<d&&d*d>this.Mk*this.Mk*(e*e+d*d+c*c)?(b.Aa(0,this.Db-this.Rb/this.Mk,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,d=e*e+a*a,c=2*this.Db,c=(c-this.Rb)/c*this.ab-this.Rb/this.Dk,0>c&&(c=0),d=0<d?c/Math.sqrt(d):0,c=this.Db-this.Rb,0>c&&(c=0),b.x=e*d,b.y=-c,b.z=a*d)},Wi:function(a,b,e,d,c,f,h){var l=this.Db;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,p=(-l-b)*m,m=(l-b)*m;if(p>m)var r=p,p=m,m=r;0<p&&(g=p);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var r=this.Dk*this.Dk,m=r*(d*d+c*c+f*f)-c*c,p=r*(a*d+b*c+e*f)-b*c,r=r*(a*a+b*b+e*e)-b*b,q=p*p-m*r;if(m){if(0>q)return!1;q=Math.sqrt(q);if(0>m)if(0<c){if(r=0,p=(-p+q)/m,0>=p)return!1}else{if(r=(-p-q)/m,p=1,1<=r)return!1}else if(r=(-p-q)/m,p=(-p+q)/m,1<=r||0>=p)return!1}else if(m=-r/(2*p),0<p){if(r=0,p=m,0>=m)return!1}else if(r=m,p=1,1<=m)return!1;b+=l;if(p<=g||k<=r)return!1;if(r<g){l=g;if(!l)return!1;h.normal.Aa(0,0<c?-1:1,0)}else{l=r;if(!l)return!1;g=h.normal.Aa(a+d*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);g.x*=k;g.y*=k;g.z*=k;k=this.Dk;g.x*=k;g.y*=k;g.z*=k;h.normal.y+=this.Mk}h.position.Aa(a+l*d,b+l*c,e+l*f);h.fraction=l;return!0}});kf.wa=Qa;kf.prototype=gb(Qa.prototype,{wo:function(){return this.Ca},Xe:function(){this.Dg=this.Sf=1;this.Gg=this.Fg=this.Eg=0;this.Hg=1;this.Kg=this.Jg=this.Ig=0;this.Lg=1;for(var a=this.Ca[0].x,b=this.Ca[0].y,e=this.Ca[0].z,d=this.Ca[0].x,c=this.Ca[0].y,f=this.Ca[0].z,h=1,l=this.We;h<l;){var g=h++,k=this.Ca[g].x,m=this.Ca[g].y,g=this.Ca[g].z;k<a?a=k:k>d&&(d=k);m<b?b=m:m>c&&(c=m);g<e?e=g:g>f&&(f=g)}h=d-a;l=c-b;k=f-e;this.Sf=h*l*k;a=.25*((a+d)*(a+d)+(b+c)*(b+c)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.Dg=.3333333333333333*(l+k)+a;this.Gg=this.Fg=this.Eg=0;this.Hg=.3333333333333333*(k+h)+a;this.Kg=this.Jg=this.Ig=0;this.Lg=.3333333333333333*(h+l)+a},Lb:function(a,b){var e,d,c,f,h,l,g,k,m;m=k=g=this.Rb;var p,r,q;e=this.Ca[0];p=e.x;r=e.y;q=e.z;d=b.o*p+b.f*r+b.h*q;e=b.i*p+b.m*r+b.j*q;c=b.l*p+b.g*r+b.s*q;p=d+b.v;r=e+b.A;q=c+b.B;e=p;d=r;c=q;f=p;h=r;l=q;for(var t=1,A=this.We;t<A;){q=this.Ca[t++];p=q.x;r=q.y;q=q.z;var L,u;L=b.o*p+b.f*r+b.h*q;u=b.i*p+b.m*r+b.j*q;q=b.l*p+b.g*r+b.s*q;p=L;r=u;p+=b.v;r+=b.A;q+=b.B;e=e<p?e:p;d=d<r?d:r;c=c<q?c:q;f=f>p?f:p;h=h>r?h:r;l=l>q?l:q}a.na=e-g;a.oa=d-k;a.pa=c-m;a.ka=f+g;a.la=h+k;a.ma=l+m},he:function(a,b){for(var e=this.Ca[0],e=e.x*a.x+e.y*a.y+e.z*a.z,d=0,c=1,f=this.We;c<f;){var h=c++,l=this.Ca[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,d=h)}a=this.Ca[d];b.x=a.x;b.y=a.y;b.z=a.z}});Qd.wa=Qa;Qd.prototype=gb(Qa.prototype,{pi:function(){return this.ab},Pj:function(){return this.Db},Xe:function(){var a=this.ab*this.ab,b=this.Db*this.Db*4;this.Sf=3.14159265358979*a*this.Db*2;this.Dg=.08333333333333333*(3*a+b);this.Gg=this.Fg=this.Eg=0;this.Hg=.5*a;this.Kg=this.Jg=this.Ig=0;this.Lg=.08333333333333333*(3*a+b)},Lb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;e=0>e?-e:e;d=0>d?-d:d;c=0>c?-c:c;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Db;d*=this.Db;c*=this.Db;f+=e;h+=d;l+=c;a.na=b.v-f;a.oa=b.A-h;a.pa=b.B-l;a.ka=b.v+f;a.la=b.A+h;a.ma=b.B+l},he:function(a,b){var e=a.x,d=a.z,c=e*e+d*d,f=this.ab-this.Rb;0>f&&(f=0);c=0<c?f/Math.sqrt(c):0;f=this.Db-this.Rb;0>f&&(f=0);b.x=e*c;b.y=0<a.y?f:-f;b.z=d*c},Wi:function(a,b,e,d,c,f,h){var l=this.Db;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,p=(-l-b)*m,l=(l-b)*m;p>l&&(m=p,p=l,l=m);0<p&&(g=p);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=d*d+f*f,p=a*d+e*f,m=a*a+e*e-this.ab*this.ab,r=p*p-l*m;if(0>r)return!1;if(0<l){if(r=Math.sqrt(r),m=(-p-r)/l,l=(-p+r)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.Aa(0,0<c?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.Aa(a+d*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);k.x*=l;k.y*=l;k.z*=l}h.position.Aa(a+g*d,b+g*c,e+g*f);h.fraction=g;return!0}});ue.wa=Qa;ue.prototype=gb(Qa.prototype,{pi:function(){return this.ab},Xe:function(){this.Sf=4.188790204786386*this.ab*this.ab*this.ab;this.Dg=.4*this.ab*this.ab;this.Gg=this.Fg=this.Eg=0;this.Hg=.4*this.ab*this.ab;this.Kg=this.Jg=this.Ig=0;this.Lg=.4*this.ab*this.ab},Lb:function(a,b){var e,d,c;c=d=e=this.ab;a.na=b.v-e;a.oa=b.A-d;a.pa=b.B-c;a.ka=b.v+e;a.la=b.A+d;a.ma=b.B+c},he:function(a,b){b.R()},Wi:function(a,b,e,d,c,f,h){var l;d-=a;c-=b;l=f-e;f=d*d+c*c+l*l;var g=a*d+b*c+e*l,k=g*g-f*(a*a+b*b+e*e-this.ab*this.ab);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=d*f;b+=c*f;e+=l*f;d=a*a+b*b+e*e;0<d&&(d=1/Math.sqrt(d));c=h.position;c.x=a;c.y=b;c.z=e;c=h.normal;c.x=a*d;c.y=b*d;c.z=e*d;h.fraction=f;return!0}});hi.prototype={wa:function(a,b){return this.xb[a][b]}};jf.prototype={Em:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.R();e.position2.R();e.depth=0;e.id=0}this.normal.R()}};lc.prototype={Rh:function(a,b,e,d){var c=a.normal;c.x=b;c.y=e;c.z=d;this.oh&&(a=a.normal,a.x=-a.x,a.y=-a.y,a.z=-a.z)},Wg:function(a,b,e,d,c,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.oh?(l=a.position1,l.x=c,l.y=f,l.z=h,c=a.position2,c.x=b,c.y=e,c.z=d):(l=a.position1,l.x=b,l.y=e,l.z=d,b=a.position2,b.x=c,b.y=f,b.z=h)},Lh:function(){},zm:function(a,b,e,d,c,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.R();g.position2.R();g.depth=0;g.id=0}a.normal.R();this.oh?this.Lh(a,e,b,c,d,f):this.Lh(a,b,e,d,c,f)}};ni.wa=lc;ni.prototype=gb(lc.prototype,{Lh:function(a,b,e,d,c){var f=b,h=e;a.incremental=!1;var l,g,k,m,p,r,q,t,A;l=d.v;g=d.A;k=d.B;m=c.v;p=c.A;r=c.B;q=m-l;t=p-g;A=r-k;var L,u,z,n,D,Ib,y,B,E,K,H,mc,R,x,X,dd,Da,qa;L=d.o;u=d.i;z=d.l;n=d.f;D=d.m;Ib=d.g;y=d.h;B=d.j;E=d.s;K=c.o;H=c.i;mc=c.l;R=c.f;x=c.m;X=c.g;dd=c.h;Da=c.j;qa=c.s;var Ub=f.Te,ya=f.Ue,I=f.Ve,Ea=h.Te,O=h.Ue,sa=h.Ve,ba,za,Ta,C,Aa,na,La,Ba,ta,S,ha,ea,da,M,T,w,V,ia;ba=L*Ub;za=u*Ub;Ta=z*Ub;C=n*ya;Aa=D*ya;na=Ib*ya;La=y*I;Ba=B*I;ta=E*I;S=K*Ea;ha=H*Ea;ea=mc*Ea;da=R*O;M=x*O;T=X*O;w=dd*sa;V=Da*sa;ia=qa*sa;var Y=Infinity,oa=-1,ua=0,ca,Ma,va;va=Ma=ca=0;var Z=Ub,Pa=L*S+u*ha+z*ea,Fa=L*da+u*M+z*T,Q=L*w+u*V+z*ia;0>Pa&&(Pa=-Pa);0>Fa&&(Fa=-Fa);0>Q&&(Q=-Q);var aa=Pa+Fa+Q,fa=L*q+u*t+z*A,N=Z+aa,ja=0>fa,Ga=ja?-fa:fa;if(Ga<N){var P=N-Ga;Infinity>P&&(Y=P,oa=0,ca=L,Ma=u,va=z,ua=ja?-1:1);var Z=ya,Ya=n*S+D*ha+Ib*ea,J=n*da+D*M+Ib*T,wb=n*w+D*V+Ib*ia;0>Ya&&(Ya=-Ya);0>J&&(J=-J);0>wb&&(wb=-wb);var aa=Ya+J+wb,fa=n*q+D*t+Ib*A,ec=Z+aa,Vb=0>fa,Ab=Vb?-fa:fa;if(Ab<ec){var ib=ec-Ab;ib<Y&&(Y=ib,oa=1,ca=n,Ma=D,va=Ib,ua=Vb?-1:1);var Z=I,hb=y*S+B*ha+E*ea,ka=y*da+B*M+E*T,Ia=y*w+B*V+E*ia;0>hb&&(hb=-hb);0>ka&&(ka=-ka);0>Ia&&(Ia=-Ia);var aa=hb+ka+Ia,fa=y*q+B*t+E*A,ab=Z+aa,bb=0>fa,Wa=bb?-fa:fa;if(Wa<ab){var Va=ab-Wa;Va<Y&&(Y=Va,oa=2,ca=y,Ma=B,va=E,ua=bb?-1:1);var Y=Y>F.linearSlop?Y-F.linearSlop:0,qb=K*ba+H*za+mc*Ta,kb=K*C+H*Aa+mc*na,Sa=K*La+H*Ba+mc*ta;0>qb&&(qb=-qb);0>kb&&(kb=-kb);0>Sa&&(Sa=-Sa);var Z=qb+kb+Sa,aa=Ea,fa=K*q+H*t+mc*A,Na=Z+aa,Za=0>fa,vb=Za?-fa:fa;if(vb<Na){var mb=Na-vb;mb<Y&&(Y=mb,oa=3,ca=K,Ma=H,va=mc,ua=Za?-1:1);var xb=R*ba+x*za+X*Ta,nb=R*C+x*Aa+X*na,fb=R*La+x*Ba+X*ta;0>xb&&(xb=-xb);0>nb&&(nb=-nb);0>fb&&(fb=-fb);var Z=xb+nb+fb,aa=O,fa=R*q+x*t+X*A,Re=Z+aa,Db=0>fa,G=Db?-fa:fa;if(G<Re){var sb=Re-G;sb<Y&&(Y=sb,oa=4,ca=R,Ma=x,va=X,ua=Db?-1:1);var jb=dd*ba+Da*za+qa*Ta,Xb=dd*C+Da*Aa+qa*na,ob=dd*La+Da*Ba+qa*ta;0>jb&&(jb=-jb);0>Xb&&(Xb=-Xb);0>ob&&(ob=-ob);var Z=jb+Xb+ob,aa=sa,fa=dd*q+Da*t+qa*A,cb=Z+aa,zb=0>fa,Xa=zb?-fa:fa;if(Xa<cb){var tb=cb-Xa;tb<Y&&(Y=tb,oa=5,ca=dd,Ma=Da,va=qa,ua=zb?-1:1);var Y=Y>F.linearSlop?Y-F.linearSlop:0,v,W,U;v=u*mc-z*H;W=z*K-L*mc;U=L*H-u*K;if(v||W||U){var db=v*v+W*W+U*U;0<db&&(db=1/Math.sqrt(db));v*=db;W*=db;U*=db;var cc=v*C+W*Aa+U*na,Ra=v*La+W*Ba+U*ta;0>cc&&(cc=-cc);0>Ra&&(Ra=-Ra);var Z=cc+Ra,Ha=v*da+W*M+U*T,rb=v*w+W*V+U*ia;0>Ha&&(Ha=-Ha);0>rb&&(rb=-rb);var aa=Ha+rb,fa=v*q+W*t+U*A,yb=Z+aa,Cb=0>fa,la=Cb?-fa:fa;if(la<yb){var ra=yb-la;ra<Y&&(Y=ra,oa=6,ca=v,Ma=W,va=U,ua=Cb?-1:1)}else return}v=u*X-z*x;W=z*R-L*X;U=L*x-u*R;if(v||W||U){var ga=v*v+W*W+U*U;0<ga&&(ga=1/Math.sqrt(ga));v*=ga;W*=ga;U*=ga;var ma=v*C+W*Aa+U*na,Ja=v*La+W*Ba+U*ta;0>ma&&(ma=-ma);0>Ja&&(Ja=-Ja);var Z=ma+Ja,$a=v*S+W*ha+U*ea,Oa=v*w+W*V+U*ia;0>$a&&($a=-$a);0>Oa&&(Oa=-Oa);var aa=$a+Oa,fa=v*q+W*t+U*A,nc=Z+aa,xa=0>fa,Fc=xa?-fa:fa;if(Fc<nc){var Yi=nc-Fc;Yi<Y&&(Y=Yi,oa=7,ca=v,Ma=W,va=U,ua=xa?-1:1)}else return}v=u*qa-z*Da;W=z*dd-L*qa;U=L*Da-u*dd;if(v||W||U){var wa=v*v+W*W+U*U;0<wa&&(wa=1/Math.sqrt(wa));v*=wa;W*=wa;U*=wa;var oj=v*C+W*Aa+U*na,pa=v*La+W*Ba+U*ta;0>oj&&(oj=-oj);0>pa&&(pa=-pa);var Z=oj+pa,Ca=v*S+W*ha+U*ea,xd=v*da+W*M+U*T;0>Ca&&(Ca=-Ca);0>xd&&(xd=-xd);var aa=Ca+xd,fa=v*q+W*t+U*A,Kj=Z+aa,Ka=0>fa,de=Ka?-fa:fa;if(de<Kj){var Ic=Kj-de;Ic<Y&&(Y=Ic,oa=8,ca=v,Ma=W,va=U,ua=Ka?-1:1)}else return}v=D*mc-Ib*H;W=Ib*K-n*mc;U=n*H-D*K;if(v||W||U){var Yb=v*v+W*W+U*U;0<Yb&&(Yb=1/Math.sqrt(Yb));v*=Yb;W*=Yb;U*=Yb;var oc=v*ba+W*za+U*Ta,Id=v*La+W*Ba+U*ta;0>oc&&(oc=-oc);0>Id&&(Id=-Id);var Z=oc+Id,$d=v*da+W*M+U*T,rc=v*w+W*V+U*ia;0>$d&&($d=-$d);0>rc&&(rc=-rc);var aa=$d+rc,fa=v*q+W*t+U*A,Jc=Z+aa,Ua=0>fa,eb=Ua?-fa:fa;if(eb<Jc){var Zi=Jc-eb;Zi<Y&&(Y=Zi,oa=9,ca=v,Ma=W,va=U,ua=Ua?-1:1)}else return}v=D*X-Ib*x;W=Ib*R-n*X;U=n*x-D*R;if(v||W||U){var hc=v*v+W*W+U*U;0<hc&&(hc=1/Math.sqrt(hc));v*=hc;W*=hc;U*=hc;var uc=v*ba+W*za+U*Ta,gc=v*La+W*Ba+U*ta;0>uc&&(uc=-uc);0>gc&&(gc=-gc);var Z=uc+gc,Xc=v*S+W*ha+U*ea,Eb=v*w+W*V+U*ia;0>Xc&&(Xc=-Xc);0>Eb&&(Eb=-Eb);var aa=Xc+Eb,fa=v*q+W*t+U*A,Ng=Z+aa,qi=0>fa,gb=qi?-fa:fa;if(gb<Ng){var Qa=Ng-gb;Qa<Y&&(Y=Qa,oa=10,ca=v,Ma=W,va=U,ua=qi?-1:1)}else return}v=D*qa-Ib*Da;W=Ib*dd-n*qa;U=n*Da-D*dd;if(v||W||U){var xf=v*v+W*W+U*U;0<xf&&(xf=1/Math.sqrt(xf));v*=xf;W*=xf;U*=xf;var ic=v*ba+W*za+U*Ta,Og=v*La+W*Ba+U*ta;0>ic&&(ic=-ic);0>Og&&(Og=-Og);var Z=ic+Og,pb=v*S+W*ha+U*ea,Bb=v*da+W*M+U*T;0>pb&&(pb=-pb);0>Bb&&(Bb=-Bb);var aa=pb+Bb,fa=v*q+W*t+U*A,Pg=Z+aa,sc=0>fa,Jd=sc?-fa:fa;if(Jd<Pg){var Lj=Pg-Jd;Lj<Y&&(Y=Lj,oa=11,ca=v,Ma=W,va=U,ua=sc?-1:1)}else return}v=B*mc-E*H;W=E*K-y*mc;U=y*H-B*K;if(v||W||U){var Gc=v*v+W*W+U*U;0<Gc&&(Gc=1/Math.sqrt(Gc));v*=Gc;W*=Gc;U*=Gc;var Zg=v*ba+W*za+U*Ta,vc=v*C+W*Aa+U*na;0>Zg&&(Zg=-Zg);0>vc&&(vc=-vc);var Z=Zg+vc,Fb=v*da+W*M+U*T,ub=v*w+W*V+U*ia;0>Fb&&(Fb=-Fb);0>ub&&(ub=-ub);var aa=Fb+ub,fa=v*q+W*t+U*A,Ob=Z+aa,Mj=0>fa,Qi=Mj?-fa:fa;if(Qi<Ob){var Qb=Ob-Qi;Qb<Y&&(Y=Qb,oa=12,ca=v,Ma=W,va=U,ua=Mj?-1:1)}else return}v=B*X-E*x;W=E*R-y*X;U=y*x-B*R;if(v||W||U){var Jb=v*v+W*W+U*U;0<Jb&&(Jb=1/Math.sqrt(Jb));v*=Jb;W*=Jb;U*=Jb;var Hb=v*ba+W*za+U*Ta,Lb=v*C+W*Aa+U*na;0>Hb&&(Hb=-Hb);0>Lb&&(Lb=-Lb);var Z=Hb+Lb,yf=v*S+W*ha+U*ea,Gb=v*w+W*V+U*ia;0>yf&&(yf=-yf);0>Gb&&(Gb=-Gb);var aa=yf+Gb,fa=v*q+W*t+U*A,Nb=Z+aa,Nj=0>fa,ri=Nj?-fa:fa;if(ri<Nb){var kd=Nb-ri;kd<Y&&(Y=kd,oa=13,ca=v,Ma=W,va=U,ua=Nj?-1:1)}else return}v=B*qa-E*Da;W=E*dd-y*qa;U=y*Da-B*dd;if(v||W||U){var $i=v*v+W*W+U*U;0<$i&&($i=1/Math.sqrt($i));v*=$i;W*=$i;U*=$i;var Sb=v*ba+W*za+U*Ta,fd=v*C+W*Aa+U*na;0>Sb&&(Sb=-Sb);0>fd&&(fd=-fd);var Z=Sb+fd,Rc=v*S+W*ha+U*ea,zc=v*da+W*M+U*T;0>Rc&&(Rc=-Rc);0>zc&&(zc=-zc);var aa=Rc+zc,fa=v*q+W*t+U*A,gd=Z+aa,Yc=0>fa,od=Yc?-fa:fa;if(od<gd){var lb=gd-od;lb<Y&&(Y=lb,oa=14,ca=v,Ma=W,va=U,ua=Yc?-1:1)}else return}if(6<=oa){ca*=ua;Ma*=ua;va*=ua;var Rb=(oa-6)/3|0,Wb=oa-6-3*Rb,Zc,Kc,Lc,xc,Cc,Dc,pd,yd,sd,td,zd,$g;switch(Rb){case 0:pd=L;yd=u;sd=z;var Kb=0<La*ca+Ba*Ma+ta*va;0<C*ca+Aa*Ma+na*va?Kb?(Zc=C+La,Kc=Aa+Ba,Lc=na+ta):(Zc=C-La,Kc=Aa-Ba,Lc=na-ta):Kb?(Zc=La-C,Kc=Ba-Aa,Lc=ta-na):(Zc=C+La,Kc=Aa+Ba,Lc=na+ta,Zc=-Zc,Kc=-Kc,Lc=-Lc);break;case 1:pd=n;yd=D;sd=Ib;var Mb=0<La*ca+Ba*Ma+ta*va;0<ba*ca+za*Ma+Ta*va?Mb?(Zc=ba+La,Kc=za+Ba,Lc=Ta+ta):(Zc=ba-La,Kc=za-Ba,Lc=Ta-ta):Mb?(Zc=La-ba,Kc=Ba-za,Lc=ta-Ta):(Zc=ba+La,Kc=za+Ba,Lc=Ta+ta,Zc=-Zc,Kc=-Kc,Lc=-Lc);break;default:pd=y;yd=B;sd=E;var Tb=0<C*ca+Aa*Ma+na*va;0<ba*ca+za*Ma+Ta*va?Tb?(Zc=ba+C,Kc=za+Aa,Lc=Ta+na):(Zc=ba-C,Kc=za-Aa,Lc=Ta-na):Tb?(Zc=C-ba,Kc=Aa-za,Lc=na-Ta):(Zc=ba+C,Kc=za+Aa,Lc=Ta+na,Zc=-Zc,Kc=-Kc,Lc=-Lc)}Zc=l+Zc;Kc=g+Kc;Lc=k+Lc;switch(Wb){case 0:td=K;zd=H;$g=mc;var Pb=0<w*ca+V*Ma+ia*va;0<da*ca+M*Ma+T*va?Pb?(xc=da+w,Cc=M+V,Dc=T+ia):(xc=da-w,Cc=M-V,Dc=T-ia):Pb?(xc=w-da,Cc=V-M,Dc=ia-T):(xc=da+w,Cc=M+V,Dc=T+ia,xc=-xc,Cc=-Cc,Dc=-Dc);break;case 1:td=R;zd=x;$g=X;var $b=0<w*ca+V*Ma+ia*va;0<S*ca+ha*Ma+ea*va?$b?(xc=S+w,Cc=ha+V,Dc=ea+ia):(xc=S-w,Cc=ha-V,Dc=ea-ia):$b?(xc=w-S,Cc=V-ha,Dc=ia-ea):(xc=S+w,Cc=ha+V,Dc=ea+ia,xc=-xc,Cc=-Cc,Dc=-Dc);break;default:td=dd;zd=Da;$g=qa;var Sd=0<da*ca+M*Ma+T*va;0<S*ca+ha*Ma+ea*va?Sd?(xc=S+da,Cc=ha+M,Dc=ea+T):(xc=S-da,Cc=ha-M,Dc=ea-T):Sd?(xc=da-S,Cc=M-ha,Dc=T-ea):(xc=S+da,Cc=ha+M,Dc=ea+T,xc=-xc,Cc=-Cc,Dc=-Dc)}xc=m-xc;Cc=p-Cc;Dc=r-Dc;var ie,pc,je;ie=Zc-xc;pc=Kc-Cc;je=Lc-Dc;var dc=pd*td+yd*zd+sd*$g,ac=pd*ie+yd*pc+sd*je,kc=td*ie+zd*pc+$g*je,lc=1/(1-dc*dc),Ge=(dc*kc-ac)*lc,He=(kc-dc*ac)*lc,Se,Te,Ie,Je,ae,xe;Se=Zc+pd*Ge;Te=Kc+yd*Ge;Ie=Lc+sd*Ge;Je=xc+td*He;ae=Cc+zd*He;xe=Dc+$g*He;this.Rh(a,-ca,-Ma,-va);this.Wg(a,Se,Te,Ie,Je,ae,xe,Y,4)}else{var $c,Sc,ld,bc;if(3<=oa){ua=-ua;q=-q;t=-t;A=-A;var tc=f,f=h,h=tc,Ad=Ub,Ub=Ea,Ea=Ad,Bd=ya,ya=O,O=Bd,ud=I,I=sa,sa=ud;$c=l;Sc=g;ld=k;l=m;g=p;k=r;m=$c;p=Sc;r=ld;$c=L;Sc=u;ld=z;L=K;u=H;z=mc;K=$c;H=Sc;mc=ld;$c=n;Sc=D;ld=Ib;n=R;D=x;Ib=X;R=$c;x=Sc;X=ld;$c=y;Sc=B;ld=E;y=dd;B=Da;E=qa;dd=$c;Da=Sc;qa=ld;$c=ba;Sc=za;ld=Ta;ba=S;za=ha;Ta=ea;S=$c;ha=Sc;ea=ld;$c=C;Sc=Aa;ld=na;C=da;Aa=M;na=T;da=$c;M=Sc;T=ld;$c=La;Sc=Ba;ld=ta;La=w;Ba=V;ta=ia;w=$c;V=Sc;ia=ld;oa-=3;bc=!0}else bc=!1;var ke,le,me,Cd,Dd,hd,Kd,ee,Td,qd,Ud,Ld,Md,ne;switch(oa){case 0:ke=ba;le=za;me=Ta;Cd=L;Dd=u;hd=z;Kd=n;ee=D;Td=Ib;qd=y;Ud=B;Ld=E;Md=ya;ne=I;break;case 1:ke=C;le=Aa;me=na;Cd=n;Dd=D;hd=Ib;Kd=y;ee=B;Td=E;qd=L;Ud=u;Ld=z;Md=I;ne=Ub;break;default:ke=La,le=Ba,me=ta,Cd=y,Dd=B,hd=E,Kd=L,ee=u,Td=z,qd=n,Ud=D,Ld=Ib,Md=Ub,ne=ya}if(0>ua){ke=-ke;le=-le;me=-me;Cd=-Cd;Dd=-Dd;hd=-hd;$c=Kd;Sc=ee;ld=Td;Kd=qd;ee=Ud;Td=Ld;qd=$c;Ud=Sc;Ld=ld;var Ue=Md;Md=ne;ne=Ue}ke+=l;le+=g;me+=k;var ad=1,Ed=0,id=Cd*K+Dd*H+hd*mc;id<ad&&(ad=id,Ed=0);-id<ad&&(ad=-id,Ed=1);id=Cd*R+Dd*x+hd*X;id<ad&&(ad=id,Ed=2);-id<ad&&(ad=-id,Ed=3);id=Cd*dd+Dd*Da+hd*qa;id<ad&&(ad=id,Ed=4);-id<ad&&(ad=-id,Ed=5);var bd,cd,Vc,Mc,Nc,Ec,yc,Bc,Ac,Tc,Hc,Oc;switch(Ed){case 0:bd=S+da;cd=ha+M;Vc=ea+T;bd+=w;cd+=V;Vc+=ia;Mc=S-da;Nc=ha-M;Ec=ea-T;Mc+=w;Nc+=V;Ec+=ia;yc=S-da;Bc=ha-M;Ac=ea-T;yc-=w;Bc-=V;Ac-=ia;Tc=S+da;Hc=ha+M;Oc=ea+T;Tc-=w;Hc-=V;Oc-=ia;break;case 1:bd=da-S;cd=M-ha;Vc=T-ea;bd+=w;cd+=V;Vc+=ia;Mc=da-S;Nc=M-ha;Ec=T-ea;Mc-=w;Nc-=V;Ec-=ia;yc=S+da;Bc=ha+M;Ac=ea+T;yc=-yc;Bc=-Bc;Ac=-Ac;yc-=w;Bc-=V;Ac-=ia;Tc=S+da;Hc=ha+M;Oc=ea+T;Tc=-Tc;Hc=-Hc;Oc=-Oc;Tc+=w;Hc+=V;Oc+=ia;break;case 2:bd=S+da;cd=ha+M;Vc=ea+T;bd+=w;cd+=V;Vc+=ia;Mc=S+da;Nc=ha+M;Ec=ea+T;Mc-=w;Nc-=V;Ec-=ia;yc=da-S;Bc=M-ha;Ac=T-ea;yc-=w;Bc-=V;Ac-=ia;Tc=da-S;Hc=M-ha;Oc=T-ea;Tc+=w;Hc+=V;Oc+=ia;break;case 3:bd=S-da;cd=ha-M;Vc=ea-T;bd+=w;cd+=V;Vc+=ia;Mc=S+da;Nc=ha+M;Ec=ea+T;Mc=-Mc;Nc=-Nc;Ec=-Ec;Mc+=w;Nc+=V;Ec+=ia;yc=S+da;Bc=ha+M;Ac=ea+T;yc=-yc;Bc=-Bc;Ac=-Ac;yc-=w;Bc-=V;Ac-=ia;Tc=S-da;Hc=ha-M;Oc=ea-T;Tc-=w;Hc-=V;Oc-=ia;break;case 4:bd=S+da;cd=ha+M;Vc=ea+T;bd+=w;cd+=V;Vc+=ia;Mc=da-S;Nc=M-ha;Ec=T-ea;Mc+=w;Nc+=V;Ec+=ia;yc=S+da;Bc=ha+M;Ac=ea+T;yc=-yc;Bc=-Bc;Ac=-Ac;yc+=w;Bc+=V;Ac+=ia;Tc=S-da;Hc=ha-M;Oc=ea-T;Tc+=w;Hc+=V;Oc+=ia;break;default:bd=S+da,cd=ha+M,Vc=ea+T,bd-=w,cd-=V,Vc-=ia,Mc=S-da,Nc=ha-M,Ec=ea-T,Mc-=w,Nc-=V,Ec-=ia,yc=S+da,Bc=ha+M,Ac=ea+T,yc=-yc,Bc=-Bc,Ac=-Ac,yc-=w,Bc-=V,Ac-=ia,Tc=da-S,Hc=M-ha,Oc=T-ea,Tc-=w,Hc-=V,Oc-=ia}bd+=q;cd+=t;Vc+=A;Mc+=q;Nc+=t;Ec+=A;yc+=q;Bc+=t;Ac+=A;Tc+=q;Hc+=t;Oc+=A;var oe=this.Xg;oe.w=Md;oe.Rj=ne;oe.fd=0;oe.gc=0;var lf=this.Xg,md=lf.Xb[lf.fd++];md.x=bd*Kd+cd*ee+Vc*Td;md.y=bd*qd+cd*Ud+Vc*Ld;md.Pa=bd;md.Qa=cd;md.Ra=Vc;var Fd=this.Xg,ed=Fd.Xb[Fd.fd++];ed.x=Mc*Kd+Nc*ee+Ec*Td;ed.y=Mc*qd+Nc*Ud+Ec*Ld;ed.Pa=Mc;ed.Qa=Nc;ed.Ra=Ec;var vd=this.Xg,jd=vd.Xb[vd.fd++];jd.x=yc*Kd+Bc*ee+Ac*Td;jd.y=yc*qd+Bc*Ud+Ac*Ld;jd.Pa=yc;jd.Qa=Bc;jd.Ra=Ac;var nd=this.Xg,mf=nd.Xb[nd.fd++];mf.x=Tc*Kd+Hc*ee+Oc*Td;mf.y=Tc*qd+Hc*Ud+Oc*Ld;mf.Pa=Tc;mf.Qa=Hc;mf.Ra=Oc;this.Xg.clip();this.Xg.reduce();var jc,qc,Zb;bc?(jc=Cd,qc=Dd,Zb=hd):(jc=-Cd,qc=-Dd,Zb=-hd);this.Rh(a,jc,qc,Zb);for(var Qc=0,Ri=this.Xg.fd;Qc<Ri;){var fe=Qc++,pe=this.Xg.Xb[fe],ge,rd,Vd;ge=pe.Pa;rd=pe.Qa;Vd=pe.Ra;ge+=l;rd+=g;Vd+=k;var wd=(ke-ge)*Cd+(le-rd)*Dd+(me-Vd)*hd,Wd,qe,he;Wd=ge+Cd*wd;qe=rd+Dd*wd;he=Vd+hd*wd;wd>-F.contactPersistenceThreshold&&(bc?this.Wg(a,ge,rd,Vd,Wd,qe,he,wd,fe):this.Wg(a,Wd,qe,he,ge,rd,Vd,wd,fe))}}}}}}}}}});Ej.prototype={clip:function(){for(var a=0,b=this.fd;a<b;){var e=a++,d=this.Xb[e],e=this.Xb[(e+1)%this.fd],c=this.w+d.x,f=this.w+e.x;if(0<c&&0<f)e=this.Gb[this.gc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra;else if(0<c&&0>=f){var h=this.Gb[this.gc++];h.x=d.x;h.y=d.y;h.Pa=d.Pa;h.Qa=d.Qa;h.Ra=d.Ra;c/=c-f;f=this.Gb[this.gc++];f.x=d.x+(e.x-d.x)*c;f.y=d.y+(e.y-d.y)*c;f.Pa=d.Pa+(e.Pa-d.Pa)*c;f.Qa=d.Qa+(e.Qa-d.Qa)*c;f.Ra=d.Ra+(e.Ra-d.Ra)*c}else 0>=c&&0<f&&(c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c)}a=this.Xb;this.Xb=this.Gb;this.Gb=a;this.fd=this.gc;a=this.gc=0;for(b=this.fd;a<b;)e=a++,d=this.Xb[e],e=this.Xb[(e+1)%this.fd],c=this.w-d.x,f=this.w-e.x,0<c&&0<f?(e=this.Gb[this.gc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra):0<c&&0>=f?(h=this.Gb[this.gc++],h.x=d.x,h.y=d.y,h.Pa=d.Pa,h.Qa=d.Qa,h.Ra=d.Ra,c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c):0>=c&&0<f&&(c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c);a=this.Xb;this.Xb=this.Gb;this.Gb=a;this.fd=this.gc;a=this.gc=0;for(b=this.fd;a<b;)e=a++,d=this.Xb[e],e=this.Xb[(e+1)%this.fd],c=this.Rj+d.y,f=this.Rj+e.y,0<c&&0<f?(e=this.Gb[this.gc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra):0<c&&0>=f?(h=this.Gb[this.gc++],h.x=d.x,h.y=d.y,h.Pa=d.Pa,h.Qa=d.Qa,h.Ra=d.Ra,c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c):0>=c&&0<f&&(c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c);a=this.Xb;this.Xb=this.Gb;this.Gb=a;this.fd=this.gc;a=this.gc=0;for(b=this.fd;a<b;)e=a++,d=this.Xb[e],e=this.Xb[(e+1)%this.fd],c=this.Rj-d.y,f=this.Rj-e.y,0<c&&0<f?(e=this.Gb[this.gc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra):0<c&&0>=f?(h=this.Gb[this.gc++],h.x=d.x,h.y=d.y,h.Pa=d.Pa,h.Qa=d.Qa,h.Ra=d.Ra,c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c):0>=c&&0<f&&(c/=c-f,f=this.Gb[this.gc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c);a=this.Xb;this.Xb=this.Gb;this.Gb=a;this.fd=this.gc;this.gc=0},reduce:function(){if(!(4>this.fd)){for(var a=-Infinity,b=Infinity,e=-Infinity,d=Infinity,c=null,f=null,h=null,l=null,g=0,k=this.fd;g<k;){var m=this.Xb[g++],p=1*m.x+1*m.y,r=-1*m.x+1*m.y;p>a&&(a=p,c=m);p<b&&(b=p,f=m);r>e&&(e=r,h=m);r<d&&(d=r,l=m)}a=this.Gb[this.gc++];a.x=c.x;a.y=c.y;a.Pa=c.Pa;a.Qa=c.Qa;a.Ra=c.Ra;c=this.Gb[this.gc++];c.x=h.x;c.y=h.y;c.Pa=h.Pa;c.Qa=h.Qa;c.Ra=h.Ra;h=this.Gb[this.gc++];h.x=f.x;h.y=f.y;h.Pa=f.Pa;h.Qa=f.Qa;h.Ra=f.Ra;f=this.Gb[this.gc++];f.x=l.x;f.y=l.y;f.Pa=l.Pa;f.Qa=l.Qa;f.Ra=l.Ra;l=this.Xb;this.Xb=this.Gb;this.Gb=l;this.fd=this.gc;this.gc=0}}};Bj.prototype={df:function(){null!=this.Ji&&this.Ji.clear()}};mi.wa=lc;mi.prototype=gb(lc.prototype,{Lh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k,m;f=d.f;h=d.m;l=d.g;g=c.f;k=c.m;m=c.g;var p=b.Db,r=e.Db;b=b.ab;e=e.ab;var q,t,A,L,u,z;q=d.v+f*-p;t=d.A+h*-p;A=d.B+l*-p;f=d.v+f*p;L=d.A+h*p;u=d.B+l*p;h=c.v+g*-r;l=c.A+k*-r;d=c.B+m*-r;g=c.v+g*r;k=c.A+k*r;z=c.B+m*r;var n,D,Ib;n=q-h;D=t-l;Ib=A-d;f-=q;L-=t;c=u-A;m=g-h;u=k-l;g=z-d;k=-(n*f+D*L+Ib*c);n=n*m+D*u+Ib*g;D=p*p*4;Ib=f*m+L*u+c*g;z=r*r*4;D||z?D?z?((r=D*z-Ib*Ib)?(p=Ib*n+z*k,p=0>p?0:p>r?1:p/r):p=0,r=p*Ib+n,0>r?(r=0,p=0>k?0:k>D?1:k/D):r>z?(r=1,p=Ib+k,p=0>p?0:p>D?1:p/D):r/=z):(r=0,p=0>k?0:k>D?1:k/D):(p=0,r=0>n?0:n>z?1:n/z):r=p=0;q+=f*p;t+=L*p;A+=c*p;h+=m*r;l+=u*r;d+=g*r;L=q-h;f=t-l;r=A-d;p=L*L+f*f+r*r;p>=(b+e)*(b+e)||(p=Math.sqrt(p),0<p?(L*=1/p,f*=1/p,r*=1/p):(L=1,r=f=0),this.Rh(a,L,f,r),this.Wg(a,q+L*-b,t+f*-b,A+r*-b,h+L*e,l+f*e,d+r*e,b+e-p,0))}});li.wa=lc;li.prototype=gb(lc.prototype,{Lh:function(a,b,e,d,c,f){var h=lb.mb;d=h.Nj(b,e,d,c,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=dc.SUCCEEDED)console.log("src/oimo/collision/narrowphase/detector/GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(h.distance>b.Rb+e.Rb)){var l,g,k;f=h.closestPoint1;d=f.x;c=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,p,r;m=d-l;p=c-g;r=f-k;if(m*m+p*p+r*r){0>h.distance&&(m=-m,p=-p,r=-r);var q=m*m+p*p+r*r;0<q&&(q=1/Math.sqrt(q));m*=q;p*=q;r*=q;this.Rh(a,m,p,r);d+=m*-b.Rb;c+=p*-b.Rb;f+=r*-b.Rb;l+=m*e.Rb;g+=p*e.Rb;k+=r*e.Rb;this.Wg(a,d,c,f,l,g,k,b.Rb+e.Rb-h.distance,0)}}}});ki.wa=lc;ki.prototype=gb(lc.prototype,{Lh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k;f=e.Te;h=e.Ue;e=e.Ve;l=-f;g=-h;k=-e;b=b.ab;var m,p,r;m=d.v-c.v;p=d.A-c.A;r=d.B-c.B;var q,t;q=c.o*m+c.i*p+c.l*r;t=c.f*m+c.m*p+c.g*r;m=c.h*m+c.j*p+c.s*r;if(l<q&&f>q&&g<t&&h>t&&k<m&&e>m){var A;p=f-(0>q?-q:q);A=h-(0>t?-t:t);var L=e-(0>m?-m:m),u,z;p<A?p<L?(l=0<q?1:-1,u=k=g=0,r=z=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),z=u=1,r=0,p=L):A<L?(0<t?(l=0,g=1):(l=0,g=-1),k=0,u=1,z=0,r=1,p=A):(0<m?(g=l=0,k=1):(g=l=0,k=-1),z=u=1,r=0,p=L);q=l*f+u*q;h=g*h+z*t;m=k*e+r*m;e=c.o*q+c.f*h+c.h*m;t=c.i*q+c.m*h+c.j*m;h=c.l*q+c.g*h+c.s*m;m=c.o*l+c.f*g+c.h*k;q=c.i*l+c.m*g+c.j*k;f=c.l*l+c.g*g+c.s*k;this.Rh(a,m,q,f);this.Wg(a,d.v+m*-b,d.A+q*-b,d.B+f*-b,c.v+e,c.A+t,c.B+h,p,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=q<f?q:f,p=t<h?t:h,r=m<e?m:e,f=f>l?f:l,p=p>g?p:g,r=r>k?r:k,q-=f,l=t-p,g=m-r,e=q*q+l*l+g*g,e>=b*b||(e=Math.sqrt(e),t=c.o*f+c.f*p+c.h*r,h=c.i*f+c.m*p+c.j*r,m=c.l*f+c.g*p+c.s*r,k=c.o*q+c.f*l+c.h*g,f=c.i*q+c.m*l+c.j*g,q=c.l*q+c.g*l+c.s*g,g=k*k+f*f+q*q,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,q*=g,this.Rh(a,l,f,q),this.Wg(a,d.v+l*-b,d.A+f*-b,d.B+q*-b,c.v+t,c.A+h,c.B+m,b-e,0))}});ji.wa=lc;ji.prototype=gb(lc.prototype,{Lh:function(a,b,e,d,c){a.incremental=!1;var f=e.Db;b=b.ab;e=e.ab;var h,l,g;h=c.f;l=c.m;g=c.g;var k,m;k=d.v;m=d.A;d=d.B;var p,r,q,t;p=c.v+h*-f;r=c.A+l*-f;q=c.B+g*-f;h=c.v+h*f;l=c.A+l*f;t=c.B+g*f;c=h-p;g=l-r;l=t-q;f=f*f*4;h=(k-p)*c+(m-r)*g+(d-q)*l;h=0>h?0:h>f?1:h/f;f=p+c*h;r+=g*h;q+=l*h;l=k-f;g=m-r;p=d-q;c=l*l+g*g+p*p;c>=(b+e)*(b+e)||(c=Math.sqrt(c),0<c?(l*=1/c,g*=1/c,p*=1/c):(l=1,p=g=0),this.Rh(a,l,g,p),this.Wg(a,k+l*-b,m+g*-b,d+p*-b,f+l*e,r+g*e,q+p*e,b+e-c,0))}});ii.wa=lc;ii.prototype=gb(lc.prototype,{Lh:function(a,b,e,d,c){a.incremental=!1;var f,h,l;f=d.v-c.v;h=d.A-c.A;l=d.B-c.B;b=b.ab;e=e.ab;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.Rh(a,f,h,l),this.Wg(a,d.v+f*-b,d.A+h*-b,d.B+l*-b,c.v+f*e,c.A+h*e,c.B+l*e,b+e-g,0))}});Cj.prototype={Oo:function(){for(var a=this.Cd;null!=a;){a.Ca[0].ki=null;a.Ca[0].Gh=null;if(-1==a.Ib[0])return this.vc=2,!1;if(null==a.Hb[0])return this.vc=3,!1;a.Ca[1].ki=null;a.Ca[1].Gh=null;if(-1==a.Ib[1])return this.vc=2,!1;if(null==a.Hb[1])return this.vc=3,!1;a.Ca[2].ki=null;a.Ca[2].Gh=null;if(-1==a.Ib[2])return this.vc=2,!1;if(null==a.Hb[2])return this.vc=3,!1;a=a.M}return!0},Cm:function(a,b,e){if(b.sl!=a){b.sl=a;var d=b.zi;d.x=e.x;d.y=e.y;d.z=e.z;var c=b.Ca[0].Rd;d.x-=c.x;d.y-=c.y;d.z-=c.z;d=b.zi;c=b.wk;b.Gj=0<d.x*c.x+d.y*c.y+d.z*c.z;if(b.Gj){for(d=0;3>d;){var c=d++,f=b.Hb[c];if(null!=f){var h=f.zi;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.Ca[0].Rd;h.x-=l.x;h.y-=l.y;h.z-=l.z;h=f.zi;l=f.wk;f.Gj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.Gj?this.Cm(a,f,e):(h=b.Ca[c],h.Gh=b.Ca[b.Sc[c]],h.ki=f)}}a=b.Hb[0];null!=a&&(e=b.Ib[0],a.Hb[e]=null,a.Ib[e]=-1,b.Hb[0]=null,b.Ib[0]=-1);a=b.Hb[1];null!=a&&(e=b.Ib[1],a.Hb[e]=null,a.Ib[e]=-1,b.Hb[1]=null,b.Ib[1]=-1);a=b.Hb[2];null!=a&&(e=b.Ib[2],a.Hb[e]=null,a.Ib[e]=-1,b.Hb[2]=null,b.Ib[2]=-1);this.Bh--;a=b.ia;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ia=a);b==this.Cd&&(this.Cd=this.Cd.M);b==this.cd&&(this.cd=this.cd.ia);b.M=null;b.ia=null;b.Lk();b.M=this.Qe;this.Qe=b}else this.vc=6}},Mg:function(a,b,e,d){this.vc=0;this.We=4;this.Ca[0]=a;this.Ca[1]=b;this.Ca[2]=e;this.Ca[3]=d;var c=this.Gi,f=a.Rd;c.x=f.x;c.y=f.y;c.z=f.z;f=b.Rd;c.x+=f.x;c.y+=f.y;c.z+=f.z;f=e.Rd;c.x+=f.x;c.y+=f.y;c.z+=f.z;f=d.Rd;c.x+=f.x;c.y+=f.y;c.z+=f.z;c.x*=.25;c.y*=.25;c.z*=.25;c=this.Qe;null!=c?(this.Qe=c.M,c.M=null):c=new Ee;f=this.Qe;null!=f?(this.Qe=f.M,f.M=null):f=new Ee;var h=this.Qe;null!=h?(this.Qe=h.M,h.M=null):h=new Ee;var l=this.Qe;null!=l?(this.Qe=l.M,l.M=null):l=new Ee;c.Aa(a,b,e,this.Gi,!0)||(this.vc=1);f.Aa(a,b,d,this.Gi,!0)||(this.vc=1);h.Aa(a,e,d,this.Gi,!0)||(this.vc=1);l.Aa(b,e,d,this.Gi,!0)||(this.vc=1);c.lh(f)||(this.vc=1);c.lh(h)||(this.vc=1);c.lh(l)||(this.vc=1);f.lh(h)||(this.vc=1);f.lh(l)||(this.vc=1);h.lh(l)||(this.vc=1);this.Bh++;null==this.Cd?this.Cd=c:(this.cd.M=c,c.ia=this.cd);this.cd=c;this.Bh++;null==this.Cd?this.Cd=f:(this.cd.M=f,f.ia=this.cd);this.cd=f;this.Bh++;null==this.Cd?this.Cd=h:(this.cd.M=h,h.ia=this.cd);this.cd=h;this.Bh++;null==this.Cd?this.Cd=l:(this.cd.M=l,l.ia=this.cd);this.cd=l;return!this.vc},qn:function(a,b){this.Ca[this.We++]=a;var e=b.Ca[0];this.Cm(this.We,b,a.Rd);if(0!=this.vc)return!1;b=e;for(var d=null,c=null;;){if(null==b.Gh)return this.vc=4,!1;if(null==b.ki)return this.vc=5,!1;var f=this.Qe;null!=f?(this.Qe=f.M,f.M=null):f=new Ee;null==c&&(c=f);f.Aa(b,b.Gh,a,this.Gi,!1)||(this.vc=1);if(0!=this.vc)return!1;this.Bh++;null==this.Cd?this.Cd=f:(this.cd.M=f,f.ia=this.cd);this.cd=f;f.lh(b.ki)||(this.vc=1);null==d||f.lh(d)||(this.vc=1);d=f;b=b.Gh;if(b==e)break}d.lh(c)||(this.vc=1);return 0==this.vc?this.Oo():!1}};Ee.prototype={Aa:function(a,b,e,d,c){null==c&&(c=!1);var f,h,l,g,k,m,p,r,q,t,A,L,u=a.Rd;f=u.x;h=u.y;l=u.z;var z=b.Rd;g=z.x;k=z.y;m=z.z;var n=e.Rd;p=n.x;r=n.y;q=n.z;t=d.x;A=d.y;L=d.z;var D,Ib,y,B,E,K,H,mc,R;D=g-f;Ib=k-h;y=m-l;B=p-f;E=r-h;K=q-l;H=f-t;mc=h-A;R=l-L;var x,X,F;x=Ib*K-y*E;X=y*B-D*K;F=D*E-Ib*B;var Da=!1;if(0>H*x+mc*X+R*F)if(c){var qa=b;b=e;e=qa;x*=-1;X*=-1;F*=-1}else Da=!0;this.Ca[0]=a;this.Ca[1]=b;this.Ca[2]=e;var Ub=this.wk;Ub.x=x;Ub.y=X;Ub.z=F;var ya=a.Rd,I=b.Rd,Ea=e.Rd,O=this.zi,sa,ba,za,Ta,C,Aa,na,La,Ba,ta,S,ha,ea,da,M,T,w,V;sa=ya.x;ba=ya.y;za=ya.z;Ta=I.x;C=I.y;Aa=I.z;na=Ea.x;La=Ea.y;Ba=Ea.z;ta=Ta-sa;S=C-ba;ha=Aa-za;ea=na-Ta;da=La-C;M=Ba-Aa;T=sa-na;w=ba-La;V=za-Ba;var ia,Y,oa;ia=S*M-ha*da;Y=ha*ea-ta*M;oa=ta*da-S*ea;var ua,ca,Ma,va,Z,Pa,Fa,Q,aa;ua=S*oa-ha*Y;ca=ha*ia-ta*oa;Ma=ta*Y-S*ia;va=da*oa-M*Y;Z=M*ia-ea*oa;Pa=ea*Y-da*ia;Fa=w*oa-V*Y;Q=V*ia-T*oa;aa=T*Y-w*ia;var fa=-1,N,ja,Ga;Ga=ja=N=0;if(0>sa*ua+ba*ca+za*Ma){var P,Ya,J,wb,ec,Vb;P=ya.x;Ya=ya.y;J=ya.z;wb=I.x;ec=I.y;Vb=I.z;var Ab,ib,hb;Ab=wb-P;ib=ec-Ya;hb=Vb-J;var ka=Ab*P+ib*Ya+hb*J,ka=-ka/(Ab*Ab+ib*ib+hb*hb);if(0>ka)O.x=P,O.y=Ya,O.z=J;else if(1<ka)O.x=wb,O.y=ec,O.z=Vb;else{var Ia,ab,bb;Ia=P+Ab*ka;ab=Ya+ib*ka;bb=J+hb*ka;O.x=Ia;O.y=ab;O.z=bb}fa=O.x*O.x+O.y*O.y+O.z*O.z;N=O.x;ja=O.y;Ga=O.z}if(0>Ta*va+C*Z+Aa*Pa){var Wa,Va,qb,kb,Sa,Na;Wa=I.x;Va=I.y;qb=I.z;kb=Ea.x;Sa=Ea.y;Na=Ea.z;var Za,vb,mb;Za=kb-Wa;vb=Sa-Va;mb=Na-qb;var xb=Za*Wa+vb*Va+mb*qb,xb=-xb/(Za*Za+vb*vb+mb*mb);if(0>xb)O.x=Wa,O.y=Va,O.z=qb;else if(1<xb)O.x=kb,O.y=Sa,O.z=Na;else{var nb,fb,Re;nb=Wa+Za*xb;fb=Va+vb*xb;Re=qb+mb*xb;O.x=nb;O.y=fb;O.z=Re}var Db=O.x*O.x+O.y*O.y+O.z*O.z;if(0>fa||Db<fa)fa=Db,N=O.x,ja=O.y,Ga=O.z}if(0>na*Fa+La*Q+Ba*aa){var G,sb,jb,Xb,ob,cb;G=ya.x;sb=ya.y;jb=ya.z;Xb=Ea.x;ob=Ea.y;cb=Ea.z;var zb,Xa,tb;zb=Xb-G;Xa=ob-sb;tb=cb-jb;var v=zb*G+Xa*sb+tb*jb,v=-v/(zb*zb+Xa*Xa+tb*tb);if(0>v)O.x=G,O.y=sb,O.z=jb;else if(1<v)O.x=Xb,O.y=ob,O.z=cb;else{var W,U,db;W=G+zb*v;U=sb+Xa*v;db=jb+tb*v;O.x=W;O.y=U;O.z=db}var cc=O.x*O.x+O.y*O.y+O.z*O.z;if(0>fa||cc<fa)fa=cc,N=O.x,ja=O.y,Ga=O.z}if(0<fa)O.x=N,O.y=ja,O.z=Ga;else{var Ra=ia*ia+Y*Y+oa*oa;0<Ra&&(Ra=1/Math.sqrt(Ra));ia*=Ra;Y*=Ra;oa*=Ra;var Ha=ia*ia+Y*Y+oa*oa,Ha=(sa*ia+ba*Y+za*oa)/Ha;N=ia*Ha;ja=Y*Ha;Ga=oa*Ha;O.x=N;O.y=ja;O.z=Ga}var rb=this.zi;this.nk=rb.x*rb.x+rb.y*rb.y+rb.z*rb.z;this.Hb[0]=null;this.Hb[1]=null;this.Hb[2]=null;this.Ib[0]=-1;this.Ib[1]=-1;this.Ib[2]=-1;return!Da},lh:function(a){var b=0;this.Ca[0]==a.Ca[this.Sc[0]]&&this.Ca[this.Sc[0]]==a.Ca[0]&&(this.Hb[0]=a,this.Ib[0]=0,a.Hb[0]=this,a.Ib[0]=0,b=1);this.Ca[0]==a.Ca[this.Sc[1]]&&this.Ca[this.Sc[0]]==a.Ca[1]&&(this.Hb[0]=a,this.Ib[0]=1,a.Hb[1]=this,a.Ib[1]=0,++b);this.Ca[0]==a.Ca[this.Sc[2]]&&this.Ca[this.Sc[0]]==a.Ca[2]&&(this.Hb[0]=a,this.Ib[0]=2,a.Hb[2]=this,a.Ib[2]=0,++b);this.Ca[1]==a.Ca[this.Sc[0]]&&this.Ca[this.Sc[1]]==a.Ca[0]&&(this.Hb[1]=a,this.Ib[1]=0,a.Hb[0]=this,a.Ib[0]=1,++b);this.Ca[1]==a.Ca[this.Sc[1]]&&this.Ca[this.Sc[1]]==a.Ca[1]&&(this.Hb[1]=a,this.Ib[1]=1,a.Hb[1]=this,a.Ib[1]=1,++b);this.Ca[1]==a.Ca[this.Sc[2]]&&this.Ca[this.Sc[1]]==a.Ca[2]&&(this.Hb[1]=a,this.Ib[1]=2,a.Hb[2]=this,a.Ib[2]=1,++b);this.Ca[2]==a.Ca[this.Sc[0]]&&this.Ca[this.Sc[2]]==a.Ca[0]&&(this.Hb[2]=a,this.Ib[2]=0,a.Hb[0]=this,a.Ib[0]=2,++b);this.Ca[2]==a.Ca[this.Sc[1]]&&this.Ca[this.Sc[2]]==a.Ca[1]&&(this.Hb[2]=a,this.Ib[2]=1,a.Hb[1]=this,a.Ib[1]=2,++b);this.Ca[2]==a.Ca[this.Sc[2]]&&this.Ca[this.Sc[2]]==a.Ca[2]&&(this.Hb[2]=a,this.Ib[2]=2,a.Hb[2]=this,a.Ib[2]=2,++b);return 1!=b?!1:!0},Lk:function(){this.ia=this.M=null;this.sl=0;this.Gj=!1;this.nk=0;this.Ca[0]=null;this.Ca[1]=null;this.Ca[2]=null;this.Hb[0]=null;this.Hb[1]=null;this.Hb[2]=null;this.Ib[0]=0;this.Ib[1]=0;this.Ib[2]=0}};te.prototype={Aa:function(a,b,e){var d=this.Rd;d.x=a.x;d.y=a.y;d.z=a.z;a=this.eb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.ib;b.x=e.x;b.y=e.y;b.z=e.z;this.ki=this.Gh=this.M=null;return this},Lk:function(){this.ki=this.Gh=this.M=null}};Dj.prototype={clear:function(){this.$l.R()}};n.prototype={Aa:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},R:function(){this.z=this.y=this.x=0;return this},ie:function(a){return new n(this.x+a.x,this.y+a.y,this.z+a.z)},wa:function(a,b,e){return new n(this.x+a,this.y+b,this.z+e)},Cb:function(a,b){return new n(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},cf:function(a){return new n(this.x-a.x,this.y-a.y,this.z-a.z)},jg:function(a,b,e){return new n(this.x-a,this.y-b,this.z-e)},Ke:function(a){return new n(this.x*a,this.y*a,this.z*a)},hg:function(a,b,e){return new n(this.x*a,this.y*b,this.z*e)},Ge:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},kc:function(a){return new n(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},Fe:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},mb:function(a,b,e){this.x+=a;this.y+=b;this.z+=e;return this},Kb:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},gg:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},kg:function(a,b,e){this.x-=a;this.y-=b;this.z-=e;return this},bf:function(a){this.x*=a;this.y*=a;this.z*=a;return this},ig:function(a,b,e){this.x*=a;this.y*=b;this.z*=e;return this},lc:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},wc:function(a){return new n(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},Dc:function(a){return new n(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},Uc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;a=new n;a.x=b;a.y=e;a.z=d;return a},xc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},Hc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Vc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;this.x=b;this.y=e;this.z=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},He:function(){return this.x*this.x+this.y*this.y+this.z*this.z},Je:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new n(this.x*a,this.y*a,this.z*a)},Ie:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);this.x*=a;this.y*=a;this.z*=a;return this},Wc:function(){return new n(-this.x,-this.y,-this.z)},vd:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},qe:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new n(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"}};Ua.prototype={rg:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},Cb:function(){var a=new n;a.x=this.v;a.y=this.A;a.z=this.B;return a},Kb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},Hc:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Wc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},kc:function(){var a=new I;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},lc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Uc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},Vc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.o=e*d;this.f=-e*f;this.h=c;this.i=b*f+d*a*c;this.m=b*d-a*c*f;this.j=-e*a;this.l=a*f-b*d*c;this.g=d*a+b*c*f;this.s=b*e},wc:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+d*this.l;m=b*this.f+e*this.m+d*this.g;b=b*this.h+e*this.j+d*this.s;e=c*this.o+f*this.i+h*this.l;d=c*this.f+f*this.m+h*this.g;c=c*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=d;this.j=c;this.l=f;this.g=h;this.s=l},xc:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var p=Math.cos(a);d=l*p;c=-l*k;a=m*k+p*h*g;b=m*p-h*g*k;f=-l*h;e=h*k-m*p*g;h=p*h+m*g*k;l*=m;k=d*this.o+c*this.i+g*this.l;m=d*this.f+c*this.m+g*this.g;g=d*this.h+c*this.j+g*this.s;d=a*this.o+b*this.i+f*this.l;c=a*this.f+b*this.m+f*this.g;a=a*this.h+b*this.j+f*this.s;b=e*this.o+h*this.i+l*this.l;f=e*this.f+h*this.m+l*this.g;e=e*this.h+h*this.j+l*this.s;this.o=k;this.f=m;this.h=g;this.i=d;this.m=c;this.j=a;this.l=b;this.g=f;this.s=e},wa:function(){var a=new wa,b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},mb:function(a){var b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},Dc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.o=1-g-d;this.f=k-c;this.h=b+h;this.i=k+c;this.m=1-a-d;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new Ua;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},qe:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this}};lb.kc=function(){return lb.mb};lb.prototype={Nj:function(a,b,e,d,c,f){this.Kj=a;this.Bl=b;this.oc=e;this.Tc=d;var h=this.La,l=this.eb,g=this.ib,k=this.closest,m=this.dir;null!=c?(null==c.Ji&&(c.Ji=new Dj),this.yo(c.Ji)):m.R();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var p,r,q;p=d.v-e.v;r=d.A-e.A;q=d.B-e.B;m.x=p;m.y=r;m.z=q;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.Aa(1,0,0)}this.Ba=0;this.Tf(!1);this.Uf(!1);var t=this.La[this.Ba],A=this.eb[this.Ba];t.x=A.x;t.y=A.y;t.z=A.z;var L=this.ib[this.Ba];t.x-=L.x;t.y-=L.y;t.z-=L.z;this.Ba=1;for(var u=0;40>u;){var z=0;switch(this.Ba){case 1:var n=h[0];k.x=n.x;k.y=n.y;k.z=n.z;z=1;break;case 2:var D,Ib,y,B,E,K,H=h[0];D=H.x;Ib=H.y;y=H.z;var mc=h[1];B=mc.x;E=mc.y;K=mc.z;var R,x,X;R=B-D;x=E-Ib;X=K-y;var F=R*D+x*Ib+X*y,F=-F/(R*R+x*x+X*X);if(0>F)k.x=D,k.y=Ib,k.z=y,z=1;else if(1<F)k.x=B,k.y=E,k.z=K,z=2;else{var Da,qa,I;Da=D+R*F;qa=Ib+x*F;I=y+X*F;k.x=Da;k.y=qa;k.z=I;z=3}break;case 3:var ya=h[0],N=h[1],Ea=h[2],O,sa,ba,za,Ta,C,Aa,na,La,Ba,ta,S,ha,ea,da,M,T,w;O=ya.x;sa=ya.y;ba=ya.z;za=N.x;Ta=N.y;C=N.z;Aa=Ea.x;na=Ea.y;La=Ea.z;Ba=za-O;ta=Ta-sa;S=C-ba;ha=Aa-za;ea=na-Ta;da=La-C;M=O-Aa;T=sa-na;w=ba-La;var V,ia,Y;V=ta*da-S*ea;ia=S*ha-Ba*da;Y=Ba*ea-ta*ha;var oa,ua,ca,Ma,va,Z,Pa,Fa,Q;oa=ta*Y-S*ia;ua=S*V-Ba*Y;ca=Ba*ia-ta*V;Ma=ea*Y-da*ia;va=da*V-ha*Y;Z=ha*ia-ea*V;Pa=T*Y-w*ia;Fa=w*V-M*Y;Q=M*ia-T*V;var aa=-1,fa,J,ja,Ga=0;ja=J=fa=0;if(0>O*oa+sa*ua+ba*ca){var P,Ya,Yg,wb,ec,Vb;P=ya.x;Ya=ya.y;Yg=ya.z;wb=N.x;ec=N.y;Vb=N.z;var Ab,ib,hb;Ab=wb-P;ib=ec-Ya;hb=Vb-Yg;var ka=Ab*P+ib*Ya+hb*Yg,ka=-ka/(Ab*Ab+ib*ib+hb*hb),Ia;if(0>ka)k.x=P,k.y=Ya,k.z=Yg,Ia=1;else if(1<ka)k.x=wb,k.y=ec,k.z=Vb,Ia=2;else{var ab,bb,Wa;ab=P+Ab*ka;bb=Ya+ib*ka;Wa=Yg+hb*ka;k.x=ab;k.y=bb;k.z=Wa;Ia=3}Ga=Ia;aa=k.x*k.x+k.y*k.y+k.z*k.z;fa=k.x;J=k.y;ja=k.z}if(0>za*Ma+Ta*va+C*Z){var Va,qb,kb,Sa,Na,Za;Va=N.x;qb=N.y;kb=N.z;Sa=Ea.x;Na=Ea.y;Za=Ea.z;var vb,mb,xb;vb=Sa-Va;mb=Na-qb;xb=Za-kb;var nb=vb*Va+mb*qb+xb*kb,nb=-nb/(vb*vb+mb*mb+xb*xb),fb;if(0>nb)k.x=Va,k.y=qb,k.z=kb,fb=1;else if(1<nb)k.x=Sa,k.y=Na,k.z=Za,fb=2;else{var Re,Db,G;Re=Va+vb*nb;Db=qb+mb*nb;G=kb+xb*nb;k.x=Re;k.y=Db;k.z=G;fb=3}var sb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>aa||sb<aa)Ga=fb<<1,aa=sb,fa=k.x,J=k.y,ja=k.z}if(0>Aa*Pa+na*Fa+La*Q){var jb,Xb,ob,cb,zb,Xa;jb=ya.x;Xb=ya.y;ob=ya.z;cb=Ea.x;zb=Ea.y;Xa=Ea.z;var tb,v,W;tb=cb-jb;v=zb-Xb;W=Xa-ob;var U=tb*jb+v*Xb+W*ob,U=-U/(tb*tb+v*v+W*W),db;if(0>U)k.x=jb,k.y=Xb,k.z=ob,db=1;else if(1<U)k.x=cb,k.y=zb,k.z=Xa,db=2;else{var cc,Ra,Ha;cc=jb+tb*U;Ra=Xb+v*U;Ha=ob+W*U;k.x=cc;k.y=Ra;k.z=Ha;db=3}var rb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>aa||rb<aa)Ga=db&1|(db&2)<<1,aa=rb,fa=k.x,J=k.y,ja=k.z}if(0<aa)k.x=fa,k.y=J,k.z=ja,z=Ga;else{var yb=V*V+ia*ia+Y*Y;0<yb&&(yb=1/Math.sqrt(yb));V*=yb;ia*=yb;Y*=yb;var Cb=V*V+ia*ia+Y*Y,Cb=(O*V+sa*ia+ba*Y)/Cb;fa=V*Cb;J=ia*Cb;ja=Y*Cb;k.x=fa;k.y=J;k.z=ja;z=7}break;case 4:var la=h[0],ra=h[1],ga=h[2],ma=h[3],Ja,$a,Oa,nc,xa,Fc,Yi,wa,pa,Ca,Ka,xd,Ua,eb,de,Ic,Yb,oc,Id,$d,rc,Jc,gb,pj,Zi,hc,uc;Ja=la.x;$a=la.y;Oa=la.z;nc=ra.x;xa=ra.y;Fc=ra.z;Yi=ga.x;wa=ga.y;pa=ga.z;Ca=ma.x;Ka=ma.y;xd=ma.z;Ua=nc-Ja;eb=xa-$a;de=Fc-Oa;Ic=Yi-Ja;Yb=wa-$a;oc=pa-Oa;Id=Ca-Ja;$d=Ka-$a;rc=xd-Oa;Jc=Yi-nc;gb=wa-xa;pj=pa-Fc;Zi=Ca-nc;hc=Ka-xa;uc=xd-Fc;var gc,Xc,Eb,Ng,qi,pb,Qa,xf,ic,Og,Bb,Fb;gc=eb*oc-de*Yb;Xc=de*Ic-Ua*oc;Eb=Ua*Yb-eb*Ic;Ng=Yb*rc-oc*$d;qi=oc*Id-Ic*rc;pb=Ic*$d-Yb*Id;Qa=$d*de-rc*eb;xf=rc*Ua-Id*de;ic=Id*eb-$d*Ua;Og=hc*pj-uc*gb;Bb=uc*Jc-Zi*pj;Fb=Zi*gb-hc*Jc;var Pg=0<Ua*Og+eb*Bb+de*Fb?1:-1,sc=-1,Jd,ub,Gc,Zg=0;Gc=ub=Jd=0;if(0>(Ja*gc+$a*Xc+Oa*Eb)*Pg){var vc,Jb,Ob,Hb,Lb,Qi,Gb,Qb,Sb,Nb,yf,lb,Rb,Kb,ri,kd,dc,Wb;vc=la.x;Jb=la.y;Ob=la.z;Hb=ra.x;Lb=ra.y;Qi=ra.z;Gb=ga.x;Qb=ga.y;Sb=ga.z;Nb=Hb-vc;yf=Lb-Jb;lb=Qi-Ob;Rb=Gb-Hb;Kb=Qb-Lb;ri=Sb-Qi;kd=vc-Gb;dc=Jb-Qb;Wb=Ob-Sb;var fd,Rc,zc;fd=yf*ri-lb*Kb;Rc=lb*Rb-Nb*ri;zc=Nb*Kb-yf*Rb;var gd,Yc,od,Mb,Tb,pc,Zc,Kc,Lc;gd=yf*zc-lb*Rc;Yc=lb*fd-Nb*zc;od=Nb*Rc-yf*fd;Mb=Kb*zc-ri*Rc;Tb=ri*fd-Rb*zc;pc=Rb*Rc-Kb*fd;Zc=dc*zc-Wb*Rc;Kc=Wb*fd-kd*zc;Lc=kd*Rc-dc*fd;var xc=-1,Cc,Dc,pd,yd=0;pd=Dc=Cc=0;if(0>vc*gd+Jb*Yc+Ob*od){var sd,td,zd,$g,Pb,$b;sd=la.x;td=la.y;zd=la.z;$g=ra.x;Pb=ra.y;$b=ra.z;var ac,bc,kc;ac=$g-sd;bc=Pb-td;kc=$b-zd;var Sd=ac*sd+bc*td+kc*zd,Sd=-Sd/(ac*ac+bc*bc+kc*kc),ie;if(0>Sd)k.x=sd,k.y=td,k.z=zd,ie=1;else if(1<Sd)k.x=$g,k.y=Pb,k.z=$b,ie=2;else{var lc,je,jc;lc=sd+ac*Sd;je=td+bc*Sd;jc=zd+kc*Sd;k.x=lc;k.y=je;k.z=jc;ie=3}yd=ie;xc=k.x*k.x+k.y*k.y+k.z*k.z;Cc=k.x;Dc=k.y;pd=k.z}if(0>Hb*Mb+Lb*Tb+Qi*pc){var tc,qc,Zb,Ge,He,Se;tc=ra.x;qc=ra.y;Zb=ra.z;Ge=ga.x;He=ga.y;Se=ga.z;var Te,Ie,Je;Te=Ge-tc;Ie=He-qc;Je=Se-Zb;var ae=Te*tc+Ie*qc+Je*Zb,ae=-ae/(Te*Te+Ie*Ie+Je*Je),xe;if(0>ae)k.x=tc,k.y=qc,k.z=Zb,xe=1;else if(1<ae)k.x=Ge,k.y=He,k.z=Se,xe=2;else{var $c,Sc,ld;$c=tc+Te*ae;Sc=qc+Ie*ae;ld=Zb+Je*ae;k.x=$c;k.y=Sc;k.z=ld;xe=3}var Qc=k.x*k.x+k.y*k.y+k.z*k.z;if(0>xc||Qc<xc)yd=xe<<1,xc=Qc,Cc=k.x,Dc=k.y,pd=k.z}if(0>Gb*Zc+Qb*Kc+Sb*Lc){var wc,Ad,Bd,ud,ke,le;wc=la.x;Ad=la.y;Bd=la.z;ud=ga.x;ke=ga.y;le=ga.z;var me,Cd,Dd;me=ud-wc;Cd=ke-Ad;Dd=le-Bd;var hd=me*wc+Cd*Ad+Dd*Bd,hd=-hd/(me*me+Cd*Cd+Dd*Dd),Kd;if(0>hd)k.x=wc,k.y=Ad,k.z=Bd,Kd=1;else if(1<hd)k.x=ud,k.y=ke,k.z=le,Kd=2;else{var ee,Td,qd;ee=wc+me*hd;Td=Ad+Cd*hd;qd=Bd+Dd*hd;k.x=ee;k.y=Td;k.z=qd;Kd=3}var Ud=k.x*k.x+k.y*k.y+k.z*k.z;if(0>xc||Ud<xc)yd=Kd&1|(Kd&2)<<1,xc=Ud,Cc=k.x,Dc=k.y,pd=k.z}var Ld;if(0<xc)k.x=Cc,k.y=Dc,k.z=pd,Ld=yd;else{var Md=fd*fd+Rc*Rc+zc*zc;0<Md&&(Md=1/Math.sqrt(Md));fd*=Md;Rc*=Md;zc*=Md;var ne=fd*fd+Rc*Rc+zc*zc,ne=(vc*fd+Jb*Rc+Ob*zc)/ne;Cc=fd*ne;Dc=Rc*ne;pd=zc*ne;k.x=Cc;k.y=Dc;k.z=pd;Ld=7}Zg=Ld;sc=k.x*k.x+k.y*k.y+k.z*k.z;Jd=k.x;ub=k.y;Gc=k.z}if(0>(Ja*Ng+$a*qi+Oa*pb)*Pg){var Ue,ad,Ed,id,bd,cd,Vc,Mc,Nc,Ec,yc,Bc,Ac,Tc,Hc,Oc,oe,lf;Ue=la.x;ad=la.y;Ed=la.z;id=ga.x;bd=ga.y;cd=ga.z;Vc=ma.x;Mc=ma.y;Nc=ma.z;Ec=id-Ue;yc=bd-ad;Bc=cd-Ed;Ac=Vc-id;Tc=Mc-bd;Hc=Nc-cd;Oc=Ue-Vc;oe=ad-Mc;lf=Ed-Nc;var md,Fd,ed;md=yc*Hc-Bc*Tc;Fd=Bc*Ac-Ec*Hc;ed=Ec*Tc-yc*Ac;var vd,jd,nd,mf,Uc,Pc,ve,we,Ri;vd=yc*ed-Bc*Fd;jd=Bc*md-Ec*ed;nd=Ec*Fd-yc*md;mf=Tc*ed-Hc*Fd;Uc=Hc*md-Ac*ed;Pc=Ac*Fd-Tc*md;ve=oe*ed-lf*Fd;we=lf*md-Oc*ed;Ri=Oc*Fd-oe*md;var fe=-1,pe,ge,rd,Vd=0;rd=ge=pe=0;if(0>Ue*vd+ad*jd+Ed*nd){var wd,Wd,qe,he,zf,sh;wd=la.x;Wd=la.y;qe=la.z;he=ga.x;zf=ga.y;sh=ga.z;var tg,ug,vg;tg=he-wd;ug=zf-Wd;vg=sh-qe;var Ke=tg*wd+ug*Wd+vg*qe,Ke=-Ke/(tg*tg+ug*ug+vg*vg),Ve;if(0>Ke)k.x=wd,k.y=Wd,k.z=qe,Ve=1;else if(1<Ke)k.x=he,k.y=zf,k.z=sh,Ve=2;else{var Mf,eg,fg;Mf=wd+tg*Ke;eg=Wd+ug*Ke;fg=qe+vg*Ke;k.x=Mf;k.y=eg;k.z=fg;Ve=3}Vd=Ve;fe=k.x*k.x+k.y*k.y+k.z*k.z;pe=k.x;ge=k.y;rd=k.z}if(0>id*mf+bd*Uc+cd*Pc){var Nf,Of,gg,Pf,Qf,Rf;Nf=ga.x;Of=ga.y;gg=ga.z;Pf=ma.x;Qf=ma.y;Rf=ma.z;var Sf,Tf,Af;Sf=Pf-Nf;Tf=Qf-Of;Af=Rf-gg;var ye=Sf*Nf+Tf*Of+Af*gg,ye=-ye/(Sf*Sf+Tf*Tf+Af*Af),nf;if(0>ye)k.x=Nf,k.y=Of,k.z=gg,nf=1;else if(1<ye)k.x=Pf,k.y=Qf,k.z=Rf,nf=2;else{var Uf,of,hg;Uf=Nf+Sf*ye;of=Of+Tf*ye;hg=gg+Af*ye;k.x=Uf;k.y=of;k.z=hg;nf=3}var Ce=k.x*k.x+k.y*k.y+k.z*k.z;if(0>fe||Ce<fe)Vd=nf<<1,fe=Ce,pe=k.x,ge=k.y,rd=k.z}if(0>Vc*ve+Mc*we+Nc*Ri){var wg,xg,Xd,Nd,Od,yg;wg=la.x;xg=la.y;Xd=la.z;Nd=ma.x;Od=ma.y;yg=ma.z;var zg,Ag,Bg;zg=Nd-wg;Ag=Od-xg;Bg=yg-Xd;var pf=zg*wg+Ag*xg+Bg*Xd,pf=-pf/(zg*zg+Ag*Ag+Bg*Bg),Vf;if(0>pf)k.x=wg,k.y=xg,k.z=Xd,Vf=1;else if(1<pf)k.x=Nd,k.y=Od,k.z=yg,Vf=2;else{var si,ig,ti;si=wg+zg*pf;ig=xg+Ag*pf;ti=Xd+Bg*pf;k.x=si;k.y=ig;k.z=ti;Vf=3}var Wf=k.x*k.x+k.y*k.y+k.z*k.z;if(0>fe||Wf<fe)Vd=Vf&1|(Vf&2)<<1,fe=Wf,pe=k.x,ge=k.y,rd=k.z}var Bf;if(0<fe)k.x=pe,k.y=ge,k.z=rd,Bf=Vd;else{var We=md*md+Fd*Fd+ed*ed;0<We&&(We=1/Math.sqrt(We));md*=We;Fd*=We;ed*=We;var qf=md*md+Fd*Fd+ed*ed,qf=(Ue*md+ad*Fd+Ed*ed)/qf;pe=md*qf;ge=Fd*qf;rd=ed*qf;k.x=pe;k.y=ge;k.z=rd;Bf=7}var Cg=k.x*k.x+k.y*k.y+k.z*k.z;if(0>sc||Cg<sc)Zg=Bf&1|(Bf&6)<<1,sc=Cg,Jd=k.x,ub=k.y,Gc=k.z}if(0>(Ja*Qa+$a*xf+Oa*ic)*Pg){var Le,Xe,Xf,Yf,Zf,$f,Cf,Df,Ef,Me,Ff,jg,ag,bg,Ye,Gf,Hf,kg;Le=la.x;Xe=la.y;Xf=la.z;Yf=ra.x;Zf=ra.y;$f=ra.z;Cf=ma.x;Df=ma.y;Ef=ma.z;Me=Yf-Le;Ff=Zf-Xe;jg=$f-Xf;ag=Cf-Yf;bg=Df-Zf;Ye=Ef-$f;Gf=Le-Cf;Hf=Xe-Df;kg=Xf-Ef;var be,ce,Pd;be=Ff*Ye-jg*bg;ce=jg*ag-Me*Ye;Pd=Me*bg-Ff*ag;var Yd,Zd,Gd,Oj,Qd,Fe,Wc,Hd,Qg;Yd=Ff*Pd-jg*ce;Zd=jg*be-Me*Pd;Gd=Me*ce-Ff*be;Oj=bg*Pd-Ye*ce;Qd=Ye*be-ag*Pd;Fe=ag*ce-bg*be;Wc=Hf*Pd-kg*ce;Hd=kg*be-Gf*Pd;Qg=Gf*ce-Hf*be;var Ze=-1,rf,cg,re,sf=0;re=cg=rf=0;if(0>Le*Yd+Xe*Zd+Xf*Gd){var ze,Ae,tf,$e,If,Dg;ze=la.x;Ae=la.y;tf=la.z;$e=ra.x;If=ra.y;Dg=ra.z;var Eg,Fg,Gg;Eg=$e-ze;Fg=If-Ae;Gg=Dg-tf;var af=Eg*ze+Fg*Ae+Gg*tf,af=-af/(Eg*Eg+Fg*Fg+Gg*Gg),bf;if(0>af)k.x=ze,k.y=Ae,k.z=tf,bf=1;else if(1<af)k.x=$e,k.y=If,k.z=Dg,bf=2;else{var dg,lg,Ee;dg=ze+Eg*af;lg=Ae+Fg*af;Ee=tf+Gg*af;k.x=dg;k.y=lg;k.z=Ee;bf=3}sf=bf;Ze=k.x*k.x+k.y*k.y+k.z*k.z;rf=k.x;cg=k.y;re=k.z}if(0>Yf*Oj+Zf*Qd+$f*Fe){var kj,lj,mj,th,uh,vh;kj=ra.x;lj=ra.y;mj=ra.z;th=ma.x;uh=ma.y;vh=ma.z;var wh,xh,yh;wh=th-kj;xh=uh-lj;yh=vh-mj;var mg=wh*kj+xh*lj+yh*mj,mg=-mg/(wh*wh+xh*xh+yh*yh),ah;if(0>mg)k.x=kj,k.y=lj,k.z=mj,ah=1;else if(1<mg)k.x=th,k.y=uh,k.z=vh,ah=2;else{var Pj,bh,Qe;Pj=kj+wh*mg;bh=lj+xh*mg;Qe=mj+yh*mg;k.x=Pj;k.y=bh;k.z=Qe;ah=3}var gf=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Ze||gf<Ze)sf=ah<<1,Ze=gf,rf=k.x,cg=k.y,re=k.z}if(0>Cf*Wc+Df*Hd+Ef*Qg){var ui,vi,wi,zh,Ah,Bh;ui=la.x;vi=la.y;wi=la.z;zh=ma.x;Ah=ma.y;Bh=ma.z;var Ch,Dh,Eh;Ch=zh-ui;Dh=Ah-vi;Eh=Bh-wi;var ng=Ch*ui+Dh*vi+Eh*wi,ng=-ng/(Ch*Ch+Dh*Dh+Eh*Eh),Rg;if(0>ng)k.x=ui,k.y=vi,k.z=wi,Rg=1;else if(1<ng)k.x=zh,k.y=Ah,k.z=Bh,Rg=2;else{var xi,ch,yi;xi=ui+Ch*ng;ch=vi+Dh*ng;yi=wi+Eh*ng;k.x=xi;k.y=ch;k.z=yi;Rg=3}var hf=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Ze||hf<Ze)sf=Rg&1|(Rg&2)<<1,Ze=hf,rf=k.x,cg=k.y,re=k.z}var De;if(0<Ze)k.x=rf,k.y=cg,k.z=re,De=sf;else{var Fh=be*be+ce*ce+Pd*Pd;0<Fh&&(Fh=1/Math.sqrt(Fh));be*=Fh;ce*=Fh;Pd*=Fh;var zi=be*be+ce*ce+Pd*Pd,zi=(Le*be+Xe*ce+Xf*Pd)/zi;rf=be*zi;cg=ce*zi;re=Pd*zi;k.x=rf;k.y=cg;k.z=re;De=7}var jf=k.x*k.x+k.y*k.y+k.z*k.z;if(0>sc||jf<sc)Zg=De&3|(De&4)<<1,sc=jf,Jd=k.x,ub=k.y,Gc=k.z}if(0>(nc*Og+xa*Bb+Fc*Fb)*Pg){var Hg,Sg,Ai,dh,eh,fh,Gh,Hh,Ih,gh,hh,ih,Tg,Ug,Vg,Jh,Kh,Lh;Hg=ra.x;Sg=ra.y;Ai=ra.z;dh=ga.x;eh=ga.y;fh=ga.z;Gh=ma.x;Hh=ma.y;Ih=ma.z;gh=dh-Hg;hh=eh-Sg;ih=fh-Ai;Tg=Gh-dh;Ug=Hh-eh;Vg=Ih-fh;Jh=Hg-Gh;Kh=Sg-Hh;Lh=Ai-Ih;var Ne,Oe,Pe;Ne=hh*Vg-ih*Ug;Oe=ih*Tg-gh*Vg;Pe=gh*Ug-hh*Tg;var cf,df,ef,ue,kf,te,vf,Kf,Lf;cf=hh*Pe-ih*Oe;df=ih*Ne-gh*Pe;ef=gh*Oe-hh*Ne;ue=Ug*Pe-Vg*Oe;kf=Vg*Ne-Tg*Pe;te=Tg*Oe-Ug*Ne;vf=Kh*Pe-Lh*Oe;Kf=Lh*Ne-Jh*Pe;Lf=Jh*Oe-Kh*Ne;var Wg=-1,jh,kh,uf,Ig=0;uf=kh=jh=0;if(0>Hg*cf+Sg*df+Ai*ef){var og,pg,lh,Mh,Nh,Oh;og=ra.x;pg=ra.y;lh=ra.z;Mh=ga.x;Nh=ga.y;Oh=ga.z;var Ph,Qh,Rh;Ph=Mh-og;Qh=Nh-pg;Rh=Oh-lh;var qg=Ph*og+Qh*pg+Rh*lh,qg=-qg/(Ph*Ph+Qh*Qh+Rh*Rh),mh;if(0>qg)k.x=og,k.y=pg,k.z=lh,mh=1;else if(1<qg)k.x=Mh,k.y=Nh,k.z=Oh,mh=2;else{var Bi,nh,Si;Bi=og+Ph*qg;nh=pg+Qh*qg;Si=lh+Rh*qg;k.x=Bi;k.y=nh;k.z=Si;mh=3}Ig=mh;Wg=k.x*k.x+k.y*k.y+k.z*k.z;jh=k.x;kh=k.y;uf=k.z}if(0>dh*ue+eh*kf+fh*te){var Ci,Di,Ei,Sh,Th,Uh;Ci=ga.x;Di=ga.y;Ei=ga.z;Sh=ma.x;Th=ma.y;Uh=ma.z;var Vh,Wh,Xh;Vh=Sh-Ci;Wh=Th-Di;Xh=Uh-Ei;var rg=Vh*Ci+Wh*Di+Xh*Ei,rg=-rg/(Vh*Vh+Wh*Wh+Xh*Xh),oh;if(0>rg)k.x=Ci,k.y=Di,k.z=Ei,oh=1;else if(1<rg)k.x=Sh,k.y=Th,k.z=Uh,oh=2;else{var Fi,ph,Ti;Fi=Ci+Vh*rg;ph=Di+Wh*rg;Ti=Ei+Xh*rg;k.x=Fi;k.y=ph;k.z=Ti;oh=3}var se=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wg||se<Wg)Ig=oh<<1,Wg=se,jh=k.x,kh=k.y,uf=k.z}if(0>Gh*vf+Hh*Kf+Ih*Lf){var Gi,Hi,Ii,Yh,Zh,$h;Gi=ra.x;Hi=ra.y;Ii=ra.z;Yh=ma.x;Zh=ma.y;$h=ma.z;var ai,bi,ci;ai=Yh-Gi;bi=Zh-Hi;ci=$h-Ii;var sg=ai*Gi+bi*Hi+ci*Ii,sg=-sg/(ai*ai+bi*bi+ci*ci),Xg;if(0>sg)k.x=Gi,k.y=Hi,k.z=Ii,Xg=1;else if(1<sg)k.x=Yh,k.y=Zh,k.z=$h,Xg=2;else{var Ji,qh,Ki;Ji=Gi+ai*sg;qh=Hi+bi*sg;Ki=Ii+ci*sg;k.x=Ji;k.y=qh;k.z=Ki;Xg=3}var ff=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wg||ff<Wg)Ig=Xg&1|(Xg&2)<<1,Wg=ff,jh=k.x,kh=k.y,uf=k.z}var aj;if(0<Wg)k.x=jh,k.y=kh,k.z=uf,aj=Ig;else{var di=Ne*Ne+Oe*Oe+Pe*Pe;0<di&&(di=1/Math.sqrt(di));Ne*=di;Oe*=di;Pe*=di;var Li=Ne*Ne+Oe*Oe+Pe*Pe,Li=(Hg*Ne+Sg*Oe+Ai*Pe)/Li;jh=Ne*Li;kh=Oe*Li;uf=Pe*Li;k.x=jh;k.y=kh;k.z=uf;aj=7}var bj=k.x*k.x+k.y*k.y+k.z*k.z;if(0>sc||bj<sc)Zg=aj<<1,sc=bj,Jd=k.x,ub=k.y,Gc=k.z}0<sc?(k.x=Jd,k.y=ub,k.z=Gc,z=Zg):(k.R(),z=15)}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.Ba){case 1:this.Ao();break;case 2:this.Wl();break;case 3:this.dm()}if(4==this.Ba){var ei=this.Ln(a,b,e,d,h,l,g);if(0!=ei)return this.distance=0,ei;this.distance=-this.depth;return 0}this.distance=0;return 1}this.an(z);m.x=k.x;m.y=k.y;m.z=k.z;m.x=-m.x;m.y=-m.y;m.z=-m.z;this.Tf(!1);this.Uf(!1);var Jf=this.La[this.Ba],cj=this.eb[this.Ba];Jf.x=cj.x;Jf.y=cj.y;Jf.z=cj.z;var Be=this.ib[this.Ba];Jf.x-=Be.x;Jf.y-=Be.y;Jf.z-=Be.z;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var rh=h[this.Ba];if(1E-8>rh.x*m.x+rh.y*m.y+rh.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.Km(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=c&&null!=c.Ji&&this.Fo(c.Ji),0;this.Ba++;++u}return 2},xm:function(a,b,e,d,c,f,h){this.Kj=a;this.Bl=b;this.oc=e;this.Tc=d;var l=this.La,g=this.closest,k=this.dir,m,p,r;m=d.v-e.v;p=d.A-e.A;r=d.B-e.B;k.x=m;k.y=p;k.z=r;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.Aa(1,0,0);this.Ba=0;if(null!=this.Kj)this.Tf(!0);else{var q=this.eb[this.Ba];q.x=this.oc.v;q.y=this.oc.A;q.z=this.oc.B}this.Uf(!0);var t=this.La[this.Ba],A=this.eb[this.Ba];t.x=A.x;t.y=A.y;t.z=A.z;var L=this.ib[this.Ba];t.x-=L.x;t.y-=L.y;t.z-=L.z;this.Ba=1;var u=0,z=0,n=this.Co,D=this.Bo;n.R();D.x=f.x;D.y=f.y;D.z=f.z;D.x-=c.x;D.y-=c.y;for(D.z-=c.z;40>u;){var Ib=0;switch(this.Ba){case 1:var y=l[0];g.x=y.x;g.y=y.y;g.z=y.z;Ib=1;break;case 2:var B,E,K,H,mc,R,x=l[0];B=x.x;E=x.y;K=x.z;var X=l[1];H=X.x;mc=X.y;R=X.z;var F,Da,qa;F=H-B;Da=mc-E;qa=R-K;var I=F*B+Da*E+qa*K,I=-I/(F*F+Da*Da+qa*qa);if(0>I)g.x=B,g.y=E,g.z=K,Ib=1;else if(1<I)g.x=H,g.y=mc,g.z=R,Ib=2;else{var ya,N,Ea;ya=B+F*I;N=E+Da*I;Ea=K+qa*I;g.x=ya;g.y=N;g.z=Ea;Ib=3}break;case 3:var O=l[0],sa=l[1],ba=l[2],za,J,C,Aa,na,La,Ba,ta,S,ha,ea,da,M,T,w,V,ia,Y;za=O.x;J=O.y;C=O.z;Aa=sa.x;na=sa.y;La=sa.z;Ba=ba.x;ta=ba.y;S=ba.z;ha=Aa-za;ea=na-J;da=La-C;M=Ba-Aa;T=ta-na;w=S-La;V=za-Ba;ia=J-ta;Y=C-S;var oa,ua,ca;oa=ea*w-da*T;ua=da*M-ha*w;ca=ha*T-ea*M;var Ma,va,Z,Pa,Fa,Q,aa,fa,Rd;Ma=ea*ca-da*ua;va=da*oa-ha*ca;Z=ha*ua-ea*oa;Pa=T*ca-w*ua;Fa=w*oa-M*ca;Q=M*ua-T*oa;aa=ia*ca-Y*ua;fa=Y*oa-V*ca;Rd=V*ua-ia*oa;var ja=-1,Ga,P,Ya,Yg=0;Ya=P=Ga=0;if(0>za*Ma+J*va+C*Z){var wb,ec,Vb,Ab,ib,hb;wb=O.x;ec=O.y;Vb=O.z;Ab=sa.x;ib=sa.y;hb=sa.z;var ka,Ia,ab;ka=Ab-wb;Ia=ib-ec;ab=hb-Vb;var bb=ka*wb+Ia*ec+ab*Vb,bb=-bb/(ka*ka+Ia*Ia+ab*ab),Wa;if(0>bb)g.x=wb,g.y=ec,g.z=Vb,Wa=1;else if(1<bb)g.x=Ab,g.y=ib,g.z=hb,Wa=2;else{var Va,qb,kb;Va=wb+ka*bb;qb=ec+Ia*bb;kb=Vb+ab*bb;g.x=Va;g.y=qb;g.z=kb;Wa=3}Yg=Wa;ja=g.x*g.x+g.y*g.y+g.z*g.z;Ga=g.x;P=g.y;Ya=g.z}if(0>Aa*Pa+na*Fa+La*Q){var Sa,Na,Za,vb,mb,xb;Sa=sa.x;Na=sa.y;Za=sa.z;vb=ba.x;mb=ba.y;xb=ba.z;var nb,fb,Re;nb=vb-Sa;fb=mb-Na;Re=xb-Za;var Db=nb*Sa+fb*Na+Re*Za,Db=-Db/(nb*nb+fb*fb+Re*Re),G;if(0>Db)g.x=Sa,g.y=Na,g.z=Za,G=1;else if(1<Db)g.x=vb,g.y=mb,g.z=xb,G=2;else{var sb,jb,Xb;sb=Sa+nb*Db;jb=Na+fb*Db;Xb=Za+Re*Db;g.x=sb;g.y=jb;g.z=Xb;G=3}var ob=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ja||ob<ja)Yg=G<<1,ja=ob,Ga=g.x,P=g.y,Ya=g.z}if(0>Ba*aa+ta*fa+S*Rd){var cb,zb,Xa,tb,v,W;cb=O.x;zb=O.y;Xa=O.z;tb=ba.x;v=ba.y;W=ba.z;var U,db,cc;U=tb-cb;db=v-zb;cc=W-Xa;var Ra=U*cb+db*zb+cc*Xa,Ra=-Ra/(U*U+db*db+cc*cc),Ha;if(0>Ra)g.x=cb,g.y=zb,g.z=Xa,Ha=1;else if(1<Ra)g.x=tb,g.y=v,g.z=W,Ha=2;else{var rb,yb,Cb;rb=cb+U*Ra;yb=zb+db*Ra;Cb=Xa+cc*Ra;g.x=rb;g.y=yb;g.z=Cb;Ha=3}var la=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ja||la<ja)Yg=Ha&1|(Ha&2)<<1,ja=la,Ga=g.x,P=g.y,Ya=g.z}if(0<ja)g.x=Ga,g.y=P,g.z=Ya,Ib=Yg;else{var ra=oa*oa+ua*ua+ca*ca;0<ra&&(ra=1/Math.sqrt(ra));oa*=ra;ua*=ra;ca*=ra;var ga=oa*oa+ua*ua+ca*ca,ga=(za*oa+J*ua+C*ca)/ga;Ga=oa*ga;P=ua*ga;Ya=ca*ga;g.x=Ga;g.y=P;g.z=Ya;Ib=7}break;case 4:var ma=l[0],Ja=l[1],$a=l[2],Oa=l[3],nc,xa,Fc,wa,pa,Ca,Ua,Ka,xd,eb,gb,de,Ic,Yb,oc,Id,$d,rc,Jc,ub,pb,Qa,hc,uc,gc,Xc,Eb;nc=ma.x;xa=ma.y;Fc=ma.z;wa=Ja.x;pa=Ja.y;Ca=Ja.z;Ua=$a.x;Ka=$a.y;xd=$a.z;eb=Oa.x;gb=Oa.y;de=Oa.z;Ic=wa-nc;Yb=pa-xa;oc=Ca-Fc;Id=Ua-nc;$d=Ka-xa;rc=xd-Fc;Jc=eb-nc;ub=gb-xa;pb=de-Fc;Qa=Ua-wa;hc=Ka-pa;uc=xd-Ca;gc=eb-wa;Xc=gb-pa;Eb=de-Ca;var Ng,qi,Bb,Fb,xf,ic,Og,Jb,Ob,Pg,sc,Jd;Ng=Yb*rc-oc*$d;qi=oc*Id-Ic*rc;Bb=Ic*$d-Yb*Id;Fb=$d*pb-rc*ub;xf=rc*Jc-Id*pb;ic=Id*ub-$d*Jc;Og=ub*oc-pb*Yb;Jb=pb*Ic-Jc*oc;Ob=Jc*Yb-ub*Ic;Pg=Xc*uc-Eb*hc;sc=Eb*Qa-gc*uc;Jd=gc*hc-Xc*Qa;var Hb=0<Ic*Pg+Yb*sc+oc*Jd?1:-1,Gc=-1,Lb,vc,Gb,Qb=0;Gb=vc=Lb=0;if(0>(nc*Ng+xa*qi+Fc*Bb)*Hb){var Sb,Nb,lb,Rb,Kb,dc,Wb,yf,ac,bc,Pb,$b,kd,Mb,Tb,fd,Rc,zc;Sb=ma.x;Nb=ma.y;lb=ma.z;Rb=Ja.x;Kb=Ja.y;dc=Ja.z;Wb=$a.x;yf=$a.y;ac=$a.z;bc=Rb-Sb;Pb=Kb-Nb;$b=dc-lb;kd=Wb-Rb;Mb=yf-Kb;Tb=ac-dc;fd=Sb-Wb;Rc=Nb-yf;zc=lb-ac;var gd,Yc,od;gd=Pb*Tb-$b*Mb;Yc=$b*kd-bc*Tb;od=bc*Mb-Pb*kd;var pc,kc,tc,Zc,Kc,Lc,xc,Cc,Dc;pc=Pb*od-$b*Yc;kc=$b*gd-bc*od;tc=bc*Yc-Pb*gd;Zc=Mb*od-Tb*Yc;Kc=Tb*gd-kd*od;Lc=kd*Yc-Mb*gd;xc=Rc*od-zc*Yc;Cc=zc*gd-fd*od;Dc=fd*Yc-Rc*gd;var pd=-1,yd,sd,td,zd=0;td=sd=yd=0;if(0>Sb*pc+Nb*kc+lb*tc){var qc,Zb,lc,jc,Qc,wc;qc=ma.x;Zb=ma.y;lc=ma.z;jc=Ja.x;Qc=Ja.y;wc=Ja.z;var Sd,ie,Uc;Sd=jc-qc;ie=Qc-Zb;Uc=wc-lc;var je=Sd*qc+ie*Zb+Uc*lc,je=-je/(Sd*Sd+ie*ie+Uc*Uc),Pc;if(0>je)g.x=qc,g.y=Zb,g.z=lc,Pc=1;else if(1<je)g.x=jc,g.y=Qc,g.z=wc,Pc=2;else{var ve,we,Ce;ve=qc+Sd*je;we=Zb+ie*je;Ce=lc+Uc*je;g.x=ve;g.y=we;g.z=Ce;Pc=3}zd=Pc;pd=g.x*g.x+g.y*g.y+g.z*g.z;yd=g.x;sd=g.y;td=g.z}if(0>Rb*Zc+Kb*Kc+dc*Lc){var Ge,He,Se,Te,Ie,Je;Ge=Ja.x;He=Ja.y;Se=Ja.z;Te=$a.x;Ie=$a.y;Je=$a.z;var ae,xe,$c;ae=Te-Ge;xe=Ie-He;$c=Je-Se;var Sc=ae*Ge+xe*He+$c*Se,Sc=-Sc/(ae*ae+xe*xe+$c*$c),ld;if(0>Sc)g.x=Ge,g.y=He,g.z=Se,ld=1;else if(1<Sc)g.x=Te,g.y=Ie,g.z=Je,ld=2;else{var De,Qd,Ad;De=Ge+ae*Sc;Qd=He+xe*Sc;Ad=Se+$c*Sc;g.x=De;g.y=Qd;g.z=Ad;ld=3}var Bd=g.x*g.x+g.y*g.y+g.z*g.z;if(0>pd||Bd<pd)zd=ld<<1,pd=Bd,yd=g.x,sd=g.y,td=g.z}if(0>Wb*xc+yf*Cc+ac*Dc){var ud,ke,le,me,Cd,Dd;ud=ma.x;ke=ma.y;le=ma.z;me=$a.x;Cd=$a.y;Dd=$a.z;var hd,Kd,ee;hd=me-ud;Kd=Cd-ke;ee=Dd-le;var Td=hd*ud+Kd*ke+ee*le,Td=-Td/(hd*hd+Kd*Kd+ee*ee),qd;if(0>Td)g.x=ud,g.y=ke,g.z=le,qd=1;else if(1<Td)g.x=me,g.y=Cd,g.z=Dd,qd=2;else{var Ud,Ld,Md;Ud=ud+hd*Td;Ld=ke+Kd*Td;Md=le+ee*Td;g.x=Ud;g.y=Ld;g.z=Md;qd=3}var ne=g.x*g.x+g.y*g.y+g.z*g.z;if(0>pd||ne<pd)zd=qd&1|(qd&2)<<1,pd=ne,yd=g.x,sd=g.y,td=g.z}var Ue;if(0<pd)g.x=yd,g.y=sd,g.z=td,Ue=zd;else{var ad=gd*gd+Yc*Yc+od*od;0<ad&&(ad=1/Math.sqrt(ad));gd*=ad;Yc*=ad;od*=ad;var Ed=gd*gd+Yc*Yc+od*od,Ed=(Sb*gd+Nb*Yc+lb*od)/Ed;yd=gd*Ed;sd=Yc*Ed;td=od*Ed;g.x=yd;g.y=sd;g.z=td;Ue=7}Qb=Ue;Gc=g.x*g.x+g.y*g.y+g.z*g.z;Lb=g.x;vc=g.y;Gb=g.z}if(0>(nc*Fb+xa*xf+Fc*ic)*Hb){var id,bd,cd,Vc,Mc,Nc,Ec,yc,Bc,Ac,Tc,Hc,Oc,oe,lf,md,Fd,ed;id=ma.x;bd=ma.y;cd=ma.z;Vc=$a.x;Mc=$a.y;Nc=$a.z;Ec=Oa.x;yc=Oa.y;Bc=Oa.z;Ac=Vc-id;Tc=Mc-bd;Hc=Nc-cd;Oc=Ec-Vc;oe=yc-Mc;lf=Bc-Nc;md=id-Ec;Fd=bd-yc;ed=cd-Bc;var vd,jd,nd;vd=Tc*lf-Hc*oe;jd=Hc*Oc-Ac*lf;nd=Ac*oe-Tc*Oc;var mf,Fe,Wc,Hd,Ee,Ri,fe,pe,ge;mf=Tc*nd-Hc*jd;Fe=Hc*vd-Ac*nd;Wc=Ac*jd-Tc*vd;Hd=oe*nd-lf*jd;Ee=lf*vd-Oc*nd;Ri=Oc*jd-oe*vd;fe=Fd*nd-ed*jd;pe=ed*vd-md*nd;ge=md*jd-Fd*vd;var rd=-1,Vd,wd,Wd,qe=0;Wd=wd=Vd=0;if(0>id*mf+bd*Fe+cd*Wc){var he,zf,sh,tg,ug,vg;he=ma.x;zf=ma.y;sh=ma.z;tg=$a.x;ug=$a.y;vg=$a.z;var Ke,Ve,Mf;Ke=tg-he;Ve=ug-zf;Mf=vg-sh;var eg=Ke*he+Ve*zf+Mf*sh,eg=-eg/(Ke*Ke+Ve*Ve+Mf*Mf),fg;if(0>eg)g.x=he,g.y=zf,g.z=sh,fg=1;else if(1<eg)g.x=tg,g.y=ug,g.z=vg,fg=2;else{var Nf,Of,gg;Nf=he+Ke*eg;Of=zf+Ve*eg;gg=sh+Mf*eg;g.x=Nf;g.y=Of;g.z=gg;fg=3}qe=fg;rd=g.x*g.x+g.y*g.y+g.z*g.z;Vd=g.x;wd=g.y;Wd=g.z}if(0>Vc*Hd+Mc*Ee+Nc*Ri){var Pf,Qf,Rf,Sf,Tf,Af;Pf=$a.x;Qf=$a.y;Rf=$a.z;Sf=Oa.x;Tf=Oa.y;Af=Oa.z;var ye,nf,Uf;ye=Sf-Pf;nf=Tf-Qf;Uf=Af-Rf;var of=ye*Pf+nf*Qf+Uf*Rf,of=-of/(ye*ye+nf*nf+Uf*Uf),hg;if(0>of)g.x=Pf,g.y=Qf,g.z=Rf,hg=1;else if(1<of)g.x=Sf,g.y=Tf,g.z=Af,hg=2;else{var Qe,wg,xg;Qe=Pf+ye*of;wg=Qf+nf*of;xg=Rf+Uf*of;g.x=Qe;g.y=wg;g.z=xg;hg=3}var Xd=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||Xd<rd)qe=hg<<1,rd=Xd,Vd=g.x,wd=g.y,Wd=g.z}if(0>Ec*fe+yc*pe+Bc*ge){var Nd,Od,yg,zg,Ag,Bg;Nd=ma.x;Od=ma.y;yg=ma.z;zg=Oa.x;Ag=Oa.y;Bg=Oa.z;var pf,Vf,si;pf=zg-Nd;Vf=Ag-Od;si=Bg-yg;var ig=pf*Nd+Vf*Od+si*yg,ig=-ig/(pf*pf+Vf*Vf+si*si),ti;if(0>ig)g.x=Nd,g.y=Od,g.z=yg,ti=1;else if(1<ig)g.x=zg,g.y=Ag,g.z=Bg,ti=2;else{var Wf,Bf,We;Wf=Nd+pf*ig;Bf=Od+Vf*ig;We=yg+si*ig;g.x=Wf;g.y=Bf;g.z=We;ti=3}var qf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||qf<rd)qe=ti&1|(ti&2)<<1,rd=qf,Vd=g.x,wd=g.y,Wd=g.z}var Cg;if(0<rd)g.x=Vd,g.y=wd,g.z=Wd,Cg=qe;else{var Le=vd*vd+jd*jd+nd*nd;0<Le&&(Le=1/Math.sqrt(Le));vd*=Le;jd*=Le;nd*=Le;var Xe=vd*vd+jd*jd+nd*nd,Xe=(id*vd+bd*jd+cd*nd)/Xe;Vd=vd*Xe;wd=jd*Xe;Wd=nd*Xe;g.x=Vd;g.y=wd;g.z=Wd;Cg=7}var Xf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Gc||Xf<Gc)Qb=Cg&1|(Cg&6)<<1,Gc=Xf,Lb=g.x,vc=g.y,Gb=g.z}if(0>(nc*Og+xa*Jb+Fc*Ob)*Hb){var Yf,Zf,$f,Cf,Df,Ef,Me,Ff,jg,ag,bg,Ye,Gf,Hf,kg,be,ce,Pd;Yf=ma.x;Zf=ma.y;$f=ma.z;Cf=Ja.x;Df=Ja.y;Ef=Ja.z;Me=Oa.x;Ff=Oa.y;jg=Oa.z;ag=Cf-Yf;bg=Df-Zf;Ye=Ef-$f;Gf=Me-Cf;Hf=Ff-Df;kg=jg-Ef;be=Yf-Me;ce=Zf-Ff;Pd=$f-jg;var Yd,Zd,Gd;Yd=bg*kg-Ye*Hf;Zd=Ye*Gf-ag*kg;Gd=ag*Hf-bg*Gf;var gf,hf,jf,ue,kf,Qg,Ze,rf,cg;gf=bg*Gd-Ye*Zd;hf=Ye*Yd-ag*Gd;jf=ag*Zd-bg*Yd;ue=Hf*Gd-kg*Zd;kf=kg*Yd-Gf*Gd;Qg=Gf*Zd-Hf*Yd;Ze=ce*Gd-Pd*Zd;rf=Pd*Yd-be*Gd;cg=be*Zd-ce*Yd;var re=-1,sf,ze,Ae,tf=0;Ae=ze=sf=0;if(0>Yf*gf+Zf*hf+$f*jf){var $e,If,Dg,Eg,Fg,Gg;$e=ma.x;If=ma.y;Dg=ma.z;Eg=Ja.x;Fg=Ja.y;Gg=Ja.z;var af,bf,dg;af=Eg-$e;bf=Fg-If;dg=Gg-Dg;var lg=af*$e+bf*If+dg*Dg,lg=-lg/(af*af+bf*bf+dg*dg),te;if(0>lg)g.x=$e,g.y=If,g.z=Dg,te=1;else if(1<lg)g.x=Eg,g.y=Fg,g.z=Gg,te=2;else{var vf,Kf,Lf;vf=$e+af*lg;Kf=If+bf*lg;Lf=Dg+dg*lg;g.x=vf;g.y=Kf;g.z=Lf;te=3}tf=te;re=g.x*g.x+g.y*g.y+g.z*g.z;sf=g.x;ze=g.y;Ae=g.z}if(0>Cf*ue+Df*kf+Ef*Qg){var th,uh,vh,wh,xh,yh;th=Ja.x;uh=Ja.y;vh=Ja.z;wh=Oa.x;xh=Oa.y;yh=Oa.z;var mg,ah,se;mg=wh-th;ah=xh-uh;se=yh-vh;var bh=mg*th+ah*uh+se*vh,bh=-bh/(mg*mg+ah*ah+se*se),ff;if(0>bh)g.x=th,g.y=uh,g.z=vh,ff=1;else if(1<bh)g.x=wh,g.y=xh,g.z=yh,ff=2;else{var Jg,ui,vi;Jg=th+mg*bh;ui=uh+ah*bh;vi=vh+se*bh;g.x=Jg;g.y=ui;g.z=vi;ff=3}var wi=g.x*g.x+g.y*g.y+g.z*g.z;if(0>re||wi<re)tf=ff<<1,re=wi,sf=g.x,ze=g.y,Ae=g.z}if(0>Me*Ze+Ff*rf+jg*cg){var zh,Ah,Bh,Ch,Dh,Eh;zh=ma.x;Ah=ma.y;Bh=ma.z;Ch=Oa.x;Dh=Oa.y;Eh=Oa.z;var ng,Rg,xi;ng=Ch-zh;Rg=Dh-Ah;xi=Eh-Bh;var ch=ng*zh+Rg*Ah+xi*Bh,ch=-ch/(ng*ng+Rg*Rg+xi*xi),yi;if(0>ch)g.x=zh,g.y=Ah,g.z=Bh,yi=1;else if(1<ch)g.x=Ch,g.y=Dh,g.z=Eh,yi=2;else{var Kg,Lg,Fh;Kg=zh+ng*ch;Lg=Ah+Rg*ch;Fh=Bh+xi*ch;g.x=Kg;g.y=Lg;g.z=Fh;yi=3}var zi=g.x*g.x+g.y*g.y+g.z*g.z;if(0>re||zi<re)tf=yi&1|(yi&2)<<1,re=zi,sf=g.x,ze=g.y,Ae=g.z}var wf;if(0<re)g.x=sf,g.y=ze,g.z=Ae,wf=tf;else{var Hg=Yd*Yd+Zd*Zd+Gd*Gd;0<Hg&&(Hg=1/Math.sqrt(Hg));Yd*=Hg;Zd*=Hg;Gd*=Hg;var Sg=Yd*Yd+Zd*Zd+Gd*Gd,Sg=(Yf*Yd+Zf*Zd+$f*Gd)/Sg;sf=Yd*Sg;ze=Zd*Sg;Ae=Gd*Sg;g.x=sf;g.y=ze;g.z=Ae;wf=7}var Ai=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Gc||Ai<Gc)Qb=wf&3|(wf&4)<<1,Gc=Ai,Lb=g.x,vc=g.y,Gb=g.z}if(0>(wa*Pg+pa*sc+Ca*Jd)*Hb){var dh,eh,fh,Gh,Hh,Ih,gh,hh,ih,Tg,Ug,Vg,Jh,Kh,Lh,Ne,Oe,Pe;dh=Ja.x;eh=Ja.y;fh=Ja.z;Gh=$a.x;Hh=$a.y;Ih=$a.z;gh=Oa.x;hh=Oa.y;ih=Oa.z;Tg=Gh-dh;Ug=Hh-eh;Vg=Ih-fh;Jh=gh-Gh;Kh=hh-Hh;Lh=ih-Ih;Ne=dh-gh;Oe=eh-hh;Pe=fh-ih;var cf,df,ef;cf=Ug*Lh-Vg*Kh;df=Vg*Jh-Tg*Lh;ef=Tg*Kh-Ug*Jh;var Mg,hi,ji,ki,ni,pi,Wg,jh,kh;Mg=Ug*ef-Vg*df;hi=Vg*cf-Tg*ef;ji=Tg*df-Ug*cf;ki=Kh*ef-Lh*df;ni=Lh*cf-Jh*ef;pi=Jh*df-Kh*cf;Wg=Oe*ef-Pe*df;jh=Pe*cf-Ne*ef;kh=Ne*df-Oe*cf;var uf=-1,Ig,og,pg,lh=0;pg=og=Ig=0;if(0>dh*Mg+eh*hi+fh*ji){var Mh,Nh,Oh,Ph,Qh,Rh;Mh=Ja.x;Nh=Ja.y;Oh=Ja.z;Ph=$a.x;Qh=$a.y;Rh=$a.z;var qg,mh,Bi;qg=Ph-Mh;mh=Qh-Nh;Bi=Rh-Oh;var nh=qg*Mh+mh*Nh+Bi*Oh,nh=-nh/(qg*qg+mh*mh+Bi*Bi),Si;if(0>nh)g.x=Mh,g.y=Nh,g.z=Oh,Si=1;else if(1<nh)g.x=Ph,g.y=Qh,g.z=Rh,Si=2;else{var Ci,Di,Ei;Ci=Mh+qg*nh;Di=Nh+mh*nh;Ei=Oh+Bi*nh;g.x=Ci;g.y=Di;g.z=Ei;Si=3}lh=Si;uf=g.x*g.x+g.y*g.y+g.z*g.z;Ig=g.x;og=g.y;pg=g.z}if(0>Gh*ki+Hh*ni+Ih*pi){var Sh,Th,Uh,Vh,Wh,Xh;Sh=$a.x;Th=$a.y;Uh=$a.z;Vh=Oa.x;Wh=Oa.y;Xh=Oa.z;var rg,oh,Fi;rg=Vh-Sh;oh=Wh-Th;Fi=Xh-Uh;var ph=rg*Sh+oh*Th+Fi*Uh,ph=-ph/(rg*rg+oh*oh+Fi*Fi),Ti;if(0>ph)g.x=Sh,g.y=Th,g.z=Uh,Ti=1;else if(1<ph)g.x=Vh,g.y=Wh,g.z=Xh,Ti=2;else{var Ni,Gi,Hi;Ni=Sh+rg*ph;Gi=Th+oh*ph;Hi=Uh+Fi*ph;g.x=Ni;g.y=Gi;g.z=Hi;Ti=3}var Ii=g.x*g.x+g.y*g.y+g.z*g.z;if(0>uf||Ii<uf)lh=Ti<<1,uf=Ii,Ig=g.x,og=g.y,pg=g.z}if(0>gh*Wg+hh*jh+ih*kh){var Yh,Zh,$h,ai,bi,ci;Yh=Ja.x;Zh=Ja.y;$h=Ja.z;ai=Oa.x;bi=Oa.y;ci=Oa.z;var sg,Xg,Ji;sg=ai-Yh;Xg=bi-Zh;Ji=ci-$h;var qh=sg*Yh+Xg*Zh+Ji*$h,qh=-qh/(sg*sg+Xg*Xg+Ji*Ji),Ki;if(0>qh)g.x=Yh,g.y=Zh,g.z=$h,Ki=1;else if(1<qh)g.x=ai,g.y=bi,g.z=ci,Ki=2;else{var Oi,aj,di;Oi=Yh+sg*qh;aj=Zh+Xg*qh;di=$h+Ji*qh;g.x=Oi;g.y=aj;g.z=di;Ki=3}var Li=g.x*g.x+g.y*g.y+g.z*g.z;if(0>uf||Li<uf)lh=Ki&1|(Ki&2)<<1,uf=Li,Ig=g.x,og=g.y,pg=g.z}var bj;if(0<uf)g.x=Ig,g.y=og,g.z=pg,bj=lh;else{var ei=cf*cf+df*df+ef*ef;0<ei&&(ei=1/Math.sqrt(ei));cf*=ei;df*=ei;ef*=ei;var Jf=cf*cf+df*df+ef*ef,Jf=(dh*cf+eh*df+fh*ef)/Jf;Ig=cf*Jf;og=df*Jf;pg=ef*Jf;g.x=Ig;g.y=og;g.z=pg;bj=7}var cj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Gc||cj<Gc)Qb=bj<<1,Gc=cj,Lb=g.x,vc=g.y,Gb=g.z}0<Gc?(g.x=Lb,g.y=vc,g.z=Gb,Ib=Qb):(g.R(),Ib=15)}this.an(Ib);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!z||4==this.Ba){h.fraction=z;break}this.Km();h.fraction=z;var Be=h.normal;Be.x=k.x;Be.y=k.y;Be.z=k.z;var rh=Math.sqrt(Be.x*Be.x+Be.y*Be.y+Be.z*Be.z);0<rh&&(rh=1/rh);Be.x*=rh;Be.y*=rh;Be.z*=rh;var fi=h.position,ii=this.closestPoint1;fi.x=ii.x;fi.y=ii.y;fi.z=ii.z;fi.x+=c.x*z;fi.y+=c.y*z;fi.z+=c.z*z;return!0}k.x=g.x;k.y=g.y;k.z=g.z;k.x=-k.x;k.y=-k.y;k.z=-k.z;if(null!=this.Kj)this.Tf(!0);else{var li=this.eb[this.Ba];li.x=this.oc.v;li.y=this.oc.A;li.z=this.oc.B}this.Uf(!0);var gi=this.La[this.Ba],mi=this.eb[this.Ba];gi.x=mi.x;gi.y=mi.y;gi.z=mi.z;var oi=this.ib[this.Ba];gi.x-=oi.x;gi.y-=oi.y;gi.z-=oi.z;var dj=l[this.Ba];dj.x-=n.x;dj.y-=n.y;dj.z-=n.z;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Mi=l[this.Ba],Ui=Mi.x*k.x+Mi.y*k.y+Mi.z*k.z;if(0>Ui){if(0<=D.x*k.x+D.y*k.y+D.z*k.z)break;var nj=Ui/(D.x*k.x+D.y*k.y+D.z*k.z),z=z+nj;if(1<=z)break;n.x+=D.x*nj;n.y+=D.y*nj;n.z+=D.z*nj;for(var Vi=0,ij=this.Ba+1;Vi<ij;){var ej=l[Vi++],Pi=-nj;ej.x+=D.x*Pi;ej.y+=D.y*Pi;ej.z+=D.z*Pi}}for(var Wi=!1,Xi=0,jj=this.Ba;Xi<jj;){var qj=Xi++,fj=l[qj].x-l[this.Ba].x,gj=l[qj].y-l[this.Ba].y,hj=l[qj].z-l[this.Ba].z;if(1E-8>fj*fj+gj*gj+hj*hj){Wi=!0;break}}Wi||this.Ba++;++u}return!1},Km:function(){switch(this.Ba){case 1:var a=this.closestPoint1,b=this.eb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,d=this.ib[0];e.x=d.x;e.y=d.y;e.z=d.z;break;case 2:var c,f,h,l=this.closest;c=l.x;f=l.y;h=l.z;var g,k,m,p,r,q,t,A,L,u,n,fc,D,Ib,y,B,E,K,H=this.La[0];g=H.x;k=H.y;m=H.z;var mc=this.eb[0];p=mc.x;r=mc.y;q=mc.z;var R=this.ib[0];t=R.x;A=R.y;L=R.z;var x=this.La[1];u=x.x;n=x.y;fc=x.z;var X=this.eb[1];D=X.x;Ib=X.y;y=X.z;var F=this.ib[1];B=F.x;E=F.y;K=F.z;var I,qa,N;I=u-g;qa=n-k;N=fc-m;var ya=I*I+qa*qa+N*N;ya&&(ya=1/ya);var J=((c-g)*I+(f-k)*qa+(h-m)*N)*ya,Ea,O,sa,ba,za,Ta,C,Aa,na;Ea=D-p;O=Ib-r;sa=y-q;ba=p+Ea*J;za=r+O*J;Ta=q+sa*J;Ea=B-t;O=E-A;sa=K-L;C=t+Ea*J;Aa=A+O*J;na=L+sa*J;var La=this.closestPoint1;La.x=ba;La.y=za;La.z=Ta;var Ba=this.closestPoint2;Ba.x=C;Ba.y=Aa;Ba.z=na;break;case 3:var ta,S,ha,ea=this.closest;ta=ea.x;S=ea.y;ha=ea.z;var da,M,T,w,V,ia,Y,oa,ua,ca,Ma,va,Z,Pa,Fa,Q,aa,fa,Rd,ja,Ga,P,Ya,wa,wb,ec,Vb,Ab=this.La[0];da=Ab.x;M=Ab.y;T=Ab.z;var ib=this.eb[0];w=ib.x;V=ib.y;ia=ib.z;var hb=this.ib[0];Y=hb.x;oa=hb.y;ua=hb.z;var ka=this.La[1];ca=ka.x;Ma=ka.y;va=ka.z;var Ia=this.eb[1];Z=Ia.x;Pa=Ia.y;Fa=Ia.z;var ab=this.ib[1];Q=ab.x;aa=ab.y;fa=ab.z;var bb=this.La[2];Rd=bb.x;ja=bb.y;Ga=bb.z;var Wa=this.eb[2];P=Wa.x;Ya=Wa.y;wa=Wa.z;var Va=this.ib[2];wb=Va.x;ec=Va.y;Vb=Va.z;var qb,kb,Sa,Na,Za,vb,mb,xb,nb;qb=ca-da;kb=Ma-M;Sa=va-T;Na=Rd-da;Za=ja-M;vb=Ga-T;mb=ta-da;xb=S-M;nb=ha-T;var fb=qb*qb+kb*kb+Sa*Sa,pa=qb*Na+kb*Za+Sa*vb,Db=Na*Na+Za*Za+vb*vb,G=qb*mb+kb*xb+Sa*nb,sb=Na*mb+Za*xb+vb*nb,jb=fb*Db-pa*pa;jb&&(jb=1/jb);var Xb=(G*Db-sb*pa)*jb,ob=(-G*pa+sb*fb)*jb,cb,zb,Xa,tb,v,W,U,db,cc;cb=Z-w;zb=Pa-V;Xa=Fa-ia;tb=w+cb*Xb;v=V+zb*Xb;W=ia+Xa*Xb;cb=P-w;zb=Ya-V;Xa=wa-ia;tb+=cb*ob;v+=zb*ob;W+=Xa*ob;cb=Q-Y;zb=aa-oa;Xa=fa-ua;U=Y+cb*Xb;db=oa+zb*Xb;cc=ua+Xa*Xb;cb=wb-Y;zb=ec-oa;Xa=Vb-ua;U+=cb*ob;db+=zb*ob;cc+=Xa*ob;var Ra=this.closestPoint1;Ra.x=tb;Ra.y=v;Ra.z=W;var Ha=this.closestPoint2;Ha.x=U;Ha.y=db;Ha.z=cc;break;default:throw Error("!?");}},yo:function(a){var b=this.dir;a=a.$l;b.x=a.x;b.y=a.y;b.z=a.z},Fo:function(a){a=a.$l;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;a.x=-a.x;a.y=-a.y;a.z=-a.z},an:function(a){this.Ba=a;this.Ba=(this.Ba&5)+(this.Ba>>1&5);this.Ba=(this.Ba&3)+(this.Ba>>2&3);switch(a){case 2:a=this.La[0];var b=this.La[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[0];b=this.eb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[0];b=this.ib[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.La[0];b=this.La[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[0];b=this.eb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[0];b=this.ib[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.La[1];b=this.La[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[1];b=this.eb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[1];b=this.ib[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.La[0];b=this.La[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[0];b=this.eb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[0];b=this.ib[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.La[0];b=this.La[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[0];b=this.eb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[0];b=this.ib[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.La[1];b=this.La[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[1];b=this.eb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[1];b=this.ib[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.La[0];b=this.La[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[0];b=this.eb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[0];b=this.ib[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.La[2];b=this.La[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[2];b=this.eb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[2];b=this.ib[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.La[0];b=this.La[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[0];b=this.eb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[0];b=this.ib[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.La[1];b=this.La[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[1];b=this.eb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[1];b=this.ib[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.La[1];b=this.La[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.eb[1];b=this.eb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ib[1];b=this.ib[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.La[0],b=this.La[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.eb[0],b=this.eb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.ib[0],b=this.ib[3],a.x=b.x,a.y=b.y,a.z=b.z}},Tf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;e=this.oc.o*c+this.oc.i*f+this.oc.l*h;l=this.oc.f*c+this.oc.m*f+this.oc.g*h;b=this.oc.h*c+this.oc.j*f+this.oc.s*h;d=this.dir;d.x=e;d.y=l;d.z=b;this.Kj.he(this.dir,this.eb[this.Ba]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),a.x*=b,a.y*=b,a.z*=b,a=this.eb[this.Ba],b=this.dir,e=this.Kj.Rb,a.x+=b.x*e,a.y+=b.y*e,a.z+=b.z*e);a=this.eb[this.Ba];b=a.x;e=a.y;d=a.z;l=this.oc.o*b+this.oc.f*e+this.oc.h*d;a=this.oc.i*b+this.oc.m*e+this.oc.j*d;e=this.oc.l*b+this.oc.g*e+this.oc.s*d;b=l+this.oc.v;a+=this.oc.A;e+=this.oc.B;l=this.eb[this.Ba];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},Uf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;b=this.Tc.o*c+this.Tc.i*f+this.Tc.l*h;e=this.Tc.f*c+this.Tc.m*f+this.Tc.g*h;l=this.Tc.h*c+this.Tc.j*f+this.Tc.s*h;d=this.dir;d.x=-b;d.y=-e;d.z=-l;this.Bl.he(this.dir,this.ib[this.Ba]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),a.x*=b,a.y*=b,a.z*=b,a=this.ib[this.Ba],b=this.dir,e=this.Bl.Rb,a.x+=b.x*e,a.y+=b.y*e,a.z+=b.z*e);a=this.ib[this.Ba];b=a.x;e=a.y;d=a.z;l=this.Tc.o*b+this.Tc.f*e+this.Tc.h*d;a=this.Tc.i*b+this.Tc.m*e+this.Tc.j*d;e=this.Tc.l*b+this.Tc.g*e+this.Tc.s*d;b=l+this.Tc.v;a+=this.Tc.A;e+=this.Tc.B;l=this.ib[this.Ba];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},Ao:function(){for(var a=0;3>a;){var b=this.dir,e=this.Ij[a++];b.x=e.x;b.y=e.y;b.z=e.z;this.Tf(!1);this.Uf(!1);b=this.La[this.Ba];e=this.eb[this.Ba];b.x=e.x;b.y=e.y;b.z=e.z;e=this.ib[this.Ba];b.x-=e.x;b.y-=e.y;b.z-=e.z;this.Ba++;this.Wl();if(4==this.Ba)break;this.Ba--;b=this.dir;b.x=-b.x;b.y=-b.y;b.z=-b.z;this.Tf(!1);this.Uf(!1);b=this.La[this.Ba];e=this.eb[this.Ba];b.x=e.x;b.y=e.y;b.z=e.z;e=this.ib[this.Ba];b.x-=e.x;b.y-=e.y;b.z-=e.z;this.Ba++;this.Wl();if(4==this.Ba)break;this.Ba--}},Wl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var d,c,f,h,l,g;f=this.La[0];d=f.x;c=f.y;f=f.z;g=this.La[1];h=g.x;l=g.y;g=g.z;d-=h;c-=l;f-=g;for(l=0;3>l;){var k,m;g=this.Ij[l++];h=g.x;k=g.y;m=g.z;g=c*m-f*k;m=f*h-d*m;h=d*k-c*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.Tf(!1);this.Uf(!1);g=this.La[this.Ba];h=this.eb[this.Ba];g.x=h.x;g.y=h.y;g.z=h.z;h=this.ib[this.Ba];g.x-=h.x;g.y-=h.y;g.z-=h.z;this.Ba++;this.dm();if(4==this.Ba)break;this.Ba--;g=this.dir;g.x=-g.x;g.y=-g.y;g.z=-g.z;this.Tf(!1);this.Uf(!1);g=this.La[this.Ba];h=this.eb[this.Ba];g.x=h.x;g.y=h.y;g.z=h.z;h=this.ib[this.Ba];g.x-=h.x;g.y-=h.y;g.z-=h.z;this.Ba++;this.dm();if(4==this.Ba)break;this.Ba--}d=this.dir;d.x=a;d.y=b;d.z=e},dm:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var d,c,f,h,l,g,k,m,p;f=this.La[0];d=f.x;c=f.y;f=f.z;m=this.La[1];h=m.x;l=m.y;g=m.z;p=this.La[2];k=p.x;m=p.y;p=p.z;h-=d;l-=c;g-=f;d=k-d;c=m-c;m=p-f;f=l*m-g*c;m=g*d-h*m;c=h*c-l*d;h=this.dir;h.x=f;h.y=m;h.z=c;this.Tf(!1);this.Uf(!1);c=this.La[this.Ba];f=this.eb[this.Ba];c.x=f.x;c.y=f.y;c.z=f.z;f=this.ib[this.Ba];c.x-=f.x;c.y-=f.y;c.z-=f.z;this.Ba++;if(this.Lm())break;this.Ba--;c=this.dir;c.x=-c.x;c.y=-c.y;c.z=-c.z;this.Tf(!1);this.Uf(!1);c=this.La[this.Ba];f=this.eb[this.Ba];c.x=f.x;c.y=f.y;c.z=f.z;f=this.ib[this.Ba];c.x-=f.x;c.y-=f.y;c.z-=f.z;this.Ba++;if(this.Lm())break;this.Ba--;break}c=this.dir;c.x=a;c.y=b;c.z=e},Lm:function(){var a=this.La[2].x-this.La[0].x,b=this.La[2].y-this.La[0].y,e=this.La[2].z-this.La[0].z,d=this.La[3].x-this.La[0].x,c=this.La[3].y-this.La[0].y,f=this.La[3].z-this.La[0].z,a=(this.La[1].x-this.La[0].x)*(b*f-e*c)-(this.La[1].y-this.La[0].y)*(a*f-e*d)+(this.La[1].z-this.La[0].z)*(a*c-b*d);return 1E-12<a?!0:-1E-12>a},Ln:function(a,b,e,d,c,f,h){for(var l=this.ih;0<l.Bh;){var g=l.Cd;l.Bh--;var k=g.ia,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ia=k);g==l.Cd&&(l.Cd=l.Cd.M);g==l.cd&&(l.cd=l.cd.ia);g.M=null;g.ia=null;g.Lk();g.M=l.Qe;l.Qe=g}for(;0<l.We;){var p=l.Ca[--l.We];p.Lk();p.M=l.jf;l.jf=p}var r=this.ih,q=this.ih,t=q.jf;null!=t?(q.jf=t.M,t.M=null):t=new te;var A=t.Aa(c[0],f[0],h[0]),L=this.ih,u=L.jf;null!=u?(L.jf=u.M,u.M=null):u=new te;var n=u.Aa(c[1],f[1],h[1]),fc=this.ih,D=fc.jf;null!=D?(fc.jf=D.M,D.M=null):D=new te;var Ib=D.Aa(c[2],f[2],h[2]),y=this.ih,B=y.jf;null!=B?(y.jf=B.M,B.M=null):B=new te;if(!r.Mg(A,n,Ib,B.Aa(c[3],f[3],h[3])))return dc.EPA_FAILED_TO_INIT;this.Ba=0;for(var E=this.La[0],K=this.eb[0],H=this.ib[0],x=0;40>x;){for(var R=this.ih.Cd,F=Infinity,X=null;null!=R;)R.nk<F&&(F=R.nk,X=R),R=R.M;var I=X,Da=this.dir,qa=I.wk;Da.x=qa.x;Da.y=qa.y;Da.z=qa.z;var N=Math.sqrt(Da.x*Da.x+Da.y*Da.y+Da.z*Da.z);0<N&&(N=1/N);Da.x*=N;Da.y*=N;Da.z*=N;this.Tf(!1);this.Uf(!1);var ya=this.La[this.Ba],J=this.eb[this.Ba];ya.x=J.x;ya.y=J.y;ya.z=J.z;var Ea=this.ib[this.Ba];ya.x-=Ea.x;ya.y-=Ea.y;ya.z-=Ea.z;var O=I.Ca[0],sa=I.Ca[1],ba=I.Ca[2],za=O.Rd,Ta=this.dir,C=this.dir;if(1E-6>E.x*C.x+E.y*C.y+E.z*C.z-(za.x*Ta.x+za.y*Ta.y+za.z*Ta.z)||39==x){var Aa=this.closest,na=this.dir;Aa.x=na.x;Aa.y=na.y;Aa.z=na.z;var La=this.dir,Ba=O.Rd,ta=this.dir,S=(La.x*Ba.x+La.y*Ba.y+La.z*Ba.z)/(ta.x*ta.x+ta.y*ta.y+ta.z*ta.z);Aa.x*=S;Aa.y*=S;Aa.z*=S;var ha,ea,da,M=this.closest;ha=M.x;ea=M.y;da=M.z;var T,w,V,ia,Y,oa,ua,ca,Ma,va,Z,Pa,Fa,Q,aa,fa,Rd,ja,Ga,P,Ya,wa,wb,ec,Vb,Ab,ib,hb=O.Rd;T=hb.x;w=hb.y;V=hb.z;var ka=O.eb;ia=ka.x;Y=ka.y;oa=ka.z;var Ia=O.ib;ua=Ia.x;ca=Ia.y;Ma=Ia.z;var ab=sa.Rd;va=ab.x;Z=ab.y;Pa=ab.z;var bb=sa.eb;Fa=bb.x;Q=bb.y;aa=bb.z;var Wa=sa.ib;fa=Wa.x;Rd=Wa.y;ja=Wa.z;var Va=ba.Rd;Ga=Va.x;P=Va.y;Ya=Va.z;var qb=ba.eb;wa=qb.x;wb=qb.y;ec=qb.z;var kb=ba.ib;Vb=kb.x;Ab=kb.y;ib=kb.z;var Sa,Na,Za,vb,mb,xb,nb,fb,pa;Sa=va-T;Na=Z-w;Za=Pa-V;vb=Ga-T;mb=P-w;xb=Ya-V;nb=ha-T;fb=ea-w;pa=da-V;var Db=Sa*Sa+Na*Na+Za*Za,G=Sa*vb+Na*mb+Za*xb,sb=vb*vb+mb*mb+xb*xb,jb=Sa*nb+Na*fb+Za*pa,Xb=vb*nb+mb*fb+xb*pa,ob=Db*sb-G*G;ob&&(ob=1/ob);var cb=(jb*sb-Xb*G)*ob,zb=(-jb*G+Xb*Db)*ob,Xa,tb,v,W,U,db,cc,Ra,Ha;Xa=Fa-ia;tb=Q-Y;v=aa-oa;W=ia+Xa*cb;U=Y+tb*cb;db=oa+v*cb;Xa=wa-ia;tb=wb-Y;v=ec-oa;W+=Xa*zb;U+=tb*zb;db+=v*zb;Xa=fa-ua;tb=Rd-ca;v=ja-Ma;cc=ua+Xa*cb;Ra=ca+tb*cb;Ha=Ma+v*cb;Xa=Vb-ua;tb=Ab-ca;v=ib-Ma;cc+=Xa*zb;Ra+=tb*zb;Ha+=v*zb;var rb=this.closestPoint1;rb.x=W;rb.y=U;rb.z=db;var yb=this.closestPoint2;yb.x=cc;yb.y=Ra;yb.z=Ha;var Cb=this.closest;this.depth=Math.sqrt(Cb.x*Cb.x+Cb.y*Cb.y+Cb.z*Cb.z);return dc.SUCCEEDED}var la=this.ih,ra=la.jf;null!=ra?(la.jf=ra.M,ra.M=null):ra=new te;var ga=ra.Aa(E,K,H);if(!this.ih.qn(ga,I))return dc.EPA_FAILED_TO_ADD_VERTEX;++x}return dc.EPA_DID_NOT_CONVERGE},wa:function(a,b,e,d,c){return this.Nj(a,b,e,d,c,!0)},mb:function(a,b,e,d,c){return this.Nj(a,b,e,d,c,!1)},Vf:function(a,b,e,d,c,f,h){return this.xm(a,b,e,d,c,f,h)},ke:function(a,b,e,d,c){var f=this.Io;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.Jo,l=this.Ko;h.x=d.x;h.y=d.y;h.z=d.z;h.x-=e.x;h.y-=e.y;h.z-=e.z;l.R();return this.xm(null,a,f,b,h,l,c)}};Pc.wc=function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-d;g=h-c;k=b-a;var m;m=-(l*d+g*c+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=d,e.y=c,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=d+l*m;e.y=c+g*m;e.z=a+k*m;return 3};Pc.xc=function(a,b,e,d){var c,f,h,l,g,k,m,p,r,q,t,A,L,u,n,fc,D,Ib;c=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;p=e.y;r=e.z;q=l-c;t=g-f;A=k-h;L=m-l;u=p-g;n=r-k;fc=c-m;D=f-p;Ib=h-r;var y,B,E;y=t*n-A*u;B=A*L-q*n;E=q*u-t*L;var K=-1,H,x,R,F=0;R=x=H=0;if(0>c*(t*E-A*B)+f*(A*y-q*E)+h*(q*B-t*y)){K=a.x;H=a.y;x=a.z;R=b.x;F=b.y;q=b.z;var X;t=R-K;A=F-H;X=q-x;var I;I=-(t*K+A*H+X*x)/(t*t+A*A+X*X);0>I?(d.x=K,d.y=H,d.z=x,K=1):1<I?(d.x=R,d.y=F,d.z=q,K=2):(d.x=K+t*I,d.y=H+A*I,d.z=x+X*I,K=3);F=K;K=d.x*d.x+d.y*d.y+d.z*d.z;H=d.x;x=d.y;R=d.z}0>l*(u*E-n*B)+g*(n*y-L*E)+k*(L*B-u*y)&&(l=b.x,g=b.y,b=b.z,k=e.x,L=e.y,u=e.z,n=k-l,q=L-g,t=u-b,A=-(n*l+q*g+t*b)/(n*n+q*q+t*t),0>A?(d.x=l,d.y=g,d.z=b,b=1):1<A?(d.x=k,d.y=L,d.z=u,b=2):(d.x=l+n*A,d.y=g+q*A,d.z=b+t*A,b=3),l=d.x*d.x+d.y*d.y+d.z*d.z,0>K||l<K)&&(F=b<<1,K=l,H=d.x,x=d.y,R=d.z);0>m*(D*E-Ib*B)+p*(Ib*y-fc*E)+r*(fc*B-D*y)&&(m=a.x,p=a.y,a=a.z,r=e.x,fc=e.y,e=e.z,D=r-m,Ib=fc-p,b=e-a,l=-(D*m+Ib*p+b*a)/(D*D+Ib*Ib+b*b),0>l?(d.x=m,d.y=p,d.z=a,e=1):1<l?(d.x=r,d.y=fc,d.z=e,e=2):(d.x=m+D*l,d.y=p+Ib*l,d.z=a+b*l,e=3),a=d.x*d.x+d.y*d.y+d.z*d.z,0>K||a<K)&&(F=e&1|(e&2)<<1,K=a,H=d.x,x=d.y,R=d.z);if(0<K)return d.x=H,d.y=x,d.z=R,F;e=y*y+B*B+E*E;0<e&&(e=1/Math.sqrt(e));y*=e;B*=e;E*=e;c=(c*y+f*B+h*E)/(y*y+B*B+E*E);d.x=y*c;d.y=B*c;d.z=E*c;return 7};Pc.Dc=function(a,b,e,d,c){var f,h,l,g,k,m,p,r,q,t,A,L,u,n,fc,D,x,y,B,E,K,H,F,R,I,X,N;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;p=e.x;r=e.y;q=e.z;t=d.x;A=d.y;L=d.z;u=g-f;n=k-h;fc=m-l;D=p-f;x=r-h;y=q-l;B=t-f;E=A-h;K=L-l;H=p-g;F=r-k;R=q-m;I=t-g;X=A-k;N=L-m;var Da,qa,J,ya,pa,Ea,O,sa,ba,za,Ta,C;Da=n*y-fc*x;qa=fc*D-u*y;J=u*x-n*D;ya=x*K-y*E;pa=y*B-D*K;Ea=D*E-x*B;O=E*fc-K*n;sa=K*u-B*fc;ba=B*n-E*u;za=X*R-N*F;Ta=N*H-I*R;C=I*F-X*H;var Aa=0<u*za+n*Ta+fc*C?1:-1,na=-1,La,Ba,ta,S=0;ta=Ba=La=0;if(0>(f*Da+h*qa+l*J)*Aa){var ha,ea,da,M,T,w,V,ia,Y,oa,ua,ca,Ma,va,Z,Pa,Fa,Q;ha=a.x;ea=a.y;da=a.z;M=b.x;T=b.y;w=b.z;V=e.x;ia=e.y;Y=e.z;oa=M-ha;ua=T-ea;ca=w-da;Ma=V-M;va=ia-T;Z=Y-w;Pa=ha-V;Fa=ea-ia;Q=da-Y;var aa,fa,Rd;aa=ua*Z-ca*va;fa=ca*Ma-oa*Z;Rd=oa*va-ua*Ma;var ja,Ga,P,Ya,wa,wb,ec,Vb,Ab;ja=ua*Rd-ca*fa;Ga=ca*aa-oa*Rd;P=oa*fa-ua*aa;Ya=va*Rd-Z*fa;wa=Z*aa-Ma*Rd;wb=Ma*fa-va*aa;ec=Fa*Rd-Q*fa;Vb=Q*aa-Pa*Rd;Ab=Pa*fa-Fa*aa;var ib=-1,hb,ka,Ia,ab=0;Ia=ka=hb=0;if(0>ha*ja+ea*Ga+da*P){var bb,Wa,Va,qb,kb,Sa;bb=a.x;Wa=a.y;Va=a.z;qb=b.x;kb=b.y;Sa=b.z;var Na,Za,vb;Na=qb-bb;Za=kb-Wa;vb=Sa-Va;var mb=Na*bb+Za*Wa+vb*Va,mb=-mb/(Na*Na+Za*Za+vb*vb),xb;if(0>mb)c.x=bb,c.y=Wa,c.z=Va,xb=1;else if(1<mb)c.x=qb,c.y=kb,c.z=Sa,xb=2;else{var nb,fb,Ca;nb=bb+Na*mb;fb=Wa+Za*mb;Ca=Va+vb*mb;c.x=nb;c.y=fb;c.z=Ca;xb=3}ab=xb;ib=c.x*c.x+c.y*c.y+c.z*c.z;hb=c.x;ka=c.y;Ia=c.z}if(0>M*Ya+T*wa+w*wb){var Db,G,sb,jb,Xb,ob;Db=b.x;G=b.y;sb=b.z;jb=e.x;Xb=e.y;ob=e.z;var cb,zb,Xa;cb=jb-Db;zb=Xb-G;Xa=ob-sb;var tb=cb*Db+zb*G+Xa*sb,tb=-tb/(cb*cb+zb*zb+Xa*Xa),v;if(0>tb)c.x=Db,c.y=G,c.z=sb,v=1;else if(1<tb)c.x=jb,c.y=Xb,c.z=ob,v=2;else{var W,U,db;W=Db+cb*tb;U=G+zb*tb;db=sb+Xa*tb;c.x=W;c.y=U;c.z=db;v=3}var cc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>ib||cc<ib)ab=v<<1,ib=cc,hb=c.x,ka=c.y,Ia=c.z}if(0>V*ec+ia*Vb+Y*Ab){var Ra,Ha,rb,yb,Cb,la;Ra=a.x;Ha=a.y;rb=a.z;yb=e.x;Cb=e.y;la=e.z;var ra,ga,ma;ra=yb-Ra;ga=Cb-Ha;ma=la-rb;var Ja=ra*Ra+ga*Ha+ma*rb,Ja=-Ja/(ra*ra+ga*ga+ma*ma),$a;if(0>Ja)c.x=Ra,c.y=Ha,c.z=rb,$a=1;else if(1<Ja)c.x=yb,c.y=Cb,c.z=la,$a=2;else{var Oa,nc,xa;Oa=Ra+ra*Ja;nc=Ha+ga*Ja;xa=rb+ma*Ja;c.x=Oa;c.y=nc;c.z=xa;$a=3}var Fc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>ib||Fc<ib)ab=$a&1|($a&2)<<1,ib=Fc,hb=c.x,ka=c.y,Ia=c.z}var Ua;if(0<ib)c.x=hb,c.y=ka,c.z=Ia,Ua=ab;else{var Ka=aa*aa+fa*fa+Rd*Rd;0<Ka&&(Ka=1/Math.sqrt(Ka));aa*=Ka;fa*=Ka;Rd*=Ka;var eb=aa*aa+fa*fa+Rd*Rd,eb=(ha*aa+ea*fa+da*Rd)/eb;hb=aa*eb;ka=fa*eb;Ia=Rd*eb;c.x=hb;c.y=ka;c.z=Ia;Ua=7}S=Ua;na=c.x*c.x+c.y*c.y+c.z*c.z;La=c.x;Ba=c.y;ta=c.z}if(0>(f*ya+h*pa+l*Ea)*Aa){var gb,ub,xd,pb,Qa,de,Ic,Yb,oc,Id,$d,rc,Jc,Bb,Fb,Jb,hc,uc;gb=a.x;ub=a.y;xd=a.z;pb=e.x;Qa=e.y;de=e.z;Ic=d.x;Yb=d.y;oc=d.z;Id=pb-gb;$d=Qa-ub;rc=de-xd;Jc=Ic-pb;Bb=Yb-Qa;Fb=oc-de;Jb=gb-Ic;hc=ub-Yb;uc=xd-oc;var gc,Xc,Eb;gc=$d*Fb-rc*Bb;Xc=rc*Jc-Id*Fb;Eb=Id*Bb-$d*Jc;var Ng,Lb,Gb,Ob,xf,ic,Hb,Qb,Sb;Ng=$d*Eb-rc*Xc;Lb=rc*gc-Id*Eb;Gb=Id*Xc-$d*gc;Ob=Bb*Eb-Fb*Xc;xf=Fb*gc-Jc*Eb;ic=Jc*Xc-Bb*gc;Hb=hc*Eb-uc*Xc;Qb=uc*gc-Jb*Eb;Sb=Jb*Xc-hc*gc;var Nb=-1,sc,Jd,lb,Gc=0;lb=Jd=sc=0;if(0>gb*Ng+ub*Lb+xd*Gb){var Rb,vc,Kb,dc,bc,Pb;Rb=a.x;vc=a.y;Kb=a.z;dc=e.x;bc=e.y;Pb=e.z;var Wb,$b,Mb;Wb=dc-Rb;$b=bc-vc;Mb=Pb-Kb;var Tb=Wb*Rb+$b*vc+Mb*Kb,Tb=-Tb/(Wb*Wb+$b*$b+Mb*Mb),ac;if(0>Tb)c.x=Rb,c.y=vc,c.z=Kb,ac=1;else if(1<Tb)c.x=dc,c.y=bc,c.z=Pb,ac=2;else{var qc,pc,Zb;qc=Rb+Wb*Tb;pc=vc+$b*Tb;Zb=Kb+Mb*Tb;c.x=qc;c.y=pc;c.z=Zb;ac=3}Gc=ac;Nb=c.x*c.x+c.y*c.y+c.z*c.z;sc=c.x;Jd=c.y;lb=c.z}if(0>pb*Ob+Qa*xf+de*ic){var kc,lc,kd,tc,jc,fd;kc=e.x;lc=e.y;kd=e.z;tc=d.x;jc=d.y;fd=d.z;var Rc,zc,gd;Rc=tc-kc;zc=jc-lc;gd=fd-kd;var Yc=Rc*kc+zc*lc+gd*kd,Yc=-Yc/(Rc*Rc+zc*zc+gd*gd),od;if(0>Yc)c.x=kc,c.y=lc,c.z=kd,od=1;else if(1<Yc)c.x=tc,c.y=jc,c.z=fd,od=2;else{var Qc,wc,Uc;Qc=kc+Rc*Yc;wc=lc+zc*Yc;Uc=kd+gd*Yc;c.x=Qc;c.y=wc;c.z=Uc;od=3}var Zc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Nb||Zc<Nb)Gc=od<<1,Nb=Zc,sc=c.x,Jd=c.y,lb=c.z}if(0>Ic*Hb+Yb*Qb+oc*Sb){var Kc,Lc,xc,Cc,Dc,pd;Kc=a.x;Lc=a.y;xc=a.z;Cc=d.x;Dc=d.y;pd=d.z;var yd,sd,td;yd=Cc-Kc;sd=Dc-Lc;td=pd-xc;var zd=yd*Kc+sd*Lc+td*xc,zd=-zd/(yd*yd+sd*sd+td*td),Pc;if(0>zd)c.x=Kc,c.y=Lc,c.z=xc,Pc=1;else if(1<zd)c.x=Cc,c.y=Dc,c.z=pd,Pc=2;else{var ve,we,Ce;ve=Kc+yd*zd;we=Lc+sd*zd;Ce=xc+td*zd;c.x=ve;c.y=we;c.z=Ce;Pc=3}var De=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Nb||De<Nb)Gc=Pc&1|(Pc&2)<<1,Nb=De,sc=c.x,Jd=c.y,lb=c.z}var Qd;if(0<Nb)c.x=sc,c.y=Jd,c.z=lb,Qd=Gc;else{var Sd=gc*gc+Xc*Xc+Eb*Eb;0<Sd&&(Sd=1/Math.sqrt(Sd));gc*=Sd;Xc*=Sd;Eb*=Sd;var ie=gc*gc+Xc*Xc+Eb*Eb,ie=(gb*gc+ub*Xc+xd*Eb)/ie;sc=gc*ie;Jd=Xc*ie;lb=Eb*ie;c.x=sc;c.y=Jd;c.z=lb;Qd=7}var Fe=c.x*c.x+c.y*c.y+c.z*c.z;if(0>na||Fe<na)S=Qd&1|(Qd&6)<<1,na=Fe,La=c.x,Ba=c.y,ta=c.z}if(0>(f*O+h*sa+l*ba)*Aa){var je,Wc,Hd,se,te,Ge,He,Se,Te,Ie,Je,ae,xe,$c,Sc,ld,Ee,Qe;je=a.x;Wc=a.y;Hd=a.z;se=b.x;te=b.y;Ge=b.z;He=d.x;Se=d.y;Te=d.z;Ie=se-je;Je=te-Wc;ae=Ge-Hd;xe=He-se;$c=Se-te;Sc=Te-Ge;ld=je-He;Ee=Wc-Se;Qe=Hd-Te;var Ad,Bd,ud;Ad=Je*Sc-ae*$c;Bd=ae*xe-Ie*Sc;ud=Ie*$c-Je*xe;var ke,le,me,Cd,Dd,hd,Kd,ee,Td;ke=Je*ud-ae*Bd;le=ae*Ad-Ie*ud;me=Ie*Bd-Je*Ad;Cd=$c*ud-Sc*Bd;Dd=Sc*Ad-xe*ud;hd=xe*Bd-$c*Ad;Kd=Ee*ud-Qe*Bd;ee=Qe*Ad-ld*ud;Td=ld*Bd-Ee*Ad;var qd=-1,Ud,Ld,Md,ne=0;Md=Ld=Ud=0;if(0>je*ke+Wc*le+Hd*me){var Ue,ad,Ed,id,bd,cd;Ue=a.x;ad=a.y;Ed=a.z;id=b.x;bd=b.y;cd=b.z;var Vc,Mc,Nc;Vc=id-Ue;Mc=bd-ad;Nc=cd-Ed;var Ec=Vc*Ue+Mc*ad+Nc*Ed,Ec=-Ec/(Vc*Vc+Mc*Mc+Nc*Nc),yc;if(0>Ec)c.x=Ue,c.y=ad,c.z=Ed,yc=1;else if(1<Ec)c.x=id,c.y=bd,c.z=cd,yc=2;else{var Bc,Ac,Tc;Bc=Ue+Vc*Ec;Ac=ad+Mc*Ec;Tc=Ed+Nc*Ec;c.x=Bc;c.y=Ac;c.z=Tc;yc=3}ne=yc;qd=c.x*c.x+c.y*c.y+c.z*c.z;Ud=c.x;Ld=c.y;Md=c.z}if(0>se*Cd+te*Dd+Ge*hd){var Hc,Oc,oe,lf,md,Fd;Hc=b.x;Oc=b.y;oe=b.z;lf=d.x;md=d.y;Fd=d.z;var ed,vd,jd;ed=lf-Hc;vd=md-Oc;jd=Fd-oe;var nd=ed*Hc+vd*Oc+jd*oe,nd=-nd/(ed*ed+vd*vd+jd*jd),mf;if(0>nd)c.x=Hc,c.y=Oc,c.z=oe,mf=1;else if(1<nd)c.x=lf,c.y=md,c.z=Fd,mf=2;else{var ff,gf,hf;ff=Hc+ed*nd;gf=Oc+vd*nd;hf=oe+jd*nd;c.x=ff;c.y=gf;c.z=hf;mf=3}var jf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>qd||jf<qd)ne=mf<<1,qd=jf,Ud=c.x,Ld=c.y,Md=c.z}if(0>He*Kd+Se*ee+Te*Td){var ue,fe,pe,ge,rd,Vd;ue=a.x;fe=a.y;pe=a.z;ge=d.x;rd=d.y;Vd=d.z;var wd,Wd,qe;wd=ge-ue;Wd=rd-fe;qe=Vd-pe;var he=wd*ue+Wd*fe+qe*pe,he=-he/(wd*wd+Wd*Wd+qe*qe),zf;if(0>he)c.x=ue,c.y=fe,c.z=pe,zf=1;else if(1<he)c.x=ge,c.y=rd,c.z=Vd,zf=2;else{var kf,tg,ug;kf=ue+wd*he;tg=fe+Wd*he;ug=pe+qe*he;c.x=kf;c.y=tg;c.z=ug;zf=3}var vg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>qd||vg<qd)ne=zf&1|(zf&2)<<1,qd=vg,Ud=c.x,Ld=c.y,Md=c.z}var Ke;if(0<qd)c.x=Ud,c.y=Ld,c.z=Md,Ke=ne;else{var Ve=Ad*Ad+Bd*Bd+ud*ud;0<Ve&&(Ve=1/Math.sqrt(Ve));Ad*=Ve;Bd*=Ve;ud*=Ve;var Mf=Ad*Ad+Bd*Bd+ud*ud,Mf=(je*Ad+Wc*Bd+Hd*ud)/Mf;Ud=Ad*Mf;Ld=Bd*Mf;Md=ud*Mf;c.x=Ud;c.y=Ld;c.z=Md;Ke=7}var eg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>na||eg<na)S=Ke&3|(Ke&4)<<1,na=eg,La=c.x,Ba=c.y,ta=c.z}if(0>(g*za+k*Ta+m*C)*Aa){var fg,Nf,Of,gg,Pf,Qf,Rf,Sf,Tf,Af,ye,nf,Uf,of,hg,vf,wg,xg;fg=b.x;Nf=b.y;Of=b.z;gg=e.x;Pf=e.y;Qf=e.z;Rf=d.x;Sf=d.y;Tf=d.z;Af=gg-fg;ye=Pf-Nf;nf=Qf-Of;Uf=Rf-gg;of=Sf-Pf;hg=Tf-Qf;vf=fg-Rf;wg=Nf-Sf;xg=Of-Tf;var Xd,Nd,Od;Xd=ye*hg-nf*of;Nd=nf*Uf-Af*hg;Od=Af*of-ye*Uf;var yg,zg,Ag,Bg,pf,Vf,Kf,ig,Lf;yg=ye*Od-nf*Nd;zg=nf*Xd-Af*Od;Ag=Af*Nd-ye*Xd;Bg=of*Od-hg*Nd;pf=hg*Xd-Uf*Od;Vf=Uf*Nd-of*Xd;Kf=wg*Od-xg*Nd;ig=xg*Xd-vf*Od;Lf=vf*Nd-wg*Xd;var Wf=-1,Bf,We,qf,Cg=0;qf=We=Bf=0;if(0>fg*yg+Nf*zg+Of*Ag){var Le,Xe,Xf,Yf,Zf,$f;Le=b.x;Xe=b.y;Xf=b.z;Yf=e.x;Zf=e.y;$f=e.z;var Cf,Df,Ef;Cf=Yf-Le;Df=Zf-Xe;Ef=$f-Xf;var Me=Cf*Le+Df*Xe+Ef*Xf,Me=-Me/(Cf*Cf+Df*Df+Ef*Ef),Ff;if(0>Me)c.x=Le,c.y=Xe,c.z=Xf,Ff=1;else if(1<Me)c.x=Yf,c.y=Zf,c.z=$f,Ff=2;else{var jg,ag,bg;jg=Le+Cf*Me;ag=Xe+Df*Me;bg=Xf+Ef*Me;c.x=jg;c.y=ag;c.z=bg;Ff=3}Cg=Ff;Wf=c.x*c.x+c.y*c.y+c.z*c.z;Bf=c.x;We=c.y;qf=c.z}if(0>gg*Bg+Pf*pf+Qf*Vf){var Ye,Gf,Hf,kg,be,ce;Ye=e.x;Gf=e.y;Hf=e.z;kg=d.x;be=d.y;ce=d.z;var Pd,Yd,Zd;Pd=kg-Ye;Yd=be-Gf;Zd=ce-Hf;var Gd=Pd*Ye+Yd*Gf+Zd*Hf,Gd=-Gd/(Pd*Pd+Yd*Yd+Zd*Zd),wf;if(0>Gd)c.x=Ye,c.y=Gf,c.z=Hf,wf=1;else if(1<Gd)c.x=kg,c.y=be,c.z=ce,wf=2;else{var Jg,Kg,Lg;Jg=Ye+Pd*Gd;Kg=Gf+Yd*Gd;Lg=Hf+Zd*Gd;c.x=Jg;c.y=Kg;c.z=Lg;wf=3}var Mg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Wf||Mg<Wf)Cg=wf<<1,Wf=Mg,Bf=c.x,We=c.y,qf=c.z}if(0>Rf*Kf+Sf*ig+Tf*Lf){var Qg,Ze,rf,cg,re,sf;Qg=b.x;Ze=b.y;rf=b.z;cg=d.x;re=d.y;sf=d.z;var ze,Ae,tf;ze=cg-Qg;Ae=re-Ze;tf=sf-rf;var $e=ze*Qg+Ae*Ze+tf*rf,$e=-$e/(ze*ze+Ae*Ae+tf*tf),If;if(0>$e)c.x=Qg,c.y=Ze,c.z=rf,If=1;else if(1<$e)c.x=cg,c.y=re,c.z=sf,If=2;else{var Dg,Eg,Fg;Dg=Qg+ze*$e;Eg=Ze+Ae*$e;Fg=rf+tf*$e;c.x=Dg;c.y=Eg;c.z=Fg;If=3}var Gg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Wf||Gg<Wf)Cg=If&1|(If&2)<<1,Wf=Gg,Bf=c.x,We=c.y,qf=c.z}var af;if(0<Wf)c.x=Bf,c.y=We,c.z=qf,af=Cg;else{var bf=Xd*Xd+Nd*Nd+Od*Od;0<bf&&(bf=1/Math.sqrt(bf));Xd*=bf;Nd*=bf;Od*=bf;var dg=Xd*Xd+Nd*Nd+Od*Od,dg=(fg*Xd+Nf*Nd+Of*Od)/dg;Bf=Xd*dg;We=Nd*dg;qf=Od*dg;c.x=Bf;c.y=We;c.z=qf;af=7}var lg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>na||lg<na)S=af<<1,na=lg,La=c.x,Ba=c.y,ta=c.z}if(0<na)return c.x=La,c.y=Ba,c.z=ta,S;c.R();return 15};I.prototype={Aa:function(a,b,e,d,c,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},rg:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},Dc:function(a){return new I(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},ig:function(a){return new I(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},gg:function(a){return new I(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},He:function(a){return new I(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Hc:function(a){this.e00+=a.e00;this.e01+=a.e01;this.e02+=a.e02;this.e10+=a.e10;this.e11+=a.e11;this.e12+=a.e12;this.e20+=a.e20;this.e21+=a.e21;this.e22+=a.e22;return this},jg:function(a){this.e00-=a.e00;this.e01-=a.e01;this.e02-=a.e02;this.e10-=a.e10;this.e11-=a.e11;this.e12-=a.e12;this.e20-=a.e20;this.e21-=a.e21;this.e22-=a.e22;return this},hg:function(a){this.e00*=a;this.e01*=a;this.e02*=a;this.e10*=a;this.e11*=a;this.e12*=a;this.e20*=a;this.e21*=a;this.e22*=a;return this},Ie:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,c=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},bf:function(a,b,e){return new I(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},Wc:function(a,b,e){return new I(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},Je:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new I(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+p*this.e20,k*this.e01+m*this.e11+p*this.e21,k*this.e02+m*this.e12+p*this.e22,r*this.e00+b*this.e10+d*this.e20,r*this.e01+b*this.e11+d*this.e21,r*this.e02+b*this.e12+d*this.e22)},Uc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new I(this.e00*a+this.e01*k+this.e02*r,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*p+this.e02*d,this.e10*a+this.e11*k+this.e12*r,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*p+this.e12*d,this.e20*a+this.e21*k+this.e22*r,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*p+this.e22*d)},cf:function(a,b,e){this.e00*=a;this.e01*=a;this.e02*=a;this.e10*=b;this.e11*=b;this.e12*=b;this.e20*=e;this.e21*=e;this.e22*=e;return this},vd:function(a,b,e){this.e00*=a;this.e01*=b;this.e02*=e;this.e10*=a;this.e11*=b;this.e12*=e;this.e20*=a;this.e21*=b;this.e22*=e;return this},Ke:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;c=d*d*h+f;d=k*this.e00+m*this.e10+p*this.e20;e=k*this.e01+m*this.e11+p*this.e21;k=k*this.e02+m*this.e12+p*this.e22;m=r*this.e00+b*this.e10+c*this.e20;p=r*this.e01+b*this.e11+c*this.e21;r=r*this.e02+b*this.e12+c*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=a*this.e01+l*this.e11+g*this.e21;this.e02=a*this.e02+l*this.e12+g*this.e22;this.e10=d;this.e11=e;this.e12=k;this.e20=m;this.e21=p;this.e22=r;return this},Vc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;h=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*p+this.e02*h;c=this.e10*l+this.e11*m+this.e12*b;f=this.e10*g+this.e11*p+this.e12*h;l=this.e20*l+this.e21*m+this.e22*b;g=this.e20*g+this.e21*p+this.e22*h;this.e00=this.e00*a+this.e01*k+this.e02*r;this.e01=d;this.e02=e;this.e10=this.e10*a+this.e11*k+this.e12*r;this.e11=c;this.e12=f;this.e20=this.e20*a+this.e21*k+this.e22*r;this.e21=l;this.e22=g;return this},Di:function(){return new I(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},Ei:function(){var a=this.e01,b=this.e02,e=this.e12;this.e00=this.e00;this.e01=this.e10;this.e02=this.e20;this.e10=a;this.e11=this.e11;this.e12=this.e21;this.e20=b;this.e21=e;this.e22=this.e22;return this},ie:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},ph:function(){return this.e00+this.e11+this.e22},Fe:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e00*a-this.e01*b+this.e02*e;d&&(d=1/d);return new I(a*d,-(this.e01*this.e22-this.e02*this.e21)*d,(this.e01*this.e12-this.e02*this.e11)*d,-b*d,(this.e00*this.e22-this.e02*this.e20)*d,-(this.e00*this.e12-this.e02*this.e10)*d,e*d,-(this.e00*this.e21-this.e01*this.e20)*d,(this.e00*this.e11-this.e01*this.e10)*d)},Ge:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e00*a-this.e01*b+this.e02*e;d&&(d=1/d);var c=(this.e01*this.e12-this.e02*this.e11)*d,f=(this.e00*this.e22-this.e02*this.e20)*d,h=-(this.e00*this.e12-this.e02*this.e10)*d,l=-(this.e00*this.e21-this.e01*this.e20)*d,g=(this.e00*this.e11-this.e01*this.e10)*d;this.e00=a*d;this.e01=-(this.e01*this.e22-this.e02*this.e21)*d;this.e02=c;this.e10=-b*d;this.e11=f;this.e12=h;this.e20=e*d;this.e21=l;this.e22=g;return this},kg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},qe:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new I(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},Cb:function(a){var b=a.x,e=a.y,d=a.z,c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h,d=d*l,k=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;this.e00=1-g-d;this.e01=k-c;this.e02=b+h;this.e10=k+c;this.e11=1-a-d;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},gk:function(){var a=new wa,b=this.e00,e=this.e11,d=this.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},mb:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),d=Math.sin(a.z),c=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*d;this.e02=e;this.e10=c*d+a*b*e;this.e11=c*a-b*e*d;this.e12=-f*b;this.e20=b*d-c*a*e;this.e21=a*b+c*e*d;this.e22=c*f;return this},Fi:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new n(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new n(.5*a,1.570796326794895,.5*a)):new n(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},wc:function(a){return 0==a?new n(this.e00,this.e01,this.e02):1==a?new n(this.e10,this.e11,this.e12):2==a?new n(this.e20,this.e21,this.e22):null},kc:function(a){return 0==a?new n(this.e00,this.e10,this.e20):1==a?new n(this.e01,this.e11,this.e21):2==a?new n(this.e02,this.e12,this.e22):null},xc:function(a,b){0==a?b.Aa(this.e00,this.e01,this.e02):1==a?b.Aa(this.e10,this.e11,this.e12):2==a?b.Aa(this.e20,this.e21,this.e22):b.R()},lc:function(a,b){0==a?b.Aa(this.e00,this.e10,this.e20):1==a?b.Aa(this.e01,this.e11,this.e21):2==a?b.Aa(this.e02,this.e12,this.e22):b.R()},Kb:function(a,b,e){this.e00=a.x;this.e01=a.y;this.e02=a.z;this.e10=b.x;this.e11=b.y;this.e12=b.z;this.e20=e.x;this.e21=e.y;this.e22=e.z;return this},wa:function(a,b,e){this.e00=a.x;this.e01=b.x;this.e02=e.x;this.e10=a.y;this.e11=b.y;this.e12=e.y;this.e20=a.z;this.e21=b.z;this.e22=e.z;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"}};J.prototype={Aa:function(a,b,e,d,c,f,h,l,g,k,m,p,r,q,t,A){this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=p;this.e30=r;this.e31=q;this.e32=t;this.e33=A;return this},rg:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},kc:function(a){return new J(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},gg:function(a){return new J(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},bf:function(a){return new J(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},ie:function(a){return new J(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},lc:function(a){this.e00+=a.e00;this.e01+=a.e01;this.e02+=a.e02;this.e03+=a.e03;this.e10+=a.e10;this.e11+=a.e11;this.e12+=a.e12;this.e13+=a.e13;this.e20+=a.e20;this.e21+=a.e21;this.e22+=a.e22;this.e23+=a.e23;this.e30+=a.e30;this.e31+=a.e31;this.e32+=a.e32;this.e33+=a.e33;return this},hg:function(a){this.e00-=a.e00;this.e01-=a.e01;this.e02-=a.e02;this.e03-=a.e03;this.e10-=a.e10;this.e11-=a.e11;this.e12-=a.e12;this.e13-=a.e13;this.e20-=a.e20;this.e21-=a.e21;this.e22-=a.e22;this.e23-=a.e23;this.e30-=a.e30;this.e31-=a.e31;this.e32-=a.e32;this.e33-=a.e33;return this},cf:function(a){this.e00*=a;this.e01*=a;this.e02*=a;this.e03*=a;this.e10*=a;this.e11*=a;this.e12*=a;this.e13*=a;this.e20*=a;this.e21*=a;this.e22*=a;this.e23*=a;this.e30*=a;this.e31*=a;this.e32*=a;this.e33*=a;return this},Fe:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,d=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,p=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,r=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,q=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,t=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,A=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=p;this.e30=r;this.e31=q;this.e32=t;this.e33=A;return this},Je:function(a,b,e){return new J(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},Dc:function(a,b,e){return new J(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},He:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new J(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+p*this.e20,k*this.e01+m*this.e11+p*this.e21,k*this.e02+m*this.e12+p*this.e22,k*this.e03+m*this.e13+p*this.e23,r*this.e00+b*this.e10+d*this.e20,r*this.e01+b*this.e11+d*this.e21,r*this.e02+b*this.e12+d*this.e22,r*this.e03+b*this.e13+d*this.e23,this.e30,this.e31,this.e32,this.e33)},wc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new J(this.e00*a+this.e01*k+this.e02*r,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*p+this.e02*d,this.e03,this.e10*a+this.e11*k+this.e12*r,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*p+this.e12*d,this.e13,this.e20*a+this.e21*k+this.e22*r,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*p+this.e22*d,this.e23,this.e30*a+this.e31*k+this.e32*r,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*p+this.e32*d,this.e33)},Ei:function(a,b,e){return new J(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},wa:function(a,b,e){return new J(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},Ke:function(a,b,e){this.e00*=a;this.e01*=a;this.e02*=a;this.e03*=a;this.e10*=b;this.e11*=b;this.e12*=b;this.e13*=b;this.e20*=e;this.e21*=e;this.e22*=e;this.e23*=e;this.e30=this.e30;this.e31=this.e31;this.e32=this.e32;this.e33=this.e33;return this},Hc:function(a,b,e){this.e00*=a;this.e01*=b;this.e02*=e;this.e03=this.e03;this.e10*=a;this.e11*=b;this.e12*=e;this.e13=this.e13;this.e20*=a;this.e21*=b;this.e22*=e;this.e23=this.e23;this.e30*=a;this.e31*=b;this.e32*=e;this.e33=this.e33;return this},Ie:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;f=d*d*h+f;d=k*this.e00+m*this.e10+p*this.e20;e=k*this.e01+m*this.e11+p*this.e21;c=k*this.e02+m*this.e12+p*this.e22;k=k*this.e03+m*this.e13+p*this.e23;m=r*this.e00+b*this.e10+f*this.e20;p=r*this.e01+b*this.e11+f*this.e21;h=r*this.e02+b*this.e12+f*this.e22;r=r*this.e03+b*this.e13+f*this.e23;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=a*this.e01+l*this.e11+g*this.e21;this.e02=a*this.e02+l*this.e12+g*this.e22;this.e03=a*this.e03+l*this.e13+g*this.e23;this.e10=d;this.e11=e;this.e12=c;this.e13=k;this.e20=m;this.e21=p;this.e22=h;this.e23=r;this.e30=this.e30;this.e31=this.e31;this.e32=this.e32;this.e33=this.e33;return this},xc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,p=e*d*h-b*c,r=d*b*h-e*c;b=d*e*h+b*c;var q=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*p+this.e02*q;var c=this.e10*l+this.e11*m+this.e12*b,f=this.e10*g+this.e11*p+this.e12*q,h=this.e20*l+this.e21*m+this.e22*b,t=this.e20*g+this.e21*p+this.e22*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*p+this.e32*q;this.e00=this.e00*a+this.e01*k+this.e02*r;this.e01=d;this.e02=e;this.e03=this.e03;this.e10=this.e10*a+this.e11*k+this.e12*r;this.e11=c;this.e12=f;this.e13=this.e13;this.e20=this.e20*a+this.e21*k+this.e22*r;this.e21=h;this.e22=t;this.e23=this.e23;this.e30=this.e30*a+this.e31*k+this.e32*r;this.e31=l;this.e32=g;this.e33=this.e33;return this},Fi:function(a,b,e){this.e00+=a*this.e30;this.e01+=a*this.e31;this.e02+=a*this.e32;this.e03+=a*this.e33;this.e10+=b*this.e30;this.e11+=b*this.e31;this.e12+=b*this.e32;this.e13+=b*this.e33;this.e20+=e*this.e30;this.e21+=e*this.e31;this.e22+=e*this.e32;this.e23+=e*this.e33;this.e30=this.e30;this.e31=this.e31;this.e32=this.e32;this.e33=this.e33;return this},mb:function(a,b,e){var d=this.e00*a+this.e01*b+this.e02*e+this.e03,c=this.e10*a+this.e11*b+this.e12*e+this.e13,f=this.e20*a+this.e21*b+this.e22*e+this.e23;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=this.e01;this.e02=this.e02;this.e03=d;this.e10=this.e10;this.e11=this.e11;this.e12=this.e12;this.e13=c;this.e20=this.e20;this.e21=this.e21;this.e22=this.e22;this.e23=f;this.e30=this.e30;this.e31=this.e31;this.e32=this.e32;this.e33=a;return this},kg:function(){return new J(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},ph:function(){var a=this.e01,b=this.e02,e=this.e12,d=this.e03,c=this.e13,f=this.e23;this.e00=this.e00;this.e01=this.e10;this.e02=this.e20;this.e03=this.e30;this.e10=a;this.e11=this.e11;this.e12=this.e21;this.e13=this.e31;this.e20=b;this.e21=e;this.e22=this.e22;this.e23=this.e32;this.e30=d;this.e31=c;this.e32=f;this.e33=this.e33;return this},Uc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,d=this.e21*this.e32-this.e22*this.e31,c=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*c+this.e13*d)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*c-this.e11*e+this.e13*a)-this.e03*(this.e10*d-this.e11*b+this.e12*a)},jg:function(){return this.e00+this.e11+this.e22+this.e33},Wc:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,p=this.e22*this.e33-this.e23*this.e32,r=this.e11*p-this.e12*m+this.e13*k,q=this.e10*p-this.e12*g+this.e13*l,t=this.e10*m-this.e11*g+this.e13*h,A=this.e10*k-this.e11*l+this.e12*h,L=this.e00*r-this.e01*q+this.e02*t-this.e03*A;L&&(L=1/L);return new J(r*L,-(this.e01*p-this.e02*m+this.e03*k)*L,(this.e31*f-this.e32*c+this.e33*d)*L,-(this.e21*f-this.e22*c+this.e23*d)*L,-q*L,(this.e00*p-this.e02*g+this.e03*l)*L,-(this.e30*f-this.e32*e+this.e33*b)*L,(this.e20*f-this.e22*e+this.e23*b)*L,t*L,-(this.e00*m-this.e01*g+this.e03*h)*L,(this.e30*c-this.e31*e+this.e33*a)*L,-(this.e20*c-this.e21*e+this.e23*a)*L,-A*L,(this.e00*k-this.e01*l+this.e02*h)*L,-(this.e30*d-this.e31*b+this.e32*a)*L,(this.e20*d-this.e21*b+this.e22*a)*L)},vd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,p=this.e22*this.e33-this.e23*this.e32,r=this.e11*p-this.e12*m+this.e13*k,q=this.e10*p-this.e12*g+this.e13*l,t=this.e10*m-this.e11*g+this.e13*h,A=this.e10*k-this.e11*l+this.e12*h,L=this.e00*r-this.e01*q+this.e02*t-this.e03*A;L&&(L=1/L);var u=(this.e00*p-this.e02*g+this.e03*l)*L,g=-(this.e00*m-this.e01*g+this.e03*h)*L,n=-(this.e20*c-this.e21*e+this.e23*a)*L,h=(this.e00*k-this.e01*l+this.e02*h)*L,l=-(this.e30*d-this.e31*b+this.e32*a)*L,fc=(this.e20*d-this.e21*b+this.e22*a)*L;this.e00=r*L;this.e01=-(this.e01*p-this.e02*m+this.e03*k)*L;this.e02=(this.e31*f-this.e32*c+this.e33*d)*L;this.e03=-(this.e21*f-this.e22*c+this.e23*d)*L;this.e10=-q*L;this.e11=u;this.e12=-(this.e30*f-this.e32*e+this.e33*b)*L;this.e13=(this.e20*f-this.e22*e+this.e23*b)*L;this.e20=t*L;this.e21=g;this.e22=(this.e30*c-this.e31*e+this.e33*a)*L;this.e23=n;this.e30=-A*L;this.e31=h;this.e32=l;this.e33=fc;return this},Kb:function(a,b,e,d,c,f,h,l,g){d=a-d;c=b-c;f=e-f;var k=1/Math.sqrt(d*d+c*c+f*f);d*=k;c*=k;f*=k;var m=l*f-g*c;g=g*d-h*f;h=h*c-l*d;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=c*h-f*g;var k=f*m-d*h,p=d*g-c*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=p;this.e13=-(l*a+k*b+p*e);this.e20=d;this.e21=c;this.e22=f;this.e23=-(d*a+c*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},Ge:function(a,b,e,d){a=1/Math.tan(.5*a);d/=e-d;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},Di:function(a,b,e,d){d=1/(e-d);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e32=this.e31=this.e30=0;this.e33=1;return this},ig:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},qe:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},Vc:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=0;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=0;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},Cb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new J(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"}};pa.abs=function(a){return 0<a?a:-a};pa.sin=function(a){return Math.sin(a)};pa.cos=function(a){return Math.cos(a)};pa.tan=function(a){return Math.tan(a)};pa.asin=function(a){return Math.asin(a)};pa.acos=function(a){return Math.acos(a)};pa.atan=function(a){return Math.atan(a)};pa.ie=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};pa.vd=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};pa.atan2=function(a,b){return Math.atan2(a,b)};pa.sqrt=function(a){return Math.sqrt(a)};pa.Cb=function(a,b,e){return a<b?b:a>e?e:a};pa.Hc=function(){return Math.random()};pa.Uc=function(a,b){return a+Math.random()*(b-a)};pa.Wc=function(a,b){return new n(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};pa.Vc=function(){return new n(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};Nb.prototype={Dc:function(){return 0==this.b?new n:this.c[--this.b]},lc:function(){return 0==this.cb?new I:this.bb[--this.cb]},wc:function(){return 0==this.Ag?new J:this.eg[--this.Ag]},xc:function(){return 0==this.re?new wa:this.le[--this.re]},wa:function(a,b,e,d){if(null!=a){a.R();if(this.b==this.c.length){for(var c=Array(this.b<<1),f=0,h=this.b;f<h;){var l=f++;c[l]=this.c[l];this.c[l]=null}this.c=c}this.c[this.b++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.cb==this.bb.length){a=Array(this.cb<<1);c=0;for(f=this.cb;c<f;)h=c++,a[h]=this.bb[h],this.bb[h]=null;this.bb=a}this.bb[this.cb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.Ag==this.eg.length){b=Array(this.Ag<<1);a=0;for(c=this.Ag;a<c;)f=a++,b[f]=this.eg[f],this.eg[f]=null;this.eg=b}this.eg[this.Ag++]=e}if(null!=d){d.x=0;d.y=0;d.z=0;d.w=1;if(this.re==this.le.length){e=Array(this.re<<1);b=0;for(a=this.re;b<a;)c=b++,e[c]=this.le[c],this.le[c]=null;this.le=e}this.le[this.re++]=d}},kc:function(a){a.R();if(this.b==this.c.length){for(var b=Array(this.b<<1),e=0,d=this.b;e<d;){var c=e++;b[c]=this.c[c];this.c[c]=null}this.c=b}this.c[this.b++]=a},mb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.cb==this.bb.length){for(var b=Array(this.cb<<1),e=0,d=this.cb;e<d;){var c=e++;b[c]=this.bb[c];this.bb[c]=null}this.bb=b}this.bb[this.cb++]=a},Cb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.Ag==this.eg.length){for(var b=Array(this.Ag<<1),e=0,d=this.Ag;e<d;){var c=e++;b[c]=this.eg[c];this.eg[c]=null}this.eg=b}this.eg[this.Ag++]=a},Kb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.re==this.le.length){for(var b=Array(this.re<<1),e=0,d=this.re;e<d;){var c=e++;b[c]=this.le[c];this.le[c]=null}this.le=b}this.le[this.re++]=a}};wa.prototype={rg:function(){this.z=this.y=this.x=0;this.w=1;return this},Aa:function(a,b,e,d){this.x=a;this.y=b;this.z=e;this.w=d;return this},wa:function(a){return new wa(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Hc:function(a){return new wa(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},xc:function(a){return new wa(this.x*a,this.y*a,this.z*a,this.w*a)},mb:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},Uc:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},Dc:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},kc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Cb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},wc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new wa(this.x*a,this.y*a,this.z*a,this.w*a)},lc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},Vc:function(a,b){var e=a.x,d=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*c+d*f+a*b)));if(!this.w)return c=e*e,f=d*d,b=a*a,c<f?c<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-d*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+c),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h),this;h=.5/this.w;this.x=(d*b-a*f)*h;this.y=(a*c-e*b)*h;this.z=(e*f-d*c)*h;return this},Wc:function(a,b){var e,d,c,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,d=-a.y,c=-a.z,a=-a.w):(e=a.x,d=a.y,c=a.z,a=a.w);if(.999999<f)return e=new wa(this.x+(e-this.x)*b,this.y+(d-this.y)*b,this.z+(c-this.z)*b,this.w+(a-this.w)*b),d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<d&&(d=1/d),e.x*=d,e.y*=d,e.z*=d,e.w*=d,e;b*=Math.acos(f);e-=this.x*f;d-=this.y*f;c-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+d*d+c*c+a*a),h=Math.sin(b);b=Math.cos(b);return new wa(this.x*b+e*f*h,this.y*b+d*f*h,this.z*b+c*f*h,this.w*b+a*f*h)},qe:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new wa(this.x,this.y,this.z,this.w)},Kb:function(a){var b=a.e00,e=a.e11,d=a.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},vd:function(){var a=new I,b=this.x,e=this.y,d=this.z,c=this.w,f=2*b,h=2*e,l=2*d,g=b*f,k=e*h,d=d*l,m=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;a.e00=1-k-d;a.e01=m-c;a.e02=b+h;a.e10=m+c;a.e11=1-g-d;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"}};ac.prototype={Fn:function(){if(null!=this.$h){var a=this.un;this.$h.zm(a,this.Ec.Fb,this.Fc.Fb,this.Ec.a,this.Fc.a,this.pj);(this.Hh=0<a.numPoints)?(this.Ia.rn(a.normal),this.ef.Sg=a.Em()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,a.incremental?this.qm.xo(a,this.C.a,this.D.a):this.qm.Lo(a,this.C.a,this.D.a)):this.Ia.df()}},kc:function(){return this.Ec},lc:function(){return this.Fc},Kk:function(){return this.Hh},mb:function(){return this.Ia},wa:function(){return this.ef},Kb:function(){return this.ia},Cb:function(){return this.M}};Zb.prototype={wa:function(){return this.me},Cb:function(){return this.ad},Kb:function(){return this.ia},mb:function(){return this.M}};De.prototype={On:function(){for(var a=this.hc.pe;null!=a;){for(var b=a.M;;){var e;a.Ch.Ic<a.Dh.Ic?(e=a.Ch.userData,a=a.Dh.userData):(e=a.Dh.userData,a=a.Ch.userData);if(!this.$m(e,a))break;for(var d=e.Vb,c=a.Vb,d=d.Ne<c.Ne?d.Mb:c.Mb,c=e.Ic,f=a.Ic,h=!1;null!=d;){var l=d.me;if(l.Ec.Ic==c&&l.Fc.Ic==f){h=l.rk=!0;break}d=d.M}h||(d=this.Cg,null!=d?(this.Cg=d.M,d.M=null):d=new ac,null==this.je?this.je=d:(this.Le.M=d,d.ia=this.Le),this.Le=d,d.rk=!0,c=this.tn.xb[e.Fb.Jb][a.Fb.Jb],d.Ec=e,d.Fc=a,d.C=e.Vb,d.D=a.Vb,d.Hh=!1,null==d.C.Mb?d.C.Mb=d.rb:(d.C.ic.M=d.rb,d.rb.ia=d.C.ic),d.C.ic=d.rb,null==d.D.Mb?d.D.Mb=d.sb:(d.D.ic.M=d.sb,d.sb.ia=d.D.ic),d.D.ic=d.sb,d.C.Ne++,d.D.Ne++,d.rb.ad=d.D,d.sb.ad=d.C,d.rb.me=d,d.sb.me=d,d.$h=c,d=d.ef,d.Ec=e,d.Fc=a,d.C=d.Ec.Vb,d.D=d.Fc.Vb,d.Ej=d.C.a,d.Fj=d.D.a,this.Ui++);break}a=b}},Pn:function(){for(var a=this.hc.qk,b=this.je;null!=b;){for(var e=b.M;;){if(b.rk){b.rk=!1;b.Bk=!1;break}if(!a){var d=b.ia,c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.je&&(this.je=this.je.M);b==this.Le&&(this.Le=this.Le.ia);b.M=null;b.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.C.Mb&&(b.C.Mb=b.C.Mb.M);b.rb==b.C.ic&&(b.C.ic=b.C.ic.ia);b.rb.M=null;b.rb.ia=null;d=b.sb.ia;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.sb==b.D.Mb&&(b.D.Mb=b.D.Mb.M);b.sb==b.D.ic&&(b.D.ic=b.D.ic.ia);b.sb.M=null;b.sb.ia=null;b.C.Ne--;b.D.Ne--;b.rb.ad=null;b.sb.ad=null;b.rb.me=null;b.sb.me=null;b.Ec=null;b.Fc=null;b.C=null;b.D=null;b.Hh=!1;b.pj.df();b.Ia.df();b.$h=null;d=b.ef;d.Ec=null;d.Fc=null;d.C=null;d.D=null;d.Ej=null;d.Fj=null;b.M=this.Cg;this.Cg=b;this.Ui--;break}var d=b.Ec,c=b.Fc,f=d.Vb,h=c.Vb;if((f.Bb||1==f.Jb)&&(h.Bb||1==h.Jb)){b.Bk=!0;break}var f=d.u,h=c.u,l=d.ub,g=c.ub;if(!(l.J<g.G&&l.G>g.J&&l.K<g.H&&l.H>g.K&&l.L<g.I&&l.I>g.L&&this.$m(d,c))){d=b.ia;c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.je&&(this.je=this.je.M);b==this.Le&&(this.Le=this.Le.ia);b.M=null;b.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.C.Mb&&(b.C.Mb=b.C.Mb.M);b.rb==b.C.ic&&(b.C.ic=b.C.ic.ia);b.rb.M=null;b.rb.ia=null;d=b.sb.ia;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.sb==b.D.Mb&&(b.D.Mb=b.D.Mb.M);b.sb==b.D.ic&&(b.D.ic=b.D.ic.ia);b.sb.M=null;b.sb.ia=null;b.C.Ne--;b.D.Ne--;b.rb.ad=null;b.sb.ad=null;b.rb.me=null;b.sb.me=null;b.Ec=null;b.Fc=null;b.C=null;b.D=null;b.Hh=!1;b.pj.df();b.Ia.df();b.$h=null;d=b.ef;d.Ec=null;d.Fc=null;d.C=null;d.D=null;d.Ej=null;d.Fj=null;b.M=this.Cg;this.Cg=b;this.Ui--;break}b.Bk=!(f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa&&f.pa<h.ma&&f.ma>h.pa);break}b=e}},$m:function(a,b){var e=a.Vb,d=b.Vb;if(e==d||0!=e.Jb&&0!=d.Jb||!(a.kk&b.lk&&b.kk&a.lk))return!1;e.Ah<d.Ah?(a=e.Me,e=d):a=d.Me;for(;null!=a;){if(a.ad==e&&!a.gl.Sk)return!1;a=a.M}return!0},xl:function(){this.hc.$i();this.On();this.Pn()},mb:function(){return this.Ui},wa:function(){return this.je}};zj.prototype={df:function(){for(;0<this.ag;)this.cg[--this.ag]=null;for(;0<this.bg;)this.dg[--this.bg]=null;for(;0<this.Ph;)this.Xh[--this.Ph]=null;for(;0<this.Oh;)this.Wh[--this.Oh]=null},Rk:function(a){if(this.ag==this.cg.length){for(var b=Array(this.ag<<1),e=0,d=this.ag;e<d;){var c=e++;b[c]=this.cg[c];this.cg[c]=null}this.cg=b}a.lg=!0;this.cg[this.ag++]=a},gm:function(a,b){if(this.bg==this.dg.length){for(var e=Array(this.bg<<1),d=0,c=this.bg;d<c;){var f=d++;e[f]=this.dg[f];this.dg[f]=null}this.dg=e}a.lg=!0;this.dg[this.bg++]=a;if(b==jc.SPLIT_IMPULSE){if(this.Ph==this.Xh.length){e=Array(this.Ph<<1);d=0;for(c=this.Ph;d<c;)f=d++,e[f]=this.Xh[f],this.Xh[f]=null;this.Xh=e}this.Xh[this.Ph++]=a}if(b==jc.NGS){if(this.Oh==this.Wh.length){b=Array(this.Oh<<1);e=0;for(d=this.Oh;e<d;)c=e++,b[c]=this.Wh[c],this.Wh[c]=null;this.Wh=b}this.Wh[this.Oh++]=a}},En:function(a,b){a=a.dt;var e=b.ja,d=b.a;e.v=d.v;e.A=d.A;e.B=d.B;e.o=d.o;e.f=d.f;e.h=d.h;e.i=d.i;e.m=d.m;e.j=d.j;e.l=d.l;e.g=d.g;e.s=d.s;b.wh=0;b.xh=0;b.yh=0;b.rh=0;b.sh=0;b.th=0;b.Tk&&b.jb*b.jb+b.kb*b.kb+b.lb*b.lb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.nb*b.nb+b.ob*b.ob+b.pb*b.pb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.wb+=a,b.wb>F.sleepingTimeThreshold&&(b.Bb=!0,b.wb=0)):b.wb=0;if(!b.Bb){if(0==b.Jb){var e=a*b.sk,d=e*e,e=1/(1+e+d*(.5+.16666666666666666*e+.041666666666666664*d)),d=a*b.hk,c=d*d,d=1/(1+d+c*(.5+.16666666666666666*d+.041666666666666664*c)),f,h,l,c=this.Fm*b.vh;f=this.Gm*b.vh;h=this.Hm*b.vh;c+=b.ai*b.qb;f+=b.bi*b.qb;h+=b.ci*b.qb;var g,k;g=b.S*b.Of+b.T*b.Pf+b.U*b.Qf;k=b.V*b.Of+b.W*b.Pf+b.X*b.Qf;l=b.Y*b.Of+b.Z*b.Pf+b.$*b.Qf;b.jb+=c*a;b.kb+=f*a;b.lb+=h*a;b.jb*=e;b.kb*=e;b.lb*=e;b.nb+=g*a;b.ob+=k*a;b.pb+=l*a;b.nb*=d;b.ob*=d;b.pb*=d}b.nm(a);for(a=b.Gc;null!=a;){e=a.M;c=b.ja;d=b.a;f=a.ja;h=a.ha;var m,p,r,q,t,A;l=c.o*h.o+c.f*h.i+c.h*h.l;g=c.o*h.f+c.f*h.m+c.h*h.g;k=c.o*h.h+c.f*h.j+c.h*h.s;m=c.i*h.o+c.m*h.i+c.j*h.l;p=c.i*h.f+c.m*h.m+c.j*h.g;r=c.i*h.h+c.m*h.j+c.j*h.s;q=c.l*h.o+c.g*h.i+c.s*h.l;t=c.l*h.f+c.g*h.m+c.s*h.g;A=c.l*h.h+c.g*h.j+c.s*h.s;f.o=l;f.f=g;f.h=k;f.i=m;f.m=p;f.j=r;f.l=q;f.g=t;f.s=A;l=c.o*h.v+c.f*h.A+c.h*h.B;g=c.i*h.v+c.m*h.A+c.j*h.B;h=c.l*h.v+c.g*h.A+c.s*h.B;f.v=l;f.A=g;f.B=h;f.v+=c.v;f.A+=c.A;f.B+=c.B;c=a.a;f=a.ha;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;p=d.i*f.h+d.m*f.j+d.j*f.s;r=d.l*f.o+d.g*f.i+d.s*f.l;q=d.l*f.f+d.g*f.m+d.s*f.g;t=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=p;c.l=r;c.g=q;c.s=t;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;a.Fb.Lb(a.u,a.ja);d=a.u.na;c=a.u.oa;f=a.u.pa;h=a.u.ka;l=a.u.la;g=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=f<a.u.pa?f:a.u.pa;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;a.u.ma=g>a.u.ma?g:a.u.ma;null!=a.ub&&(d=a.a.v-a.ja.v,c=a.a.A-a.ja.A,f=a.a.B-a.ja.B,h=a.mc,h.x=d,h.y=c,h.z=f,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=e}}},Dn:function(a,b,e){for(var d=a.dt,c=!0,f=0,h=this.ag;f<h;){var l=this.cg[f++],g=l.ja,k=l.a;g.v=k.v;g.A=k.A;g.B=k.B;g.o=k.o;g.f=k.f;g.h=k.h;g.i=k.i;g.m=k.m;g.j=k.j;g.l=k.l;g.g=k.g;g.s=k.s;l.wh=0;l.xh=0;l.yh=0;l.rh=0;l.sh=0;l.th=0;l.Bb=!1;l.Tk&&l.jb*l.jb+l.kb*l.kb+l.lb*l.lb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&l.nb*l.nb+l.ob*l.ob+l.pb*l.pb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?l.wb+=d:l.wb=0;l.wb<F.sleepingTimeThreshold&&(c=!1);if(0==l.Jb){var g=d*l.sk,k=g*g,g=1/(1+g+k*(.5+.16666666666666666*g+.041666666666666664*k)),k=d*l.hk,m=k*k,k=1/(1+k+m*(.5+.16666666666666666*k+.041666666666666664*m)),p,r,q,t,A,m=this.Fm*l.vh;p=this.Gm*l.vh;r=this.Hm*l.vh;m+=l.ai*l.qb;p+=l.bi*l.qb;r+=l.ci*l.qb;q=l.S*l.Of+l.T*l.Pf+l.U*l.Qf;t=l.V*l.Of+l.W*l.Pf+l.X*l.Qf;A=l.Y*l.Of+l.Z*l.Pf+l.$*l.Qf;l.jb+=m*d;l.kb+=p*d;l.lb+=r*d;l.jb*=g;l.kb*=g;l.lb*=g;l.nb+=q*d;l.ob+=t*d;l.pb+=A*d;l.nb*=k;l.ob*=k;l.pb*=k}}if(c)for(a=0,e=this.ag;a<e;)d=this.cg[a++],d.Bb=!0,d.wb=0;else{c=0;for(f=this.bg;c<f;)this.dg[c++].Qh(a);c=0;for(f=this.bg;c<f;)this.dg[c++].Zh(a);for(c=0;c<b;)for(++c,f=0,h=this.bg;f<h;)this.dg[f++].Vh();b=0;for(c=this.bg;b<c;)this.dg[b++].cj(a);b=0;for(c=this.ag;b<c;)this.cg[b++].nm(d);d=0;for(b=this.Ph;d<b;)this.Xh[d++].jh(a);for(d=0;d<e;)for(++d,b=0,c=this.Ph;b<c;)this.Xh[b++].Uh();d=0;for(b=this.ag;d<b;)this.cg[d++].Bn();d=0;for(b=this.Oh;d<b;)this.Wh[d++].jh(a);for(d=0;d<e;)for(++d,b=0,c=this.Oh;b<c;)this.Wh[b++].Th(a);a=0;for(e=this.bg;a<e;)this.dg[a++].postSolve();a=0;for(e=this.ag;a<e;)for(d=this.cg[a++],b=d.Gc;null!=b;){var c=b.M,h=d.ja,f=d.a,l=b.ja,g=b.ha,L,u,k=h.o*g.o+h.f*g.i+h.h*g.l,m=h.o*g.f+h.f*g.m+h.h*g.g;p=h.o*g.h+h.f*g.j+h.h*g.s;r=h.i*g.o+h.m*g.i+h.j*g.l;q=h.i*g.f+h.m*g.m+h.j*g.g;A=h.i*g.h+h.m*g.j+h.j*g.s;t=h.l*g.o+h.g*g.i+h.s*g.l;L=h.l*g.f+h.g*g.m+h.s*g.g;u=h.l*g.h+h.g*g.j+h.s*g.s;l.o=k;l.f=m;l.h=p;l.i=r;l.m=q;l.j=A;l.l=t;l.g=L;l.s=u;k=h.o*g.v+h.f*g.A+h.h*g.B;m=h.i*g.v+h.m*g.A+h.j*g.B;g=h.l*g.v+h.g*g.A+h.s*g.B;l.v=k;l.A=m;l.B=g;l.v+=h.v;l.A+=h.A;l.B+=h.B;h=b.a;l=b.ha;g=f.o*l.o+f.f*l.i+f.h*l.l;k=f.o*l.f+f.f*l.m+f.h*l.g;m=f.o*l.h+f.f*l.j+f.h*l.s;p=f.i*l.o+f.m*l.i+f.j*l.l;r=f.i*l.f+f.m*l.m+f.j*l.g;q=f.i*l.h+f.m*l.j+f.j*l.s;A=f.l*l.o+f.g*l.i+f.s*l.l;t=f.l*l.f+f.g*l.m+f.s*l.g;L=f.l*l.h+f.g*l.j+f.s*l.s;h.o=g;h.f=k;h.h=m;h.i=p;h.m=r;h.j=q;h.l=A;h.g=t;h.s=L;g=f.o*l.v+f.f*l.A+f.h*l.B;k=f.i*l.v+f.m*l.A+f.j*l.B;l=f.l*l.v+f.g*l.A+f.s*l.B;h.v=g;h.A=k;h.B=l;h.v+=f.v;h.A+=f.A;h.B+=f.B;b.Fb.Lb(b.u,b.ja);f=b.u.na;h=b.u.oa;l=b.u.pa;g=b.u.ka;k=b.u.la;m=b.u.ma;b.Fb.Lb(b.u,b.a);b.u.na=f<b.u.na?f:b.u.na;b.u.oa=h<b.u.oa?h:b.u.oa;b.u.pa=l<b.u.pa?l:b.u.pa;b.u.ka=g>b.u.ka?g:b.u.ka;b.u.la=k>b.u.la?k:b.u.la;b.u.ma=m>b.u.ma?m:b.u.ma;null!=b.ub&&(f=b.a.v-b.ja.v,h=b.a.A-b.ja.A,l=b.a.B-b.ja.B,g=b.mc,g.x=f,g.y=h,g.z=l,b.Vb.jc.hc.Qd(b.ub,b.u,b.mc));b=c}}}};Ca.prototype={xl:function(){var a=Date.now()/1E3;this.Hi.xl();Ce.broadPhaseCollisionTime=1E3*(Date.now()/1E3-a);for(var a=Date.now()/1E3,b=this.Hi.je;null!=b;){var e=b.M;b.Bk||b.Fn();b=e}Ce.narrowPhaseCollisionTime=1E3*(Date.now()/1E3-a)},Cn:function(){var a=Date.now()/1E3;if(F.disableSleeping)for(var b=this.Nf;null!=b;)b.Bb=!1,b.wb=0,b=b.M;if(this.Fh.length<this.yj){for(b=this.Fh.length<<1;b<this.yj;)b<<=1;this.Fh=Array(b)}this.xk=0;var b=this.Ng,e=this.Xk;b.Fm=e.x;b.Gm=e.y;b.Hm=e.z;b=this.Nf;for(this.Mf=0;null!=b;){for(e=b.M;!b.lg&&!b.Bb&&1!=b.Jb;){if(0==b.Ne&&0==b.Ah){this.Ng.En(this.ji,b);this.xk++;break}this.Hn(b);this.Ng.Dn(this.ji,this.ll,this.kl);this.Ng.df();this.xk++;break}b=e}for(b=this.Nf;null!=b;)b.lg=!1,b=b.M;for(b=this.Nf;null!=b;)b.ai=0,b.bi=0,b.ci=0,b.Of=0,b.Pf=0,b.Qf=0,b=b.M;for(;0<this.Mf;)this.hf[--this.Mf].lg=!1,this.hf[this.Mf]=null;Ce.dynamicsTime=1E3*(Date.now()/1E3-a)},Hn:function(a){var b=1;this.Ng.Rk(a);for(this.Fh[0]=a;0<b;)if(a=this.Fh[--b],this.Fh[b]=null,1!=a.Jb){for(var e=a.Mb;null!=e;){var d=e.M,c=e.me.ef,f=e.me.ef.Ck;if(c.Kk()&&!f.lg){if(this.hf.length==this.Mf){for(var h=Array(this.Mf<<1),l=0,g=this.Mf;l<g;){var k=l++;h[k]=this.hf[k];this.hf[k]=null}this.hf=h}this.hf[this.Mf++]=f;this.Ng.gm(f,c.Sg);e=e.ad;e.lg||(this.Ng.Rk(e),this.Fh[b++]=e)}e=d}for(d=a.Me;null!=d;){a=d.M;e=d.gl;c=e.Ck;if(!c.lg){if(this.hf.length==this.Mf){f=Array(this.Mf<<1);h=0;for(l=this.Mf;h<l;)g=h++,f[g]=this.hf[g],this.hf[g]=null;this.hf=f}this.hf[this.Mf++]=c;this.Ng.gm(c,e.Sg);d=d.ad;d.lg||(this.Ng.Rk(d),this.Fh[b++]=d)}d=a}}},vn:function(a,b){a.drawBvh&&this.Wk(a,b.Nb,0,a.style.bvhNodeColor)},Wk:function(a,b,e,d){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var c=this.ra,f=0==c.b?new n:c.c[--c.b],c=this.ra,c=0==c.b?new n:c.c[--c.b];f.x=b.J;f.y=b.K;f.z=b.L;c.x=b.G;c.y=b.H;c.z=b.I;a.aabb(f,c,d);var h=this.ra;if(null!=f){f.R();if(h.b==h.c.length){for(var l=Array(h.b<<1),g=0,k=h.b;g<k;){var m=g++;l[m]=h.c[m];h.c[m]=null}h.c=l}h.c[h.b++]=f}f=this.ra;if(null!=c){c.R();if(f.b==f.c.length){h=Array(f.b<<1);l=0;for(g=f.b;l<g;)k=l++,h[k]=f.c[k],f.c[k]=null;f.c=h}f.c[f.b++]=c}}this.Wk(a,b.F[0],e+1,d);this.Wk(a,b.F[1],e+1,d)}},yn:function(a){for(var b=a.style,e=this.Nf;null!=e;){var d=e.M;if(a.drawBases){var c=a.style;a.basis(e.a,c.basisLength,c.basisColorX,c.basisColorY,c.basisColorZ)}var f=null,h=0==e.Jb;h||(f=2==e.Jb?b.kinematicShapeColor:b.staticShapeColor);for(var l=e.Gc;null!=l;){var g=l.M;h&&(f=l.Ic&1?e.Bb?b.sleepingShapeColor2:e.wb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Bb?b.sleepingShapeColor1:e.wb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var k=l.Fb,m=l.a;switch(k.Jb){case 0:a.sphere(m,k.ab,f);break;case 1:var p=k,r=this.ra,q=0==r.b?new n:r.c[--r.b],t=q;t.x=p.Te;t.y=p.Ue;t.z=p.Ve;a.box(m,q,f);var A=this.ra;if(null!=q){q.R();if(A.b==A.c.length){for(var L=Array(A.b<<1),u=0,z=A.b;u<z;){var fc=u++;L[fc]=A.c[fc];A.c[fc]=null}A.c=L}A.c[A.b++]=q}break;case 2:var D=k;a.cylinder(m,D.ab,D.Db,f);break;case 3:var x=k;a.cone(m,x.ab,x.Db,f);break;case 4:var y=k;a.capsule(m,y.ab,y.Db,f);break;case 5:var B=k,E=B.We,K=this.ra,H=0==K.b?new n:K.c[--K.b],mc=this.ra,R=0==mc.b?new n:mc.c[--mc.b],N=this.ra,X=0==N.b?new n:N.c[--N.b],J=this.ra,Da=0==J.b?new n:J.c[--J.b],qa=this.ra,Ub=0==qa.b?new n:qa.c[--qa.b],ya=this.ra,pa=0==ya.b?new n:ya.c[--ya.b],Ea=this.ra,O=0==Ea.cb?new I:Ea.bb[--Ea.cb],sa=this.ra,ba=0==sa.b?new n:sa.c[--sa.b],za=O;za.e00=m.o;za.e01=m.f;za.e02=m.h;za.e10=m.i;za.e11=m.m;za.e12=m.j;za.e20=m.l;za.e21=m.g;za.e22=m.s;var Ta=ba;Ta.x=m.v;Ta.y=m.A;Ta.z=m.B;for(var C=0;C<E;){var Aa=C++,na=B.Vg[Aa],La=B.Ca[Aa];na.x=La.x;na.y=La.y;na.z=La.z;var Ba=na.x*O.e10+na.y*O.e11+na.z*O.e12,ta=na.x*O.e20+na.y*O.e21+na.z*O.e22;na.x=na.x*O.e00+na.y*O.e01+na.z*O.e02;na.y=Ba;na.z=ta;na.x+=ba.x;na.y+=ba.y;na.z+=ba.z}if(30<E)for(var S=0;S<E;){var ha=S++,ea=B.Vg[ha];H.x=ea.x;H.y=ea.y;H.z=ea.z;var da=B.Vg[(ha+1)%E];R.x=da.x;R.y=da.y;R.z=da.z}else if(this.Ii.wireframe||10<E)for(var M=0;M<E;){var T=M++,w=B.Vg[T];H.x=w.x;H.y=w.y;H.z=w.z;for(var V=0;V<T;){var ia=B.Vg[V++];R.x=ia.x;R.y=ia.y;R.z=ia.z}}else for(var Y=0;Y<E;){var oa=Y++,ua=B.Vg[oa];H.x=ua.x;H.y=ua.y;H.z=ua.z;for(var ca=0;ca<oa;){var Ma=ca++,va=B.Vg[Ma];R.x=va.x;R.y=va.y;R.z=va.z;for(var Z=0;Z<Ma;){var Pa=B.Vg[Z++];X.x=Pa.x;X.y=Pa.y;X.z=Pa.z;Da.x=R.x;Da.y=R.y;Da.z=R.z;var Fa=Da;Fa.x-=H.x;Fa.y-=H.y;Fa.z-=H.z;Ub.x=X.x;Ub.y=X.y;Ub.z=X.z;var Q=Ub;Q.x-=H.x;Q.y-=H.y;Q.z-=H.z;pa.x=Da.x;pa.y=Da.y;pa.z=Da.z;var aa=pa,fa=aa.z*Ub.x-aa.x*Ub.z,wa=aa.x*Ub.y-aa.y*Ub.x;aa.x=aa.y*Ub.z-aa.z*Ub.y;aa.y=fa;aa.z=wa;var ja=Math.sqrt(aa.x*aa.x+aa.y*aa.y+aa.z*aa.z);0<ja&&(ja=1/ja);aa.x*=ja;aa.y*=ja;aa.z*=ja;pa.x=-pa.x;pa.y=-pa.y;pa.z=-pa.z}}}var Ga=this.ra;if(null!=H){H.R();if(Ga.b==Ga.c.length){for(var P=Array(Ga.b<<1),Ya=0,Ca=Ga.b;Ya<Ca;){var wb=Ya++;P[wb]=Ga.c[wb];Ga.c[wb]=null}Ga.c=P}Ga.c[Ga.b++]=H}var ec=this.ra;if(null!=R){R.R();if(ec.b==ec.c.length){for(var Vb=Array(ec.b<<1),Ab=0,ib=ec.b;Ab<ib;){var hb=Ab++;Vb[hb]=ec.c[hb];ec.c[hb]=null}ec.c=Vb}ec.c[ec.b++]=R}var ka=this.ra;if(null!=X){X.R();if(ka.b==ka.c.length){for(var Ia=Array(ka.b<<1),ab=0,bb=ka.b;ab<bb;){var Wa=ab++;Ia[Wa]=ka.c[Wa];ka.c[Wa]=null}ka.c=Ia}ka.c[ka.b++]=X}var Va=this.ra;if(null!=Da){Da.R();if(Va.b==Va.c.length){for(var qb=Array(Va.b<<1),kb=0,Sa=Va.b;kb<Sa;){var Na=kb++;qb[Na]=Va.c[Na];Va.c[Na]=null}Va.c=qb}Va.c[Va.b++]=Da}var Za=this.ra;if(null!=Ub){Ub.R();if(Za.b==Za.c.length){for(var vb=Array(Za.b<<1),mb=0,xb=Za.b;mb<xb;){var nb=mb++;vb[nb]=Za.c[nb];Za.c[nb]=null}Za.c=vb}Za.c[Za.b++]=Ub}var fb=this.ra;if(null!=pa){pa.R();if(fb.b==fb.c.length){for(var Ka=Array(fb.b<<1),Db=0,G=fb.b;Db<G;){var sb=Db++;Ka[sb]=fb.c[sb];fb.c[sb]=null}fb.c=Ka}fb.c[fb.b++]=pa}var jb=this.ra;if(null!=O){O.e00=1;O.e01=0;O.e02=0;O.e10=0;O.e11=1;O.e12=0;O.e20=0;O.e21=0;O.e22=1;if(jb.cb==jb.bb.length){for(var Xb=Array(jb.cb<<1),ob=0,cb=jb.cb;ob<cb;){var zb=ob++;Xb[zb]=jb.bb[zb];jb.bb[zb]=null}jb.bb=Xb}jb.bb[jb.cb++]=O}var Xa=this.ra;if(null!=ba){ba.R();if(Xa.b==Xa.c.length){for(var tb=Array(Xa.b<<1),v=0,W=Xa.b;v<W;){var U=v++;tb[U]=Xa.c[U];Xa.c[U]=null}Xa.c=tb}Xa.c[Xa.b++]=ba}}}if(a.drawAabbs){var db=l.u,cc=b.aabbColor,Ra=this.ra,Ha=0==Ra.b?new n:Ra.c[--Ra.b],rb=this.ra,yb=0==rb.b?new n:rb.c[--rb.b],Cb=Ha;Cb.x=db.na;Cb.y=db.oa;Cb.z=db.pa;var la=yb;la.x=db.ka;la.y=db.la;la.z=db.ma;a.aabb(Ha,yb,cc);var ra=this.ra;if(null!=Ha){Ha.R();if(ra.b==ra.c.length){for(var ga=Array(ra.b<<1),ma=0,Ja=ra.b;ma<Ja;){var $a=ma++;ga[$a]=ra.c[$a];ra.c[$a]=null}ra.c=ga}ra.c[ra.b++]=Ha}var Oa=this.ra;if(null!=yb){yb.R();if(Oa.b==Oa.c.length){for(var nc=Array(Oa.b<<1),xa=0,Fc=Oa.b;xa<Fc;){var Ua=xa++;nc[Ua]=Oa.c[Ua];Oa.c[Ua]=null}Oa.c=nc}Oa.c[Oa.b++]=yb}}l=g}e=d}},wn:function(a){if(a.drawPairs||a.drawContacts)for(var b=this.Hi.je;null!=b;){var e=b.M;if(a.drawPairs){var d=this.ra,c=0==d.b?new n:d.c[--d.b],f=this.ra,h=0==f.b?new n:f.c[--f.b],l=c;l.x=b.Ec.a.v;l.y=b.Ec.a.A;l.z=b.Ec.a.B;var g=h;g.x=b.Fc.a.v;g.y=b.Fc.a.A;g.z=b.Fc.a.B;var k=this.ra;if(null!=c){c.R();if(k.b==k.c.length){for(var m=Array(k.b<<1),p=0,r=k.b;p<r;){var q=p++;m[q]=k.c[q];k.c[q]=null}k.c=m}k.c[k.b++]=c}var t=this.ra;if(null!=h){h.R();if(t.b==t.c.length){for(var A=Array(t.b<<1),L=0,u=t.b;L<u;){var z=L++;A[z]=t.c[z];t.c[z]=null}t.c=A}t.c[t.b++]=h}}if(a.drawContacts)for(var fc=b.ef,D=b.ef.Ia.Bc,x=0,y=b.ef.Ia.oe;x<y;){var B=D[x++],E=a.style,K=this.ra,H=0==K.b?new n:K.c[--K.b],F=this.ra,R=0==F.b?new n:F.c[--F.b],I=this.ra,X=0==I.b?new n:I.c[--I.b],N=this.ra,J=0==N.b?new n:N.c[--N.b],qa=this.ra,Ub=0==qa.b?new n:qa.c[--qa.b],ya=H;ya.x=B.be;ya.y=B.ce;ya.z=B.de;var pa=R;pa.x=B.ee;pa.y=B.fe;pa.z=B.ge;var Ea=X;Ea.x=fc.Ia.Og;Ea.y=fc.Ia.Pg;Ea.z=fc.Ia.Qg;var O=J;O.x=fc.Ia.Aj;O.y=fc.Ia.Bj;O.z=fc.Ia.Cj;var sa=Ub;sa.x=fc.Ia.kj;sa.y=fc.Ia.lj;sa.z=fc.Ia.mj;R.x=H.x;R.y=H.y;R.z=H.z;var ba=R,za=E.contactNormalLength;ba.x+=X.x*za;ba.y+=X.y*za;ba.z+=X.z*za;if(a.drawContactBases){R.x=H.x;R.y=H.y;R.z=H.z;var Ta=R,C=E.contactTangentLength;Ta.x+=J.x*C;Ta.y+=J.y*C;Ta.z+=J.z*C;R.x=H.x;R.y=H.y;R.z=H.z;var Aa=R,na=E.contactBinormalLength;Aa.x+=Ub.x*na;Aa.y+=Ub.y*na;Aa.z+=Ub.z*na}var La=this.ra;if(null!=H){H.R();if(La.b==La.c.length){for(var Ba=Array(La.b<<1),ta=0,S=La.b;ta<S;){var ha=ta++;Ba[ha]=La.c[ha];La.c[ha]=null}La.c=Ba}La.c[La.b++]=H}var ea=this.ra;if(null!=R){R.R();if(ea.b==ea.c.length){for(var da=Array(ea.b<<1),M=0,T=ea.b;M<T;){var w=M++;da[w]=ea.c[w];ea.c[w]=null}ea.c=da}ea.c[ea.b++]=R}var V=this.ra;if(null!=X){X.R();if(V.b==V.c.length){for(var ia=Array(V.b<<1),Y=0,oa=V.b;Y<oa;){var ua=Y++;ia[ua]=V.c[ua];V.c[ua]=null}V.c=ia}V.c[V.b++]=X}var ca=this.ra;if(null!=J){J.R();if(ca.b==ca.c.length){for(var Ma=Array(ca.b<<1),va=0,Z=ca.b;va<Z;){var Pa=va++;Ma[Pa]=ca.c[Pa];ca.c[Pa]=null}ca.c=Ma}ca.c[ca.b++]=J}var Fa=this.ra;if(null!=Ub){Ub.R();if(Fa.b==Fa.c.length){for(var Q=Array(Fa.b<<1),aa=0,fa=Fa.b;aa<fa;){var wa=aa++;Q[wa]=Fa.c[wa];Fa.c[wa]=null}Fa.c=Q}Fa.c[Fa.b++]=Ub}}b=e}if(a.drawJoints)for(var ja=this.di;null!=ja;){var Ga=ja.M,P=this.ra,Ya=0==P.b?new n:P.c[--P.b],Ca=this.ra,wb=0==Ca.b?new n:Ca.c[--Ca.b],ec=Ya;ec.x=ja.C.a.v;ec.y=ja.C.a.A;ec.z=ja.C.a.B;var Vb=wb;Vb.x=ja.D.a.v;Vb.y=ja.D.a.A;Vb.z=ja.D.a.B;var Ab=this.ra,ib=0==Ab.b?new n:Ab.c[--Ab.b],hb=this.ra,ka=0==hb.b?new n:hb.c[--hb.b],Ia=this.ra,ab=0==Ia.b?new n:Ia.c[--Ia.b],bb=this.ra,Wa=0==bb.b?new n:bb.c[--bb.b],Va=this.ra,qb=0==Va.b?new n:Va.c[--Va.b],kb=this.ra,Sa=0==kb.b?new n:kb.c[--kb.b],Na=this.ra,Za=0==Na.b?new n:Na.c[--Na.b],vb=this.ra,mb=0==vb.b?new n:vb.c[--vb.b],xb=ib;xb.x=ja.uf;xb.y=ja.vf;xb.z=ja.wf;var nb=ka;nb.x=ja.xf;nb.y=ja.yf;nb.z=ja.zf;var fb=ab;fb.x=ja.fb;fb.y=ja.gb;fb.z=ja.hb;var Ka=Wa;Ka.x=ja.Xc;Ka.y=ja.Yc;Ka.z=ja.Zc;var Db=qb;Db.x=ja.ve;Db.y=ja.we;Db.z=ja.xe;var G=Sa;G.x=ja.Ob;G.y=ja.Pb;G.z=ja.Qb;var sb=Za;sb.x=ja.se;sb.y=ja.te;sb.z=ja.ue;var jb=mb;jb.x=ja.Cf;jb.y=ja.Df;jb.z=ja.Ef;if(a.drawJointLimits)switch(ja.Jb){case 1:var Xb=ja.fi;this.uh(a,ib,Wa,qb,Za,a.style.jointRotationalConstraintRadius,Xb.lowerLimit,Xb.upperLimit,a.style.jointLineColor);break;case 2:var ob=ja,cb=a.style.jointLineColor,zb=ob.ml,Xa=ob.tl;this.uh(a,ka,Wa,qb,Za,a.style.jointRotationalConstraintRadius,zb.lowerLimit,zb.upperLimit,cb);this.km(a,ib,ab,Xa.lowerLimit,Xa.upperLimit,cb);break;case 3:var tb=ja.fi;this.km(a,ib,ab,tb.lowerLimit,tb.upperLimit,a.style.jointLineColor);break;case 4:var v=ja,W=a.style.jointRotationalConstraintRadius,U=a.style.jointLineColor,db=v.hl,cc=v.il;this.uh(a,ib,Wa,qb,Wa,W,v.Af-db.upperLimit,v.Af-db.lowerLimit,U);this.uh(a,ka,Sa,Za,Sa,W,cc.lowerLimit-v.Bf,cc.upperLimit-v.Bf,U);break;case 5:var Ra=ja,Ha=a.style.jointRotationalConstraintRadius,rb=a.style.jointLineColor,yb=Ra.vl;this.uh(a,ka,Za,mb,Za,Ha,yb.lowerLimit-Ra.Hj,yb.upperLimit-Ra.Hj,rb);this.xn(a,ib,ab,Wa,qb,Ra.uk,Ra.vk,Ha,rb);var Cb=this.ra,la=0==Cb.b?new n:Cb.c[--Cb.b];la.x=ka.x;la.y=ka.y;la.z=ka.z;var ra=la;ra.x+=Sa.x*Ha;ra.y+=Sa.y*Ha;ra.z+=Sa.z*Ha;var ga=this.ra;if(null!=ra){ra.R();if(ga.b==ga.c.length){for(var ma=Array(ga.b<<1),Ja=0,$a=ga.b;Ja<$a;){var Oa=Ja++;ma[Oa]=ga.c[Oa];ga.c[Oa]=null}ga.c=ma}ga.c[ga.b++]=ra}break;case 6:var nc=ja,xa=a.style.jointRotationalConstraintRadius,Fc=a.style.jointLineColor,Ua=nc.pg[0],eb=nc.pg[1],gb=nc.pg[2];this.zn(a,ib,ab,Wa,qb,nc.qg[0],nc.qg[1],nc.qg[2],Fc);var ub=this.ra,pb=0==ub.b?new n:ub.c[--ub.b],xd=pb;xd.x=nc.kd;xd.y=nc.ld;xd.z=nc.md;var Qa=this.ra,Bb=0==Qa.b?new n:Qa.c[--Qa.b];Bb.x=ab.x;Bb.y=ab.y;Bb.z=ab.z;var de=Bb,Ic=this.ra,Yb=0==Ic.b?new n:Ic.c[--Ic.b];Yb.x=ab.x;Yb.y=ab.y;Yb.z=ab.z;var oc=Yb,Id=oc.z*pb.x-oc.x*pb.z,Fb=oc.x*pb.y-oc.y*pb.x;oc.x=oc.y*pb.z-oc.z*pb.y;oc.y=Id;oc.z=Fb;this.uh(a,ka,Wa,qb,Wa,xa,nc.Af-Ua.upperLimit,nc.Af-Ua.lowerLimit,Fc);this.uh(a,ka,de,oc,de,xa,eb.lowerLimit-nc.qh,eb.upperLimit-nc.qh,Fc);this.uh(a,ka,Sa,Za,Sa,xa,gb.lowerLimit-nc.Bf,gb.upperLimit-nc.Bf,Fc)}var rc=this.ra;if(null!=Ya){Ya.R();if(rc.b==rc.c.length){for(var Jc=Array(rc.b<<1),Nb=0,Jb=rc.b;Nb<Jb;){var Lb=Nb++;Jc[Lb]=rc.c[Lb];rc.c[Lb]=null}rc.c=Jc}rc.c[rc.b++]=Ya}var hc=this.ra;if(null!=wb){wb.R();if(hc.b==hc.c.length){for(var uc=Array(hc.b<<1),gc=0,Xc=hc.b;gc<Xc;){var Eb=gc++;uc[Eb]=hc.c[Eb];hc.c[Eb]=null}hc.c=uc}hc.c[hc.b++]=wb}var lb=this.ra;if(null!=ib){ib.R();if(lb.b==lb.c.length){for(var Gb=Array(lb.b<<1),Ob=0,Hb=lb.b;Ob<Hb;){var Qb=Ob++;Gb[Qb]=lb.c[Qb];lb.c[Qb]=null}lb.c=Gb}lb.c[lb.b++]=ib}var ic=this.ra;if(null!=ka){ka.R();if(ic.b==ic.c.length){for(var Rb=Array(ic.b<<1),Sb=0,Kb=ic.b;Sb<Kb;){var Tb=Sb++;Rb[Tb]=ic.c[Tb];ic.c[Tb]=null}ic.c=Rb}ic.c[ic.b++]=ka}var sc=this.ra;if(null!=ab){ab.R();if(sc.b==sc.c.length){for(var Jd=Array(sc.b<<1),Wb=0,Gc=sc.b;Wb<Gc;){var $b=Wb++;Jd[$b]=sc.c[$b];sc.c[$b]=null}sc.c=Jd}sc.c[sc.b++]=ab}var vc=this.ra;if(null!=Wa){Wa.R();if(vc.b==vc.c.length){for(var Mb=Array(vc.b<<1),ac=0,dc=vc.b;ac<dc;){var bc=ac++;Mb[bc]=vc.c[bc];vc.c[bc]=null}vc.c=Mb}vc.c[vc.b++]=Wa}var Pb=this.ra;if(null!=qb){qb.R();if(Pb.b==Pb.c.length){for(var kc=Array(Pb.b<<1),lc=0,qc=Pb.b;lc<qc;){var pc=lc++;kc[pc]=Pb.c[pc];Pb.c[pc]=null}Pb.c=kc}Pb.c[Pb.b++]=qb}var Zb=this.ra;if(null!=Sa){Sa.R();if(Zb.b==Zb.c.length){for(var tc=Array(Zb.b<<1),jc=0,Qc=Zb.b;jc<Qc;){var wc=jc++;tc[wc]=Zb.c[wc];Zb.c[wc]=null}Zb.c=tc}Zb.c[Zb.b++]=Sa}var kd=this.ra;if(null!=Za){Za.R();if(kd.b==kd.c.length){for(var Pc=Array(kd.b<<1),Uc=0,fd=kd.b;Uc<fd;){var Rc=Uc++;Pc[Rc]=kd.c[Rc];kd.c[Rc]=null}kd.c=Pc}kd.c[kd.b++]=Za}var zc=this.ra;if(null!=mb){mb.R();if(zc.b==zc.c.length){for(var gd=Array(zc.b<<1),Yc=0,od=zc.b;Yc<od;){var Wc=Yc++;gd[Wc]=zc.c[Wc];zc.c[Wc]=null}zc.c=gd}zc.c[zc.b++]=mb}ja=Ga}},uh:function(a,b,e,d,c,f,h,l,g){if(h!=l){var k=this.ra,k=0==k.b?new n:k.c[--k.b];k.x=b.x;k.y=b.y;k.z=b.z;k.x+=c.x*f;k.y+=c.y*f;k.z+=c.z*f;c=this.ra;if(null!=k){k.R();if(c.b==c.c.length){for(var m=Array(c.b<<1),p=0,r=c.b;p<r;){var q=p++;m[q]=c.c[q];c.c[q]=null}c.c=m}c.c[c.b++]=k}h>l?a.ellipse(b,e,d,f,f,g):a.arc(b,e,d,f,f,h,l,!0,g)}},km:function(a,b,e,d,c){if(d<c){a=this.ra;a=0==a.b?new n:a.c[--a.b];a.x=b.x;a.y=b.y;a.z=b.z;a.x+=e.x*d;a.y+=e.y*d;a.z+=e.z*d;d=this.ra;d=0==d.b?new n:d.c[--d.b];d.x=b.x;d.y=b.y;d.z=b.z;d.x+=e.x*c;d.y+=e.y*c;d.z+=e.z*c;b=this.ra;if(null!=a){a.R();if(b.b==b.c.length){e=Array(b.b<<1);c=0;for(var f=b.b;c<f;){var h=c++;e[h]=b.c[h];b.c[h]=null}b.c=e}b.c[b.b++]=a}a=this.ra;if(null!=d){d.R();if(a.b==a.c.length){b=Array(a.b<<1);e=0;for(c=a.b;e<c;)f=e++,b[f]=a.c[f],a.c[f]=null;a.c=b}a.c[a.b++]=d}}},zn:function(a,b,e,d,c,f,h,l){a=f.lowerLimit;var g=f.upperLimit;f=h.lowerLimit;var k=h.upperLimit;h=l.lowerLimit;var m=l.upperLimit;l=this.ra;0==l.b?new n:--l.b;l=this.ra;0==l.b?new n:--l.b;l=this.ra;var p=0==l.b?new n:l.c[--l.b];p.x=b.x;p.y=b.y;p.z=b.z;p.x+=e.x*a;p.y+=e.y*a;p.z+=e.z*a;p.x+=d.x*f;p.y+=d.y*f;p.z+=d.z*f;p.x+=c.x*h;p.y+=c.y*h;p.z+=c.z*h;l=this.ra;var r=0==l.b?new n:l.c[--l.b];r.x=b.x;r.y=b.y;r.z=b.z;r.x+=e.x*a;r.y+=e.y*a;r.z+=e.z*a;r.x+=d.x*f;r.y+=d.y*f;r.z+=d.z*f;r.x+=c.x*m;r.y+=c.y*m;r.z+=c.z*m;l=this.ra;var q=0==l.b?new n:l.c[--l.b];q.x=b.x;q.y=b.y;q.z=b.z;q.x+=e.x*a;q.y+=e.y*a;q.z+=e.z*a;q.x+=d.x*k;q.y+=d.y*k;q.z+=d.z*k;q.x+=c.x*h;q.y+=c.y*h;q.z+=c.z*h;l=this.ra;var t=0==l.b?new n:l.c[--l.b];t.x=b.x;t.y=b.y;t.z=b.z;t.x+=e.x*a;t.y+=e.y*a;t.z+=e.z*a;t.x+=d.x*k;t.y+=d.y*k;t.z+=d.z*k;t.x+=c.x*m;t.y+=c.y*m;t.z+=c.z*m;a=this.ra;l=0==a.b?new n:a.c[--a.b];l.x=b.x;l.y=b.y;l.z=b.z;l.x+=e.x*g;l.y+=e.y*g;l.z+=e.z*g;l.x+=d.x*f;l.y+=d.y*f;l.z+=d.z*f;l.x+=c.x*h;l.y+=c.y*h;l.z+=c.z*h;a=this.ra;a=0==a.b?new n:a.c[--a.b];a.x=b.x;a.y=b.y;a.z=b.z;a.x+=e.x*g;a.y+=e.y*g;a.z+=e.z*g;a.x+=d.x*f;a.y+=d.y*f;a.z+=d.z*f;a.x+=c.x*m;a.y+=c.y*m;a.z+=c.z*m;f=this.ra;f=0==f.b?new n:f.c[--f.b];f.x=b.x;f.y=b.y;f.z=b.z;f.x+=e.x*g;f.y+=e.y*g;f.z+=e.z*g;f.x+=d.x*k;f.y+=d.y*k;f.z+=d.z*k;f.x+=c.x*h;f.y+=c.y*h;f.z+=c.z*h;h=this.ra;h=0==h.b?new n:h.c[--h.b];h.x=b.x;h.y=b.y;h.z=b.z;h.x+=e.x*g;h.y+=e.y*g;h.z+=e.z*g;h.x+=d.x*k;h.y+=d.y*k;h.z+=d.z*k;h.x+=c.x*m;h.y+=c.y*m;h.z+=c.z*m;b=this.ra;if(null!=p){p.R();if(b.b==b.c.length){e=Array(b.b<<1);d=0;for(c=b.b;d<c;)g=d++,e[g]=b.c[g],b.c[g]=null;b.c=e}b.c[b.b++]=p}b=this.ra;if(null!=r){r.R();if(b.b==b.c.length){e=Array(b.b<<1);d=0;for(c=b.b;d<c;)g=d++,e[g]=b.c[g],b.c[g]=null;b.c=e}b.c[b.b++]=r}r=this.ra;if(null!=q){q.R();if(r.b==r.c.length){b=Array(r.b<<1);e=0;for(d=r.b;e<d;)c=e++,b[c]=r.c[c],r.c[c]=null;r.c=b}r.c[r.b++]=q}q=this.ra;if(null!=t){t.R();if(q.b==q.c.length){r=Array(q.b<<1);b=0;for(e=q.b;b<e;)d=b++,r[d]=q.c[d],q.c[d]=null;q.c=r}q.c[q.b++]=t}t=this.ra;if(null!=l){l.R();if(t.b==t.c.length){q=Array(t.b<<1);r=0;for(b=t.b;r<b;)e=r++,q[e]=t.c[e],t.c[e]=null;t.c=q}t.c[t.b++]=l}l=this.ra;if(null!=a){a.R();if(l.b==l.c.length){t=Array(l.b<<1);q=0;for(r=l.b;q<r;)b=q++,t[b]=l.c[b],l.c[b]=null;l.c=t}l.c[l.b++]=a}a=this.ra;if(null!=f){f.R();if(a.b==a.c.length){l=Array(a.b<<1);t=0;for(q=a.b;t<q;)r=t++,l[r]=a.c[r],a.c[r]=null;a.c=l}a.c[a.b++]=f}f=this.ra;if(null!=h){h.R();if(f.b==f.c.length){a=Array(f.b<<1);l=0;for(t=f.b;l<t;)q=l++,a[q]=f.c[q],f.c[q]=null;f.c=a}f.c[f.b++]=h}},xn:function(a,b,e,d,c,f,h,l){var g=0;a=this.ra;var k=0==a.b?new n:a.c[--a.b];a=this.ra;var m=0==a.re?new wa:a.le[--a.re];a=this.ra;var p=0==a.cb?new I:a.bb[--a.cb];a=this.ra;a=0==a.b?new n:a.c[--a.b];for(var r=0;17>r;){r++;var q=Math.cos(g)*f,t=Math.sin(g)*h,A=Math.sqrt(q*q+t*t),L=Math.sin(.5*A),u=Math.cos(.5*A),z=k.R();z.x+=d.x*q;z.y+=d.y*q;z.z+=d.z*q;z.x+=c.x*t;z.y+=c.y*t;z.z+=c.z*t;q=1/A*L;k.x*=q;k.y*=q;k.z*=q;m.x=k.x;m.y=k.y;m.z=k.z;m.w=u;var fc=m.x,D=m.y,L=m.z,t=m.w,x=2*fc,y=2*D,A=2*L,u=fc*x,q=D*y,L=L*A,z=fc*y,D=D*A,fc=fc*A,x=t*x,y=t*y,t=t*A;p.e00=1-q-L;p.e01=z-t;p.e02=fc+y;p.e10=z+t;p.e11=1-u-L;p.e12=D-x;p.e20=fc-y;p.e21=D+x;p.e22=1-u-q;u=this.ra;u=0==u.b?new n:u.c[--u.b];u.x+=e.x*l;u.y+=e.y*l;u.z+=e.z*l;q=u.x*p.e10+u.y*p.e11+u.z*p.e12;t=u.x*p.e20+u.y*p.e21+u.z*p.e22;u.x=u.x*p.e00+u.y*p.e01+u.z*p.e02;u.y=q;u.z=t;u.x+=b.x;u.y+=b.y;u.z+=b.z;q=this.ra;if(null!=a){a.R();if(q.b==q.c.length){t=Array(q.b<<1);A=0;for(L=q.b;A<L;)z=A++,t[z]=q.c[z],q.c[z]=null;q.c=t}q.c[q.b++]=a}a=u;g+=.39269908169872375}b=this.ra;if(null!=k){k.R();if(b.b==b.c.length){e=Array(b.b<<1);d=0;for(c=b.b;d<c;)f=d++,e[f]=b.c[f],b.c[f]=null;b.c=e}b.c[b.b++]=k}k=this.ra;if(null!=m){m.x=0;m.y=0;m.z=0;m.w=1;if(k.re==k.le.length){b=Array(k.re<<1);e=0;for(d=k.re;e<d;)c=e++,b[c]=k.le[c],k.le[c]=null;k.le=b}k.le[k.re++]=m}m=this.ra;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(m.cb==m.bb.length){k=Array(m.cb<<1);b=0;for(e=m.cb;b<e;)d=b++,k[d]=m.bb[d],m.bb[d]=null;m.bb=k}m.bb[m.cb++]=p}p=this.ra;if(null!=a){a.R();if(p.b==p.c.length){m=Array(p.b<<1);k=0;for(b=p.b;k<b;)e=k++,m[e]=p.c[e],p.c[e]=null;p.c=m}p.c[p.b++]=a}},Fe:function(a){0<this.ji.dt&&(this.ji.dtRatio=a/this.ji.dt);this.ji.dt=a;this.ji.invDt=1/a;a=Date.now()/1E3;this.xl();this.Cn();Ce.totalTime=1E3*(Date.now()/1E3-a)},mb:function(a){if(null!=a.jc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.Nf?this.Nf=a:(this.Xi.M=a,a.ia=this.Xi);this.Xi=a;a.jc=this;for(a=a.Gc;null!=a;){var b=a.M;a.ub=this.hc.ni(a,a.u);a.Ic=this.om++;this.Rg++;a=b}this.yj++},Ge:function(a){if(a.jc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Nf&&(this.Nf=this.Nf.M);a==this.Xi&&(this.Xi=this.Xi.ia);a.M=null;a.ia=null;a.jc=null;for(a=a.Gc;null!=a;){b=a.M;this.hc.oi(a.ub);a.ub=null;a.Ic=-1;for(var d=a.Vb.Mb;null!=d;){var e=d.M,c=d.me;if(c.Ec==a||c.Fc==a){d=d.ad;d.Bb=!1;d.wb=0;var d=this.Hi,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.je&&(d.je=d.je.M);c==d.Le&&(d.Le=d.Le.ia);c.M=null;c.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.C.Mb&&(c.C.Mb=c.C.Mb.M);c.rb==c.C.ic&&(c.C.ic=c.C.ic.ia);c.rb.M=null;c.rb.ia=null;f=c.sb.ia;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.sb==c.D.Mb&&(c.D.Mb=c.D.Mb.M);c.sb==c.D.ic&&(c.D.ic=c.D.ic.ia);c.sb.M=null;c.sb.ia=null;c.C.Ne--;c.D.Ne--;c.rb.ad=null;c.sb.ad=null;c.rb.me=null;c.sb.me=null;c.Ec=null;c.Fc=null;c.C=null;c.D=null;c.Hh=!1;c.pj.df();c.Ia.df();c.$h=null;f=c.ef;f.Ec=null;f.Fc=null;f.C=null;f.D=null;f.Ej=null;f.Fj=null;c.M=d.Cg;d.Cg=c;d.Ui--}d=e}this.Rg--;a=b}this.yj--},wa:function(a){if(null!=a.jc)throw Error("A joint cannot belong to multiple worlds.");null==this.di?this.di=a:(this.Ti.M=a,a.ia=this.Ti);this.Ti=a;a.jc=this;a.rb.ad=a.D;a.sb.ad=a.C;null==a.C.Me?a.C.Me=a.rb:(a.C.ff.M=a.rb,a.rb.ia=a.C.ff);a.C.ff=a.rb;null==a.D.Me?a.D.Me=a.sb:(a.D.ff.M=a.sb,a.sb.ia=a.D.ff);a.D.ff=a.sb;a.C.Ah++;a.D.Ah++;var b=a.C;b.Bb=!1;b.wb=0;b=a.D;b.Bb=!1;b.wb=0;a.bd();this.jl++},bm:function(a){if(a.jc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.di&&(this.di=this.di.M);a==this.Ti&&(this.Ti=this.Ti.ia);a.M=null;a.ia=null;a.jc=null;b=a.rb.ia;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.rb==a.C.Me&&(a.C.Me=a.C.Me.M);a.rb==a.C.ff&&(a.C.ff=a.C.ff.ia);a.rb.M=null;a.rb.ia=null;b=a.sb.ia;e=a.sb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.sb==a.D.Me&&(a.D.Me=a.D.Me.M);a.sb==a.D.ff&&(a.D.ff=a.D.ff.ia);a.sb.M=null;a.sb.ia=null;a.rb.ad=null;a.sb.ad=null;a.C.Ah--;a.D.Ah--;b=a.C;b.Bb=!1;b.wb=0;a=a.D;a.Bb=!1;a.wb=0;this.jl--},He:function(a){this.Ii=a},lc:function(){return this.Ii},Cb:function(){null!=this.Ii&&(2==this.hc.Jb&&this.vn(this.Ii,this.hc.ye),this.yn(this.Ii),this.wn(this.Ii))},ke:function(a,b,e){var d=this.zk.Jj;d.x=a.x;d.y=a.y;d.z=a.z;d=this.zk.end;d.x=b.x;d.y=b.y;d.z=b.z;this.zk.Lj=e;this.hc.ke(a,b,this.zk)},Vf:function(a,b,e,d){this.qj.wm=a;var c=this.qj.Jj;c.v=b.v;c.A=b.A;c.B=b.B;c.o=b.o;c.f=b.f;c.h=b.h;c.i=b.i;c.m=b.m;c.j=b.j;c.l=b.l;c.g=b.g;c.s=b.s;c=this.qj.Bg;c.x=e.x;c.y=e.y;c.z=e.z;this.qj.Lj=d;this.hc.Vf(a,b,e,this.qj)},Ih:function(a,b){this.Qk.u.qe(a);this.Qk.sn=b;this.hc.Ih(a,this.Qk)},vd:function(){return this.Nf},xc:function(){return this.di},Kb:function(){return this.hc},kc:function(){return this.Hi},Vc:function(){return this.yj},Hc:function(){return this.jl},ie:function(){return this.Rg},Dc:function(){return this.xk},Wc:function(){return this.ll},Ke:function(a){this.ll=a},Uc:function(){return this.kl},Je:function(a){this.kl=a},wc:function(){return this.Xk},Ie:function(a){var b=this.Xk;b.x=a.x;b.y=a.y;b.z=a.z}};Pi.wa=we;Pi.prototype=gb(we.prototype,{process:function(a){a=a.userData;a.Fb.ke(this.Jj,this.end,a.a,this.dj)&&this.Lj.process(a,this.dj)}});ij.wa=we;ij.prototype=gb(we.prototype,{process:function(a){a=a.userData;var b=a.Fb.Jb;0>b||5<b||lb.mb.Vf(this.wm,a.Fb,this.Jj,a.a,this.Bg,this.R,this.dj)&&this.Lj.process(a,this.dj)}});Vi.wa=we;Vi.prototype=gb(we.prototype,{process:function(){}});yj.prototype={process:function(){}};xj.prototype={beginContact:function(){},preSolve:function(){},postSolve:function(){},endContact:function(){}};Ni.prototype={process:function(){}};hf.wa=Ni;hf.prototype=gb(Ni.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.R();this.normal.R();this.hit=!1},process:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}}});Mg.prototype={aabb:function(a,b){var e=this.p,d=(0==e.b?new n:e.c[--e.b]).Aa(a.x,a.y,a.z),e=this.p,c=(0==e.b?new n:e.c[--e.b]).Aa(a.x,a.y,b.z),e=this.p,f=(0==e.b?new n:e.c[--e.b]).Aa(a.x,b.y,a.z),e=this.p,h=(0==e.b?new n:e.c[--e.b]).Aa(a.x,b.y,b.z),e=this.p,l=(0==e.b?new n:e.c[--e.b]).Aa(b.x,a.y,a.z),e=this.p,e=(0==e.b?new n:e.c[--e.b]).Aa(b.x,a.y,b.z),g=this.p;a=(0==g.b?new n:g.c[--g.b]).Aa(b.x,b.y,a.z);g=this.p;b=(0==g.b?new n:g.c[--g.b]).Aa(b.x,b.y,b.z);g=this.p;if(null!=d){d.R();if(g.b==g.c.length){for(var k=Array(g.b<<1),m=0,p=g.b;m<p;){var r=m++;k[r]=g.c[r];g.c[r]=null}g.c=k}g.c[g.b++]=d}d=this.p;if(null!=c){c.R();if(d.b==d.c.length){g=Array(d.b<<1);k=0;for(m=d.b;k<m;)p=k++,g[p]=d.c[p],d.c[p]=null;d.c=g}d.c[d.b++]=c}c=this.p;if(null!=f){f.R();if(c.b==c.c.length){d=Array(c.b<<1);g=0;for(k=c.b;g<k;)m=g++,d[m]=c.c[m],c.c[m]=null;c.c=d}c.c[c.b++]=f}f=this.p;if(null!=h){h.R();if(f.b==f.c.length){c=Array(f.b<<1);d=0;for(g=f.b;d<g;)k=d++,c[k]=f.c[k],f.c[k]=null;f.c=c}f.c[f.b++]=h}h=this.p;if(null!=l){l.R();if(h.b==h.c.length){f=Array(h.b<<1);c=0;for(d=h.b;c<d;)g=c++,f[g]=h.c[g],h.c[g]=null;h.c=f}h.c[h.b++]=l}l=this.p;if(null!=e){e.R();if(l.b==l.c.length){h=Array(l.b<<1);f=0;for(c=l.b;f<c;)d=f++,h[d]=l.c[d],l.c[d]=null;l.c=h}l.c[l.b++]=e}e=this.p;if(null!=a){a.R();if(e.b==e.c.length){l=Array(e.b<<1);h=0;for(f=e.b;h<f;)c=h++,l[c]=e.c[c],e.c[c]=null;e.c=l}e.c[e.b++]=a}a=this.p;if(null!=b){b.R();if(a.b==a.c.length){e=Array(a.b<<1);l=0;for(h=a.b;l<h;)f=l++,e[f]=a.c[f],a.c[f]=null;a.c=e}a.c[a.b++]=b}},basis:function(a,b){var e=this.p,d=0==e.b?new n:e.c[--e.b],e=this.p,c=0==e.cb?new I:e.bb[--e.cb],e=this.p,f=0==e.b?new n:e.c[--e.b],e=this.p,h=0==e.b?new n:e.c[--e.b],e=this.p,e=0==e.b?new n:e.c[--e.b];d.x=a.v;d.y=a.A;d.z=a.B;c.e00=a.o;c.e01=a.f;c.e02=a.h;c.e10=a.i;c.e11=a.m;c.e12=a.j;c.e20=a.l;c.e21=a.g;c.e22=a.s;f.Aa(c.e00,c.e10,c.e20);h.Aa(c.e01,c.e11,c.e21);e.Aa(c.e02,c.e12,c.e22);f.x*=b;f.y*=b;f.z*=b;f.x+=d.x;f.y+=d.y;f.z+=d.z;h.x*=b;h.y*=b;h.z*=b;h.x+=d.x;h.y+=d.y;h.z+=d.z;e.x*=b;e.y*=b;e.z*=b;e.x+=d.x;e.y+=d.y;e.z+=d.z;a=this.p;if(null!=d){d.R();if(a.b==a.c.length){b=Array(a.b<<1);for(var l=0,g=a.b;l<g;){var k=l++;b[k]=a.c[k];a.c[k]=null}a.c=b}a.c[a.b++]=d}d=this.p;if(null!=c){c.e00=1;c.e01=0;c.e02=0;c.e10=0;c.e11=1;c.e12=0;c.e20=0;c.e21=0;c.e22=1;if(d.cb==d.bb.length){a=Array(d.cb<<1);b=0;for(l=d.cb;b<l;)g=b++,a[g]=d.bb[g],d.bb[g]=null;d.bb=a}d.bb[d.cb++]=c}c=this.p;if(null!=f){f.R();if(c.b==c.c.length){d=Array(c.b<<1);a=0;for(b=c.b;a<b;)l=a++,d[l]=c.c[l],c.c[l]=null;c.c=d}c.c[c.b++]=f}f=this.p;if(null!=h){h.R();if(f.b==f.c.length){c=Array(f.b<<1);d=0;for(a=f.b;d<a;)b=d++,c[b]=f.c[b],f.c[b]=null;f.c=c}f.c[f.b++]=h}h=this.p;if(null!=e){e.R();if(h.b==h.c.length){f=Array(h.b<<1);c=0;for(d=h.b;c<d;)a=c++,f[a]=h.c[a],h.c[a]=null;h.c=f}h.c[h.b++]=e}},ellipse:function(a,b,e,d,c,f){this.arc(a,b,e,d,c,0,6.28318530717958,!1,f)},arc:function(a,b,e,d,c,f,h){var l=this.p,l=0==l.b?new n:l.c[--l.b];l.x=b.x;l.y=b.y;l.z=b.z;l.x*=d;l.y*=d;l.z*=d;b=this.p;b=0==b.b?new n:b.c[--b.b];b.x=e.x;b.y=e.y;b.z=e.z;b.x*=c;b.y*=c;b.z*=c;e=h-f;0>e&&(e=-e);(d=e/.5235987755982984+.5|0)||(d=1);e=f;h=(h-f)/d;c=this.p;c=0==c.b?new n:c.c[--c.b];c.x=a.x;c.y=a.y;c.z=a.z;var g=Math.cos(f);c.x+=l.x*g;c.y+=l.y*g;c.z+=l.z*g;f=Math.sin(f);c.x+=b.x*f;c.y+=b.y*f;c.z+=b.z*f;f=c;for(c=0;c<d;){++c;e+=h;g=this.p;g=0==g.b?new n:g.c[--g.b];g.x=a.x;g.y=a.y;g.z=a.z;var k=Math.cos(e);g.x+=l.x*k;g.y+=l.y*k;g.z+=l.z*k;k=Math.sin(e);g.x+=b.x*k;g.y+=b.y*k;g.z+=b.z*k;k=this.p;if(null!=f){f.R();if(k.b==k.c.length){for(var m=Array(k.b<<1),p=0,r=k.b;p<r;){var q=p++;m[q]=k.c[q];k.c[q]=null}k.c=m}k.c[k.b++]=f}f=g}a=this.p;if(null!=f){f.R();if(a.b==a.c.length){e=Array(a.b<<1);h=0;for(c=a.b;h<c;)d=h++,e[d]=a.c[d],a.c[d]=null;a.c=e}a.c[a.b++]=f}a=this.p;if(null!=l){l.R();if(a.b==a.c.length){e=Array(a.b<<1);h=0;for(f=a.b;h<f;)c=h++,e[c]=a.c[c],a.c[c]=null;a.c=e}a.c[a.b++]=l}l=this.p;if(null!=b){b.R();if(l.b==l.c.length){a=Array(l.b<<1);e=0;for(h=l.b;e<h;)f=e++,a[f]=l.c[f],l.c[f]=null;l.c=a}l.c[l.b++]=b}},cone:function(a,b,e,d){var c=this.p,f=0==c.b?new n:c.c[--c.b],h=this.p,l=0==h.b?new n:h.c[--h.b],g=this.p,k=0==g.b?new n:g.c[--g.b],m=this.p,p=0==m.b?new n:m.c[--m.b],r=this.p,q=0==r.cb?new I:r.bb[--r.cb];p.x=a.v;p.y=a.A;p.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;f.Aa(q.e00,q.e10,q.e20);l.Aa(q.e01,q.e11,q.e21);k.Aa(q.e02,q.e12,q.e22);var t=this.p,A=0==t.b?new n:t.c[--t.b];A.x=p.x;A.y=p.y;A.z=p.z;A.x+=l.x*e;A.y+=l.y*e;A.z+=l.z*e;var L=this.p,u=0==L.b?new n:L.c[--L.b];u.x=p.x;u.y=p.y;u.z=p.z;var z=-e;u.x+=l.x*z;u.y+=l.y*z;u.z+=l.z*z;if(this.wireframe){var fc=this.p,D=0==fc.b?new n:fc.c[--fc.b];D.x=u.x;D.y=u.y;D.z=u.z;var x=-b;D.x+=f.x*x;D.y+=f.y*x;D.z+=f.z*x;D.x+=0*k.x;D.y+=0*k.y;D.z+=0*k.z;var y=this.p,B=0==y.b?new n:y.c[--y.b];B.x=u.x;B.y=u.y;B.z=u.z;B.x+=f.x*b;B.y+=f.y*b;B.z+=f.z*b;B.x+=0*k.x;B.y+=0*k.y;B.z+=0*k.z;var E=this.p,K=0==E.b?new n:E.c[--E.b];K.x=u.x;K.y=u.y;K.z=u.z;K.x+=0*f.x;K.y+=0*f.y;K.z+=0*f.z;var H=-b;K.x+=k.x*H;K.y+=k.y*H;K.z+=k.z*H;var F=this.p,R=0==F.b?new n:F.c[--F.b];R.x=u.x;R.y=u.y;R.z=u.z;R.x+=0*f.x;R.y+=0*f.y;R.z+=0*f.z;R.x+=k.x*b;R.y+=k.y*b;R.z+=k.z*b;this.ellipse(u,f,k,b,b,d);var N=this.p;if(null!=D){D.R();if(N.b==N.c.length){for(var X=Array(N.b<<1),J=0,Da=N.b;J<Da;){var qa=J++;X[qa]=N.c[qa];N.c[qa]=null}N.c=X}N.c[N.b++]=D}var Ub=this.p;if(null!=B){B.R();if(Ub.b==Ub.c.length){for(var ya=Array(Ub.b<<1),pa=0,Ea=Ub.b;pa<Ea;){var O=pa++;ya[O]=Ub.c[O];Ub.c[O]=null}Ub.c=ya}Ub.c[Ub.b++]=B}var sa=this.p;if(null!=K){K.R();if(sa.b==sa.c.length){for(var ba=Array(sa.b<<1),za=0,Ta=sa.b;za<Ta;){var C=za++;ba[C]=sa.c[C];sa.c[C]=null}sa.c=ba}sa.c[sa.b++]=K}var Aa=this.p;if(null!=R){R.R();if(Aa.b==Aa.c.length){for(var na=Array(Aa.b<<1),La=0,Ba=Aa.b;La<Ba;){var ta=La++;na[ta]=Aa.c[ta];Aa.c[ta]=null}Aa.c=na}Aa.c[Aa.b++]=R}}else{for(var S=1/Math.sqrt(b*b+4*e*e),ha=2*e*S,ea=b*S,da=0;8>da;){var M=da++,T=this.fg[M],w=this.Mj[M];T.x=w.x;T.y=w.y;T.z=w.z;T.x*=ha;T.y*=ha;T.z*=ha;T.y+=ea;var V=this.fg[M],ia=V.x*q.e10+V.y*q.e11+V.z*q.e12,Y=V.x*q.e20+V.y*q.e21+V.z*q.e22;V.x=V.x*q.e00+V.y*q.e01+V.z*q.e02;V.y=ia;V.z=Y;var oa=this.Ee[M],ua=this.vm[M];oa.x=ua.x;oa.y=ua.y;oa.z=ua.z;oa.x*=ha;oa.y*=ha;oa.z*=ha;oa.y+=ea;var ca=this.Ee[M],Ma=ca.x*q.e10+ca.y*q.e11+ca.z*q.e12,va=ca.x*q.e20+ca.y*q.e21+ca.z*q.e22;ca.x=ca.x*q.e00+ca.y*q.e01+ca.z*q.e02;ca.y=Ma;ca.z=va;var Z=this.af[M],Pa=this.Mj[M];Z.x=Pa.x;Z.y=Pa.y;Z.z=Pa.z;var Fa=Z.x*q.e10+Z.y*q.e11+Z.z*q.e12,Q=Z.x*q.e20+Z.y*q.e21+Z.z*q.e22;Z.x=Z.x*q.e00+Z.y*q.e01+Z.z*q.e02;Z.y=Fa;Z.z=Q;Z.x*=b;Z.y*=b;Z.z*=b;Z.x+=p.x;Z.y+=p.y;Z.z+=p.z;var aa=this.af[M],fa=-e;aa.x+=l.x*fa;aa.y+=l.y*fa;aa.z+=l.z*fa}for(var wa=0;8>wa;){wa++;var ja=this.p,Ga=0==ja.b?new n:ja.c[--ja.b];Ga.x=l.x;Ga.y=l.y;Ga.z=l.z;var P=Ga;P.x=-P.x;P.y=-P.y;P.z=-P.z;var Ya=this.p;if(null!=P){P.R();if(Ya.b==Ya.c.length){for(var Ca=Array(Ya.b<<1),wb=0,ec=Ya.b;wb<ec;){var Vb=wb++;Ca[Vb]=Ya.c[Vb];Ya.c[Vb]=null}Ya.c=Ca}Ya.c[Ya.b++]=P}}}var Ab=this.p;if(null!=A){A.R();if(Ab.b==Ab.c.length){for(var ib=Array(Ab.b<<1),hb=0,ka=Ab.b;hb<ka;){var Ia=hb++;ib[Ia]=Ab.c[Ia];Ab.c[Ia]=null}Ab.c=ib}Ab.c[Ab.b++]=A}var ab=this.p;if(null!=u){u.R();if(ab.b==ab.c.length){for(var bb=Array(ab.b<<1),Wa=0,Va=ab.b;Wa<Va;){var qb=Wa++;bb[qb]=ab.c[qb];ab.c[qb]=null}ab.c=bb}ab.c[ab.b++]=u}var kb=this.p;if(null!=p){p.R();if(kb.b==kb.c.length){for(var Sa=Array(kb.b<<1),Na=0,Za=kb.b;Na<Za;){var vb=Na++;Sa[vb]=kb.c[vb];kb.c[vb]=null}kb.c=Sa}kb.c[kb.b++]=p}var mb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(mb.cb==mb.bb.length){for(var xb=Array(mb.cb<<1),nb=0,fb=mb.cb;nb<fb;){var Ka=nb++;xb[Ka]=mb.bb[Ka];mb.bb[Ka]=null}mb.bb=xb}mb.bb[mb.cb++]=q}var Db=this.p;if(null!=f){f.R();if(Db.b==Db.c.length){for(var G=Array(Db.b<<1),sb=0,jb=Db.b;sb<jb;){var Xb=sb++;G[Xb]=Db.c[Xb];Db.c[Xb]=null}Db.c=G}Db.c[Db.b++]=f}var ob=this.p;if(null!=l){l.R();if(ob.b==ob.c.length){for(var cb=Array(ob.b<<1),zb=0,Xa=ob.b;zb<Xa;){var tb=zb++;cb[tb]=ob.c[tb];ob.c[tb]=null}ob.c=cb}ob.c[ob.b++]=l}var v=this.p;if(null!=k){k.R();if(v.b==v.c.length){for(var W=Array(v.b<<1),U=0,db=v.b;U<db;){var cc=U++;W[cc]=v.c[cc];v.c[cc]=null}v.c=W}v.c[v.b++]=k}},cylinder:function(a,b,e,d){var c=this.p,f=0==c.b?new n:c.c[--c.b],h=this.p,l=0==h.b?new n:h.c[--h.b],g=this.p,k=0==g.b?new n:g.c[--g.b],m=this.p,p=0==m.b?new n:m.c[--m.b],r=this.p,q=0==r.cb?new I:r.bb[--r.cb];p.x=a.v;p.y=a.A;p.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;f.Aa(q.e00,q.e10,q.e20);l.Aa(q.e01,q.e11,q.e21);k.Aa(q.e02,q.e12,q.e22);var t=this.p,A=0==t.b?new n:t.c[--t.b];A.x=p.x;A.y=p.y;A.z=p.z;A.x+=l.x*e;A.y+=l.y*e;A.z+=l.z*e;var L=this.p,u=0==L.b?new n:L.c[--L.b];u.x=p.x;u.y=p.y;u.z=p.z;var z=-e;u.x+=l.x*z;u.y+=l.y*z;u.z+=l.z*z;if(this.wireframe){var fc=this.p,D=0==fc.b?new n:fc.c[--fc.b];D.x=A.x;D.y=A.y;D.z=A.z;var x=-b;D.x+=f.x*x;D.y+=f.y*x;D.z+=f.z*x;D.x+=0*k.x;D.y+=0*k.y;D.z+=0*k.z;var y=this.p,B=0==y.b?new n:y.c[--y.b];B.x=A.x;B.y=A.y;B.z=A.z;B.x+=f.x*b;B.y+=f.y*b;B.z+=f.z*b;B.x+=0*k.x;B.y+=0*k.y;B.z+=0*k.z;var E=this.p,K=0==E.b?new n:E.c[--E.b];K.x=A.x;K.y=A.y;K.z=A.z;K.x+=0*f.x;K.y+=0*f.y;K.z+=0*f.z;var H=-b;K.x+=k.x*H;K.y+=k.y*H;K.z+=k.z*H;var F=this.p,R=0==F.b?new n:F.c[--F.b];R.x=A.x;R.y=A.y;R.z=A.z;R.x+=0*f.x;R.y+=0*f.y;R.z+=0*f.z;R.x+=k.x*b;R.y+=k.y*b;R.z+=k.z*b;var N=this.p,X=0==N.b?new n:N.c[--N.b];X.x=u.x;X.y=u.y;X.z=u.z;var J=-b;X.x+=f.x*J;X.y+=f.y*J;X.z+=f.z*J;X.x+=0*k.x;X.y+=0*k.y;X.z+=0*k.z;var Da=this.p,qa=0==Da.b?new n:Da.c[--Da.b];qa.x=u.x;qa.y=u.y;qa.z=u.z;qa.x+=f.x*b;qa.y+=f.y*b;qa.z+=f.z*b;qa.x+=0*k.x;qa.y+=0*k.y;qa.z+=0*k.z;var Ub=this.p,ya=0==Ub.b?new n:Ub.c[--Ub.b];ya.x=u.x;ya.y=u.y;ya.z=u.z;ya.x+=0*f.x;ya.y+=0*f.y;ya.z+=0*f.z;var pa=-b;ya.x+=k.x*pa;ya.y+=k.y*pa;ya.z+=k.z*pa;var Ea=this.p,O=0==Ea.b?new n:Ea.c[--Ea.b];O.x=u.x;O.y=u.y;O.z=u.z;O.x+=0*f.x;O.y+=0*f.y;O.z+=0*f.z;O.x+=k.x*b;O.y+=k.y*b;O.z+=k.z*b;this.ellipse(A,f,k,b,b,d);this.ellipse(u,f,k,b,b,d);var sa=this.p;if(null!=D){D.R();if(sa.b==sa.c.length){for(var ba=Array(sa.b<<1),za=0,Ta=sa.b;za<Ta;){var C=za++;ba[C]=sa.c[C];sa.c[C]=null}sa.c=ba}sa.c[sa.b++]=D}var Aa=this.p;if(null!=B){B.R();if(Aa.b==Aa.c.length){for(var na=Array(Aa.b<<1),La=0,Ba=Aa.b;La<Ba;){var ta=La++;na[ta]=Aa.c[ta];Aa.c[ta]=null}Aa.c=na}Aa.c[Aa.b++]=B}var S=this.p;if(null!=K){K.R();if(S.b==S.c.length){for(var ha=Array(S.b<<1),ea=0,da=S.b;ea<da;){var M=ea++;ha[M]=S.c[M];S.c[M]=null}S.c=ha}S.c[S.b++]=K}var T=this.p;if(null!=R){R.R();if(T.b==T.c.length){for(var w=Array(T.b<<1),V=0,ia=T.b;V<ia;){var Y=V++;w[Y]=T.c[Y];T.c[Y]=null}T.c=w}T.c[T.b++]=R}var oa=this.p;if(null!=X){X.R();if(oa.b==oa.c.length){for(var ua=Array(oa.b<<1),ca=0,Ma=oa.b;ca<Ma;){var va=ca++;ua[va]=oa.c[va];oa.c[va]=null}oa.c=ua}oa.c[oa.b++]=X}var Z=this.p;if(null!=qa){qa.R();if(Z.b==Z.c.length){for(var Pa=Array(Z.b<<1),Fa=0,Q=Z.b;Fa<Q;){var aa=Fa++;Pa[aa]=Z.c[aa];Z.c[aa]=null}Z.c=Pa}Z.c[Z.b++]=qa}var fa=this.p;if(null!=ya){ya.R();if(fa.b==fa.c.length){for(var wa=Array(fa.b<<1),ja=0,Ga=fa.b;ja<Ga;){var P=ja++;wa[P]=fa.c[P];fa.c[P]=null}fa.c=wa}fa.c[fa.b++]=ya}var Ya=this.p;if(null!=O){O.R();if(Ya.b==Ya.c.length){for(var Ca=Array(Ya.b<<1),wb=0,ec=Ya.b;wb<ec;){var Vb=wb++;Ca[Vb]=Ya.c[Vb];Ya.c[Vb]=null}Ya.c=Ca}Ya.c[Ya.b++]=O}}else{for(var Ab=0;8>Ab;){var ib=Ab++,hb=this.fg[ib],ka=this.Mj[ib];hb.x=ka.x;hb.y=ka.y;hb.z=ka.z;var Ia=hb.x*q.e10+hb.y*q.e11+hb.z*q.e12,ab=hb.x*q.e20+hb.y*q.e21+hb.z*q.e22;hb.x=hb.x*q.e00+hb.y*q.e01+hb.z*q.e02;hb.y=Ia;hb.z=ab;var bb=this.Ee[ib],Wa=this.fg[ib];bb.x=Wa.x;bb.y=Wa.y;bb.z=Wa.z;bb.x*=b;bb.y*=b;bb.z*=b;bb.x+=p.x;bb.y+=p.y;bb.z+=p.z;var Va=this.af[ib],qb=this.Ee[ib];Va.x=qb.x;Va.y=qb.y;Va.z=qb.z;var kb=this.Ee[ib];kb.x+=l.x*e;kb.y+=l.y*e;kb.z+=l.z*e;var Sa=this.af[ib],Na=-e;Sa.x+=l.x*Na;Sa.y+=l.y*Na;Sa.z+=l.z*Na}for(var Za=0;8>Za;){var vb=Za++,mb=A,xb=this.Ee[vb],nb=this.Ee[(vb+1)%8],fb=l,mb=u,xb=this.af[(vb+1)%8],nb=this.af[vb],Ka=this.p,Db=0==Ka.b?new n:Ka.c[--Ka.b];Db.x=l.x;Db.y=l.y;Db.z=l.z;var G=Db;G.x=-G.x;G.y=-G.y;G.z=-G.z;var fb=G,sb=this.p;if(null!=G){G.R();if(sb.b==sb.c.length){for(var jb=Array(sb.b<<1),Xb=0,ob=sb.b;Xb<ob;){var cb=Xb++;jb[cb]=sb.c[cb];sb.c[cb]=null}sb.c=jb}sb.c[sb.b++]=G}var mb=this.Ee[vb],xb=this.af[vb],nb=this.af[(vb+1)%8],fb=this.fg[vb],zb=this.fg[(vb+1)%8];this.rect(mb,xb,nb,this.Ee[(vb+1)%8],fb,fb,zb,zb,d)}}var Xa=this.p;if(null!=A){A.R();if(Xa.b==Xa.c.length){for(var tb=Array(Xa.b<<1),v=0,W=Xa.b;v<W;){var U=v++;tb[U]=Xa.c[U];Xa.c[U]=null}Xa.c=tb}Xa.c[Xa.b++]=A}var db=this.p;if(null!=u){u.R();if(db.b==db.c.length){for(var cc=Array(db.b<<1),Ra=0,Ha=db.b;Ra<Ha;){var rb=Ra++;cc[rb]=db.c[rb];db.c[rb]=null}db.c=cc}db.c[db.b++]=u}var yb=this.p;if(null!=p){p.R();if(yb.b==yb.c.length){for(var Cb=Array(yb.b<<1),la=0,ra=yb.b;la<ra;){var ga=la++;Cb[ga]=yb.c[ga];yb.c[ga]=null}yb.c=Cb}yb.c[yb.b++]=p}var ma=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(ma.cb==ma.bb.length){for(var Ja=Array(ma.cb<<1),$a=0,Oa=ma.cb;$a<Oa;){var nc=$a++;Ja[nc]=ma.bb[nc];ma.bb[nc]=null}ma.bb=Ja}ma.bb[ma.cb++]=q}var xa=this.p;if(null!=f){f.R();if(xa.b==xa.c.length){for(var Fc=Array(xa.b<<1),Ua=0,eb=xa.b;Ua<eb;){var pb=Ua++;Fc[pb]=xa.c[pb];xa.c[pb]=null}xa.c=Fc}xa.c[xa.b++]=f}var gb=this.p;if(null!=l){l.R();if(gb.b==gb.c.length){for(var ub=Array(gb.b<<1),xd=0,Bb=gb.b;xd<Bb;){var lb=xd++;ub[lb]=gb.c[lb];gb.c[lb]=null}gb.c=ub}gb.c[gb.b++]=l}var Qa=this.p;if(null!=k){k.R();if(Qa.b==Qa.c.length){for(var Ic=Array(Qa.b<<1),Yb=0,oc=Qa.b;Yb<oc;){var Fb=Yb++;Ic[Fb]=Qa.c[Fb];Qa.c[Fb]=null}Qa.c=Ic}Qa.c[Qa.b++]=k}},capsule:function(a,b,e,d){var c=this.p,f=0==c.b?new n:c.c[--c.b],h=this.p,l=0==h.b?new n:h.c[--h.b],g=this.p,k=0==g.b?new n:g.c[--g.b],m=this.p,p=0==m.b?new n:m.c[--m.b],r=this.p,q=0==r.cb?new I:r.bb[--r.cb];p.x=a.v;p.y=a.A;p.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;f.Aa(q.e00,q.e10,q.e20);l.Aa(q.e01,q.e11,q.e21);k.Aa(q.e02,q.e12,q.e22);for(var t=this.Yh,A=this.Pk,L=0;5>L;)for(var u=L++,z=this.Yh[u].length,fc=0;fc<z;){var D=fc++,x=A[u][D],y=this.Nk[u][D];x.x=y.x;x.y=y.y;x.z=y.z;var B=x.x*q.e10+x.y*q.e11+x.z*q.e12,E=x.x*q.e20+x.y*q.e21+x.z*q.e22;x.x=x.x*q.e00+x.y*q.e01+x.z*q.e02;x.y=B;x.z=E}for(var K=0;4>K;){var H=K++;if(!H)for(var F=0;3>F;)for(var R=F++,N=this.Yh[R].length,X=0;X<N;){var J=X++,Da=t[R][J],qa=A[R][J];Da.x=qa.x;Da.y=qa.y;Da.z=qa.z;Da.x*=b;Da.y*=b;Da.z*=b;Da.x+=p.x;Da.y+=p.y;Da.z+=p.z;Da.x+=l.x*e;Da.y+=l.y*e;Da.z+=l.z*e}if(2==H)for(var pa=2;5>pa;)for(var ya=pa++,wa=this.Yh[ya].length,Ea=0;Ea<wa;){var O=Ea++,sa=t[ya][O],ba=A[ya][O];sa.x=ba.x;sa.y=ba.y;sa.z=ba.z;sa.x*=b;sa.y*=b;sa.z*=b;sa.x+=p.x;sa.y+=p.y;sa.z+=p.z;var za=-e;sa.x+=l.x*za;sa.y+=l.y*za;sa.z+=l.z*za}for(var Ta=0;8>Ta;){var C=Ta++,Aa,na,La,Ba,ta,S,ha,ea;H?3==H?this.wireframe?(Aa=t[4][0],na=t[H][(C+1)%8],La=t[H][C]):(Aa=t[4][0],na=t[H][(C+1)%8],La=t[H][C],ta=A[4][0],S=A[H][(C+1)%8],ha=A[H][C]):this.wireframe?(Aa=t[H][C],na=t[H][(C+1)%8],La=t[H+1][C]):(Aa=t[H][C],na=t[H][(C+1)%8],La=t[H+1][C],Ba=t[H+1][(C+1)%8],ta=A[H][C],S=A[H][(C+1)%8],ha=A[H+1][C],ea=A[H+1][(C+1)%8],this.rect(Aa,La,Ba,na,ta,ha,ea,S,d)):this.wireframe?(Aa=t[0][0],na=t[1][C]):(Aa=t[0][0],na=t[1][C],La=t[1][(C+1)%8],ta=A[0][0],S=A[1][C],ha=A[1][(C+1)%8])}}var da=this.p,M=0==da.b?new n:da.c[--da.b];M.x=p.x;M.y=p.y;M.z=p.z;M.x+=l.x*e;M.y+=l.y*e;M.z+=l.z*e;var T=this.p,w=0==T.b?new n:T.c[--T.b];w.x=p.x;w.y=p.y;w.z=p.z;var V=-e;w.x+=l.x*V;w.y+=l.y*V;w.z+=l.z*V;if(this.wireframe){var ia=this.p,Y=0==ia.b?new n:ia.c[--ia.b];Y.x=M.x;Y.y=M.y;Y.z=M.z;var oa=-b;Y.x+=f.x*oa;Y.y+=f.y*oa;Y.z+=f.z*oa;Y.x+=0*k.x;Y.y+=0*k.y;Y.z+=0*k.z;var ua=this.p,ca=0==ua.b?new n:ua.c[--ua.b];ca.x=M.x;ca.y=M.y;ca.z=M.z;ca.x+=f.x*b;ca.y+=f.y*b;ca.z+=f.z*b;ca.x+=0*k.x;ca.y+=0*k.y;ca.z+=0*k.z;var Ma=this.p,va=0==Ma.b?new n:Ma.c[--Ma.b];va.x=M.x;va.y=M.y;va.z=M.z;va.x+=0*f.x;va.y+=0*f.y;va.z+=0*f.z;var Z=-b;va.x+=k.x*Z;va.y+=k.y*Z;va.z+=k.z*Z;var Pa=this.p,Fa=0==Pa.b?new n:Pa.c[--Pa.b];Fa.x=M.x;Fa.y=M.y;Fa.z=M.z;Fa.x+=0*f.x;Fa.y+=0*f.y;Fa.z+=0*f.z;Fa.x+=k.x*b;Fa.y+=k.y*b;Fa.z+=k.z*b;var Q=this.p,aa=0==Q.b?new n:Q.c[--Q.b];aa.x=w.x;aa.y=w.y;aa.z=w.z;var fa=-b;aa.x+=f.x*fa;aa.y+=f.y*fa;aa.z+=f.z*fa;aa.x+=0*k.x;aa.y+=0*k.y;aa.z+=0*k.z;var Ca=this.p,ja=0==Ca.b?new n:Ca.c[--Ca.b];ja.x=w.x;ja.y=w.y;ja.z=w.z;ja.x+=f.x*b;ja.y+=f.y*b;ja.z+=f.z*b;ja.x+=0*k.x;ja.y+=0*k.y;ja.z+=0*k.z;var Ga=this.p,P=0==Ga.b?new n:Ga.c[--Ga.b];P.x=w.x;P.y=w.y;P.z=w.z;P.x+=0*f.x;P.y+=0*f.y;P.z+=0*f.z;var Ya=-b;P.x+=k.x*Ya;P.y+=k.y*Ya;P.z+=k.z*Ya;var Ka=this.p,wb=0==Ka.b?new n:Ka.c[--Ka.b];wb.x=w.x;wb.y=w.y;wb.z=w.z;wb.x+=0*f.x;wb.y+=0*f.y;wb.z+=0*f.z;wb.x+=k.x*b;wb.y+=k.y*b;wb.z+=k.z*b;this.ellipse(M,f,k,b,b,d);this.ellipse(w,f,k,b,b,d);var ec=this.p;if(null!=Y){Y.R();if(ec.b==ec.c.length){for(var Vb=Array(ec.b<<1),Ab=0,ib=ec.b;Ab<ib;){var hb=Ab++;Vb[hb]=ec.c[hb];ec.c[hb]=null}ec.c=Vb}ec.c[ec.b++]=Y}var ka=this.p;if(null!=ca){ca.R();if(ka.b==ka.c.length){for(var Ia=Array(ka.b<<1),ab=0,bb=ka.b;ab<bb;){var Wa=ab++;Ia[Wa]=ka.c[Wa];ka.c[Wa]=null}ka.c=Ia}ka.c[ka.b++]=ca}var Va=this.p;if(null!=va){va.R();if(Va.b==Va.c.length){for(var qb=Array(Va.b<<1),kb=0,Sa=Va.b;kb<Sa;){var Na=kb++;qb[Na]=Va.c[Na];Va.c[Na]=null}Va.c=qb}Va.c[Va.b++]=va}var Za=this.p;if(null!=Fa){Fa.R();if(Za.b==Za.c.length){for(var vb=Array(Za.b<<1),mb=0,xb=Za.b;mb<xb;){var nb=mb++;vb[nb]=Za.c[nb];Za.c[nb]=null}Za.c=vb}Za.c[Za.b++]=Fa}var fb=this.p;if(null!=aa){aa.R();if(fb.b==fb.c.length){for(var Ua=Array(fb.b<<1),Db=0,G=fb.b;Db<G;){var sb=Db++;Ua[sb]=fb.c[sb];fb.c[sb]=null}fb.c=Ua}fb.c[fb.b++]=aa}var jb=this.p;if(null!=ja){ja.R();if(jb.b==jb.c.length){for(var Xb=Array(jb.b<<1),ob=0,cb=jb.b;ob<cb;){var zb=ob++;Xb[zb]=jb.c[zb];jb.c[zb]=null}jb.c=Xb}jb.c[jb.b++]=ja}var Xa=this.p;if(null!=P){P.R();if(Xa.b==Xa.c.length){for(var tb=Array(Xa.b<<1),v=0,W=Xa.b;v<W;){var U=v++;tb[U]=Xa.c[U];Xa.c[U]=null}Xa.c=tb}Xa.c[Xa.b++]=P}var db=this.p;if(null!=wb){wb.R();if(db.b==db.c.length){for(var cc=Array(db.b<<1),Ra=0,Ha=db.b;Ra<Ha;){var rb=Ra++;cc[rb]=db.c[rb];db.c[rb]=null}db.c=cc}db.c[db.b++]=wb}}else{for(var yb=0;8>yb;){var Cb=yb++,la=this.fg[Cb],ra=this.Mj[Cb];la.x=ra.x;la.y=ra.y;la.z=ra.z;var ga=la.x*q.e10+la.y*q.e11+la.z*q.e12,ma=la.x*q.e20+la.y*q.e21+la.z*q.e22;la.x=la.x*q.e00+la.y*q.e01+la.z*q.e02;la.y=ga;la.z=ma;var Ja=this.Ee[Cb],$a=this.fg[Cb];Ja.x=$a.x;Ja.y=$a.y;Ja.z=$a.z;Ja.x*=b;Ja.y*=b;Ja.z*=b;Ja.x+=p.x;Ja.y+=p.y;Ja.z+=p.z;var Oa=this.af[Cb],nc=this.Ee[Cb];Oa.x=nc.x;Oa.y=nc.y;Oa.z=nc.z;var xa=this.Ee[Cb];xa.x+=l.x*e;xa.y+=l.y*e;xa.z+=l.z*e;var Fc=this.af[Cb],eb=-e;Fc.x+=l.x*eb;Fc.y+=l.y*eb;Fc.z+=l.z*eb}for(var gb=0;8>gb;){var pb=gb++,Qa=this.fg[pb],ub=this.fg[(pb+1)%8];this.rect(this.Ee[pb],this.af[pb],this.af[(pb+1)%8],this.Ee[(pb+1)%8],Qa,Qa,ub,ub,d)}}var lb=this.p;if(null!=M){M.R();if(lb.b==lb.c.length){for(var Bb=Array(lb.b<<1),Fb=0,Nb=lb.b;Fb<Nb;){var Ic=Fb++;Bb[Ic]=lb.c[Ic];lb.c[Ic]=null}lb.c=Bb}lb.c[lb.b++]=M}var Yb=this.p;if(null!=w){w.R();if(Yb.b==Yb.c.length){for(var oc=Array(Yb.b<<1),Lb=0,Jb=Yb.b;Lb<Jb;){var rc=Lb++;oc[rc]=Yb.c[rc];Yb.c[rc]=null}Yb.c=oc}Yb.c[Yb.b++]=w}var Jc=this.p;if(null!=p){p.R();if(Jc.b==Jc.c.length){for(var Gb=Array(Jc.b<<1),Qb=0,Ob=Jc.b;Qb<Ob;){var hc=Qb++;Gb[hc]=Jc.c[hc];Jc.c[hc]=null}Jc.c=Gb}Jc.c[Jc.b++]=p}var uc=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(uc.cb==uc.bb.length){for(var gc=Array(uc.cb<<1),Xc=0,Eb=uc.cb;Xc<Eb;){var Pb=Xc++;gc[Pb]=uc.bb[Pb];uc.bb[Pb]=null}uc.bb=gc}uc.bb[uc.cb++]=q}var Hb=this.p;if(null!=f){f.R();if(Hb.b==Hb.c.length){for(var Rb=Array(Hb.b<<1),Sb=0,Tb=Hb.b;Sb<Tb;){var ic=Sb++;Rb[ic]=Hb.c[ic];Hb.c[ic]=null}Hb.c=Rb}Hb.c[Hb.b++]=f}var Kb=this.p;if(null!=l){l.R();if(Kb.b==Kb.c.length){for(var $b=Array(Kb.b<<1),Zb=0,Wb=Kb.b;Zb<Wb;){var sc=Zb++;$b[sc]=Kb.c[sc];Kb.c[sc]=null}Kb.c=$b}Kb.c[Kb.b++]=l}var Mb=this.p;if(null!=k){k.R();if(Mb.b==Mb.c.length){for(var bc=Array(Mb.b<<1),ac=0,dc=Mb.b;ac<dc;){var vc=ac++;bc[vc]=Mb.c[vc];Mb.c[vc]=null}Mb.c=bc}Mb.c[Mb.b++]=k}},sphere:function(a,b,e){var d=this.p,c=0==d.b?new n:d.c[--d.b],d=this.p,d=0==d.cb?new I:d.bb[--d.cb];c.x=a.v;c.y=a.A;c.z=a.B;d.e00=a.o;d.e01=a.f;d.e02=a.h;d.e10=a.i;d.e11=a.m;d.e12=a.j;d.e20=a.l;d.e21=a.g;d.e22=a.s;a=this.Yh;for(var f=this.Pk,h=0;5>h;)for(var l=h++,g=this.Yh[l].length,k=0;k<g;){var m=k++,p=f[l][m],r=this.Nk[l][m];p.x=r.x;p.y=r.y;p.z=r.z;var r=p.x*d.e10+p.y*d.e11+p.z*d.e12,q=p.x*d.e20+p.y*d.e21+p.z*d.e22;p.x=p.x*d.e00+p.y*d.e01+p.z*d.e02;p.y=r;p.z=q;p=a[l][m];m=f[l][m];p.x=m.x;p.y=m.y;p.z=m.z;p.x*=b;p.y*=b;p.z*=b;p.x+=c.x;p.y+=c.y;p.z+=c.z}for(b=0;4>b;)for(h=b++,l=0;8>l;){var t=l++,A;h&&3!=h&&!this.wireframe&&(g=a[h][t],k=a[h][(t+1)%8],m=a[h+1][t],p=a[h+1][(t+1)%8],r=f[h][t],q=f[h][(t+1)%8],A=f[h+1][t],t=f[h+1][(t+1)%8],this.rect(g,m,p,k,r,A,t,q,e))}e=this.p;if(null!=c){c.R();if(e.b==e.c.length){a=Array(e.b<<1);f=0;for(b=e.b;f<b;)h=f++,a[h]=e.c[h],e.c[h]=null;e.c=a}e.c[e.b++]=c}c=this.p;if(null!=d){d.e00=1;d.e01=0;d.e02=0;d.e10=0;d.e11=1;d.e12=0;d.e20=0;d.e21=0;d.e22=1;if(c.cb==c.bb.length){e=Array(c.cb<<1);a=0;for(f=c.cb;a<f;)b=a++,e[b]=c.bb[b],c.bb[b]=null;c.bb=e}c.bb[c.cb++]=d}},box:function(a,b,e){var d=this.p,c=0==d.b?new n:d.c[--d.b],f=this.p,h=0==f.b?new n:f.c[--f.b],l=this.p,g=0==l.b?new n:l.c[--l.b],k=this.p,m=0==k.b?new n:k.c[--k.b],p=this.p,r=0==p.cb?new I:p.bb[--p.cb];m.x=a.v;m.y=a.A;m.z=a.B;r.e00=a.o;r.e01=a.f;r.e02=a.h;r.e10=a.i;r.e11=a.m;r.e12=a.j;r.e20=a.l;r.e21=a.g;r.e22=a.s;c.Aa(r.e00,r.e10,r.e20);h.Aa(r.e01,r.e11,r.e21);g.Aa(r.e02,r.e12,r.e22);var q=b.x,t=b.y,A=b.z,L=this.p,u=0==L.b?new n:L.c[--L.b];u.x=m.x;u.y=m.y;u.z=m.z;var z=-q;u.x+=c.x*z;u.y+=c.y*z;u.z+=c.z*z;var x=-t;u.x+=h.x*x;u.y+=h.y*x;u.z+=h.z*x;var D=-A;u.x+=g.x*D;u.y+=g.y*D;u.z+=g.z*D;var F=this.p,y=0==F.b?new n:F.c[--F.b];y.x=m.x;y.y=m.y;y.z=m.z;var B=-q;y.x+=c.x*B;y.y+=c.y*B;y.z+=c.z*B;var E=-t;y.x+=h.x*E;y.y+=h.y*E;y.z+=h.z*E;y.x+=g.x*A;y.y+=g.y*A;y.z+=g.z*A;var K=this.p,H=0==K.b?new n:K.c[--K.b];H.x=m.x;H.y=m.y;H.z=m.z;var N=-q;H.x+=c.x*N;H.y+=c.y*N;H.z+=c.z*N;H.x+=h.x*t;H.y+=h.y*t;H.z+=h.z*t;var R=-A;H.x+=g.x*R;H.y+=g.y*R;H.z+=g.z*R;var J=this.p,X=0==J.b?new n:J.c[--J.b];X.x=m.x;X.y=m.y;X.z=m.z;var pa=-q;X.x+=c.x*pa;X.y+=c.y*pa;X.z+=c.z*pa;X.x+=h.x*t;X.y+=h.y*t;X.z+=h.z*t;X.x+=g.x*A;X.y+=g.y*A;X.z+=g.z*A;var Da=this.p,qa=0==Da.b?new n:Da.c[--Da.b];qa.x=m.x;qa.y=m.y;qa.z=m.z;qa.x+=c.x*q;qa.y+=c.y*q;qa.z+=c.z*q;var Ub=-t;qa.x+=h.x*Ub;qa.y+=h.y*Ub;qa.z+=h.z*Ub;var ya=-A;qa.x+=g.x*ya;qa.y+=g.y*ya;qa.z+=g.z*ya;var wa=this.p,Ea=0==wa.b?new n:wa.c[--wa.b];Ea.x=m.x;Ea.y=m.y;Ea.z=m.z;Ea.x+=c.x*q;Ea.y+=c.y*q;Ea.z+=c.z*q;var O=-t;Ea.x+=h.x*O;Ea.y+=h.y*O;Ea.z+=h.z*O;Ea.x+=g.x*A;Ea.y+=g.y*A;Ea.z+=g.z*A;var sa=this.p,ba=0==sa.b?new n:sa.c[--sa.b];ba.x=m.x;ba.y=m.y;ba.z=m.z;ba.x+=c.x*q;ba.y+=c.y*q;ba.z+=c.z*q;ba.x+=h.x*t;ba.y+=h.y*t;ba.z+=h.z*t;var za=-A;ba.x+=g.x*za;ba.y+=g.y*za;ba.z+=g.z*za;var Ta=this.p,C=0==Ta.b?new n:Ta.c[--Ta.b];C.x=m.x;C.y=m.y;C.z=m.z;C.x+=c.x*q;C.y+=c.y*q;C.z+=c.z*q;C.x+=h.x*t;C.y+=h.y*t;C.z+=h.z*t;C.x+=g.x*A;C.y+=g.y*A;C.z+=g.z*A;if(!this.wireframe){var Aa=this.p,na=0==Aa.b?new n:Aa.c[--Aa.b];na.x=c.x;na.y=c.y;na.z=c.z;na.x=-na.x;na.y=-na.y;na.z=-na.z;var La=this.p,Ba=0==La.b?new n:La.c[--La.b];Ba.x=h.x;Ba.y=h.y;Ba.z=h.z;Ba.x=-Ba.x;Ba.y=-Ba.y;Ba.z=-Ba.z;var ta=this.p,S=0==ta.b?new n:ta.c[--ta.b];S.x=g.x;S.y=g.y;S.z=g.z;S.x=-S.x;S.y=-S.y;S.z=-S.z;this.rect(u,y,X,H,na,na,na,na,e);this.rect(qa,ba,C,Ea,c,c,c,c,e);this.rect(u,qa,Ea,y,Ba,Ba,Ba,Ba,e);this.rect(H,X,C,ba,h,h,h,h,e);this.rect(u,H,ba,qa,S,S,S,S,e);this.rect(y,Ea,C,X,g,g,g,g,e);var ha=this.p;if(null!=na){na.R();if(ha.b==ha.c.length){for(var ea=Array(ha.b<<1),da=0,M=ha.b;da<M;){var T=da++;ea[T]=ha.c[T];ha.c[T]=null}ha.c=ea}ha.c[ha.b++]=na}var w=this.p;if(null!=Ba){Ba.R();if(w.b==w.c.length){for(var V=Array(w.b<<1),ia=0,Y=w.b;ia<Y;){var oa=ia++;V[oa]=w.c[oa];w.c[oa]=null}w.c=V}w.c[w.b++]=Ba}var ua=this.p;if(null!=S){S.R();if(ua.b==ua.c.length){for(var ca=Array(ua.b<<1),Ma=0,va=ua.b;Ma<va;){var Z=Ma++;ca[Z]=ua.c[Z];ua.c[Z]=null}ua.c=ca}ua.c[ua.b++]=S}}var Pa=this.p;if(null!=u){u.R();if(Pa.b==Pa.c.length){for(var Fa=Array(Pa.b<<1),Q=0,aa=Pa.b;Q<aa;){var fa=Q++;Fa[fa]=Pa.c[fa];Pa.c[fa]=null}Pa.c=Fa}Pa.c[Pa.b++]=u}var Ca=this.p;if(null!=y){y.R();if(Ca.b==Ca.c.length){for(var ja=Array(Ca.b<<1),Ga=0,P=Ca.b;Ga<P;){var Ya=Ga++;ja[Ya]=Ca.c[Ya];Ca.c[Ya]=null}Ca.c=ja}Ca.c[Ca.b++]=y}var Ka=this.p;if(null!=H){H.R();if(Ka.b==Ka.c.length){for(var wb=Array(Ka.b<<1),ec=0,Vb=Ka.b;ec<Vb;){var Ab=ec++;wb[Ab]=Ka.c[Ab];Ka.c[Ab]=null}Ka.c=wb}Ka.c[Ka.b++]=H}var ib=this.p;if(null!=X){X.R();if(ib.b==ib.c.length){for(var hb=Array(ib.b<<1),ka=0,Ia=ib.b;ka<Ia;){var ab=ka++;hb[ab]=ib.c[ab];ib.c[ab]=null}ib.c=hb}ib.c[ib.b++]=X}var bb=this.p;if(null!=qa){qa.R();if(bb.b==bb.c.length){for(var Wa=Array(bb.b<<1),Va=0,qb=bb.b;Va<qb;){var kb=Va++;Wa[kb]=bb.c[kb];bb.c[kb]=null}bb.c=Wa}bb.c[bb.b++]=qa}var Sa=this.p;if(null!=Ea){Ea.R();if(Sa.b==Sa.c.length){for(var Na=Array(Sa.b<<1),Za=0,vb=Sa.b;Za<vb;){var mb=Za++;Na[mb]=Sa.c[mb];Sa.c[mb]=null}Sa.c=Na}Sa.c[Sa.b++]=Ea}var xb=this.p;if(null!=ba){ba.R();if(xb.b==xb.c.length){for(var nb=Array(xb.b<<1),fb=0,Ua=xb.b;fb<Ua;){var Db=fb++;nb[Db]=xb.c[Db];xb.c[Db]=null}xb.c=nb}xb.c[xb.b++]=ba}var G=this.p;if(null!=C){C.R();if(G.b==G.c.length){for(var sb=Array(G.b<<1),jb=0,Xb=G.b;jb<Xb;){var ob=jb++;sb[ob]=G.c[ob];G.c[ob]=null}G.c=sb}G.c[G.b++]=C}var cb=this.p;if(null!=m){m.R();if(cb.b==cb.c.length){for(var zb=Array(cb.b<<1),Xa=0,tb=cb.b;Xa<tb;){var v=Xa++;zb[v]=cb.c[v];cb.c[v]=null}cb.c=zb}cb.c[cb.b++]=m}var W=this.p;if(null!=r){r.e00=1;r.e01=0;r.e02=0;r.e10=0;r.e11=1;r.e12=0;r.e20=0;r.e21=0;r.e22=1;if(W.cb==W.bb.length){for(var U=Array(W.cb<<1),db=0,cc=W.cb;db<cc;){var Ra=db++;U[Ra]=W.bb[Ra];W.bb[Ra]=null}W.bb=U}W.bb[W.cb++]=r}var Ha=this.p;if(null!=c){c.R();if(Ha.b==Ha.c.length){for(var rb=Array(Ha.b<<1),yb=0,Cb=Ha.b;yb<Cb;){var la=yb++;rb[la]=Ha.c[la];Ha.c[la]=null}Ha.c=rb}Ha.c[Ha.b++]=c}var ra=this.p;if(null!=h){h.R();if(ra.b==ra.c.length){for(var ga=Array(ra.b<<1),ma=0,Ja=ra.b;ma<Ja;){var $a=ma++;ga[$a]=ra.c[$a];ra.c[$a]=null}ra.c=ga}ra.c[ra.b++]=h}var Oa=this.p;if(null!=g){g.R();if(Oa.b==Oa.c.length){for(var nc=Array(Oa.b<<1),xa=0,eb=Oa.b;xa<eb;){var gb=xa++;nc[gb]=Oa.c[gb];Oa.c[gb]=null}Oa.c=nc}Oa.c[Oa.b++]=g}},rect:function(){},point:function(){},triangle:function(){},line:function(){}};Ob.prototype={Qh:function(){},Zh:function(){},Vh:function(){},cj:function(){},jh:function(){},Uh:function(){},Th:function(){},postSolve:function(){}};Uc.prototype={Sd:function(a,b){b.Ye=this.C;b.Ze=this.D;var e,d,c,f,h,l,g,k,m;e=this.Ia.Og;d=this.Ia.Pg;c=this.Ia.Qg;f=this.Ia.Aj;h=this.Ia.Bj;l=this.Ia.Cj;g=this.Ia.kj;k=this.Ia.lj;m=this.Ia.mj;for(var p=Math.sqrt(this.Ec.pk*this.Fc.pk),r=Math.sqrt(this.Ec.Ak*this.Fc.Ak),q=this.Ia.oe,t=b.Da=0;t<q;){var A=this.Ia.Bc[t++];if(0>A.Oc)A.mg=!0,A=A.ne,A.dd=0,A.Kc=0,A.Jc=0,A.vb=0,A.mf=0,A.nf=0,A.pf=0;else{A.mg=!1;var L=b.rows[b.Da++];L.friction=p;L.Ka=0;var u=L.yg;u.sa=e;u.ta=d;u.ua=c;u.xa=e;u.ya=d;u.za=c;u.aa=A.zb*c-A.Ab*d;u.ba=A.Ab*e-A.yb*c;u.ca=A.yb*d-A.zb*e;u.da=A.Zb*c-A.$b*d;u.ea=A.$b*e-A.Yb*c;u.fa=A.Yb*d-A.Zb*e;u=L.Zj;u.sa=f;u.ta=h;u.ua=l;u.xa=f;u.ya=h;u.za=l;u.aa=A.zb*l-A.Ab*h;u.ba=A.Ab*f-A.yb*l;u.ca=A.yb*h-A.zb*f;u.da=A.Zb*l-A.$b*h;u.ea=A.$b*f-A.Yb*l;u.fa=A.Yb*h-A.Zb*f;u=L.Yj;u.sa=g;u.ta=k;u.ua=m;u.xa=g;u.ya=k;u.za=m;u.aa=A.zb*m-A.Ab*k;u.ba=A.Ab*g-A.yb*m;u.ca=A.yb*k-A.zb*g;u.da=A.Zb*m-A.$b*k;u.ea=A.$b*g-A.Yb*m;u.fa=A.Yb*k-A.Zb*g;u=L.yg;u=u.sa*this.C.jb+u.ta*this.C.kb+u.ua*this.C.lb+(u.aa*this.C.nb+u.ba*this.C.ob+u.ca*this.C.pb)-(u.xa*this.D.jb+u.ya*this.D.kb+u.za*this.D.lb+(u.da*this.D.nb+u.ea*this.D.ob+u.fa*this.D.pb));L.Fa=u<-F.contactEnableBounceThreshold&&!A.kf?-u*r:0;this.Sg==jc.BAUMGARTE&&A.Oc>F.linearSlop&&(u=(A.Oc-F.linearSlop)*F.velocityBaumgarte*a.invDt,L.Fa<u&&(L.Fa=u));A.kf||(u=A.ne,u.dd=0,u.Kc=0,u.Jc=0,u.vb=0,u.mf=0,u.nf=0,u.pf=0);L.qa=A.ne}}},$c:function(a){a.Ye=this.C;a.Ze=this.D;var b,e,d;b=this.Ia.Og;e=this.Ia.Pg;d=this.Ia.Qg;for(var c=this.Ia.oe,f=a.Da=0;f<c;){var h=this.Ia.Bc[f++];if(!h.mg){var l=a.rows[a.Da++],g=l.yg;g.sa=b;g.ta=e;g.ua=d;g.xa=b;g.ya=e;g.za=d;g.aa=h.zb*d-h.Ab*e;g.ba=h.Ab*b-h.yb*d;g.ca=h.yb*e-h.zb*b;g.da=h.Zb*d-h.$b*e;g.ea=h.$b*b-h.Yb*d;g.fa=h.Yb*e-h.Zb*b;l.Fa=h.Oc-F.linearSlop;0>l.Fa&&(l.Fa=0);l.qa=h.ne}}},rl:function(){this.Ia.pm(this.Ej,this.Fj)},mb:function(){return this.Ec},Cb:function(){return this.Fc},wa:function(){return this.Ia},Kk:function(){for(var a=0,b=this.Ia.oe;a<b;)if(0<=this.Ia.Bc[a++].Oc)return!0;return!1}};vj.prototype={qe:function(a){this.dd=a.dd;this.Kc=a.Kc;this.Jc=a.Jc;this.mf=a.mf;this.nf=a.nf;this.pf=a.pf}};Tb.prototype={df:function(){for(var a=0,b=this.oe;a<b;){var e=this.Bc[a++];e.Ff=0;e.Gf=0;e.Hf=0;e.If=0;e.Jf=0;e.Kf=0;e.yb=0;e.zb=0;e.Ab=0;e.Yb=0;e.Zb=0;e.$b=0;e.be=0;e.ce=0;e.de=0;e.ee=0;e.fe=0;e.ge=0;e.Oc=0;var d=e.ne;d.dd=0;d.Kc=0;d.Jc=0;d.vb=0;d.mf=0;d.nf=0;d.pf=0;e.kf=!1;e.mg=!1;e.Ic=-1}this.oe=0},rn:function(a){this.Og=a.x;this.Pg=a.y;this.Qg=a.z;var b=a.x,e=a.y;a=a.z;var d=b*b,c=e*e,f=a*a,h;d<c?d<f?(f=1/Math.sqrt(c+f),d=0,c=-a*f,f*=e,h=e*f-a*c,a=-b*f,b*=c):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d):c<f?(f=1/Math.sqrt(d+f),d=a*f,c=0,f*=-b,h=e*f,a=a*d-b*f,b=-e*d):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d);this.Aj=d;this.Bj=c;this.Cj=f;this.kj=h;this.lj=a;this.mj=b},pm:function(a,b){for(var e=0,d=this.oe;e<d;){var c=this.Bc[e++],f,h,l;f=a.o*c.Ff+a.f*c.Gf+a.h*c.Hf;h=a.i*c.Ff+a.m*c.Gf+a.j*c.Hf;l=a.l*c.Ff+a.g*c.Gf+a.s*c.Hf;c.yb=f;c.zb=h;c.Ab=l;f=b.o*c.If+b.f*c.Jf+b.h*c.Kf;h=b.i*c.If+b.m*c.Jf+b.j*c.Kf;l=b.l*c.If+b.g*c.Jf+b.s*c.Kf;c.Yb=f;c.Zb=h;c.$b=l;c.be=c.yb+a.v;c.ce=c.zb+a.A;c.de=c.Ab+a.B;c.ee=c.Yb+b.v;c.fe=c.Zb+b.A;c.ge=c.$b+b.B;c.Oc=-((c.be-c.ee)*this.Og+(c.ce-c.fe)*this.Pg+(c.de-c.ge)*this.Qg)}},Cb:function(){var a=new n;a.x=this.Og;a.y=this.Pg;a.z=this.Qg;return a},Kb:function(a){a.x=this.Og;a.y=this.Pg;a.z=this.Qg},wc:function(){var a=new n;a.x=this.Aj;a.y=this.Bj;a.z=this.Cj;return a},xc:function(a){a.x=this.Aj;a.y=this.Bj;a.z=this.Cj},wa:function(){var a=new n;a.x=this.kj;a.y=this.lj;a.z=this.mj;return a},mb:function(a){a.x=this.kj;a.y=this.lj;a.z=this.mj},lc:function(){return this.Bc},kc:function(){return this.oe}};Lb.prototype={Kb:function(){var a=new n;a.x=this.be;a.y=this.ce;a.z=this.de;return a},kc:function(a){a.x=this.be;a.y=this.ce;a.z=this.de},lc:function(){var a=new n;a.x=this.ee;a.y=this.fe;a.z=this.ge;return a},wc:function(a){a.x=this.ee;a.y=this.fe;a.z=this.ge},mb:function(){return this.Oc},Dc:function(){return this.kf},Cb:function(){return this.ne.dd},xc:function(){return this.ne.Kc},wa:function(){return this.ne.Jc},Hc:function(){return!this.mg}};uj.prototype={Do:function(){for(var a=this.Ia.oe;0<=--a;){var b=this.Ia.Bc[a],e,d;e=b.be-b.ee;d=b.ce-b.fe;var b=b.de-b.ge,c=this.Ia.Og*e+this.Ia.Pg*d+this.Ia.Qg*b;c>F.contactPersistenceThreshold?this.Zm(a):(e+=this.Ia.Og*-c,d+=this.Ia.Pg*-c,b+=this.Ia.Qg*-c,e*e+d*d+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.Zm(a))}},Zm:function(a){var b=--this.Ia.oe;if(a!=b){var e=this.Ia.Bc[a];this.Ia.Bc[a]=this.Ia.Bc[b];this.Ia.Bc[b]=e}a=this.Ia.Bc[b];a.Ff=0;a.Gf=0;a.Hf=0;a.If=0;a.Jf=0;a.Kf=0;a.yb=0;a.zb=0;a.Ab=0;a.Yb=0;a.Zb=0;a.$b=0;a.be=0;a.ce=0;a.de=0;a.ee=0;a.fe=0;a.ge=0;a.Oc=0;b=a.ne;b.dd=0;b.Kc=0;b.Jc=0;b.vb=0;b.mf=0;b.nf=0;b.pf=0;a.kf=!1;a.mg=!1;a.Ic=-1},Gn:function(a,b,e){var d=this.Ia.oe;if(d==F.maxManifoldPoints){var d=this.Ia.Bc[this.Nn(a,b,e)],c=a.position1;d.be=c.x;d.ce=c.y;d.de=c.z;c=a.position2;d.ee=c.x;d.fe=c.y;d.ge=c.z;d.yb=d.be-b.v;d.zb=d.ce-b.A;d.Ab=d.de-b.B;d.Yb=d.ee-e.v;d.Zb=d.fe-e.A;d.$b=d.ge-e.B;var f,c=b.o*d.yb+b.i*d.zb+b.l*d.Ab;f=b.f*d.yb+b.m*d.zb+b.g*d.Ab;b=b.h*d.yb+b.j*d.zb+b.s*d.Ab;d.Ff=c;d.Gf=f;d.Hf=b;b=e.o*d.Yb+e.i*d.Zb+e.l*d.$b;c=e.f*d.Yb+e.m*d.Zb+e.g*d.$b;e=e.h*d.Yb+e.j*d.Zb+e.s*d.$b;d.If=b;d.Jf=c;d.Kf=e;d.Oc=a.depth;e=d.ne;e.dd=0;e.Kc=0;e.Jc=0;e.vb=0;e.mf=0;e.nf=0;e.pf=0;d.Ic=a.id;d.kf=!1;d.mg=!1}else d=this.Ia.Bc[d],c=a.position1,d.be=c.x,d.ce=c.y,d.de=c.z,c=a.position2,d.ee=c.x,d.fe=c.y,d.ge=c.z,d.yb=d.be-b.v,d.zb=d.ce-b.A,d.Ab=d.de-b.B,d.Yb=d.ee-e.v,d.Zb=d.fe-e.A,d.$b=d.ge-e.B,c=b.o*d.yb+b.i*d.zb+b.l*d.Ab,f=b.f*d.yb+b.m*d.zb+b.g*d.Ab,b=b.h*d.yb+b.j*d.zb+b.s*d.Ab,d.Ff=c,d.Gf=f,d.Hf=b,b=e.o*d.Yb+e.i*d.Zb+e.l*d.$b,c=e.f*d.Yb+e.m*d.Zb+e.g*d.$b,e=e.h*d.Yb+e.j*d.Zb+e.s*d.$b,d.If=b,d.Jf=c,d.Kf=e,d.Oc=a.depth,e=d.ne,e.dd=0,e.Kc=0,e.Jc=0,e.vb=0,e.mf=0,e.nf=0,e.pf=0,d.Ic=a.id,d.kf=!1,d.mg=!1,this.Ia.oe++},Nn:function(a,b){var e=this.Ia.Bc[0],d=this.Ia.Bc[1],c=this.Ia.Bc[2],f=this.Ia.Bc[3],h=e.Oc,l=0;d.Oc>h&&(h=d.Oc,l=1);c.Oc>h&&(h=c.Oc,l=2);f.Oc>h&&(h=f.Oc,l=3);var g,k,m,p=a.position1;g=p.x;k=p.y;m=p.z;g-=b.v;k-=b.A;m-=b.B;var r=d.yb,q=d.zb,t=d.Ab,A=c.yb,L=c.zb,u=c.Ab,n=f.yb,x=f.zb,D=f.Ab,F,y,B,E,K,H,N,R,I,X,J,Da,qa,pa,ya,wa,Ea,O;F=A-r;y=L-q;B=u-t;E=g-n;K=k-x;H=m-D;N=n-r;R=x-q;I=D-t;X=g-A;J=k-L;Da=m-u;qa=g-r;pa=k-q;ya=m-t;wa=n-A;Ea=x-L;O=D-u;var sa,ba,za,Ta,C,Aa,na,La,Ba;sa=y*H-B*K;ba=B*E-F*H;za=F*K-y*E;Ta=R*Da-I*J;C=I*X-N*Da;Aa=N*J-R*X;na=pa*O-ya*Ea;La=ya*wa-qa*O;Ba=qa*Ea-pa*wa;var ta=sa*sa+ba*ba+za*za,S=Ta*Ta+C*C+Aa*Aa,ha=na*na+La*La+Ba*Ba,ea=e.yb,da=e.zb,M=e.Ab,T=c.yb,w=c.zb,V=c.Ab,ia=f.yb,Y=f.zb,oa=f.Ab,ua,ca,Ma,va,Z,Pa,Fa,Q,aa,fa,Ca,ja,Ga,P,Ya,Ka,wb,Ua;ua=T-ea;ca=w-da;Ma=V-M;va=g-ia;Z=k-Y;Pa=m-oa;Fa=ia-ea;Q=Y-da;aa=oa-M;fa=g-T;Ca=k-w;ja=m-V;Ga=g-ea;P=k-da;Ya=m-M;Ka=ia-T;wb=Y-w;Ua=oa-V;var Vb,Ab,ib,hb,ka,Ia,ab,bb,Wa;Vb=ca*Pa-Ma*Z;Ab=Ma*va-ua*Pa;ib=ua*Z-ca*va;hb=Q*ja-aa*Ca;ka=aa*fa-Fa*ja;Ia=Fa*Ca-Q*fa;ab=P*Ua-Ya*wb;bb=Ya*Ka-Ga*Ua;Wa=Ga*wb-P*Ka;var Va=Vb*Vb+Ab*Ab+ib*ib,qb=hb*hb+ka*ka+Ia*Ia,kb=ab*ab+bb*bb+Wa*Wa,Sa=Va>qb?Va>kb?Va:kb:qb>kb?qb:kb,Na=e.yb,Za=e.zb,vb=e.Ab,mb=d.yb,xb=d.zb,nb=d.Ab,fb=f.yb,gb=f.zb,Db=f.Ab,G,sb,jb,Xb,ob,cb,zb,Xa,tb,v,W,U,db,cc,Ra,Ha,rb,yb;G=mb-Na;sb=xb-Za;jb=nb-vb;Xb=g-fb;ob=k-gb;cb=m-Db;zb=fb-Na;Xa=gb-Za;tb=Db-vb;v=g-mb;W=k-xb;U=m-nb;db=g-Na;cc=k-Za;Ra=m-vb;Ha=fb-mb;rb=gb-xb;yb=Db-nb;var Cb,la,ra,ga,ma,Ja,$a,Oa,eb;Cb=sb*cb-jb*ob;la=jb*Xb-G*cb;ra=G*ob-sb*Xb;ga=Xa*U-tb*W;ma=tb*v-zb*U;Ja=zb*W-Xa*v;$a=cc*yb-Ra*rb;Oa=Ra*Ha-db*yb;eb=db*rb-cc*Ha;var xa=Cb*Cb+la*la+ra*ra,pb=ga*ga+ma*ma+Ja*Ja,lb=$a*$a+Oa*Oa+eb*eb,Qa=xa>pb?xa>lb?xa:lb:pb>lb?pb:lb,ub=e.yb,Bb=e.zb,Fb=e.Ab,Hb=d.yb,Kb=d.zb,Lb=d.Ab,Nb=c.yb,Ic=c.zb,Yb=c.Ab,oc,Mb,Pb,rc,Jc,Gb,Qb,Jb,hc,uc,gc,Ob,Eb,Rb,Sb,Tb,$b,Zb;oc=Hb-ub;Mb=Kb-Bb;Pb=Lb-Fb;rc=g-Nb;Jc=k-Ic;Gb=m-Yb;Qb=Nb-ub;Jb=Ic-Bb;hc=Yb-Fb;uc=g-Hb;gc=k-Kb;Ob=m-Lb;Eb=g-ub;Rb=k-Bb;Sb=m-Fb;Tb=Nb-Hb;$b=Ic-Kb;Zb=Yb-Lb;var ic,bc,Wb,ac,dc,sc,kc,lc,Gc;ic=Mb*Gb-Pb*Jc;bc=Pb*rc-oc*Gb;Wb=oc*Jc-Mb*rc;ac=Jb*Ob-hc*gc;dc=hc*uc-Qb*Ob;sc=Qb*gc-Jb*uc;kc=Rb*Zb-Sb*$b;lc=Sb*Tb-Eb*Zb;Gc=Eb*$b-Rb*Tb;var pc=ic*ic+bc*bc+Wb*Wb,vc=ac*ac+dc*dc+sc*sc,qc=kc*kc+lc*lc+Gc*Gc,tc=pc>vc?pc>qc?pc:qc:vc>qc?vc:qc,jc=ta>S?ta>ha?ta:ha:S>ha?S:ha,wc=0;if(Sa>jc&&1!=l||!l)jc=Sa,wc=1;Qa>jc&&2!=l&&(jc=Qa,wc=2);tc>jc&&3!=l&&(jc=tc,wc=3);return wc},Qn:function(a,b,e){for(var d=F.contactPersistenceThreshold*F.contactPersistenceThreshold,c=-1,f=0,h=this.Ia.oe;f<h;){var l=f++,g=this.Ia.Bc[l],k,m,p,r,q,t;q=a.position1;k=q.x;m=q.y;p=q.z;t=a.position2;r=t.x;q=t.y;t=t.z;k-=b.v;m-=b.A;p-=b.B;r-=e.v;q-=e.A;t-=e.B;k=g.yb-k;m=g.zb-m;p=g.Ab-p;r=g.Yb-r;q=g.Zb-q;g=g.$b-t;t=k*k+m*m+p*p;g=r*r+q*q+g*g;g=t<g?t:g;g<d&&(d=g,c=l)}return c},Lo:function(a,b,e){this.Yl=this.Ia.oe;for(var d=0,c=this.Yl;d<c;){var f=d++,h=this.Zl[f],f=this.Ia.Bc[f];h.Ff=f.Ff;h.Gf=f.Gf;h.Hf=f.Hf;h.If=f.If;h.Jf=f.Jf;h.Kf=f.Kf;h.yb=f.yb;h.zb=f.zb;h.Ab=f.Ab;h.Yb=f.Yb;h.Zb=f.Zb;h.$b=f.$b;h.be=f.be;h.ce=f.ce;h.de=f.de;h.ee=f.ee;h.fe=f.fe;h.ge=f.ge;h.Oc=f.Oc;h.ne.qe(f.ne);h.Ic=f.Ic;h.kf=f.kf;h.mg=!1}d=a.numPoints;this.Ia.oe=d;for(c=0;c<d;){var f=c++,h=this.Ia.Bc[f],f=a.points[f],l=f.position1;h.be=l.x;h.ce=l.y;h.de=l.z;l=f.position2;h.ee=l.x;h.fe=l.y;h.ge=l.z;h.yb=h.be-b.v;h.zb=h.ce-b.A;h.Ab=h.de-b.B;h.Yb=h.ee-e.v;h.Zb=h.fe-e.A;h.$b=h.ge-e.B;var g,k,l=b.o*h.yb+b.i*h.zb+b.l*h.Ab;g=b.f*h.yb+b.m*h.zb+b.g*h.Ab;k=b.h*h.yb+b.j*h.zb+b.s*h.Ab;h.Ff=l;h.Gf=g;h.Hf=k;l=e.o*h.Yb+e.i*h.Zb+e.l*h.$b;g=e.f*h.Yb+e.m*h.Zb+e.g*h.$b;k=e.h*h.Yb+e.j*h.Zb+e.s*h.$b;h.If=l;h.Jf=g;h.Kf=k;h.Oc=f.depth;l=h.ne;l.dd=0;l.Kc=0;l.Jc=0;l.vb=0;l.mf=0;l.nf=0;l.pf=0;h.Ic=f.id;h.kf=!1;h.mg=!1;f=0;for(l=this.Yl;f<l;)if(g=this.Zl[f++],h.Ic==g.Ic){h.ne.qe(g.ne);h.kf=!0;break}}},xo:function(a,b,e){this.Ia.pm(b,e);for(var d=0,c=this.Ia.oe;d<c;)this.Ia.Bc[d++].kf=!0;a=a.points[0];d=this.Qn(a,b,e);if(-1==d)this.Gn(a,b,e);else{d=this.Ia.Bc[d];c=a.position1;d.be=c.x;d.ce=c.y;d.de=c.z;c=a.position2;d.ee=c.x;d.fe=c.y;d.ge=c.z;d.yb=d.be-b.v;d.zb=d.ce-b.A;d.Ab=d.de-b.B;d.Yb=d.ee-e.v;d.Zb=d.fe-e.A;d.$b=d.ge-e.B;var f,c=b.o*d.yb+b.i*d.zb+b.l*d.Ab;f=b.f*d.yb+b.m*d.zb+b.g*d.Ab;b=b.h*d.yb+b.j*d.zb+b.s*d.Ab;d.Ff=c;d.Gf=f;d.Hf=b;b=e.o*d.Yb+e.i*d.Zb+e.l*d.$b;c=e.f*d.Yb+e.m*d.Zb+e.g*d.$b;e=e.h*d.Yb+e.j*d.Zb+e.s*d.$b;d.If=b;d.Jf=c;d.Kf=e;d.Oc=a.depth}this.Do()}};gf.prototype={bn:function(){this.Cc=0;if(0!=this.sa||0!=this.ta||0!=this.ua||0!=this.xa||0!=this.ya||0!=this.za)this.Cc|=1;if(0!=this.aa||0!=this.ba||0!=this.ca||0!=this.da||0!=this.ea||0!=this.fa)this.Cc|=2}};N.prototype={Al:function(){if(this.Ma*this.Ma+this.Na*this.Na+this.Oa*this.Oa){var a=this.Ma*this.Ma+this.Na*this.Na+this.Oa*this.Oa;0<a&&(a=1/Math.sqrt(a));this.Ma*=a;this.Na*=a;this.Oa*=a}else this.Ma=1,this.Oa=this.Na=0;this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub?(a=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub,0<a&&(a=1/Math.sqrt(a)),this.Sb*=a,this.Tb*=a,this.Ub*=a):(this.Sb=1,this.Ub=this.Tb=0);var b,e,d,c,f,h,l,g;e=this.Ma*this.Sb+this.Na*this.Tb+this.Oa*this.Ub;-.999999999>e?(a=this.Ma,b=this.Na,d=this.Oa,e=a*a,c=b*b,f=d*d,e<c?e<f?(c=1/Math.sqrt(c+f),e=0,d*=c,c*=-b):(c=1/Math.sqrt(e+c),e=b*c,d=-a*c,c=0):c<f?(c=1/Math.sqrt(f+e),e=-d*c,d=0,c*=a):(c=1/Math.sqrt(e+c),e=b*c,d=-a*c,c=0),a=e,b=d,e=c,d=0):(a=this.Na*this.Ub-this.Oa*this.Tb,b=this.Oa*this.Sb-this.Ma*this.Ub,c=this.Ma*this.Tb-this.Na*this.Sb,d=Math.sqrt(.5*(1+e)),e=.5/d,a*=e,b*=e,e*=c);h=b;b=d;var k=2*a;f=2*h;d=2*e;g=a*k;var m=h*f;c=e*d;e=a*f;l=h*d;h=a*d;var k=b*k,p=b*f;f=b*d;a=1-m-c;b=e-f;d=h+p;e+=f;c=1-g-c;f=l-k;h-=p;l+=k;g=1-g-m;var m=this.Ma,k=this.Na,p=this.Oa,r=m*m,q=k*k,t=p*p;r<q?r<t?(r=1/Math.sqrt(q+t),this.sc=0,this.tc=p*r,this.uc=-k*r):(r=1/Math.sqrt(r+q),this.sc=k*r,this.tc=-m*r,this.uc=0):q<t?(r=1/Math.sqrt(t+r),this.sc=-p*r,this.tc=0,this.uc=m*r):(r=1/Math.sqrt(r+q),this.sc=k*r,this.tc=-m*r,this.uc=0);this.Pc=this.Na*this.uc-this.Oa*this.tc;this.Qc=this.Oa*this.sc-this.Ma*this.uc;this.Rc=this.Ma*this.tc-this.Na*this.sc;m=a*this.Ma+b*this.Na+d*this.Oa;k=e*this.Ma+c*this.Na+f*this.Oa;p=h*this.Ma+l*this.Na+g*this.Oa;this.Sb=m;this.Tb=k;this.Ub=p;m=a*this.sc+b*this.tc+d*this.uc;k=e*this.sc+c*this.tc+f*this.uc;p=h*this.sc+l*this.tc+g*this.uc;this.gi=m;this.hi=k;this.ii=p;a=a*this.Pc+b*this.Qc+d*this.Rc;b=e*this.Pc+c*this.Qc+f*this.Rc;d=h*this.Pc+l*this.Qc+g*this.Rc;this.nd=a;this.od=b;this.pd=d},In:function(){if(this.Ma*this.Ma+this.Na*this.Na+this.Oa*this.Oa){var a=this.Ma*this.Ma+this.Na*this.Na+this.Oa*this.Oa;0<a&&(a=1/Math.sqrt(a));this.Ma*=a;this.Na*=a;this.Oa*=a}else this.Ma=1,this.Oa=this.Na=0;this.nd*this.nd+this.od*this.od+this.pd*this.pd?(a=this.nd*this.nd+this.od*this.od+this.pd*this.pd,0<a&&(a=1/Math.sqrt(a)),this.nd*=a,this.od*=a,this.pd*=a):(this.od=this.nd=0,this.pd=1);var b=this.C.a,a=this.D.a,e,d,c,f,h,l,g,k,m,p,r,q,t;q=b.o*this.Ma+b.f*this.Na+b.h*this.Oa;t=b.i*this.Ma+b.m*this.Na+b.j*this.Oa;e=b.l*this.Ma+b.g*this.Na+b.s*this.Oa;var A,n;A=a.o*this.nd+a.f*this.od+a.h*this.pd;n=a.i*this.nd+a.m*this.od+a.j*this.pd;r=a.l*this.nd+a.g*this.od+a.s*this.pd;h=n*e-r*t;l=r*q-A*e;g=A*t-n*q;h*h+l*l+g*g||(h=q*q,l=t*t,g=e*e,h<l?h<g?(g=1/Math.sqrt(l+g),h=0,l=e*g,g*=-t):(g=1/Math.sqrt(h+l),h=t*g,l=-q*g,g=0):l<g?(g=1/Math.sqrt(g+h),h=-e*g,l=0,g*=q):(g=1/Math.sqrt(h+l),h=t*g,l=-q*g,g=0));d=t*g-e*l;c=e*h-q*g;f=q*l-t*h;k=l*r-g*n;m=g*A-h*r;p=h*n-l*A;var u,z;u=b.o*q+b.i*t+b.l*e;z=b.f*q+b.m*t+b.g*e;e=b.h*q+b.j*t+b.s*e;this.Ma=u;this.Na=z;this.Oa=e;e=b.o*h+b.i*l+b.l*g;q=b.f*h+b.m*l+b.g*g;t=b.h*h+b.j*l+b.s*g;this.sc=e;this.tc=q;this.uc=t;e=b.o*d+b.i*c+b.l*f;q=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;this.Pc=e;this.Qc=q;this.Rc=b;b=a.o*k+a.i*m+a.l*p;d=a.f*k+a.m*m+a.g*p;k=a.h*k+a.j*m+a.s*p;this.Sb=b;this.Tb=d;this.Ub=k;b=a.o*h+a.i*l+a.l*g;k=a.f*h+a.m*l+a.g*g;h=a.h*h+a.j*l+a.s*g;this.gi=b;this.hi=k;this.ii=h;h=a.o*A+a.i*n+a.l*r;l=a.f*A+a.m*n+a.g*r;a=a.h*A+a.j*n+a.s*r;this.nd=h;this.od=l;this.pd=a},Jn:function(){if(this.Ma*this.Ma+this.Na*this.Na+this.Oa*this.Oa){var a=this.Ma*this.Ma+this.Na*this.Na+this.Oa*this.Oa;0<a&&(a=1/Math.sqrt(a));this.Ma*=a;this.Na*=a;this.Oa*=a}else this.Ma=1,this.Oa=this.Na=0;this.Pc=this.Na*this.uc-this.Oa*this.tc;this.Qc=this.Oa*this.sc-this.Ma*this.uc;this.Rc=this.Ma*this.tc-this.Na*this.sc;if(this.Pc*this.Pc+this.Qc*this.Qc+this.Rc*this.Rc)a=this.Pc*this.Pc+this.Qc*this.Qc+this.Rc*this.Rc,0<a&&(a=1/Math.sqrt(a)),this.Pc*=a,this.Qc*=a,this.Rc*=a,this.sc=this.Qc*this.Oa-this.Rc*this.Na,this.tc=this.Rc*this.Ma-this.Pc*this.Oa,this.uc=this.Pc*this.Na-this.Qc*this.Ma;else{var a=this.Ma,b=this.Na,e=this.Oa,d=a*a,c=b*b,f=e*e;d<c?d<f?(d=1/Math.sqrt(c+f),this.sc=0,this.tc=e*d,this.uc=-b*d):(d=1/Math.sqrt(d+c),this.sc=b*d,this.tc=-a*d,this.uc=0):c<f?(d=1/Math.sqrt(f+d),this.sc=-e*d,this.tc=0,this.uc=a*d):(d=1/Math.sqrt(d+c),this.sc=b*d,this.tc=-a*d,this.uc=0);this.Pc=this.Na*this.uc-this.Oa*this.tc;this.Qc=this.Oa*this.sc-this.Ma*this.uc;this.Rc=this.Ma*this.tc-this.Na*this.sc}var h,l,g,k,d=this.Ma*this.Sb+this.Na*this.Tb+this.Oa*this.Ub;-.999999999>d?(a=this.Ma,b=this.Na,e=this.Oa,d=a*a,c=b*b,f=e*e,d<c?d<f?(c=1/Math.sqrt(c+f),d=0,e*=c,c*=-b):(c=1/Math.sqrt(d+c),d=b*c,e=-a*c,c=0):c<f?(c=1/Math.sqrt(f+d),d=-e*c,e=0,c*=a):(c=1/Math.sqrt(d+c),d=b*c,e=-a*c,c=0),a=d,b=e,d=c,e=0):(a=this.Na*this.Ub-this.Oa*this.Tb,b=this.Oa*this.Sb-this.Ma*this.Ub,c=this.Ma*this.Tb-this.Na*this.Sb,e=Math.sqrt(.5*(1+d)),d=.5/e,a*=d,b*=d,d*=c);g=b;var f=d,b=e,m=2*a;l=2*g;e=2*f;d=a*m;c=g*l;h=f*e;f=a*l;k=g*e;g=a*e;var m=b*m,p=b*l;l=b*e;a=1-c-h;b=f-l;e=g+p;f+=l;h=1-d-h;l=k-m;g-=p;k+=m;d=1-d-c;c=a*this.Ma+b*this.Na+e*this.Oa;m=f*this.Ma+h*this.Na+l*this.Oa;p=g*this.Ma+k*this.Na+d*this.Oa;this.Sb=c;this.Tb=m;this.Ub=p;c=a*this.sc+b*this.tc+e*this.uc;m=f*this.sc+h*this.tc+l*this.uc;p=g*this.sc+k*this.tc+d*this.uc;this.gi=c;this.hi=m;this.ii=p;a=a*this.Pc+b*this.Qc+e*this.Rc;b=f*this.Pc+h*this.Qc+l*this.Rc;e=g*this.Pc+k*this.Qc+d*this.Rc;this.nd=a;this.od=b;this.pd=e},ak:function(a,b,e,d,c,f,h){var l=F.linearSlop;if(h)c=0,h=1;else{if(0<c.frequency){var l=0,g=6.28318530717958*c.frequency,k=c.dampingRatio;k<F.minSpringDamperDampingRatio&&(k=F.minSpringDamperDampingRatio);h=f.dt;k=2*k*g;g*=g;c.useSymplecticEuler?(c=1/(h*k),h=g/k):(c=1/(h*(h*g+k)),h=g/(h*g+k))}else c=0,h=this.Mh(f,!1);0<e.motorForce?(a.motorSpeed=e.motorSpeed,a.tb=e.motorForce*f.dt):(a.motorSpeed=0,a.tb=0)}f=e.lowerLimit;g=e.upperLimit;f>g?b=k=e=0:f==g?(e=-Infinity,k=Infinity,b-=f):b<f?(e=-Infinity,k=0,b=b-f+l,0<b&&(b=0)):b>g?(e=0,k=Infinity,b=b-g-l,0>b&&(b=0)):b=k=e=0;a.Ha=e;a.Ga=k;a.Ka=c*(0==d?0:1/d);a.Fa=b*h},nh:function(a,b,e,d,c,f,h){var l=F.angularSlop;if(h)c=0,h=1;else{if(0<c.frequency){var l=0,g=6.28318530717958*c.frequency,k=c.dampingRatio;k<F.minSpringDamperDampingRatio&&(k=F.minSpringDamperDampingRatio);h=f.dt;k=2*k*g;g*=g;c.useSymplecticEuler?(c=1/(h*k),h=g/k):(c=1/(h*(h*g+k)),h=g/(h*g+k))}else c=0,h=this.Mh(f,!1);0<e.motorTorque?(a.motorSpeed=e.motorSpeed,a.tb=e.motorTorque*f.dt):(a.motorSpeed=0,a.tb=0)}f=e.lowerLimit;e=e.upperLimit;k=.5*(f+e);b=((b-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+k;f>e?b=g=k=0:f==e?(k=-Infinity,g=Infinity,b-=f):b<f?(k=-Infinity,g=0,b=b-f+l,0<b&&(b=0)):b>e?(k=0,g=Infinity,b=b-e-l,0>b&&(b=0)):b=g=k=0;a.Ha=k;a.Ga=g;a.Ka=c*(0==d?0:1/d);a.Fa=b*h},Mh:function(a,b){return b?1:this.Sg==jc.BAUMGARTE?a.invDt*F.velocityBaumgarte:0},Yg:function(a,b,e){var d=(this.C.S*a+this.C.T*b+this.C.U*e)*a+(this.C.V*a+this.C.W*b+this.C.X*e)*b+(this.C.Y*a+this.C.Z*b+this.C.$*e)*e,c=(this.D.S*a+this.D.T*b+this.D.U*e)*a+(this.D.V*a+this.D.W*b+this.D.X*e)*b+(this.D.Y*a+this.D.Z*b+this.D.$*e)*e;if(0<d){var f=a*this.ac+b*this.bc+e*this.cc,f=this.ac*this.ac+this.bc*this.bc+this.cc*this.cc-f*f;0<f&&(d=0<this.C.qb?1/(1/d+this.C.Lf*f):0)}0<c&&(a=a*this.dc+b*this.ec+e*this.fc,a=this.dc*this.dc+this.ec*this.ec+this.fc*this.fc-a*a,0<a&&(c=0<this.D.qb?1/(1/c+this.D.Lf*a):0));return d+c?1/(d+c):0},bd:function(){var a=this.C.a,b=this.D.a,e,d,c;e=a.o*this.sj+a.f*this.tj+a.h*this.uj;d=a.i*this.sj+a.m*this.tj+a.j*this.uj;c=a.l*this.sj+a.g*this.tj+a.s*this.uj;this.ac=e;this.bc=d;this.cc=c;e=b.o*this.vj+b.f*this.wj+b.h*this.xj;d=b.i*this.vj+b.m*this.wj+b.j*this.xj;c=b.l*this.vj+b.g*this.wj+b.s*this.xj;this.dc=e;this.ec=d;this.fc=c;this.uf=this.ac+a.v;this.vf=this.bc+a.A;this.wf=this.cc+a.B;this.xf=this.dc+b.v;this.yf=this.ec+b.A;this.zf=this.fc+b.B;e=a.o*this.Ma+a.f*this.Na+a.h*this.Oa;d=a.i*this.Ma+a.m*this.Na+a.j*this.Oa;c=a.l*this.Ma+a.g*this.Na+a.s*this.Oa;this.fb=e;this.gb=d;this.hb=c;e=a.o*this.sc+a.f*this.tc+a.h*this.uc;d=a.i*this.sc+a.m*this.tc+a.j*this.uc;c=a.l*this.sc+a.g*this.tc+a.s*this.uc;this.Xc=e;this.Yc=d;this.Zc=c;e=a.o*this.Pc+a.f*this.Qc+a.h*this.Rc;d=a.i*this.Pc+a.m*this.Qc+a.j*this.Rc;a=a.l*this.Pc+a.g*this.Qc+a.s*this.Rc;this.ve=e;this.we=d;this.xe=a;a=b.o*this.Sb+b.f*this.Tb+b.h*this.Ub;e=b.i*this.Sb+b.m*this.Tb+b.j*this.Ub;d=b.l*this.Sb+b.g*this.Tb+b.s*this.Ub;this.Ob=a;this.Pb=e;this.Qb=d;a=b.o*this.gi+b.f*this.hi+b.h*this.ii;e=b.i*this.gi+b.m*this.hi+b.j*this.ii;d=b.l*this.gi+b.g*this.hi+b.s*this.ii;this.se=a;this.te=e;this.ue=d;a=b.o*this.nd+b.f*this.od+b.h*this.pd;e=b.i*this.nd+b.m*this.od+b.j*this.pd;b=b.l*this.nd+b.g*this.od+b.s*this.pd;this.Cf=a;this.Df=e;this.Ef=b},Sd:function(a,b){b.Ye=this.C;b.Ze=this.D;b.Da=0},$c:function(a){a.Ye=this.C;a.Ze=this.D;a.Da=0},hm:function(){var a=this.hj*this.hj+this.ij*this.ij+this.jj*this.jj;0<this.nj&&this.ej*this.ej+this.fj*this.fj+this.gj*this.gj>this.nj*this.nj?this.jc.bm(this):0<this.oj&&a>this.oj*this.oj&&this.jc.bm(this)},Ke:function(){return this.C},bf:function(){return this.D},hg:function(){return this.Jb},mb:function(){var a=new n;a.x=this.uf;a.y=this.vf;a.z=this.wf;return a},Kb:function(){var a=new n;a.x=this.xf;a.y=this.yf;a.z=this.zf;return a},Cb:function(a){a.x=this.uf;a.y=this.vf;a.z=this.wf},kc:function(a){a.x=this.xf;a.y=this.yf;a.z=this.zf},Fe:function(){var a=new n;a.x=this.sj;a.y=this.tj;a.z=this.uj;return a},He:function(){var a=new n;a.x=this.vj;a.y=this.wj;a.z=this.xj;return a},Ge:function(a){a.x=this.sj;a.y=this.tj;a.z=this.uj},Ie:function(a){a.x=this.vj;a.y=this.wj;a.z=this.xj},Hc:function(){var a=new I,b,e,d,c,f,h,l,g,k;b=this.fb;e=this.Xc;d=this.ve;c=this.gb;f=this.Yc;h=this.we;l=this.hb;g=this.Zc;k=this.xe;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Vc:function(){var a=new I,b,e,d,c,f,h,l,g,k;b=this.Ob;e=this.se;d=this.Cf;c=this.Pb;f=this.te;h=this.Df;l=this.Qb;g=this.ue;k=this.Ef;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Uc:function(a){var b,e,d,c,f,h,l,g,k;b=this.fb;e=this.Xc;d=this.ve;c=this.gb;f=this.Yc;h=this.we;l=this.hb;g=this.Zc;k=this.xe;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Wc:function(a){var b,e,d,c,f,h,l,g,k;b=this.Ob;e=this.se;d=this.Cf;c=this.Pb;f=this.te;h=this.Df;l=this.Qb;g=this.ue;k=this.Ef;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},wa:function(){return this.Sk},ig:function(a){this.Sk=a},vd:function(){return this.nj},jg:function(a){this.nj=a},ie:function(){return this.oj},kg:function(a){this.oj=a},Je:function(){return this.Sg},ph:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Sg=a},lc:function(){var a=new n;a.x=this.ej;a.y=this.fj;a.z=this.gj;return a},wc:function(a){a.x=this.ej;a.y=this.fj;a.z=this.gj},xc:function(){var a=new n;a.x=this.hj;a.y=this.ij;a.z=this.jj;return a},Dc:function(a){a.x=this.hj;a.y=this.ij;a.z=this.jj},gg:function(){return this.ia},cf:function(){return this.M}};Fb.wa=N;Fb.prototype=gb(N.prototype,{ud:function(a,b,e){var d=this.Mh(b,e),c=this.Xf*d,f=this.Yf*d,h=this.Re*d,d=this.Se*d,l,g=this.Yg(this.N.pc,this.N.qc,this.N.rc);if(0>=this.ul.frequency||!e){l=this.Eb[0];var k=a.rows[a.Da++],m=k.va;m.sa=0;m.ta=0;m.ua=0;m.xa=0;m.ya=0;m.za=0;m.aa=0;m.ba=0;m.ca=0;m.da=0;m.ea=0;m.fa=0;k.Fa=0;k.Ka=0;k.Ha=0;k.Ga=0;k.motorSpeed=0;k.tb=0;k.qa=null;k.qa=l;this.ak(k,this.Bg,this.tl,1/(this.C.qb+this.D.qb),this.ul,b,e);l=k.va;l.sa=this.N.pc;l.ta=this.N.qc;l.ua=this.N.rc;l.xa=this.N.pc;l.ya=this.N.qc;l.za=this.N.rc;l.aa=this.bc*this.N.rc-this.cc*this.N.qc;l.ba=this.cc*this.N.pc-this.ac*this.N.rc;l.ca=this.ac*this.N.qc-this.bc*this.N.pc;l.da=this.ec*this.N.rc-this.fc*this.N.qc;l.ea=this.fc*this.N.pc-this.dc*this.N.rc;l.fa=this.dc*this.N.qc-this.ec*this.N.pc}l=this.Eb[1];k=a.rows[a.Da++];m=k.va;m.sa=0;m.ta=0;m.ua=0;m.xa=0;m.ya=0;m.za=0;m.aa=0;m.ba=0;m.ca=0;m.da=0;m.ea=0;m.fa=0;k.Fa=0;k.Ka=0;k.Ha=0;k.Ga=0;k.motorSpeed=0;k.tb=0;k.qa=l;k.Fa=c;k.Ka=0;k.Ha=-Infinity;k.Ga=Infinity;l=k.va;l.sa=this.N.yc;l.ta=this.N.zc;l.ua=this.N.Ac;l.xa=this.N.yc;l.ya=this.N.zc;l.za=this.N.Ac;l.aa=this.bc*this.N.Ac-this.cc*this.N.zc;l.ba=this.cc*this.N.yc-this.ac*this.N.Ac;l.ca=this.ac*this.N.zc-this.bc*this.N.yc;l.da=this.ec*this.N.Ac-this.fc*this.N.zc;l.ea=this.fc*this.N.yc-this.dc*this.N.Ac;l.fa=this.dc*this.N.zc-this.ec*this.N.yc;c=this.Eb[2];l=a.rows[a.Da++];k=l.va;k.sa=0;k.ta=0;k.ua=0;k.xa=0;k.ya=0;k.za=0;k.aa=0;k.ba=0;k.ca=0;k.da=0;k.ea=0;k.fa=0;l.Fa=0;l.Ka=0;l.Ha=0;l.Ga=0;l.motorSpeed=0;l.tb=0;l.qa=c;l.Fa=f;l.Ka=0;l.Ha=-Infinity;l.Ga=Infinity;l=l.va;l.sa=this.N.Lc;l.ta=this.N.Mc;l.ua=this.N.Nc;l.xa=this.N.Lc;l.ya=this.N.Mc;l.za=this.N.Nc;l.aa=this.bc*this.N.Nc-this.cc*this.N.Mc;l.ba=this.cc*this.N.Lc-this.ac*this.N.Nc;l.ca=this.ac*this.N.Mc-this.bc*this.N.Lc;l.da=this.ec*this.N.Nc-this.fc*this.N.Mc;l.ea=this.fc*this.N.Lc-this.dc*this.N.Nc;l.fa=this.dc*this.N.Mc-this.ec*this.N.Lc;if(0>=this.nl.frequency||!e)f=this.Eb[3],c=a.rows[a.Da++],l=c.va,l.sa=0,l.ta=0,l.ua=0,l.xa=0,l.ya=0,l.za=0,l.aa=0,l.ba=0,l.ca=0,l.da=0,l.ea=0,l.fa=0,c.Fa=0,c.Ka=0,c.Ha=0,c.Ga=0,c.motorSpeed=0,c.tb=0,c.qa=f,this.nh(c,this.angle,this.ml,g,this.nl,b,e),l=c.va,l.aa=this.N.pc,l.ba=this.N.qc,l.ca=this.N.rc,l.da=this.N.pc,l.ea=this.N.qc,l.fa=this.N.rc;b=this.Eb[4];e=a.rows[a.Da++];g=e.va;g.sa=0;g.ta=0;g.ua=0;g.xa=0;g.ya=0;g.za=0;g.aa=0;g.ba=0;g.ca=0;g.da=0;g.ea=0;g.fa=0;e.Fa=0;e.Ka=0;e.Ha=0;e.Ga=0;e.motorSpeed=0;e.tb=0;e.qa=b;e.Fa=h;e.Ka=0;e.Ha=-Infinity;e.Ga=Infinity;l=e.va;l.aa=this.N.yc;l.ba=this.N.zc;l.ca=this.N.Ac;l.da=this.N.yc;l.ea=this.N.zc;l.fa=this.N.Ac;h=this.Eb[5];a=a.rows[a.Da++];b=a.va;b.sa=0;b.ta=0;b.ua=0;b.xa=0;b.ya=0;b.za=0;b.aa=0;b.ba=0;b.ca=0;b.da=0;b.ea=0;b.fa=0;a.Fa=0;a.Ka=0;a.Ha=0;a.Ga=0;a.motorSpeed=0;a.tb=0;a.qa=h;a.Fa=d;a.Ka=0;a.Ha=-Infinity;a.Ga=Infinity;l=a.va;l.aa=this.N.Lc;l.ba=this.N.Mc;l.ca=this.N.Nc;l.da=this.N.Lc;l.ea=this.N.Mc;l.fa=this.N.Nc},bd:function(){N.prototype.bd.call(this);var a=this.N,b=a.ga.C.qb,e=a.ga.D.qb,d,c,f,h,l,g,k,m,p,r,q,t,A,n,u,z,x,D,F,y,B,E,K,H,I,R,J,X,pa,Da,qa=a.ga.fb*a.ga.Ob+a.ga.gb*a.ga.Pb+a.ga.hb*a.ga.Qb;if(-.999999999>qa){var wa,ya,Ca,Ea=a.ga.fb,O=a.ga.gb,sa=a.ga.hb,ba=Ea*Ea,za=O*O,Ta=sa*sa,C;ba<za?ba<Ta?(C=1/Math.sqrt(za+Ta),wa=0,ya=sa*C,Ca=-O*C):(C=1/Math.sqrt(ba+za),wa=O*C,ya=-Ea*C,Ca=0):za<Ta?(C=1/Math.sqrt(Ta+ba),wa=-sa*C,ya=0,Ca=Ea*C):(C=1/Math.sqrt(ba+za),wa=O*C,ya=-Ea*C,Ca=0);d=wa;c=ya;f=Ca;h=0}else{var Aa,na,La;Aa=a.ga.gb*a.ga.Qb-a.ga.hb*a.ga.Pb;na=a.ga.hb*a.ga.Ob-a.ga.fb*a.ga.Qb;La=a.ga.fb*a.ga.Pb-a.ga.gb*a.ga.Ob;var Ba=Math.sqrt(.5*(1+qa)),qa=.5/Ba;Aa*=qa;na*=qa;La*=qa;d=Aa;c=na;f=La;h=Ba}var ta,S,ha,ea,da,M,T,w;ha=S=ta=0;ea=1;da=d;M=c;T=f;w=h;var V=ta*da+S*M+ha*T+ea*w;0>V&&(V=-V,da=-da,M=-M,T=-T,w=-w);if(.999999<V){var ia,Y,oa,ua;ia=da-ta;Y=M-S;oa=T-ha;ua=w-ea;da=ta+b/(b+e)*ia;M=S+b/(b+e)*Y;T=ha+b/(b+e)*oa;w=ea+b/(b+e)*ua;var ca=da*da+M*M+T*T+w*w;1E-32<ca&&(ca=1/Math.sqrt(ca));l=da*ca;g=M*ca;k=T*ca;m=w*ca}else{var Ma=b/(b+e)*Math.acos(V);da+=ta*-V;M+=S*-V;T+=ha*-V;w+=ea*-V;var va=da*da+M*M+T*T+w*w;1E-32<va&&(va=1/Math.sqrt(va));da*=va;M*=va;T*=va;w*=va;var Z=Math.sin(Ma),Pa=Math.cos(Ma);ta*=Pa;S*=Pa;ha*=Pa;ea*=Pa;l=ta+da*Z;g=S+M*Z;k=ha+T*Z;m=ea+w*Z}var Fa=l,Q=g,aa=k,fa=m,Ka=2*Fa,ja=2*Q,Ga=2*aa,P=Fa*Ka,Ya=Q*ja,Ua=aa*Ga,wb=Fa*ja,gb=Q*Ga,Vb=Fa*Ga,Ab=fa*Ka,ib=fa*ja,hb=fa*Ga;p=1-Ya-Ua;r=wb-hb;q=Vb+ib;t=wb+hb;A=1-P-Ua;n=gb-Ab;u=Vb-ib;z=gb+Ab;x=1-P-Ya;var ka,Ia;ka=p*a.ga.fb+r*a.ga.gb+q*a.ga.hb;Ia=t*a.ga.fb+A*a.ga.gb+n*a.ga.hb;D=u*a.ga.fb+z*a.ga.gb+x*a.ga.hb;I=a.pc;R=a.qc;J=a.rc;X=a.yc;pa=a.zc;Da=a.Ac;var ab=I*ka+R*Ia+J*D;if(-.999999999>ab){var bb,Wa,Va,qb=I*I,kb=R*R,Sa=J*J,Na;qb<kb?qb<Sa?(Na=1/Math.sqrt(kb+Sa),bb=0,Wa=J*Na,Va=-R*Na):(Na=1/Math.sqrt(qb+kb),bb=R*Na,Wa=-I*Na,Va=0):kb<Sa?(Na=1/Math.sqrt(Sa+qb),bb=-J*Na,Wa=0,Va=I*Na):(Na=1/Math.sqrt(qb+kb),bb=R*Na,Wa=-I*Na,Va=0);l=bb;g=Wa;k=Va;m=0}else{var Za,vb,mb;Za=R*D-J*Ia;vb=J*ka-I*D;mb=I*Ia-R*ka;var xb=Math.sqrt(.5*(1+ab)),ab=.5/xb;Za*=ab;vb*=ab;mb*=ab;l=Za;g=vb;k=mb;m=xb}var nb=l,fb=g,eb=k,Db=m,G=2*nb,sb=2*fb,jb=2*eb,Xb=nb*G,ob=fb*sb,cb=eb*jb,zb=nb*sb,Xa=fb*jb,tb=nb*jb,v=Db*G,W=Db*sb,U=Db*jb;p=1-ob-cb;r=zb-U;q=tb+W;t=zb+U;A=1-Xb-cb;n=Xa-v;u=tb-W;z=Xa+v;x=1-Xb-ob;var db,cc,Ra;db=p*X+r*pa+q*Da;cc=t*X+A*pa+n*Da;Ra=u*X+z*pa+x*Da;F=db;y=cc;B=Ra;E=Ia*B-D*y;K=D*F-ka*B;H=ka*y-Ia*F;if(1E-6<E*E+K*K+H*H){var Ha=E*E+K*K+H*H;0<Ha&&(Ha=1/Math.sqrt(Ha));E*=Ha;K*=Ha;H*=Ha}else{var rb=ka*ka,yb=Ia*Ia,Cb=D*D,la;rb<yb?rb<Cb?(la=1/Math.sqrt(yb+Cb),E=0,K=D*la,H=-Ia*la):(la=1/Math.sqrt(rb+yb),E=Ia*la,K=-ka*la,H=0):yb<Cb?(la=1/Math.sqrt(Cb+rb),E=-D*la,K=0,H=ka*la):(la=1/Math.sqrt(rb+yb),E=Ia*la,K=-ka*la,H=0)}F=K*D-H*Ia;y=H*ka-E*D;B=E*Ia-K*ka;a.pc=ka;a.qc=Ia;a.rc=D;a.yc=F;a.zc=y;a.Ac=B;a.Lc=E;a.Mc=K;a.Nc=H;var ra,ga,ma;ra=this.gb*this.Qb-this.hb*this.Pb;ga=this.hb*this.Ob-this.fb*this.Qb;ma=this.fb*this.Pb-this.gb*this.Ob;var Ja=this.fb*this.Ob+this.gb*this.Pb+this.hb*this.Qb,$a=-1>=Ja?3.14159265358979:1<=Ja?0:Math.acos(Ja),Oa=ra*ra+ga*ga+ma*ma;0<Oa&&(Oa=1/Math.sqrt(Oa));ra*=Oa;ga*=Oa;ma*=Oa;ra*=$a;ga*=$a;ma*=$a;this.Re=ra*this.N.yc+ga*this.N.zc+ma*this.N.Ac;this.Se=ra*this.N.Lc+ga*this.N.Mc+ma*this.N.Nc;var pb,xa,lb;pb=this.Yc*this.ue-this.Zc*this.te;xa=this.Zc*this.se-this.Xc*this.ue;lb=this.Xc*this.te-this.Yc*this.se;Ja=this.Xc*this.se+this.Yc*this.te+this.Zc*this.ue;this.angle=-1>=Ja?3.14159265358979:1<=Ja?0:Math.acos(Ja);0>pb*this.N.pc+xa*this.N.qc+lb*this.N.rc&&(this.angle=-this.angle);var Qa,ub,Bb;Qa=this.xf-this.uf;ub=this.yf-this.vf;Bb=this.zf-this.wf;this.Bg=Qa*this.N.pc+ub*this.N.qc+Bb*this.N.rc;this.Xf=Qa*this.N.yc+ub*this.N.zc+Bb*this.N.Ac;this.Yf=Qa*this.N.Lc+ub*this.N.Mc+Bb*this.N.Nc},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Zg:function(){var a=new n;a.x=this.fb;a.y=this.gb;a.z=this.hb;return a},ah:function(){var a=new n;a.x=this.Ob;a.y=this.Pb;a.z=this.Qb;return a},$g:function(a){a.x=this.fb;a.y=this.gb;a.z=this.hb},bh:function(a){a.x=this.Ob;a.y=this.Pb;a.z=this.Qb},dh:function(){var a=new n;a.x=this.Ma;a.y=this.Na;a.z=this.Oa;return a},fh:function(){var a=new n;a.x=this.Sb;a.y=this.Tb;a.z=this.Ub;return a},eh:function(a){a.x=this.Ma;a.y=this.Na;a.z=this.Oa},gh:function(a){a.x=this.Sb;a.y=this.Tb;a.z=this.Ub},po:function(){return this.ul},eo:function(){return this.nl},no:function(){return this.tl},bo:function(){return this.ml},Gl:function(){return this.angle},Jl:function(){return this.Bg}});Gb.prototype={Mg:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var d=this.rigidBody1;a=this.localAnchor1;var c,f,h;c=e.x;f=e.y;h=e.z;c-=d.a.v;f-=d.a.A;h-=d.a.B;var l;b=d.a.o*c+d.a.i*f+d.a.l*h;l=d.a.f*c+d.a.m*f+d.a.g*h;d=d.a.h*c+d.a.j*f+d.a.s*h;a.x=b;a.y=l;a.z=d;b=this.rigidBody2;a=this.localAnchor2;l=e.x;d=e.y;f=e.z;l-=b.a.v;d-=b.a.A;f-=b.a.B;e=b.a.o*l+b.a.i*d+b.a.l*f;c=b.a.f*l+b.a.m*d+b.a.g*f;b=b.a.h*l+b.a.j*d+b.a.s*f;a.x=e;a.y=c;a.z=b}};wf.wa=Gb;wf.prototype=gb(Gb.prototype,{Aa:function(a,b,e,d){this.Mg(a,b,e);e=this.localAxis1;var c,f,h;c=d.x;f=d.y;h=d.z;var l,g;l=a.a.o*c+a.a.i*f+a.a.l*h;g=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;e.x=l;e.y=g;e.z=a;a=this.localAxis2;e=d.x;l=d.y;c=d.z;d=b.a.o*e+b.a.i*l+b.a.l*c;g=b.a.f*e+b.a.m*l+b.a.g*c;b=b.a.h*e+b.a.j*l+b.a.s*c;a.x=d;a.y=g;a.z=b;return this}});Sb.wa=N;Sb.prototype=gb(N.prototype,{ud:function(a,b,e){var d,c=1/(this.C.qb+this.D.qb),f=this.Yg(this.wd,this.xd,this.yd),h=this.Yg(this.kd,this.ld,this.md),l=this.Yg(this.zd,this.Ad,this.Bd);if(0>=this.Rf[0].frequency||!e){d=this.Eb[0];var g=a.rows[a.Da++],k=g.va;k.sa=0;k.ta=0;k.ua=0;k.xa=0;k.ya=0;k.za=0;k.aa=0;k.ba=0;k.ca=0;k.da=0;k.ea=0;k.fa=0;g.Fa=0;g.Ka=0;g.Ha=0;g.Ga=0;g.motorSpeed=0;g.tb=0;g.qa=d;this.ak(g,this.translationX,this.qg[0],c,this.Rf[0],b,e);d=g.va;d.sa=this.fb;d.ta=this.gb;d.ua=this.hb;d.xa=this.fb;d.ya=this.gb;d.za=this.hb;d.aa=this.bc*this.hb-this.cc*this.gb;d.ba=this.cc*this.fb-this.ac*this.hb;d.ca=this.ac*this.gb-this.bc*this.fb;d.da=this.ec*this.hb-this.fc*this.gb;d.ea=this.fc*this.fb-this.dc*this.hb;d.fa=this.dc*this.gb-this.ec*this.fb}if(0>=this.Rf[1].frequency||!e)d=this.Eb[1],g=a.rows[a.Da++],k=g.va,k.sa=0,k.ta=0,k.ua=0,k.xa=0,k.ya=0,k.za=0,k.aa=0,k.ba=0,k.ca=0,k.da=0,k.ea=0,k.fa=0,g.Fa=0,g.Ka=0,g.Ha=0,g.Ga=0,g.motorSpeed=0,g.tb=0,g.qa=d,this.ak(g,this.translationY,this.qg[1],c,this.Rf[1],b,e),d=g.va,d.sa=this.Xc,d.ta=this.Yc,d.ua=this.Zc,d.xa=this.Xc,d.ya=this.Yc,d.za=this.Zc,d.aa=this.bc*this.Zc-this.cc*this.Yc,d.ba=this.cc*this.Xc-this.ac*this.Zc,d.ca=this.ac*this.Yc-this.bc*this.Xc,d.da=this.ec*this.Zc-this.fc*this.Yc,d.ea=this.fc*this.Xc-this.dc*this.Zc,d.fa=this.dc*this.Yc-this.ec*this.Xc;if(0>=this.Rf[2].frequency||!e)d=this.Eb[2],g=a.rows[a.Da++],k=g.va,k.sa=0,k.ta=0,k.ua=0,k.xa=0,k.ya=0,k.za=0,k.aa=0,k.ba=0,k.ca=0,k.da=0,k.ea=0,k.fa=0,g.Fa=0,g.Ka=0,g.Ha=0,g.Ga=0,g.motorSpeed=0,g.tb=0,g.qa=d,this.ak(g,this.cm,this.qg[2],c,this.Rf[2],b,e),d=g.va,d.sa=this.ve,d.ta=this.we,d.ua=this.xe,d.xa=this.ve,d.ya=this.we,d.za=this.xe,d.aa=this.bc*this.xe-this.cc*this.we,d.ba=this.cc*this.ve-this.ac*this.xe,d.ca=this.ac*this.we-this.bc*this.ve,d.da=this.ec*this.xe-this.fc*this.we,d.ea=this.fc*this.ve-this.dc*this.xe,d.fa=this.dc*this.we-this.ec*this.ve;this.dk||!(0>=this.Tg[0].frequency)&&e||(c=this.Eb[3],d=a.rows[a.Da++],g=d.va,g.sa=0,g.ta=0,g.ua=0,g.xa=0,g.ya=0,g.za=0,g.aa=0,g.ba=0,g.ca=0,g.da=0,g.ea=0,g.fa=0,d.Fa=0,d.Ka=0,d.Ha=0,d.Ga=0,d.motorSpeed=0,d.tb=0,d.qa=c,this.nh(d,this.Af,this.pg[0],f,this.Tg[0],b,e),d=d.va,d.aa=this.wd,d.ba=this.xd,d.ca=this.yd,d.da=this.wd,d.ea=this.xd,d.fa=this.yd);this.ek||!(0>=this.Tg[1].frequency)&&e||(f=this.Eb[4],c=a.rows[a.Da++],d=c.va,d.sa=0,d.ta=0,d.ua=0,d.xa=0,d.ya=0,d.za=0,d.aa=0,d.ba=0,d.ca=0,d.da=0,d.ea=0,d.fa=0,c.Fa=0,c.Ka=0,c.Ha=0,c.Ga=0,c.motorSpeed=0,c.tb=0,c.qa=f,this.nh(c,this.qh,this.pg[1],h,this.Tg[1],b,e),d=c.va,d.aa=this.kd,d.ba=this.ld,d.ca=this.md,d.da=this.kd,d.ea=this.ld,d.fa=this.md);this.fk||!(0>=this.Tg[2].frequency)&&e||(h=this.Eb[5],a=a.rows[a.Da++],f=a.va,f.sa=0,f.ta=0,f.ua=0,f.xa=0,f.ya=0,f.za=0,f.aa=0,f.ba=0,f.ca=0,f.da=0,f.ea=0,f.fa=0,a.Fa=0,a.Ka=0,a.Ha=0,a.Ga=0,a.motorSpeed=0,a.tb=0,a.qa=h,this.nh(a,this.Bf,this.pg[2],l,this.Tg[2],b,e),d=a.va,d.aa=this.zd,d.ba=this.Ad,d.ca=this.Bd,d.da=this.zd,d.ea=this.Ad,d.fa=this.Bd)},bd:function(){N.prototype.bd.call(this);var a,b,e,d,c,f,h,l,g;a=this.fb;b=this.gb;e=this.hb;h=this.Cf;l=this.Df;g=this.Ef;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.wd=c*g-f*l;this.xd=f*h-d*g;this.yd=d*l-c*h;this.kd=d;this.ld=c;this.md=f;this.zd=b*f-e*c;this.Ad=e*d-a*f;this.Bd=a*c-b*d;a=this.wd*this.wd+this.xd*this.xd+this.yd*this.yd;0<a&&(a=1/Math.sqrt(a));this.wd*=a;this.xd*=a;this.yd*=a;a=this.kd*this.kd+this.ld*this.ld+this.md*this.md;0<a&&(a=1/Math.sqrt(a));this.kd*=a;this.ld*=a;this.md*=a;a=this.zd*this.zd+this.Ad*this.Ad+this.Bd*this.Bd;0<a&&(a=1/Math.sqrt(a));this.zd*=a;this.Ad*=a;this.Bd*=a;this.dk=!(this.wd*this.wd+this.xd*this.xd+this.yd*this.yd);this.ek=!(this.kd*this.kd+this.ld*this.ld+this.md*this.md);this.fk=!(this.zd*this.zd+this.Ad*this.Ad+this.Bd*this.Bd);var k,m,p,r,q,t,A,n,u;a=this.fb;k=this.Xc;m=this.ve;b=this.gb;p=this.Yc;r=this.we;e=this.hb;q=this.Zc;t=this.xe;d=this.Ob;c=this.se;A=this.Cf;f=this.Pb;h=this.te;n=this.Df;l=this.Qb;g=this.ue;u=this.Ef;var z,x,D;z=a*A+b*n+e*u;x=k*c+p*h+q*g;D=m*c+r*h+t*g;-1>=z?(a=Math.atan2(D,x),k=.5*a,z=-1.570796326794895,a=.5*-a):1<=z?(a=Math.atan2(D,x),k=.5*a,z=1.570796326794895,a*=.5):(k=Math.atan2(-(k*A+p*n+q*u),m*A+r*n+t*u),z=Math.asin(z),a=Math.atan2(-(a*c+b*h+e*g),a*d+b*f+e*l));this.Af=k;this.qh=z;this.Bf=a;a=this.xf-this.uf;b=this.yf-this.vf;e=this.zf-this.wf;this.translationX=a*this.fb+b*this.gb+e*this.hb;this.translationY=a*this.Xc+b*this.Yc+e*this.Zc;this.cm=a*this.ve+b*this.we+e*this.xe},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Un:function(){var a=new n;a.x=this.fb;a.y=this.gb;a.z=this.hb;return a},Vn:function(){var a=new n;a.x=this.kd;a.y=this.ld;a.z=this.md;return a},Wn:function(){var a=new n;a.x=this.Cf;a.y=this.Df;a.z=this.Ef;return a},qo:function(){return this.Rf.slice(0)},fo:function(){return this.Rf.slice(0)},oo:function(){return this.qg.slice(0)},co:function(){return this.pg.slice(0)},Tn:function(){return new n(this.Af,this.qh,this.Bf)},ro:function(){return new n(this.translationX,this.translationY,this.cm)}});Lg.wa=Gb;Lg.prototype=gb(Gb.prototype,{Aa:function(a,b,e,d,c){this.Mg(a,b,e);var f=a.a;b=b.a;var h,l,g,k,m,p,r,q,t,A,n,u,z,x,D,F,y,B;h=d.e00;l=d.e01;g=d.e02;k=d.e10;m=d.e11;p=d.e12;r=d.e20;q=d.e21;t=d.e22;A=c.e00;n=c.e01;u=c.e02;z=c.e10;x=c.e11;D=c.e12;F=c.e20;y=c.e21;B=c.e22;var E,K;c=f.o*h+f.i*k+f.l*r;d=f.o*l+f.i*m+f.l*q;a=f.o*g+f.i*p+f.l*t;e=f.f*h+f.m*k+f.g*r;E=f.f*l+f.m*m+f.g*q;K=f.f*g+f.m*p+f.g*t;h=f.h*h+f.j*k+f.s*r;l=f.h*l+f.j*m+f.s*q;k=f.h*g+f.j*p+f.s*t;f=b.o*A+b.i*z+b.l*F;g=b.o*n+b.i*x+b.l*y;p=b.o*u+b.i*D+b.l*B;m=b.f*A+b.m*z+b.g*F;q=b.f*n+b.m*x+b.g*y;t=b.f*u+b.m*D+b.g*B;A=b.h*A+b.j*z+b.s*F;n=b.h*n+b.j*x+b.s*y;b=b.h*u+b.j*D+b.s*B;u=this.localBasis1;u.e00=c;u.e01=d;u.e02=a;u.e10=e;u.e11=E;u.e12=K;u.e20=h;u.e21=l;u.e22=k;c=this.localBasis2;c.e00=f;c.e01=g;c.e02=p;c.e10=m;c.e11=q;c.e12=t;c.e20=A;c.e21=n;c.e22=b;return this}});qc.prototype={wa:function(){return this.gl},Cb:function(){return this.ad},Kb:function(){return this.ia},mb:function(){return this.M}};Jb.wa=N;Jb.prototype=gb(N.prototype,{ud:function(a,b,e){var d=this.Mh(b,e),c=this.Xf*d,f=this.Yf*d,h=this.Jh*d,l=this.Re*d,d=this.Se*d;if(0>=this.Pe.frequency||!e){var g=this.Eb[0],k=a.rows[a.Da++],m=k.va;m.sa=0;m.ta=0;m.ua=0;m.xa=0;m.ya=0;m.za=0;m.aa=0;m.ba=0;m.ca=0;m.da=0;m.ea=0;m.fa=0;k.Fa=0;k.Ka=0;k.Ha=0;k.Ga=0;k.motorSpeed=0;k.tb=0;k.qa=g;this.ak(k,this.Bg,this.fi,1/(this.C.qb+this.D.qb),this.Pe,b,e);b=k.va;b.sa=this.N.pc;b.ta=this.N.qc;b.ua=this.N.rc;b.xa=this.N.pc;b.ya=this.N.qc;b.za=this.N.rc;b.aa=this.bc*this.N.rc-this.cc*this.N.qc;b.ba=this.cc*this.N.pc-this.ac*this.N.rc;b.ca=this.ac*this.N.qc-this.bc*this.N.pc;b.da=this.ec*this.N.rc-this.fc*this.N.qc;b.ea=this.fc*this.N.pc-this.dc*this.N.rc;b.fa=this.dc*this.N.qc-this.ec*this.N.pc}b=this.Eb[1];e=a.rows[a.Da++];g=e.va;g.sa=0;g.ta=0;g.ua=0;g.xa=0;g.ya=0;g.za=0;g.aa=0;g.ba=0;g.ca=0;g.da=0;g.ea=0;g.fa=0;e.Fa=0;e.Ka=0;e.Ha=0;e.Ga=0;e.motorSpeed=0;e.tb=0;e.qa=b;e.Fa=c;e.Ka=0;e.Ha=-Infinity;e.Ga=Infinity;b=e.va;b.sa=this.N.yc;b.ta=this.N.zc;b.ua=this.N.Ac;b.xa=this.N.yc;b.ya=this.N.zc;b.za=this.N.Ac;b.aa=this.bc*this.N.Ac-this.cc*this.N.zc;b.ba=this.cc*this.N.yc-this.ac*this.N.Ac;b.ca=this.ac*this.N.zc-this.bc*this.N.yc;b.da=this.ec*this.N.Ac-this.fc*this.N.zc;b.ea=this.fc*this.N.yc-this.dc*this.N.Ac;b.fa=this.dc*this.N.zc-this.ec*this.N.yc;c=this.Eb[2];b=a.rows[a.Da++];e=b.va;e.sa=0;e.ta=0;e.ua=0;e.xa=0;e.ya=0;e.za=0;e.aa=0;e.ba=0;e.ca=0;e.da=0;e.ea=0;e.fa=0;b.Fa=0;b.Ka=0;b.Ha=0;b.Ga=0;b.motorSpeed=0;b.tb=0;b.qa=c;b.Fa=f;b.Ka=0;b.Ha=-Infinity;b.Ga=Infinity;b=b.va;b.sa=this.N.Lc;b.ta=this.N.Mc;b.ua=this.N.Nc;b.xa=this.N.Lc;b.ya=this.N.Mc;b.za=this.N.Nc;b.aa=this.bc*this.N.Nc-this.cc*this.N.Mc;b.ba=this.cc*this.N.Lc-this.ac*this.N.Nc;b.ca=this.ac*this.N.Mc-this.bc*this.N.Lc;b.da=this.ec*this.N.Nc-this.fc*this.N.Mc;b.ea=this.fc*this.N.Lc-this.dc*this.N.Nc;b.fa=this.dc*this.N.Mc-this.ec*this.N.Lc;f=this.Eb[3];c=a.rows[a.Da++];b=c.va;b.sa=0;b.ta=0;b.ua=0;b.xa=0;b.ya=0;b.za=0;b.aa=0;b.ba=0;b.ca=0;b.da=0;b.ea=0;b.fa=0;c.Fa=0;c.Ka=0;c.Ha=0;c.Ga=0;c.motorSpeed=0;c.tb=0;c.qa=f;c.Fa=h;c.Ka=0;c.Ha=-Infinity;c.Ga=Infinity;b=c.va;b.aa=1;b.ba=0;b.ca=0;b.da=1;b.ea=0;b.fa=0;h=this.Eb[4];f=a.rows[a.Da++];c=f.va;c.sa=0;c.ta=0;c.ua=0;c.xa=0;c.ya=0;c.za=0;c.aa=0;c.ba=0;c.ca=0;c.da=0;c.ea=0;c.fa=0;f.Fa=0;f.Ka=0;f.Ha=0;f.Ga=0;f.motorSpeed=0;f.tb=0;f.qa=h;f.Fa=l;f.Ka=0;f.Ha=-Infinity;f.Ga=Infinity;b=f.va;b.aa=0;b.ba=1;b.ca=0;b.da=0;b.ea=1;b.fa=0;l=this.Eb[5];a=a.rows[a.Da++];h=a.va;h.sa=0;h.ta=0;h.ua=0;h.xa=0;h.ya=0;h.za=0;h.aa=0;h.ba=0;h.ca=0;h.da=0;h.ea=0;h.fa=0;a.Fa=0;a.Ka=0;a.Ha=0;a.Ga=0;a.motorSpeed=0;a.tb=0;a.qa=l;a.Fa=d;a.Ka=0;a.Ha=-Infinity;a.Ga=Infinity;b=a.va;b.aa=0;b.ba=0;b.ca=1;b.da=0;b.ea=0;b.fa=1},bd:function(){N.prototype.bd.call(this);var a=this.N,b=a.ga.C.qb,e=a.ga.D.qb,d,c,f,h,l,g,k,m,p,r,q,t,A,n,u,z,x,D,F,y,B,E,K,H,I,R,J,X,pa,Da,qa=a.ga.fb*a.ga.Ob+a.ga.gb*a.ga.Pb+a.ga.hb*a.ga.Qb;if(-.999999999>qa){var wa,ya,Ca,Ea=a.ga.fb,O=a.ga.gb,sa=a.ga.hb,ba=Ea*Ea,za=O*O,Ta=sa*sa,C;ba<za?ba<Ta?(C=1/Math.sqrt(za+Ta),wa=0,ya=sa*C,Ca=-O*C):(C=1/Math.sqrt(ba+za),wa=O*C,ya=-Ea*C,Ca=0):za<Ta?(C=1/Math.sqrt(Ta+ba),wa=-sa*C,ya=0,Ca=Ea*C):(C=1/Math.sqrt(ba+za),wa=O*C,ya=-Ea*C,Ca=0);d=wa;c=ya;f=Ca;h=0}else{var Aa,na,La;Aa=a.ga.gb*a.ga.Qb-a.ga.hb*a.ga.Pb;na=a.ga.hb*a.ga.Ob-a.ga.fb*a.ga.Qb;La=a.ga.fb*a.ga.Pb-a.ga.gb*a.ga.Ob;var Ba=Math.sqrt(.5*(1+qa)),qa=.5/Ba;Aa*=qa;na*=qa;La*=qa;d=Aa;c=na;f=La;h=Ba}var ta,S,ha,ea,da,M,T,w;ha=S=ta=0;ea=1;da=d;M=c;T=f;w=h;var V=ta*da+S*M+ha*T+ea*w;0>V&&(V=-V,da=-da,M=-M,T=-T,w=-w);if(.999999<V){var ia,Y,oa,ua;ia=da-ta;Y=M-S;oa=T-ha;ua=w-ea;da=ta+b/(b+e)*ia;M=S+b/(b+e)*Y;T=ha+b/(b+e)*oa;w=ea+b/(b+e)*ua;var ca=da*da+M*M+T*T+w*w;1E-32<ca&&(ca=1/Math.sqrt(ca));l=da*ca;g=M*ca;k=T*ca;m=w*ca}else{var Ma=b/(b+e)*Math.acos(V);da+=ta*-V;M+=S*-V;T+=ha*-V;w+=ea*-V;var va=da*da+M*M+T*T+w*w;1E-32<va&&(va=1/Math.sqrt(va));da*=va;M*=va;T*=va;w*=va;var Z=Math.sin(Ma),Pa=Math.cos(Ma);ta*=Pa;S*=Pa;ha*=Pa;ea*=Pa;l=ta+da*Z;g=S+M*Z;k=ha+T*Z;m=ea+w*Z}var Fa=l,Q=g,aa=k,fa=m,Ka=2*Fa,ja=2*Q,Ga=2*aa,P=Fa*Ka,Ya=Q*ja,Ua=aa*Ga,wb=Fa*ja,gb=Q*Ga,eb=Fa*Ga,Ab=fa*Ka,ib=fa*ja,hb=fa*Ga;p=1-Ya-Ua;r=wb-hb;q=eb+ib;t=wb+hb;A=1-P-Ua;n=gb-Ab;u=eb-ib;z=gb+Ab;x=1-P-Ya;var ka,Ia;ka=p*a.ga.fb+r*a.ga.gb+q*a.ga.hb;Ia=t*a.ga.fb+A*a.ga.gb+n*a.ga.hb;D=u*a.ga.fb+z*a.ga.gb+x*a.ga.hb;I=a.pc;R=a.qc;J=a.rc;X=a.yc;pa=a.zc;Da=a.Ac;var ab=I*ka+R*Ia+J*D;if(-.999999999>ab){var bb,Wa,Va,qb=I*I,kb=R*R,Sa=J*J,Na;qb<kb?qb<Sa?(Na=1/Math.sqrt(kb+Sa),bb=0,Wa=J*Na,Va=-R*Na):(Na=1/Math.sqrt(qb+kb),bb=R*Na,Wa=-I*Na,Va=0):kb<Sa?(Na=1/Math.sqrt(Sa+qb),bb=-J*Na,Wa=0,Va=I*Na):(Na=1/Math.sqrt(qb+kb),bb=R*Na,Wa=-I*Na,Va=0);l=bb;g=Wa;k=Va;m=0}else{var Za,vb,mb;Za=R*D-J*Ia;vb=J*ka-I*D;mb=I*Ia-R*ka;var xb=Math.sqrt(.5*(1+ab)),ab=.5/xb;Za*=ab;vb*=ab;mb*=ab;l=Za;g=vb;k=mb;m=xb}var nb=l,fb=g,pb=k,Db=m,G=2*nb,sb=2*fb,jb=2*pb,Xb=nb*G,ob=fb*sb,cb=pb*jb,zb=nb*sb,Xa=fb*jb,tb=nb*jb,v=Db*G,W=Db*sb,U=Db*jb;p=1-ob-cb;r=zb-U;q=tb+W;t=zb+U;A=1-Xb-cb;n=Xa-v;u=tb-W;z=Xa+v;x=1-Xb-ob;var db,cc,Ra;db=p*X+r*pa+q*Da;cc=t*X+A*pa+n*Da;Ra=u*X+z*pa+x*Da;F=db;y=cc;B=Ra;E=Ia*B-D*y;K=D*F-ka*B;H=ka*y-Ia*F;if(1E-6<E*E+K*K+H*H){var Ha=E*E+K*K+H*H;0<Ha&&(Ha=1/Math.sqrt(Ha));E*=Ha;K*=Ha;H*=Ha}else{var rb=ka*ka,yb=Ia*Ia,Cb=D*D,la;rb<yb?rb<Cb?(la=1/Math.sqrt(yb+Cb),E=0,K=D*la,H=-Ia*la):(la=1/Math.sqrt(rb+yb),E=Ia*la,K=-ka*la,H=0):yb<Cb?(la=1/Math.sqrt(Cb+rb),E=-D*la,K=0,H=ka*la):(la=1/Math.sqrt(rb+yb),E=Ia*la,K=-ka*la,H=0)}F=K*D-H*Ia;y=H*ka-E*D;B=E*Ia-K*ka;a.pc=ka;a.qc=Ia;a.rc=D;a.yc=F;a.zc=y;a.Ac=B;a.Lc=E;a.Mc=K;a.Nc=H;var ra,ga,ma,Ja,$a,Oa,lb,xa,Qa,ub,Bb,Fb,Hb,Kb,Lb,Nb,Mb,Pb;ra=this.fb;ga=this.Xc;ma=this.ve;Ja=this.gb;$a=this.Yc;Oa=this.we;lb=this.hb;xa=this.Zc;Qa=this.xe;ub=this.Ob;Bb=this.se;Fb=this.Cf;Hb=this.Pb;Kb=this.te;Lb=this.Df;Nb=this.Qb;Mb=this.ue;Pb=this.Ef;var Gb,Yb,oc,Qb,Jb,rc,Ob,Rb;Gb=ub*ra+Bb*ga+Fb*ma;Yb=ub*Ja+Bb*$a+Fb*Oa;oc=ub*lb+Bb*xa+Fb*Qa;Qb=Hb*ra+Kb*ga+Lb*ma;Jb=Hb*Ja+Kb*$a+Lb*Oa;rc=Hb*lb+Kb*xa+Lb*Qa;Ob=Nb*ra+Mb*ga+Pb*ma;Rb=Nb*Ja+Mb*$a+Pb*Oa;var Sb,Tb,hc,uc,gc=Nb*lb+Mb*xa+Pb*Qa,$b=Gb+Jb+gc,Eb;0<$b?(Eb=Math.sqrt($b+1),uc=.5*Eb,Eb=.5/Eb,Sb=(Rb-rc)*Eb,Tb=(oc-Ob)*Eb,hc=(Qb-Yb)*Eb):Gb>Jb?Gb>gc?(Eb=Math.sqrt(Gb-Jb-gc+1),Sb=.5*Eb,Eb=.5/Eb,Tb=(Yb+Qb)*Eb,hc=(oc+Ob)*Eb,uc=(Rb-rc)*Eb):(Eb=Math.sqrt(gc-Gb-Jb+1),hc=.5*Eb,Eb=.5/Eb,Sb=(oc+Ob)*Eb,Tb=(rc+Rb)*Eb,uc=(Qb-Yb)*Eb):Jb>gc?(Eb=Math.sqrt(Jb-gc-Gb+1),Tb=.5*Eb,Eb=.5/Eb,Sb=(Yb+Qb)*Eb,hc=(rc+Rb)*Eb,uc=(oc-Ob)*Eb):(Eb=Math.sqrt(gc-Gb-Jb+1),hc=.5*Eb,Eb=.5/Eb,Sb=(oc+Ob)*Eb,Tb=(rc+Rb)*Eb,uc=(Qb-Yb)*Eb);var Zb=uc,bc=2*(-1>=Zb?3.14159265358979:1<=Zb?0:Math.acos(Zb));this.Jh=Sb;this.Re=Tb;this.Se=hc;var Wb=this.Jh*this.Jh+this.Re*this.Re+this.Se*this.Se;0<Wb&&(Wb=1/Math.sqrt(Wb));this.Jh*=Wb;this.Re*=Wb;this.Se*=Wb;this.Jh*=bc;this.Re*=bc;this.Se*=bc;var ac,dc,ic;ac=this.xf-this.uf;dc=this.yf-this.vf;ic=this.zf-this.wf;this.Bg=ac*this.N.pc+dc*this.N.qc+ic*this.N.rc;this.Xf=ac*this.N.yc+dc*this.N.zc+ic*this.N.Ac;this.Yf=ac*this.N.Lc+dc*this.N.Mc+ic*this.N.Nc},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Zg:function(){var a=new n;a.x=this.fb;a.y=this.gb;a.z=this.hb;return a},ah:function(){var a=new n;a.x=this.Ob;a.y=this.Pb;a.z=this.Qb;return a},$g:function(a){a.x=this.fb;a.y=this.gb;a.z=this.hb},bh:function(a){a.x=this.Ob;a.y=this.Pb;a.z=this.Qb},dh:function(){var a=new n;a.x=this.Ma;a.y=this.Na;a.z=this.Oa;return a},fh:function(){var a=new n;a.x=this.Sb;a.y=this.Tb;a.z=this.Ub;return a},eh:function(a){a.x=this.Ma;a.y=this.Na;a.z=this.Oa},gh:function(a){a.x=this.Sb;a.y=this.Tb;a.z=this.Ub},Qj:function(){return this.Pe},Il:function(){return this.fi},Jl:function(){return this.Bg}});Kg.wa=Gb;Kg.prototype=gb(Gb.prototype,{Aa:function(a,b,e,d){this.Mg(a,b,e);e=this.localAxis1;var c,f,h;c=d.x;f=d.y;h=d.z;var l,g;l=a.a.o*c+a.a.i*f+a.a.l*h;g=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;e.x=l;e.y=g;e.z=a;a=this.localAxis2;e=d.x;l=d.y;c=d.z;d=b.a.o*e+b.a.i*l+b.a.l*c;g=b.a.f*e+b.a.m*l+b.a.g*c;b=b.a.h*e+b.a.j*l+b.a.s*c;a.x=d;a.y=g;a.z=b;return this}});pb.wa=N;pb.prototype=gb(N.prototype,{ud:function(a,b,e){var d=this.Mh(b,e),c,f,h;c=this.$j*d;f=this.Xf*d;h=this.Yf*d;var l,g,k,m,p,r,q,t,A,n,u,z;l=-this.cc;g=this.bc;k=this.cc;m=-this.ac;p=-this.bc;r=this.ac;q=-this.fc;t=this.ec;A=this.fc;n=-this.dc;u=-this.ec;z=this.dc;var x=this.Yg(this.Be,this.Ce,this.De),d=this.Yg(this.Ob,this.Pb,this.Qb),D=this.Eb[0],F=a.rows[a.Da++],y=F.va;y.sa=0;y.ta=0;y.ua=0;y.xa=0;y.ya=0;y.za=0;y.aa=0;y.ba=0;y.ca=0;y.da=0;y.ea=0;y.fa=0;F.Fa=0;F.Ka=0;F.Ha=0;F.Ga=0;F.motorSpeed=0;F.tb=0;F.qa=D;F.Fa=c;F.Ka=0;F.Ha=-Infinity;F.Ga=Infinity;c=F.va;c.sa=1;c.ta=0;c.ua=0;c.xa=1;c.ya=0;c.za=0;c.aa=-0;c.ba=-l;c.ca=-g;c.da=-0;c.ea=-q;c.fa=-t;c=this.Eb[1];l=a.rows[a.Da++];g=l.va;g.sa=0;g.ta=0;g.ua=0;g.xa=0;g.ya=0;g.za=0;g.aa=0;g.ba=0;g.ca=0;g.da=0;g.ea=0;g.fa=0;l.Fa=0;l.Ka=0;l.Ha=0;l.Ga=0;l.motorSpeed=0;l.tb=0;l.qa=c;l.Fa=f;l.Ka=0;l.Ha=-Infinity;l.Ga=Infinity;c=l.va;c.sa=0;c.ta=1;c.ua=0;c.xa=0;c.ya=1;c.za=0;c.aa=-k;c.ba=-0;c.ca=-m;c.da=-A;c.ea=-0;c.fa=-n;f=this.Eb[2];k=a.rows[a.Da++];m=k.va;m.sa=0;m.ta=0;m.ua=0;m.xa=0;m.ya=0;m.za=0;m.aa=0;m.ba=0;m.ca=0;m.da=0;m.ea=0;m.fa=0;k.Fa=0;k.Ka=0;k.Ha=0;k.Ga=0;k.motorSpeed=0;k.tb=0;k.qa=f;k.Fa=h;k.Ka=0;k.Ha=-Infinity;k.Ga=Infinity;c=k.va;c.sa=0;c.ta=0;c.ua=1;c.xa=0;c.ya=0;c.za=1;c.aa=-p;c.ba=-r;c.ca=-0;c.da=-u;c.ea=-z;c.fa=-0;0<this.bk&&(0>=this.ql.frequency||!e)&&(h=this.Eb[3],p=a.rows[a.Da++],r=p.va,r.sa=0,r.ta=0,r.ua=0,r.xa=0,r.ya=0,r.za=0,r.aa=0,r.ba=0,r.ca=0,r.da=0,r.ea=0,r.fa=0,p.Fa=0,p.Ka=0,p.Ha=0,p.Ga=0,p.motorSpeed=0,p.tb=0,p.qa=h,this.nh(p,this.bk,this.Fl,x,this.ql,b,e),c=p.va,c.aa=this.Be,c.ba=this.Ce,c.ca=this.De,c.da=this.Be,c.ea=this.Ce,c.fa=this.De);if(0>=this.wl.frequency||!e)x=this.Eb[4],a=a.rows[a.Da++],h=a.va,h.sa=0,h.ta=0,h.ua=0,h.xa=0,h.ya=0,h.za=0,h.aa=0,h.ba=0,h.ca=0,h.da=0,h.ea=0,h.fa=0,a.Fa=0,a.Ka=0,a.Ha=0,a.Ga=0,a.motorSpeed=0,a.tb=0,a.qa=x,this.nh(a,this.Hj,this.vl,d,this.wl,b,e),c=a.va,c.aa=this.Ai,c.ba=this.Bi,c.ca=this.Ci,c.da=this.Ai,c.ea=this.Bi,c.fa=this.Ci},bd:function(){N.prototype.bd.call(this);var a,b,e,d,c,f;a=this.fb;b=this.gb;e=this.hb;d=this.Ob;c=this.Pb;f=this.Qb;var h,l,g,k,m,p,r,q,t;h=this.fb;l=this.Xc;g=this.ve;k=this.gb;m=this.Yc;p=this.we;r=this.hb;q=this.Zc;t=this.xe;var A,n,u,z,x,D,F,y;D=a*d+b*c+e*f;-.999999999>D?(x=a*a,d=b*b,c=e*e,x<d?x<c?(d=1/Math.sqrt(d+c),x=0,e*=d,a=-b*d):(d=1/Math.sqrt(x+d),x=b*d,e=-a*d,a=0):d<c?(d=1/Math.sqrt(c+x),x=-e*d,e=0,a*=d):(d=1/Math.sqrt(x+d),x=b*d,e=-a*d,a=0),A=x,n=e,u=a,z=0):(x=Math.sqrt(.5*(1+D)),D=.5/x,A=(b*f-e*c)*D,n=(e*d-a*f)*D,u=(a*c-b*d)*D,z=x);D=A;f=n;x=u;a=z;c=2*D;e=2*f;b=2*x;F=D*c;y=f*e;d=x*b;x=D*e;f*=b;D*=b;var B=a*c,E=a*e;c=a*b;a=1-y-d;b=x-c;e=D+E;x+=c;d=1-F-d;c=f-B;D-=E;f+=B;F=1-F-y;this.zj=2*(-1>=z?3.14159265358979:1<=z?0:Math.acos(z));z=A;y=u;u=a*this.se+x*this.te+D*this.ue;B=b*this.se+d*this.te+f*this.ue;A=e*this.se+c*this.te+F*this.ue;this.Hj=Math.atan2(this.ve*u+this.we*B+this.xe*A,this.Xc*u+this.Yc*B+this.Zc*A);this.Ai=this.fb+this.Ob;this.Bi=this.gb+this.Pb;this.Ci=this.hb+this.Qb;A=this.Ai*this.Ai+this.Bi*this.Bi+this.Ci*this.Ci;0<A&&(A=1/Math.sqrt(A));this.Ai*=A;this.Bi*=A;this.Ci*=A;u=Math.sqrt(z*z+n*n+y*y);0<u&&(u=1/u);z*=u*this.zj;n*=u*this.zj;y*=u*this.zj;A=l*z+m*n+q*y;n=g*z+p*n+t*y;u=this.uk;z=this.vk;u=1/(u*u);y=1/(z*z);(z=A*A*u+n*n*y)?(B=Math.sqrt(1/z),z=A*B,B*=n,E=z*u,y*=B,u=1/Math.sqrt(E*E+y*y),E*=u,y*=u,A=(A-z)*E+(n-B)*y,0<A?(this.bk=A,this.Be=0,this.Ce=E,this.De=y,h=h*this.Be+l*this.Ce+g*this.De,k=k*this.Be+m*this.Ce+p*this.De,r=r*this.Be+q*this.Ce+t*this.De,this.Be=h,this.Ce=k,this.De=r,r=a*this.Be+b*this.Ce+e*this.De,q=x*this.Be+d*this.Ce+c*this.De,t=D*this.Be+f*this.Ce+F*this.De,this.Be=r,this.Ce=q,this.De=t):this.bk=0):this.bk=this.De=this.Ce=this.Be=0;this.$j=this.xf-this.uf;this.Xf=this.yf-this.vf;this.Yf=this.zf-this.wf},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Zg:function(){var a=new n;a.x=this.fb;a.y=this.gb;a.z=this.hb;return a},ah:function(){var a=new n;a.x=this.Ob;a.y=this.Pb;a.z=this.Qb;return a},$g:function(a){a.x=this.fb;a.y=this.gb;a.z=this.hb},bh:function(a){a.x=this.Ob;a.y=this.Pb;a.z=this.Qb},dh:function(){var a=new n;a.x=this.Ma;a.y=this.Na;a.z=this.Oa;return a},fh:function(){var a=new n;a.x=this.Sb;a.y=this.Tb;a.z=this.Ub;return a},eh:function(a){a.x=this.Ma;a.y=this.Na;a.z=this.Oa},gh:function(a){a.x=this.Sb;a.y=this.Tb;a.z=this.Ub},vo:function(){return this.wl},uo:function(){return this.vl},mo:function(){return this.ql},ko:function(){var a=new n;a.x=this.Be;a.y=this.Ce;a.z=this.De;return a},lo:function(a){a.x=this.Be;a.y=this.Ce;a.z=this.De},jo:function(){return this.zj},to:function(){return this.Hj}});Jg.wa=Gb;Jg.prototype=gb(Gb.prototype,{Aa:function(a,b,e,d,c){this.Mg(a,b,e);e=this.localTwistAxis1;var f,h,l;f=d.x;h=d.y;l=d.z;var g,k;g=a.a.o*f+a.a.i*h+a.a.l*l;k=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;e.x=g;e.y=k;e.z=f;e=this.localTwistAxis2;g=d.x;k=d.y;h=d.z;d=b.a.o*g+b.a.i*k+b.a.l*h;f=b.a.f*g+b.a.m*k+b.a.g*h;b=b.a.h*g+b.a.j*k+b.a.s*h;e.x=d;e.y=f;e.z=b;b=this.localSwingAxis1;d=c.x;e=c.y;k=c.z;c=a.a.o*d+a.a.i*e+a.a.l*k;g=a.a.f*d+a.a.m*e+a.a.g*k;a=a.a.h*d+a.a.j*e+a.a.s*k;b.x=c;b.y=g;b.z=a;return this}});Qb.wa=N;Qb.prototype=gb(N.prototype,{ud:function(a,b,e){var d=this.Mh(b,e),c,f,h;c=this.$j*d;f=this.Xf*d;h=this.Yf*d;var l=this.Re*d,d=this.Se*d,g,k,m,p,r,q,t,A,n,u,z,x;g=-this.cc;k=this.bc;m=this.cc;p=-this.ac;r=-this.bc;q=this.ac;t=-this.fc;A=this.ec;n=this.fc;u=-this.dc;z=-this.ec;x=this.dc;var D=this.Yg(this.N.pc,this.N.qc,this.N.rc),F=this.Eb[0],y=a.rows[a.Da++],B=y.va;B.sa=0;B.ta=0;B.ua=0;B.xa=0;B.ya=0;B.za=0;B.aa=0;B.ba=0;B.ca=0;B.da=0;B.ea=0;B.fa=0;y.Fa=0;y.Ka=0;y.Ha=0;y.Ga=0;y.motorSpeed=0;y.tb=0;y.qa=F;y.Fa=c;y.Ka=0;y.Ha=-Infinity;y.Ga=Infinity;c=y.va;c.sa=1;c.ta=0;c.ua=0;c.xa=1;c.ya=0;c.za=0;c.aa=-0;c.ba=-g;c.ca=-k;c.da=-0;c.ea=-t;c.fa=-A;c=this.Eb[1];g=a.rows[a.Da++];k=g.va;k.sa=0;k.ta=0;k.ua=0;k.xa=0;k.ya=0;k.za=0;k.aa=0;k.ba=0;k.ca=0;k.da=0;k.ea=0;k.fa=0;g.Fa=0;g.Ka=0;g.Ha=0;g.Ga=0;g.motorSpeed=0;g.tb=0;g.qa=c;g.Fa=f;g.Ka=0;g.Ha=-Infinity;g.Ga=Infinity;c=g.va;c.sa=0;c.ta=1;c.ua=0;c.xa=0;c.ya=1;c.za=0;c.aa=-m;c.ba=-0;c.ca=-p;c.da=-n;c.ea=-0;c.fa=-u;f=this.Eb[2];m=a.rows[a.Da++];p=m.va;p.sa=0;p.ta=0;p.ua=0;p.xa=0;p.ya=0;p.za=0;p.aa=0;p.ba=0;p.ca=0;p.da=0;p.ea=0;p.fa=0;m.Fa=0;m.Ka=0;m.Ha=0;m.Ga=0;m.motorSpeed=0;m.tb=0;m.qa=f;m.Fa=h;m.Ka=0;m.Ha=-Infinity;m.Ga=Infinity;c=m.va;c.sa=0;c.ta=0;c.ua=1;c.xa=0;c.ya=0;c.za=1;c.aa=-r;c.ba=-q;c.ca=-0;c.da=-z;c.ea=-x;c.fa=-0;if(0>=this.Pe.frequency||!e)h=this.Eb[3],r=a.rows[a.Da++],q=r.va,q.sa=0,q.ta=0,q.ua=0,q.xa=0,q.ya=0,q.za=0,q.aa=0,q.ba=0,q.ca=0,q.da=0,q.ea=0,q.fa=0,r.Fa=0,r.Ka=0,r.Ha=0,r.Ga=0,r.motorSpeed=0,r.tb=0,r.qa=h,this.nh(r,this.angle,this.fi,D,this.Pe,b,e),c=r.va,c.aa=this.N.pc,c.ba=this.N.qc,c.ca=this.N.rc,c.da=this.N.pc,c.ea=this.N.qc,c.fa=this.N.rc;b=this.Eb[4];e=a.rows[a.Da++];D=e.va;D.sa=0;D.ta=0;D.ua=0;D.xa=0;D.ya=0;D.za=0;D.aa=0;D.ba=0;D.ca=0;D.da=0;D.ea=0;D.fa=0;e.Fa=0;e.Ka=0;e.Ha=0;e.Ga=0;e.motorSpeed=0;e.tb=0;e.qa=b;e.Fa=l;e.Ka=0;e.Ha=-Infinity;e.Ga=Infinity;c=e.va;c.aa=this.N.yc;c.ba=this.N.zc;c.ca=this.N.Ac;c.da=this.N.yc;c.ea=this.N.zc;c.fa=this.N.Ac;l=this.Eb[5];a=a.rows[a.Da++];b=a.va;b.sa=0;b.ta=0;b.ua=0;b.xa=0;b.ya=0;b.za=0;b.aa=0;b.ba=0;b.ca=0;b.da=0;b.ea=0;b.fa=0;a.Fa=0;a.Ka=0;a.Ha=0;a.Ga=0;a.motorSpeed=0;a.tb=0;a.qa=l;a.Fa=d;a.Ka=0;a.Ha=-Infinity;a.Ga=Infinity;c=a.va;c.aa=this.N.Lc;c.ba=this.N.Mc;c.ca=this.N.Nc;c.da=this.N.Lc;c.ea=this.N.Mc;c.fa=this.N.Nc},bd:function(){N.prototype.bd.call(this);var a=this.N,b=a.ga.C.qb,e=a.ga.D.qb,d,c,f,h,l,g,k,m,p,r,q,t,A,n,u,z,x,D,F,y,B,E,K,H,I,R,J,X,pa,Da,qa=a.ga.fb*a.ga.Ob+a.ga.gb*a.ga.Pb+a.ga.hb*a.ga.Qb;if(-.999999999>qa){var wa,ya,Ca,Ea=a.ga.fb,O=a.ga.gb,sa=a.ga.hb,ba=Ea*Ea,za=O*O,Ta=sa*sa,C;ba<za?ba<Ta?(C=1/Math.sqrt(za+Ta),wa=0,ya=sa*C,Ca=-O*C):(C=1/Math.sqrt(ba+za),wa=O*C,ya=-Ea*C,Ca=0):za<Ta?(C=1/Math.sqrt(Ta+ba),wa=-sa*C,ya=0,Ca=Ea*C):(C=1/Math.sqrt(ba+za),wa=O*C,ya=-Ea*C,Ca=0);d=wa;c=ya;f=Ca;h=0}else{var Aa,na,La;Aa=a.ga.gb*a.ga.Qb-a.ga.hb*a.ga.Pb;na=a.ga.hb*a.ga.Ob-a.ga.fb*a.ga.Qb;La=a.ga.fb*a.ga.Pb-a.ga.gb*a.ga.Ob;var Ba=Math.sqrt(.5*(1+qa)),qa=.5/Ba;Aa*=qa;na*=qa;La*=qa;d=Aa;c=na;f=La;h=Ba}var ta,S,ha,ea,da,M,T,w;ha=S=ta=0;ea=1;da=d;M=c;T=f;w=h;var V=ta*da+S*M+ha*T+ea*w;0>V&&(V=-V,da=-da,M=-M,T=-T,w=-w);if(.999999<V){var ia,Y,oa,ua;ia=da-ta;Y=M-S;oa=T-ha;ua=w-ea;da=ta+b/(b+e)*ia;M=S+b/(b+e)*Y;T=ha+b/(b+e)*oa;w=ea+b/(b+e)*ua;var ca=da*da+M*M+T*T+w*w;1E-32<ca&&(ca=1/Math.sqrt(ca));l=da*ca;g=M*ca;k=T*ca;m=w*ca}else{var Ma=b/(b+e)*Math.acos(V);da+=ta*-V;M+=S*-V;T+=ha*-V;w+=ea*-V;var va=da*da+M*M+T*T+w*w;1E-32<va&&(va=1/Math.sqrt(va));da*=va;M*=va;T*=va;w*=va;var Z=Math.sin(Ma),Pa=Math.cos(Ma);ta*=Pa;S*=Pa;ha*=Pa;ea*=Pa;l=ta+da*Z;g=S+M*Z;k=ha+T*Z;m=ea+w*Z}var Fa=l,Q=g,aa=k,fa=m,Ka=2*Fa,ja=2*Q,Ga=2*aa,P=Fa*Ka,Ya=Q*ja,Ua=aa*Ga,wb=Fa*ja,gb=Q*Ga,eb=Fa*Ga,Ab=fa*Ka,ib=fa*ja,hb=fa*Ga;p=1-Ya-Ua;r=wb-hb;q=eb+ib;t=wb+hb;A=1-P-Ua;n=gb-Ab;u=eb-ib;z=gb+Ab;x=1-P-Ya;var ka,Ia;ka=p*a.ga.fb+r*a.ga.gb+q*a.ga.hb;Ia=t*a.ga.fb+A*a.ga.gb+n*a.ga.hb;D=u*a.ga.fb+z*a.ga.gb+x*a.ga.hb;I=a.pc;R=a.qc;J=a.rc;X=a.yc;pa=a.zc;Da=a.Ac;var ab=I*ka+R*Ia+J*D;if(-.999999999>ab){var bb,Wa,Va,qb=I*I,kb=R*R,Sa=J*J,Na;qb<kb?qb<Sa?(Na=1/Math.sqrt(kb+Sa),bb=0,Wa=J*Na,Va=-R*Na):(Na=1/Math.sqrt(qb+kb),bb=R*Na,Wa=-I*Na,Va=0):kb<Sa?(Na=1/Math.sqrt(Sa+qb),bb=-J*Na,Wa=0,Va=I*Na):(Na=1/Math.sqrt(qb+kb),bb=R*Na,Wa=-I*Na,Va=0);l=bb;g=Wa;k=Va;m=0}else{var Za,vb,mb;Za=R*D-J*Ia;vb=J*ka-I*D;mb=I*Ia-R*ka;var xb=Math.sqrt(.5*(1+ab)),ab=.5/xb;Za*=ab;vb*=ab;mb*=ab;l=Za;g=vb;k=mb;m=xb}var nb=l,fb=g,pb=k,Db=m,G=2*nb,sb=2*fb,jb=2*pb,lb=nb*G,ob=fb*sb,cb=pb*jb,zb=nb*sb,Xa=fb*jb,tb=nb*jb,v=Db*G,W=Db*sb,U=Db*jb;p=1-ob-cb;r=zb-U;q=tb+W;t=zb+U;A=1-lb-cb;n=Xa-v;u=tb-W;z=Xa+v;x=1-lb-ob;var db,cc,Ra;db=p*X+r*pa+q*Da;cc=t*X+A*pa+n*Da;Ra=u*X+z*pa+x*Da;F=db;y=cc;B=Ra;E=Ia*B-D*y;K=D*F-ka*B;H=ka*y-Ia*F;if(1E-6<E*E+K*K+H*H){var Ha=E*E+K*K+H*H;0<Ha&&(Ha=1/Math.sqrt(Ha));E*=Ha;K*=Ha;H*=Ha}else{var rb=ka*ka,yb=Ia*Ia,Cb=D*D,la;rb<yb?rb<Cb?(la=1/Math.sqrt(yb+Cb),E=0,K=D*la,H=-Ia*la):(la=1/Math.sqrt(rb+yb),E=Ia*la,K=-ka*la,H=0):yb<Cb?(la=1/Math.sqrt(Cb+rb),E=-D*la,K=0,H=ka*la):(la=1/Math.sqrt(rb+yb),E=Ia*la,K=-ka*la,H=0)}F=K*D-H*Ia;y=H*ka-E*D;B=E*Ia-K*ka;a.pc=ka;a.qc=Ia;a.rc=D;a.yc=F;a.zc=y;a.Ac=B;a.Lc=E;a.Mc=K;a.Nc=H;var ra,ga,ma;ra=this.gb*this.Qb-this.hb*this.Pb;ga=this.hb*this.Ob-this.fb*this.Qb;ma=this.fb*this.Pb-this.gb*this.Ob;var Ja=this.fb*this.Ob+this.gb*this.Pb+this.hb*this.Qb,$a=-1>=Ja?3.14159265358979:1<=Ja?0:Math.acos(Ja),Oa=ra*ra+ga*ga+ma*ma;0<Oa&&(Oa=1/Math.sqrt(Oa));ra*=Oa;ga*=Oa;ma*=Oa;ra*=$a;ga*=$a;ma*=$a;this.Re=ra*this.N.yc+ga*this.N.zc+ma*this.N.Ac;this.Se=ra*this.N.Lc+ga*this.N.Mc+ma*this.N.Nc;var Qa,xa,ub;Qa=this.Yc*this.ue-this.Zc*this.te;xa=this.Zc*this.se-this.Xc*this.ue;ub=this.Xc*this.te-this.Yc*this.se;Ja=this.Xc*this.se+this.Yc*this.te+this.Zc*this.ue;this.angle=-1>=Ja?3.14159265358979:1<=Ja?0:Math.acos(Ja);0>Qa*this.N.pc+xa*this.N.qc+ub*this.N.rc&&(this.angle=-this.angle);this.$j=this.xf-this.uf;this.Xf=this.yf-this.vf;this.Yf=this.zf-this.wf},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Zg:function(){var a=new n;a.x=this.fb;a.y=this.gb;a.z=this.hb;return a},ah:function(){var a=new n;a.x=this.Ob;a.y=this.Pb;a.z=this.Qb;return a},$g:function(a){a.x=this.fb;a.y=this.gb;a.z=this.hb},bh:function(a){a.x=this.Ob;a.y=this.Pb;a.z=this.Qb},dh:function(){var a=new n;a.x=this.Ma;a.y=this.Na;a.z=this.Oa;return a},fh:function(){var a=new n;a.x=this.Sb;a.y=this.Tb;a.z=this.Ub;return a},eh:function(a){a.x=this.Ma;a.y=this.Na;a.z=this.Oa},gh:function(a){a.x=this.Sb;a.y=this.Tb;a.z=this.Ub},Qj:function(){return this.Pe},Il:function(){return this.fi},Gl:function(){return this.angle}});ff.wa=Gb;ff.prototype=gb(Gb.prototype,{Aa:function(a,b,e,d){this.Mg(a,b,e);e=this.localAxis1;var c,f,h;c=d.x;f=d.y;h=d.z;var l,g;l=a.a.o*c+a.a.i*f+a.a.l*h;g=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;e.x=l;e.y=g;e.z=a;a=this.localAxis2;e=d.x;l=d.y;c=d.z;d=b.a.o*e+b.a.i*l+b.a.l*c;g=b.a.f*e+b.a.m*l+b.a.g*c;b=b.a.h*e+b.a.j*l+b.a.s*c;a.x=d;a.y=g;a.z=b;return this}});$b.prototype={mh:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},wa:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new $b;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a}};se.wa=N;se.prototype=gb(N.prototype,{ud:function(a,b,e){if(!(0<this.Pe.frequency&&e)){var d,c,f;d=this.xf-this.uf;c=this.yf-this.vf;f=this.zf-this.wf;var h;if(0<this.Pe.frequency){h=6.28318530717958*this.Pe.frequency;e=this.Pe.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.Pe.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.qb+this.D.qb}else h=0,b=this.Mh(b,e);var g,k,m,p,r,q,t,A,n,u;g=-this.cc;k=this.bc;m=this.cc;p=-this.ac;e=-this.bc;l=this.ac;r=-this.fc;q=this.ec;t=this.fc;A=-this.dc;n=-this.ec;u=this.dc;var z=this.Eb[0],x=a.rows[a.Da++],D=x.va;D.sa=0;D.ta=0;D.ua=0;D.xa=0;D.ya=0;D.za=0;D.aa=0;D.ba=0;D.ca=0;D.da=0;D.ea=0;D.fa=0;x.Fa=0;x.Ka=0;x.Ha=0;x.Ga=0;x.motorSpeed=0;x.tb=0;x.qa=z;x.Fa=d*b;x.Ka=h;x.Ha=-Infinity;x.Ga=Infinity;d=x.va;d.sa=1;d.ta=0;d.ua=0;d.xa=1;d.ya=0;d.za=0;d.aa=-0;d.ba=-g;d.ca=-k;d.da=-0;d.ea=-r;d.fa=-q;d=this.Eb[1];g=a.rows[a.Da++];k=g.va;k.sa=0;k.ta=0;k.ua=0;k.xa=0;k.ya=0;k.za=0;k.aa=0;k.ba=0;k.ca=0;k.da=0;k.ea=0;k.fa=0;g.Fa=0;g.Ka=0;g.Ha=0;g.Ga=0;g.motorSpeed=0;g.tb=0;g.qa=d;g.Fa=c*b;g.Ka=h;g.Ha=-Infinity;g.Ga=Infinity;d=g.va;d.sa=0;d.ta=1;d.ua=0;d.xa=0;d.ya=1;d.za=0;d.aa=-m;d.ba=-0;d.ca=-p;d.da=-t;d.ea=-0;d.fa=-A;c=this.Eb[2];a=a.rows[a.Da++];d=a.va;d.sa=0;d.ta=0;d.ua=0;d.xa=0;d.ya=0;d.za=0;d.aa=0;d.ba=0;d.ca=0;d.da=0;d.ea=0;d.fa=0;a.Fa=0;a.Ka=0;a.Ha=0;a.Ga=0;a.motorSpeed=0;a.tb=0;a.qa=c;a.Fa=f*b;a.Ka=h;a.Ha=-Infinity;a.Ga=Infinity;d=a.va;d.sa=0;d.ta=0;d.ua=1;d.xa=0;d.ya=0;d.za=1;d.aa=-e;d.ba=-l;d.ca=-0;d.da=-n;d.ea=-u;d.fa=-0}},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Qj:function(){return this.Pe}});Lf.wa=Gb;Lf.prototype=gb(Gb.prototype,{Aa:function(a,b,e){this.Mg(a,b,e);return this}});Hb.prototype={wa:function(a,b){this.frequency=a;this.dampingRatio=b;return this},mb:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Hb;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a}};tc.prototype={mh:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},wa:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new tc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a}};Bb.wa=N;Bb.prototype=gb(N.prototype,{ud:function(a,b,e){var d=this.Mh(b,e),c,f,h;c=this.$j*d;f=this.Xf*d;h=this.Yf*d;var l=this.qh*d,g,k,m,p,r,q,t,A,n,u,z,x;g=-this.cc;k=this.bc;m=this.cc;p=-this.ac;r=-this.bc;q=this.ac;t=-this.fc;A=this.ec;n=this.fc;u=-this.dc;z=-this.ec;x=this.dc;var D=this.Yg(this.wd,this.xd,this.yd),d=this.Yg(this.zd,this.Ad,this.Bd),F=this.Eb[0],y=a.rows[a.Da++],B=y.va;B.sa=0;B.ta=0;B.ua=0;B.xa=0;B.ya=0;B.za=0;B.aa=0;B.ba=0;B.ca=0;B.da=0;B.ea=0;B.fa=0;y.Fa=0;y.Ka=0;y.Ha=0;y.Ga=0;y.motorSpeed=0;y.tb=0;y.qa=F;y.Fa=c;y.Ka=0;y.Ha=-Infinity;y.Ga=Infinity;c=y.va;c.sa=1;c.ta=0;c.ua=0;c.xa=1;c.ya=0;c.za=0;c.aa=-0;c.ba=-g;c.ca=-k;c.da=-0;c.ea=-t;c.fa=-A;c=this.Eb[1];g=a.rows[a.Da++];k=g.va;k.sa=0;k.ta=0;k.ua=0;k.xa=0;k.ya=0;k.za=0;k.aa=0;k.ba=0;k.ca=0;k.da=0;k.ea=0;k.fa=0;g.Fa=0;g.Ka=0;g.Ha=0;g.Ga=0;g.motorSpeed=0;g.tb=0;g.qa=c;g.Fa=f;g.Ka=0;g.Ha=-Infinity;g.Ga=Infinity;c=g.va;c.sa=0;c.ta=1;c.ua=0;c.xa=0;c.ya=1;c.za=0;c.aa=-m;c.ba=-0;c.ca=-p;c.da=-n;c.ea=-0;c.fa=-u;f=this.Eb[2];m=a.rows[a.Da++];p=m.va;p.sa=0;p.ta=0;p.ua=0;p.xa=0;p.ya=0;p.za=0;p.aa=0;p.ba=0;p.ca=0;p.da=0;p.ea=0;p.fa=0;m.Fa=0;m.Ka=0;m.Ha=0;m.Ga=0;m.motorSpeed=0;m.tb=0;m.qa=f;m.Fa=h;m.Ka=0;m.Ha=-Infinity;m.Ga=Infinity;c=m.va;c.sa=0;c.ta=0;c.ua=1;c.xa=0;c.ya=0;c.za=1;c.aa=-r;c.ba=-q;c.ca=-0;c.da=-z;c.ea=-x;c.fa=-0;this.dk||!(0>=this.ol.frequency)&&e||(h=this.Eb[3],r=a.rows[a.Da++],q=r.va,q.sa=0,q.ta=0,q.ua=0,q.xa=0,q.ya=0,q.za=0,q.aa=0,q.ba=0,q.ca=0,q.da=0,q.ea=0,q.fa=0,r.Fa=0,r.Ka=0,r.Ha=0,r.Ga=0,r.motorSpeed=0,r.tb=0,r.qa=h,this.nh(r,this.Af,this.hl,D,this.ol,b,e),c=r.va,c.aa=this.wd,c.ba=this.xd,c.ca=this.yd,c.da=this.wd,c.ea=this.xd,c.fa=this.yd);this.ek||(D=this.Eb[4],h=a.rows[a.Da++],r=h.va,r.sa=0,r.ta=0,r.ua=0,r.xa=0,r.ya=0,r.za=0,r.aa=0,r.ba=0,r.ca=0,r.da=0,r.ea=0,r.fa=0,h.Fa=0,h.Ka=0,h.Ha=0,h.Ga=0,h.motorSpeed=0,h.tb=0,h.qa=D,h.Fa=l,h.Ka=0,h.Ha=-Infinity,h.Ga=Infinity,c=h.va,c.aa=this.kd,c.ba=this.ld,c.ca=this.md,c.da=this.kd,c.ea=this.ld,c.fa=this.md);this.fk||!(0>=this.pl.frequency)&&e||(l=this.Eb[5],a=a.rows[a.Da++],D=a.va,D.sa=0,D.ta=0,D.ua=0,D.xa=0,D.ya=0,D.za=0,D.aa=0,D.ba=0,D.ca=0,D.da=0,D.ea=0,D.fa=0,a.Fa=0,a.Ka=0,a.Ha=0,a.Ga=0,a.motorSpeed=0,a.tb=0,a.qa=l,this.nh(a,this.Bf,this.il,d,this.pl,b,e),c=a.va,c.aa=this.zd,c.ba=this.Ad,c.ca=this.Bd,c.da=this.zd,c.ea=this.Ad,c.fa=this.Bd)},bd:function(){N.prototype.bd.call(this);var a,b,e,d,c,f,h,l,g;a=this.fb;b=this.gb;e=this.hb;h=this.Cf;l=this.Df;g=this.Ef;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.wd=c*g-f*l;this.xd=f*h-d*g;this.yd=d*l-c*h;this.kd=d;this.ld=c;this.md=f;this.zd=b*f-e*c;this.Ad=e*d-a*f;this.Bd=a*c-b*d;a=this.wd*this.wd+this.xd*this.xd+this.yd*this.yd;0<a&&(a=1/Math.sqrt(a));this.wd*=a;this.xd*=a;this.yd*=a;a=this.kd*this.kd+this.ld*this.ld+this.md*this.md;0<a&&(a=1/Math.sqrt(a));this.kd*=a;this.ld*=a;this.md*=a;a=this.zd*this.zd+this.Ad*this.Ad+this.Bd*this.Bd;0<a&&(a=1/Math.sqrt(a));this.zd*=a;this.Ad*=a;this.Bd*=a;this.dk=!(this.wd*this.wd+this.xd*this.xd+this.yd*this.yd);this.ek=!(this.kd*this.kd+this.ld*this.ld+this.md*this.md);this.fk=!(this.zd*this.zd+this.Ad*this.Ad+this.Bd*this.Bd);var k,m,p,r,q,t,A,n,u;a=this.fb;k=this.Xc;m=this.ve;b=this.gb;p=this.Yc;r=this.we;e=this.hb;q=this.Zc;t=this.xe;d=this.Ob;c=this.se;A=this.Cf;f=this.Pb;h=this.te;n=this.Df;l=this.Qb;g=this.ue;u=this.Ef;var z,x,D;z=a*A+b*n+e*u;x=k*c+p*h+q*g;D=m*c+r*h+t*g;-1>=z?(a=Math.atan2(D,x),k=.5*a,z=-1.570796326794895,a=.5*-a):1<=z?(a=Math.atan2(D,x),k=.5*a,z=1.570796326794895,a*=.5):(k=Math.atan2(-(k*A+p*n+q*u),m*A+r*n+t*u),z=Math.asin(z),a=Math.atan2(-(a*c+b*h+e*g),a*d+b*f+e*l));this.Af=k;this.qh=z;this.Bf=a;this.$j=this.xf-this.uf;this.Xf=this.yf-this.vf;this.Yf=this.zf-this.wf},Sd:function(a,b){N.prototype.Sd.call(this,a,b);this.ud(b,a,!1)},$c:function(a){N.prototype.$c.call(this,a);this.ud(a,null,!0)},Zg:function(){var a=new n;a.x=this.fb;a.y=this.gb;a.z=this.hb;return a},ah:function(){var a=new n;a.x=this.Cf;a.y=this.Df;a.z=this.Ef;return a},$g:function(a){a.x=this.fb;a.y=this.gb;a.z=this.hb},bh:function(a){a.x=this.Cf;a.y=this.Df;a.z=this.Ef},dh:function(){var a=new n;a.x=this.Ma;a.y=this.Na;a.z=this.Oa;return a},fh:function(){var a=new n;a.x=this.nd;a.y=this.od;a.z=this.pd;return a},eh:function(a){a.x=this.Ma;a.y=this.Na;a.z=this.Oa},gh:function(a){a.x=this.nd;a.y=this.od;a.z=this.pd},ho:function(){return this.ol},io:function(){return this.pl},$n:function(){return this.hl},ao:function(){return this.il},Rn:function(){return this.Af},Sn:function(){return this.Bf}});Kf.wa=Gb;Kf.prototype=gb(Gb.prototype,{Aa:function(a,b,e,d,c){this.Mg(a,b,e);e=this.localAxis1;var f,h,l;f=d.x;h=d.y;l=d.z;var g;d=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;e.x=d;e.y=g;e.z=a;a=this.localAxis2;e=c.x;f=c.y;d=c.z;c=b.a.o*e+b.a.i*f+b.a.l*d;h=b.a.f*e+b.a.m*f+b.a.g*d;b=b.a.h*e+b.a.j*f+b.a.s*d;a.x=c;a.y=h;a.z=b;return this}});tj.prototype={Aa:function(a){this.ed=a.ed;for(var b=0,e=this.ed;b<e;){var d=b++;this.Nh[d]=a.Nh[d];this.Sh[d]=a.Sh[d]}this.Ae=a.Ae;b=0;for(e=this.Ae;b<e;)d=b++,this.hh[d]=a.hh[d]},Cl:function(a,b,e,d,c,f,h){for(var l=0,g=this.Ae;l<g;){var k=this.hh[l++],m=a.rows[k];this.zl[k]=m.Fa*f-e[k]-m.Ka*d[k]}l=b.rj;g=0;for(k=this.ed;g<k;){var p=g++,m=this.Nh[p],p=this.Sh[p],r=a.rows[m],p=(0>p?r.Ha:0<p?r.Ga:0)-d[m];if(c[m]=p)for(var r=0,q=this.Ae;r<q;){var t=this.hh[r++],A=this.zl;A[t]-=l[m][t]*p}}g=this.hh;k=this.Ae;for(p=m=0;p<k;)m|=1<<g[p++];b.jk[m]||(b.Mn(m,g,k),b.jk[m]=!0);g=b.Uk[m];b=!0;k=0;for(m=this.Ae;k<m;){for(var p=k++,r=this.hh[p],q=a.rows[r],A=t=d[r],n=0,u=this.Ae;n<u;)var z=n++,A=A+this.zl[this.hh[z]]*g[p][z];if(A<q.Ha-F.directMlcpSolverEps||A>q.Ga+F.directMlcpSolverEps){b=!1;break}c[r]=A-t}if(h)return!0;if(!b)return!1;h=0;for(g=this.ed;h<g;){p=h++;k=this.Nh[p];m=a.rows[k];p=this.Sh[p];r=d[k]+c[k];q=e[k];t=0;for(A=a.Da;t<A;)n=t++,q+=l[k][n]*c[n];k=m.Fa*f-q-m.Ka*r;if(0>p&&k>F.directMlcpSolverEps||0<p&&k<-F.directMlcpSolverEps){b=!1;break}}return b}};sj.prototype={mi:function(a,b){if(b==a.Da)null==this.li[this.sf]&&(this.li[this.sf]=new tj(this.zo)),this.li[this.sf++].Aa(this.lf);else{var e=a.rows[b],d=-Infinity<e.Ha,c=Infinity>e.Ga;0==e.Ha&&0==e.Ga?(c=this.lf,c.Nh[c.ed]=b,c.Sh[c.ed]=0,c.ed++,this.mi(a,b+1),this.lf.ed--):(e=this.lf,e.hh[e.Ae]=b,e.Ae++,this.mi(a,b+1),this.lf.Ae--,d&&(d=this.lf,d.Nh[d.ed]=b,d.Sh[d.ed]=-1,d.ed++,this.mi(a,b+1),this.lf.ed--),c&&(c=this.lf,c.Nh[c.ed]=b,c.Sh[c.ed]=1,c.ed++,this.mi(a,b+1),this.lf.ed--))}}};Mi.prototype={};Wb.wa=Ob;Wb.prototype=gb(Ob.prototype,{Qh:function(a){this.ga.bd();this.ga.Sd(a,this.info);this.C=this.info.Ye;this.D=this.info.Ze;this.yi.Dl(this.info,this.Wb);a=this.$e;a.sf=0;var b=a.lf;b.ed=0;b.Ae=0;a.mi(this.info,0);a=this.em;for(var b=this.$e.sf,e=0,d=0,c=0,f=a.n;c<f;){var h=a.nc[c++];h<b?(a.tf[e]=h,++e):(a.tf[b+d]=h,++d)}b=a.nc;a.nc=a.tf;a.tf=b},Zh:function(a){var b=this.ga.Sg==jc.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Da;b<a;){var e=this.info.rows[b++].qa;e.qa=0;e.Dd=0;e.vb=0}else{a=0;for(e=this.info.Da;a<e;){var d=a++,c=this.info.rows[d],f=c.qa,h=f.qa*b;h<c.Ha?h=c.Ha:h>c.Ga&&(h=c.Ga);f.qa=h;0<c.tb?(h=f.Dd*b,c=c.tb,h<-c?h=-c:h>c&&(h=c),f.Dd=h):f.Dd=0;this.Wf[d]=f.qa+f.Dd}var b=this.Wf,e=a=!1,l,g,k,m,p,r,q,t,d=this.C.jb,f=this.C.kb,c=this.C.lb,h=this.D.jb;l=this.D.kb;g=this.D.lb;k=this.C.nb;m=this.C.ob;p=this.C.pb;r=this.D.nb;q=this.D.ob;t=this.D.pb;for(var A=0,n=this.info.Da;A<n;){var u=A++,z=this.info.rows[u].va,x=this.Wb[u],u=b[u];z.Cc&1&&(d+=x.Kd*u,f+=x.Ld*u,c+=x.Md*u,h+=x.Nd*-u,l+=x.Od*-u,g+=x.Pd*-u,a=!0);z.Cc&2&&(k+=x.Ed*u,m+=x.Fd*u,p+=x.Gd*u,r+=x.Hd*-u,q+=x.Id*-u,t+=x.Jd*-u,e=!0)}a&&(this.C.jb=d,this.C.kb=f,this.C.lb=c,this.D.jb=h,this.D.kb=l,this.D.lb=g);e&&(this.C.nb=k,this.C.ob=m,this.C.pb=p,this.D.nb=r,this.D.ob=q,this.D.pb=t)}},Vh:function(){var a=this.info.Da,b,e,d,c,f,h,l,g,k,m,p,r;b=this.C.jb;e=this.C.kb;d=this.C.lb;c=this.D.jb;f=this.D.kb;h=this.D.lb;l=this.C.nb;g=this.C.ob;k=this.C.pb;m=this.D.nb;p=this.D.ob;r=this.D.pb;for(var q=0;q<a;){var t=q++,A=this.info.rows[t],n=A.va,u=0,u=u+(b*n.sa+e*n.ta+d*n.ua),u=u-(c*n.xa+f*n.ya+h*n.za),u=u+(l*n.aa+g*n.ba+k*n.ca),u=u-(m*n.da+p*n.ea+r*n.fa);this.kh[t]=u;this.ri[t]=A.qa.qa;this.Oj[t]=0}b=this.yi.rj;for(e=0;e<a;)if(d=e++,l=this.info.rows[d],c=l.qa,0<l.tb)for(f=c.Dd,h=f+this.Wb[d].Zf*(-l.motorSpeed-this.kh[d]),l=l.tb,h<-l?h=-l:h>l&&(h=l),c.Dd=h,c=h-f,this.Oj[d]=c,f=0;f<a;)h=f++,l=this.kh,l[h]+=c*b[d][h];e=!1;d=0;for(c=this.$e.sf;d<c;)if(b=this.em.nc[d++],this.$e.li[b].Cl(this.info,this.yi,this.kh,this.ri,this.Wf,1,!1)){for(e=0;e<a;)d=e++,c=this.Wf[d],this.info.rows[d].qa.qa+=c,f=this.Oj,f[d]+=c;a=this.Oj;d=e=!1;c=this.C.jb;f=this.C.kb;h=this.C.lb;l=this.D.jb;g=this.D.kb;k=this.D.lb;m=this.C.nb;p=this.C.ob;r=this.C.pb;q=this.D.nb;t=this.D.ob;A=this.D.pb;n=0;for(u=this.info.Da;n<u;){var z=n++,x=this.info.rows[z].va,D=this.Wb[z],z=a[z];x.Cc&1&&(c+=D.Kd*z,f+=D.Ld*z,h+=D.Md*z,l+=D.Nd*-z,g+=D.Od*-z,k+=D.Pd*-z,e=!0);x.Cc&2&&(m+=D.Ed*z,p+=D.Fd*z,r+=D.Gd*z,q+=D.Hd*-z,t+=D.Id*-z,A+=D.Jd*-z,d=!0)}e&&(this.C.jb=c,this.C.kb=f,this.C.lb=h,this.D.jb=l,this.D.kb=g,this.D.lb=k);d&&(this.C.nb=m,this.C.ob=p,this.C.pb=r,this.D.nb=q,this.D.ob=t,this.D.pb=A);a=this.em;for(e=0;a.nc[e]!=b;)++e;for(;0<e;)b=a.nc[e],a.nc[e]=a.nc[e-1],a.nc[e-1]=b,--e;e=!0;break}e||console.log("src/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx:335:","could not find solution. (velocity)")},cj:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Da;l<g;){var k=this.info.rows[l++],m=k.qa,k=k.va;k.Cc&1?(b+=k.sa*m.qa,e+=k.ta*m.qa,d+=k.ua*m.qa):k.Cc&2&&(c+=k.aa*m.qa,f+=k.ba*m.qa,h+=k.ca*m.qa)}this.ga.ej=b*a.invDt;this.ga.fj=e*a.invDt;this.ga.gj=d*a.invDt;this.ga.hj=c*a.invDt;this.ga.ij=f*a.invDt;this.ga.jj=h*a.invDt},jh:function(){this.ga.bd();this.ga.$c(this.info);this.C=this.info.Ye;this.D=this.info.Ze;this.yi.Dl(this.info,this.Wb);var a=this.$e;a.sf=0;var b=a.lf;b.ed=0;b.Ae=0;a.mi(this.info,0);for(var a=this.bj,b=this.$e.sf,e=0,d=0,c=0,f=a.n;c<f;){var h=a.nc[c++];h<b?(a.tf[e]=h,++e):(a.tf[b+d]=h,++d)}b=a.nc;a.nc=a.tf;a.tf=b;a=0;for(b=this.info.Da;a<b;)this.info.rows[a++].qa.vb=0},Uh:function(){var a=this.info.Da,b,e,d,c,f,h,l,g,k,m,p,r;b=this.C.rd;e=this.C.sd;d=this.C.td;c=this.D.rd;f=this.D.sd;h=this.D.td;l=this.C.gd;g=this.C.hd;k=this.C.jd;m=this.D.gd;p=this.D.hd;r=this.D.jd;for(var q=0;q<a;){var t=q++,A=this.info.rows[t],n=A.va,u=0,u=u+(b*n.sa+e*n.ta+d*n.ua),u=u-(c*n.xa+f*n.ya+h*n.za),u=u+(l*n.aa+g*n.ba+k*n.ca),u=u-(m*n.da+p*n.ea+r*n.fa);this.kh[t]=u;this.ri[t]=A.qa.vb}e=!1;d=0;for(c=this.$e.sf;d<c;)if(b=this.bj.nc[d++],this.$e.li[b].Cl(this.info,this.yi,this.kh,this.ri,this.Wf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)d=e++,this.info.rows[d].qa.vb+=this.Wf[d];a=this.Wf;d=e=!1;c=this.C.rd;f=this.C.sd;h=this.C.td;l=this.D.rd;g=this.D.sd;k=this.D.td;m=this.C.gd;p=this.C.hd;r=this.C.jd;q=this.D.gd;t=this.D.hd;A=this.D.jd;n=0;for(u=this.info.Da;n<u;){var z=n++,x=this.info.rows[z].va,D=this.Wb[z],z=a[z];x.Cc&1&&(c+=D.Kd*z,f+=D.Ld*z,h+=D.Md*z,l+=D.Nd*-z,g+=D.Od*-z,k+=D.Pd*-z,e=!0);x.Cc&2&&(m+=D.Ed*z,p+=D.Fd*z,r+=D.Gd*z,q+=D.Hd*-z,t+=D.Id*-z,A+=D.Jd*-z,d=!0)}e&&(this.C.rd=c,this.C.sd=f,this.C.td=h,this.D.rd=l,this.D.sd=g,this.D.td=k);d&&(this.C.gd=m,this.C.hd=p,this.C.jd=r,this.D.gd=q,this.D.hd=t,this.D.jd=A);a=this.bj;for(e=0;a.nc[e]!=b;)++e;for(;0<e;)b=a.nc[e],a.nc[e]=a.nc[e-1],a.nc[e-1]=b,--e;e=!0;break}e||console.log("src/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx:450:","could not find solution. (split impulse)")},Th:function(){this.ga.bd();this.ga.$c(this.info);this.C=this.info.Ye;this.D=this.info.Ze;this.yi.Dl(this.info,this.Wb);var a=this.$e;a.sf=0;var b=a.lf;b.ed=0;b.Ae=0;a.mi(this.info,0);for(var e=this.bj,d=this.$e.sf,c=0,f=0,h=0,l=e.n;h<l;){var g=e.nc[h++];g<d?(e.tf[c]=g,++c):(e.tf[d+f]=g,++f)}var k=e.nc;e.nc=e.tf;e.tf=k;for(var m=this.info.Da,p=0;p<m;){var r=p++,q=this.info.rows[r].qa;this.kh[r]=0;this.ri[r]=q.vb}for(var t=!1,A=0,n=this.$e.sf;A<n;){var u=this.bj.nc[A++];if(this.$e.li[u].Cl(this.info,this.yi,this.kh,this.ri,this.Wf,F.positionNgsBaumgarte,!1)){for(var z=0;z<m;){var x=z++;this.info.rows[x].qa.vb+=this.Wf[x]}for(var D=this.Wf,I=!1,y=!1,B,E,K,H,J,R,N,X,pa,Da,qa,wa,ya=wa=qa=Da=pa=X=N=R=J=H=K=E=B=0,Ca=this.info.Da;ya<Ca;){var Ea=ya++,O=this.info.rows[Ea].va,sa=this.Wb[Ea],ba=D[Ea];O.Cc&1&&(B+=sa.Kd*ba,E+=sa.Ld*ba,K+=sa.Md*ba,H+=sa.Nd*-ba,J+=sa.Od*-ba,R+=sa.Pd*-ba,I=!0);O.Cc&2&&(N+=sa.Ed*ba,X+=sa.Fd*ba,pa+=sa.Gd*ba,Da+=sa.Hd*-ba,qa+=sa.Id*-ba,wa+=sa.Jd*-ba,y=!0)}if(I){var za=this.C;za.a.v+=B;za.a.A+=E;za.a.B+=K;var Ta=this.D;Ta.a.v+=H;Ta.a.A+=J;Ta.a.B+=R}if(y){var C=this.C,Aa=Math.sqrt(N*N+X*X+pa*pa),na=.5*Aa,La,Ba;if(.5>na){var ta=na*na;La=.5*(1-.16666666666666666*ta+ta*ta*.008333333333333333);Ba=1-.5*ta+ta*ta*.041666666666666664}else La=Math.sin(na)/Aa,Ba=Math.cos(na);var S,ha,ea;S=N*La;ha=X*La;ea=pa*La;var da,M,T,w;da=S;M=ha;T=ea;w=Ba;var V,ia,Y,oa,ua=C.a.o,ca=C.a.m,Ma=C.a.s,va=ua+ca+Ma,Z;0<va?(Z=Math.sqrt(va+1),oa=.5*Z,Z=.5/Z,V=(C.a.g-C.a.j)*Z,ia=(C.a.h-C.a.l)*Z,Y=(C.a.i-C.a.f)*Z):ua>ca?ua>Ma?(Z=Math.sqrt(ua-ca-Ma+1),V=.5*Z,Z=.5/Z,ia=(C.a.f+C.a.i)*Z,Y=(C.a.h+C.a.l)*Z,oa=(C.a.g-C.a.j)*Z):(Z=Math.sqrt(Ma-ua-ca+1),Y=.5*Z,Z=.5/Z,V=(C.a.h+C.a.l)*Z,ia=(C.a.j+C.a.g)*Z,oa=(C.a.i-C.a.f)*Z):ca>Ma?(Z=Math.sqrt(ca-Ma-ua+1),ia=.5*Z,Z=.5/Z,V=(C.a.f+C.a.i)*Z,Y=(C.a.j+C.a.g)*Z,oa=(C.a.h-C.a.l)*Z):(Z=Math.sqrt(Ma-ua-ca+1),Y=.5*Z,Z=.5/Z,V=(C.a.h+C.a.l)*Z,ia=(C.a.j+C.a.g)*Z,oa=(C.a.i-C.a.f)*Z);V=w*V+da*oa+M*Y-T*ia;ia=w*ia-da*Y+M*oa+T*V;Y=w*Y+da*ia-M*V+T*oa;oa=w*oa-da*V-M*ia-T*Y;var Pa=V*V+ia*ia+Y*Y+oa*oa;1E-32<Pa&&(Pa=1/Math.sqrt(Pa));V*=Pa;ia*=Pa;Y*=Pa;oa*=Pa;var Fa=V,Q=ia,aa=Y,fa=oa,Ka=2*Fa,ja=2*Q,Ga=2*aa,P=Fa*Ka,Ya=Q*ja,Ua=aa*Ga,wb=Fa*ja,gb=Q*Ga,eb=Fa*Ga,Ab=fa*Ka,ib=fa*ja,hb=fa*Ga;C.a.o=1-Ya-Ua;C.a.f=wb-hb;C.a.h=eb+ib;C.a.i=wb+hb;C.a.m=1-P-Ua;C.a.j=gb-Ab;C.a.l=eb-ib;C.a.g=gb+Ab;C.a.s=1-P-Ya;var ka,Ia,ab,bb,Wa,Va,qb,kb,Sa;ka=C.a.o*C.Sa+C.a.f*C.Va+C.a.h*C.Ya;Ia=C.a.o*C.Ta+C.a.f*C.Wa+C.a.h*C.Za;ab=C.a.o*C.Ua+C.a.f*C.Xa+C.a.h*C.$a;bb=C.a.i*C.Sa+C.a.m*C.Va+C.a.j*C.Ya;Wa=C.a.i*C.Ta+C.a.m*C.Wa+C.a.j*C.Za;Va=C.a.i*C.Ua+C.a.m*C.Xa+C.a.j*C.$a;qb=C.a.l*C.Sa+C.a.g*C.Va+C.a.s*C.Ya;kb=C.a.l*C.Ta+C.a.g*C.Wa+C.a.s*C.Za;Sa=C.a.l*C.Ua+C.a.g*C.Xa+C.a.s*C.$a;C.S=ka;C.T=Ia;C.U=ab;C.V=bb;C.W=Wa;C.X=Va;C.Y=qb;C.Z=kb;C.$=Sa;var Na,Za,vb,mb,xb,nb,fb,pb,Db;Na=C.S*C.a.o+C.T*C.a.f+C.U*C.a.h;Za=C.S*C.a.i+C.T*C.a.m+C.U*C.a.j;vb=C.S*C.a.l+C.T*C.a.g+C.U*C.a.s;mb=C.V*C.a.o+C.W*C.a.f+C.X*C.a.h;xb=C.V*C.a.i+C.W*C.a.m+C.X*C.a.j;nb=C.V*C.a.l+C.W*C.a.g+C.X*C.a.s;fb=C.Y*C.a.o+C.Z*C.a.f+C.$*C.a.h;pb=C.Y*C.a.i+C.Z*C.a.m+C.$*C.a.j;Db=C.Y*C.a.l+C.Z*C.a.g+C.$*C.a.s;C.S=Na;C.T=Za;C.U=vb;C.V=mb;C.W=xb;C.X=nb;C.Y=fb;C.Z=pb;C.$=Db;C.S*=C.O.x;C.T*=C.O.x;C.U*=C.O.x;C.V*=C.O.y;C.W*=C.O.y;C.X*=C.O.y;C.Y*=C.O.z;C.Z*=C.O.z;C.$*=C.O.z;var G=this.D,sb=Math.sqrt(Da*Da+qa*qa+wa*wa),jb=.5*sb,lb,ob;if(.5>jb){var cb=jb*jb;lb=.5*(1-.16666666666666666*cb+cb*cb*.008333333333333333);ob=1-.5*cb+cb*cb*.041666666666666664}else lb=Math.sin(jb)/sb,ob=Math.cos(jb);var zb,Xa,tb;zb=Da*lb;Xa=qa*lb;tb=wa*lb;var v,W,U,db;v=zb;W=Xa;U=tb;db=ob;var Qa,Ra,Ha,rb,yb=G.a.o,Cb=G.a.m,la=G.a.s,ra=yb+Cb+la,ga;0<ra?(ga=Math.sqrt(ra+1),rb=.5*ga,ga=.5/ga,Qa=(G.a.g-G.a.j)*ga,Ra=(G.a.h-G.a.l)*ga,Ha=(G.a.i-G.a.f)*ga):yb>Cb?yb>la?(ga=Math.sqrt(yb-Cb-la+1),Qa=.5*ga,ga=.5/ga,Ra=(G.a.f+G.a.i)*ga,Ha=(G.a.h+G.a.l)*ga,rb=(G.a.g-G.a.j)*ga):(ga=Math.sqrt(la-yb-Cb+1),Ha=.5*ga,ga=.5/ga,Qa=(G.a.h+G.a.l)*ga,Ra=(G.a.j+G.a.g)*ga,rb=(G.a.i-G.a.f)*ga):Cb>la?(ga=Math.sqrt(Cb-la-yb+1),Ra=.5*ga,ga=.5/ga,Qa=(G.a.f+G.a.i)*ga,Ha=(G.a.j+G.a.g)*ga,rb=(G.a.h-G.a.l)*ga):(ga=Math.sqrt(la-yb-Cb+1),Ha=.5*ga,ga=.5/ga,Qa=(G.a.h+G.a.l)*ga,Ra=(G.a.j+G.a.g)*ga,rb=(G.a.i-G.a.f)*ga);Qa=db*Qa+v*rb+W*Ha-U*Ra;Ra=db*Ra-v*Ha+W*rb+U*Qa;Ha=db*Ha+v*Ra-W*Qa+U*rb;rb=db*rb-v*Qa-W*Ra-U*Ha;var ma=Qa*Qa+Ra*Ra+Ha*Ha+rb*rb;1E-32<ma&&(ma=1/Math.sqrt(ma));Qa*=ma;Ra*=ma;Ha*=ma;rb*=ma;var Ja=Qa,$a=Ra,Oa=Ha,ub=rb,xa=2*Ja,Bb=2*$a,Fb=2*Oa,Hb=Ja*xa,Gb=$a*Bb,Jb=Oa*Fb,Kb=Ja*Bb,Qb=$a*Fb,Lb=Ja*Fb,Nb=ub*xa,Mb=ub*Bb,Ob=ub*Fb;G.a.o=1-Gb-Jb;G.a.f=Kb-Ob;G.a.h=Lb+Mb;G.a.i=Kb+Ob;G.a.m=1-Hb-Jb;G.a.j=Qb-Nb;G.a.l=Lb-Mb;G.a.g=Qb+Nb;G.a.s=1-Hb-Gb;var Yb,Pb,Rb,Sb,Tb,Wb,Zb,$b,ac;Yb=G.a.o*G.Sa+G.a.f*G.Va+G.a.h*G.Ya;Pb=G.a.o*G.Ta+G.a.f*G.Wa+G.a.h*G.Za;Rb=G.a.o*G.Ua+G.a.f*G.Xa+G.a.h*G.$a;Sb=G.a.i*G.Sa+G.a.m*G.Va+G.a.j*G.Ya;Tb=G.a.i*G.Ta+G.a.m*G.Wa+G.a.j*G.Za;Wb=G.a.i*G.Ua+G.a.m*G.Xa+G.a.j*G.$a;Zb=G.a.l*G.Sa+G.a.g*G.Va+G.a.s*G.Ya;$b=G.a.l*G.Ta+G.a.g*G.Wa+G.a.s*G.Za;ac=G.a.l*G.Ua+G.a.g*G.Xa+G.a.s*G.$a;G.S=Yb;G.T=Pb;G.U=Rb;G.V=Sb;G.W=Tb;G.X=Wb;G.Y=Zb;G.Z=$b;G.$=ac;var hc,bc,gc,dc,Eb,kc,lc,pc,qc;hc=G.S*G.a.o+G.T*G.a.f+G.U*G.a.h;bc=G.S*G.a.i+G.T*G.a.m+G.U*G.a.j;gc=G.S*G.a.l+G.T*G.a.g+G.U*G.a.s;dc=G.V*G.a.o+G.W*G.a.f+G.X*G.a.h;Eb=G.V*G.a.i+G.W*G.a.m+G.X*G.a.j;kc=G.V*G.a.l+G.W*G.a.g+G.X*G.a.s;lc=G.Y*G.a.o+G.Z*G.a.f+G.$*G.a.h;pc=G.Y*G.a.i+G.Z*G.a.m+G.$*G.a.j;qc=G.Y*G.a.l+G.Z*G.a.g+G.$*G.a.s;G.S=hc;G.T=bc;G.U=gc;G.V=dc;G.W=Eb;G.X=kc;G.Y=lc;G.Z=pc;G.$=qc;G.S*=G.O.x;G.T*=G.O.x;G.U*=G.O.x;G.V*=G.O.y;G.W*=G.O.y;G.X*=G.O.y;G.Y*=G.O.z;G.Z*=G.O.z;G.$*=G.O.z}for(var jc=this.bj,ic=0;jc.nc[ic]!=u;)++ic;for(;0<ic;){var tc=jc.nc[ic];jc.nc[ic]=jc.nc[ic-1];jc.nc[ic-1]=tc;--ic}t=!0;break}}t||console.log("src/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx:502:","could not find solution. (NGS)")},postSolve:function(){this.ga.bd();this.ga.hm()}});rj.prototype={Mn:function(a,b,e){for(var d=0;d<e;)for(var c=d++,f=b[c],h=0;h<e;){var l=h++;this.Ok[c][l]=this.qb[f][b[l]]}d=this.Ok;a=this.Uk[a];var g,k;switch(e){case 4:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[5];k=a[5];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=c[5]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=c[5]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=c[5]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=c[5]*g[4];g=d[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=c[5]*g[4];c=d[5];b=a[5];e=1/c[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[5];g=d[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=d[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=d[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=d[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;c=d[h];b=a[h];l=1/c[h];b[h]=l;for(g=0;g<h;)k=g++,b[k]*=l;for(g=h+1;g<e;)k=g++,c[k]*=l;for(var m=0;m<h;){var p=m++;g=d[p];k=a[p];for(var r=0,p=p+1;r<p;){var q=r++;k[q]-=b[q]*g[h]}for(k=h+1;k<e;)r=k++,g[r]-=c[r]*g[h]}for(m=h+1;m<e;){k=m++;g=d[k];k=a[k];for(r=0;r<h;)p=r++,k[p]-=b[p]*g[h];k[h]=-l*g[h];for(k=h+1;k<e;)r=k++,g[r]-=c[r]*g[h]}}for(d=1;d<e;)for(c=d++,b=a[c],f=0;f<c;)h=f++,a[h][c]=b[h]}},Dl:function(a,b){var e=this.qb,d=this.rj,c=a.Da,f=a.Ye,h=a.Ze,l=f.qb,g=h.qb,k,m,p,r,q,t,A,n,u,z,x,D,F,y,B,E;k=f.S;m=f.T;p=f.U;r=f.V;q=f.W;t=f.X;A=f.Y;n=f.Z;f=f.$;u=h.S;z=h.T;x=h.U;D=h.V;F=h.W;y=h.X;B=h.Y;E=h.Z;for(var h=h.$,K=0;K<c;){var H=K++,I=a.rows[H].va,H=b[H];I.bn();I.Cc&1?(H.Kd=I.sa*l,H.Ld=I.ta*l,H.Md=I.ua*l,H.Nd=I.xa*g,H.Od=I.ya*g,H.Pd=I.za*g):(H.Kd=0,H.Ld=0,H.Md=0,H.Nd=0,H.Od=0,H.Pd=0);if(I.Cc&2){var J,N,X;J=k*I.aa+m*I.ba+p*I.ca;N=r*I.aa+q*I.ba+t*I.ca;X=A*I.aa+n*I.ba+f*I.ca;H.Ed=J;H.Fd=N;H.Gd=X;J=u*I.da+z*I.ea+x*I.fa;N=D*I.da+F*I.ea+y*I.fa;I=B*I.da+E*I.ea+h*I.fa;H.Hd=J;H.Id=N;H.Jd=I}else H.Ed=0,H.Fd=0,H.Gd=0,H.Hd=0,H.Id=0,H.Jd=0}for(l=0;l<c;)for(g=l++,k=a.rows[g].va,m=g;m<c;)p=m++,r=b[p],q=k.sa*r.Kd+k.ta*r.Ld+k.ua*r.Md+(k.aa*r.Ed+k.ba*r.Fd+k.ca*r.Gd)+(k.xa*r.Nd+k.ya*r.Od+k.za*r.Pd)+(k.da*r.Hd+k.ea*r.Id+k.fa*r.Jd),g==p?(e[g][p]=q+a.rows[g].Ka,d[g][p]=q,r.mass=q+a.rows[g].Ka,r.Zf=q,0!=r.mass&&(r.mass=1/r.mass),r.Zf&&(r.Zf=1/r.Zf)):(e[g][p]=q,e[p][g]=q,d[g][p]=q,d[p][g]=q);a=0;for(b=this.tk;a<b;)this.jk[a++]=!1}};Pb.wa=Ob;Pb.prototype=gb(Ob.prototype,{Qh:function(a){this.aj.Sd(a,this.info);this.C=this.info.Ye;this.D=this.info.Ze;a=this.C.qb;var b=this.D.qb,e,d,c,f,h,l,g,k,m,p,r,q,t,n,x,u,z,F;e=this.C.S;d=this.C.T;c=this.C.U;f=this.C.V;h=this.C.W;l=this.C.X;g=this.C.Y;k=this.C.Z;m=this.C.$;p=this.D.S;r=this.D.T;q=this.D.U;t=this.D.V;n=this.D.W;x=this.D.X;u=this.D.Y;z=this.D.Z;F=this.D.$;for(var D=0,I=this.info.Da;D<I;){var y=D++,B=this.info.rows[y],y=this.Wb[y],E=B.yg;y.si=E.sa*a;y.ti=E.ta*a;y.ui=E.ua*a;y.vi=E.xa*b;y.wi=E.ya*b;y.xi=E.za*b;var K,H,J;K=e*E.aa+d*E.ba+c*E.ca;H=f*E.aa+h*E.ba+l*E.ca;J=g*E.aa+k*E.ba+m*E.ca;y.sg=K;y.tg=H;y.ug=J;K=p*E.da+r*E.ea+q*E.fa;H=t*E.da+n*E.ea+x*E.fa;J=u*E.da+z*E.ea+F*E.fa;y.vg=K;y.wg=H;y.xg=J;y.ze=a+b+(y.sg*E.aa+y.tg*E.ba+y.ug*E.ca)+(y.vg*E.da+y.wg*E.ea+y.xg*E.fa);0!=y.ze&&(y.ze=1/y.ze);E=B.Zj;B=B.Yj;y.Ql=E.sa*a;y.Rl=E.ta*a;y.Sl=E.ua*a;y.Tl=E.xa*b;y.Ul=E.ya*b;y.Vl=E.za*b;y.Kl=B.sa*a;y.Ll=B.ta*a;y.Ml=B.ua*a;y.Nl=B.xa*b;y.Ol=B.ya*b;y.Pl=B.za*b;K=e*E.aa+d*E.ba+c*E.ca;H=f*E.aa+h*E.ba+l*E.ca;J=g*E.aa+k*E.ba+m*E.ca;y.Sj=K;y.Tj=H;y.Uj=J;K=p*E.da+r*E.ea+q*E.fa;H=t*E.da+n*E.ea+x*E.fa;J=u*E.da+z*E.ea+F*E.fa;y.Vj=K;y.Wj=H;y.Xj=J;K=e*B.aa+d*B.ba+c*B.ca;H=f*B.aa+h*B.ba+l*B.ca;J=g*B.aa+k*B.ba+m*B.ca;y.Ek=K;y.Fk=H;y.Gk=J;K=p*B.da+r*B.ea+q*B.fa;H=t*B.da+n*B.ea+x*B.fa;J=u*B.da+z*B.ea+F*B.fa;y.Hk=K;y.Ik=H;y.Jk=J;E=a+b+(y.Sj*E.aa+y.Tj*E.ba+y.Uj*E.ca)+(y.Vj*E.da+y.Wj*E.ea+y.Xj*E.fa);K=y.Sj*B.aa+y.Tj*B.ba+y.Uj*B.ca+(y.Vj*B.da+y.Wj*B.ea+y.Xj*B.fa);B=a+b+(y.Ek*B.aa+y.Fk*B.ba+y.Gk*B.ca)+(y.Hk*B.da+y.Ik*B.ea+y.Jk*B.fa);(H=E*B-K*K)&&(H=1/H);y.Qm=B*H;y.Rm=-K*H;y.Sm=-K*H;y.Tm=E*H}},Zh:function(a){var b,e,d,c,f,h,l,g,k,m,p,r;b=this.C.jb;e=this.C.kb;d=this.C.lb;c=this.D.jb;f=this.D.kb;h=this.D.lb;l=this.C.nb;g=this.C.ob;k=this.C.pb;m=this.D.nb;p=this.D.ob;r=this.D.pb;for(var q=0,t=this.info.Da;q<t;){var n=q++,x=this.info.rows[n],u=x.qa,n=this.Wb[n],z=x.Zj,F=x.Yj,x=u.dd,z=u.mf*z.sa+u.nf*z.ta+u.pf*z.ua,F=u.mf*F.sa+u.nf*F.ta+u.pf*F.ua;u.Kc=z;u.Jc=F;u.dd*=a.dtRatio;u.Kc*=a.dtRatio;u.Jc*=a.dtRatio;b+=n.si*x;e+=n.ti*x;d+=n.ui*x;b+=n.Ql*z;e+=n.Rl*z;d+=n.Sl*z;b+=n.Kl*F;e+=n.Ll*F;d+=n.Ml*F;c+=n.vi*-x;f+=n.wi*-x;h+=n.xi*-x;c+=n.Tl*-z;f+=n.Ul*-z;h+=n.Vl*-z;c+=n.Nl*-F;f+=n.Ol*-F;h+=n.Pl*-F;l+=n.sg*x;g+=n.tg*x;k+=n.ug*x;l+=n.Sj*z;g+=n.Tj*z;k+=n.Uj*z;l+=n.Ek*F;g+=n.Fk*F;k+=n.Gk*F;m+=n.vg*-x;p+=n.wg*-x;r+=n.xg*-x;m+=n.Vj*-z;p+=n.Wj*-z;r+=n.Xj*-z;m+=n.Hk*-F;p+=n.Ik*-F;r+=n.Jk*-F}this.C.jb=b;this.C.kb=e;this.C.lb=d;this.D.jb=c;this.D.kb=f;this.D.lb=h;this.C.nb=l;this.C.ob=g;this.C.pb=k;this.D.nb=m;this.D.ob=p;this.D.pb=r},Vh:function(){var a,b,e,d,c,f,h,l,g,k,m,p;a=this.C.jb;b=this.C.kb;e=this.C.lb;d=this.D.jb;c=this.D.kb;f=this.D.lb;h=this.C.nb;l=this.C.ob;g=this.C.pb;k=this.D.nb;m=this.D.ob;p=this.D.pb;for(var r=0,q=this.info.Da;r<q;){var t=r++,n=this.info.rows[t],t=this.Wb[t],x=n.qa,u=0,z=n.Zj,u=u+(a*z.sa+b*z.ta+e*z.ua),u=u-(d*z.xa+c*z.ya+f*z.za),u=u+(h*z.aa+l*z.ba+g*z.ca),u=u-(k*z.da+m*z.ea+p*z.fa),F=0,z=n.Yj,F=F+(a*z.sa+b*z.ta+e*z.ua),F=F-(d*z.xa+c*z.ya+f*z.za),F=F+(h*z.aa+l*z.ba+g*z.ca),F=F-(k*z.da+m*z.ea+p*z.fa),z=-(u*t.Qm+F*t.Rm),D=-(u*t.Sm+F*t.Tm),u=x.Kc,F=x.Jc;x.Kc+=z;x.Jc+=D;(n=n.friction*x.dd)?(z=x.Kc*x.Kc+x.Jc*x.Jc,z>n*n&&(n/=Math.sqrt(z),x.Kc*=n,x.Jc*=n)):(x.Kc=0,x.Jc=0);z=x.Kc-u;D=x.Jc-F;a+=t.Ql*z;b+=t.Rl*z;e+=t.Sl*z;a+=t.Kl*D;b+=t.Ll*D;e+=t.Ml*D;d+=t.Tl*-z;c+=t.Ul*-z;f+=t.Vl*-z;d+=t.Nl*-D;c+=t.Ol*-D;f+=t.Pl*-D;h+=t.Sj*z;l+=t.Tj*z;g+=t.Uj*z;h+=t.Ek*D;l+=t.Fk*D;g+=t.Gk*D;k+=t.Vj*-z;m+=t.Wj*-z;p+=t.Xj*-z;k+=t.Hk*-D;m+=t.Ik*-D;p+=t.Jk*-D}r=0;for(q=this.info.Da;r<q;)t=r++,n=this.info.rows[t],t=this.Wb[t],x=n.qa,u=0,F=n.yg,u+=a*F.sa+b*F.ta+e*F.ua,u-=d*F.xa+c*F.ya+f*F.za,u+=h*F.aa+l*F.ba+g*F.ca,u-=k*F.da+m*F.ea+p*F.fa,n=(n.Fa-u)*t.ze,u=x.dd,x.dd+=n,0>x.dd&&(x.dd=0),n=x.dd-u,a+=t.si*n,b+=t.ti*n,e+=t.ui*n,d+=t.vi*-n,c+=t.wi*-n,f+=t.xi*-n,h+=t.sg*n,l+=t.tg*n,g+=t.ug*n,k+=t.vg*-n,m+=t.wg*-n,p+=t.xg*-n;this.C.jb=a;this.C.kb=b;this.C.lb=e;this.D.jb=d;this.D.kb=c;this.D.lb=f;this.C.nb=h;this.C.ob=l;this.C.pb=g;this.D.nb=k;this.D.ob=m;this.D.pb=p},jh:function(){this.aj.rl();this.aj.$c(this.info);var a=this.C.qb,b=this.D.qb,e,d,c,f,h,l,g,k,m,p,r,q,t,n,x,u,z,F;e=this.C.S;d=this.C.T;c=this.C.U;f=this.C.V;h=this.C.W;l=this.C.X;g=this.C.Y;k=this.C.Z;m=this.C.$;p=this.D.S;r=this.D.T;q=this.D.U;t=this.D.V;n=this.D.W;x=this.D.X;u=this.D.Y;z=this.D.Z;F=this.D.$;for(var D=0,I=this.info.Da;D<I;){var y=D++,B=this.Wb[y],y=this.info.rows[y].yg;B.si=y.sa*a;B.ti=y.ta*a;B.ui=y.ua*a;B.vi=y.xa*b;B.wi=y.ya*b;B.xi=y.za*b;var E,K,H;E=e*y.aa+d*y.ba+c*y.ca;K=f*y.aa+h*y.ba+l*y.ca;H=g*y.aa+k*y.ba+m*y.ca;B.sg=E;B.tg=K;B.ug=H;E=p*y.da+r*y.ea+q*y.fa;K=t*y.da+n*y.ea+x*y.fa;H=u*y.da+z*y.ea+F*y.fa;B.vg=E;B.wg=K;B.xg=H;B.ze=a+b+(B.sg*y.aa+B.tg*y.ba+B.ug*y.ca)+(B.vg*y.da+B.wg*y.ea+B.xg*y.fa);0!=B.ze&&(B.ze=1/B.ze)}a=0;for(b=this.info.Da;a<b;)this.info.rows[a++].qa.vb=0},Uh:function(){var a,b,e,d,c,f,h,l,g,k,m,p;a=this.C.rd;b=this.C.sd;e=this.C.td;d=this.D.rd;c=this.D.sd;f=this.D.td;h=this.C.gd;l=this.C.hd;g=this.C.jd;k=this.D.gd;m=this.D.hd;p=this.D.jd;for(var r=0,q=this.info.Da;r<q;){var t=r++,n=this.info.rows[t],t=this.Wb[t],x=n.qa,u=n.yg,z=0,z=z+(a*u.sa+b*u.ta+e*u.ua),z=z-(d*u.xa+c*u.ya+f*u.za),z=z+(h*u.aa+l*u.ba+g*u.ca),z=z-(k*u.da+m*u.ea+p*u.fa),n=(n.Fa-z)*t.ze*F.positionSplitImpulseBaumgarte,u=x.vb;x.vb+=n;0>x.vb&&(x.vb=0);n=x.vb-u;a+=t.si*n;b+=t.ti*n;e+=t.ui*n;d+=t.vi*-n;c+=t.wi*-n;f+=t.xi*-n;h+=t.sg*n;l+=t.tg*n;g+=t.ug*n;k+=t.vg*-n;m+=t.wg*-n;p+=t.xg*-n}this.C.rd=a;this.C.sd=b;this.C.td=e;this.D.rd=d;this.D.sd=c;this.D.td=f;this.C.gd=h;this.C.hd=l;this.C.jd=g;this.D.gd=k;this.D.hd=m;this.D.jd=p},Th:function(){this.aj.rl();this.aj.$c(this.info);var a=this.C.qb,b=this.D.qb,e,d,c,f,h,l,g,k,m,p,r,q,t,n,x,u,z,I;e=this.C.S;d=this.C.T;c=this.C.U;f=this.C.V;h=this.C.W;l=this.C.X;g=this.C.Y;k=this.C.Z;m=this.C.$;p=this.D.S;r=this.D.T;q=this.D.U;t=this.D.V;n=this.D.W;x=this.D.X;u=this.D.Y;z=this.D.Z;I=this.D.$;for(var D=0,J=this.info.Da;D<J;){var y=D++,B=this.Wb[y],E=this.info.rows[y].yg;B.si=E.sa*a;B.ti=E.ta*a;B.ui=E.ua*a;B.vi=E.xa*b;B.wi=E.ya*b;B.xi=E.za*b;var K,H,N;K=e*E.aa+d*E.ba+c*E.ca;H=f*E.aa+h*E.ba+l*E.ca;N=g*E.aa+k*E.ba+m*E.ca;B.sg=K;B.tg=H;B.ug=N;var R,pa,X;R=p*E.da+r*E.ea+q*E.fa;pa=t*E.da+n*E.ea+x*E.fa;X=u*E.da+z*E.ea+I*E.fa;B.vg=R;B.wg=pa;B.xg=X;B.ze=a+b+(B.sg*E.aa+B.tg*E.ba+B.ug*E.ca)+(B.vg*E.da+B.wg*E.ea+B.xg*E.fa);0!=B.ze&&(B.ze=1/B.ze)}for(var wa,Da,qa,Ca,ya,Ka,Ea,O,sa,ba,za,Ta,C=Ta=za=ba=sa=O=Ea=Ka=ya=Ca=qa=Da=wa=0,Aa=this.info.Da;C<Aa;){var na=C++,La=this.info.rows[na],Ba=this.Wb[na],ta=La.qa,S=La.yg,ha=0,ha=ha+(wa*S.sa+Da*S.ta+qa*S.ua),ha=ha-(Ca*S.xa+ya*S.ya+Ka*S.za),ha=ha+(Ea*S.aa+O*S.ba+sa*S.ca),ha=ha-(ba*S.da+za*S.ea+Ta*S.fa),ea=(La.Fa-ha)*Ba.ze*F.positionNgsBaumgarte,da=ta.vb;ta.vb+=ea;0>ta.vb&&(ta.vb=0);ea=ta.vb-da;wa+=Ba.si*ea;Da+=Ba.ti*ea;qa+=Ba.ui*ea;Ca+=Ba.vi*-ea;ya+=Ba.wi*-ea;Ka+=Ba.xi*-ea;Ea+=Ba.sg*ea;O+=Ba.tg*ea;sa+=Ba.ug*ea;ba+=Ba.vg*-ea;za+=Ba.wg*-ea;Ta+=Ba.xg*-ea}var M=this.C;M.a.v+=wa;M.a.A+=Da;M.a.B+=qa;var T=this.D;T.a.v+=Ca;T.a.A+=ya;T.a.B+=Ka;var w=this.C,V=Math.sqrt(Ea*Ea+O*O+sa*sa),ia=.5*V,Y,oa;if(.5>ia){var ua=ia*ia;Y=.5*(1-.16666666666666666*ua+ua*ua*.008333333333333333);oa=1-.5*ua+ua*ua*.041666666666666664}else Y=Math.sin(ia)/V,oa=Math.cos(ia);var ca,Ma;ca=Ea*Y;Ma=O*Y;var va,Z;va=sa*Y;Z=oa;var Pa,Fa,Q,aa,fa=w.a.o,Qa=w.a.m,ja=w.a.s,Ga=fa+Qa+ja,P;0<Ga?(P=Math.sqrt(Ga+1),aa=.5*P,P=.5/P,Pa=(w.a.g-w.a.j)*P,Fa=(w.a.h-w.a.l)*P,Q=(w.a.i-w.a.f)*P):fa>Qa?fa>ja?(P=Math.sqrt(fa-Qa-ja+1),Pa=.5*P,P=.5/P,Fa=(w.a.f+w.a.i)*P,Q=(w.a.h+w.a.l)*P,aa=(w.a.g-w.a.j)*P):(P=Math.sqrt(ja-fa-Qa+1),Q=.5*P,P=.5/P,Pa=(w.a.h+w.a.l)*P,Fa=(w.a.j+w.a.g)*P,aa=(w.a.i-w.a.f)*P):Qa>ja?(P=Math.sqrt(Qa-ja-fa+1),Fa=.5*P,P=.5/P,Pa=(w.a.f+w.a.i)*P,Q=(w.a.j+w.a.g)*P,aa=(w.a.h-w.a.l)*P):(P=Math.sqrt(ja-fa-Qa+1),Q=.5*P,P=.5/P,Pa=(w.a.h+w.a.l)*P,Fa=(w.a.j+w.a.g)*P,aa=(w.a.i-w.a.f)*P);Pa=Z*Pa+ca*aa+Ma*Q-va*Fa;Fa=Z*Fa-ca*Q+Ma*aa+va*Pa;Q=Z*Q+ca*Fa-Ma*Pa+va*aa;aa=Z*aa-ca*Pa-Ma*Fa-va*Q;var Ya=Pa*Pa+Fa*Fa+Q*Q+aa*aa;1E-32<Ya&&(Ya=1/Math.sqrt(Ya));Pa*=Ya;Fa*=Ya;Q*=Ya;aa*=Ya;var Ua=Pa,wb=Fa,gb=Q,eb=aa,lb=2*Ua,ib=2*wb,hb=2*gb,ka=Ua*lb,Ia=wb*ib,ab=gb*hb,bb=Ua*ib,Wa=wb*hb,Va=Ua*hb,qb=eb*lb,kb=eb*ib,Sa=eb*hb;w.a.o=1-Ia-ab;w.a.f=bb-Sa;w.a.h=Va+kb;w.a.i=bb+Sa;w.a.m=1-ka-ab;w.a.j=Wa-qb;w.a.l=Va-kb;w.a.g=Wa+qb;w.a.s=1-ka-Ia;var Na,Za,vb,mb,xb,nb,fb,pb,ub;Na=w.a.o*w.Sa+w.a.f*w.Va+w.a.h*w.Ya;Za=w.a.o*w.Ta+w.a.f*w.Wa+w.a.h*w.Za;vb=w.a.o*w.Ua+w.a.f*w.Xa+w.a.h*w.$a;mb=w.a.i*w.Sa+w.a.m*w.Va+w.a.j*w.Ya;xb=w.a.i*w.Ta+w.a.m*w.Wa+w.a.j*w.Za;nb=w.a.i*w.Ua+w.a.m*w.Xa+w.a.j*w.$a;fb=w.a.l*w.Sa+w.a.g*w.Va+w.a.s*w.Ya;pb=w.a.l*w.Ta+w.a.g*w.Wa+w.a.s*w.Za;ub=w.a.l*w.Ua+w.a.g*w.Xa+w.a.s*w.$a;w.S=Na;w.T=Za;w.U=vb;w.V=mb;w.W=xb;w.X=nb;w.Y=fb;w.Z=pb;w.$=ub;var G,sb,jb,Bb,ob,cb,zb,Xa,tb;G=w.S*w.a.o+w.T*w.a.f+w.U*w.a.h;sb=w.S*w.a.i+w.T*w.a.m+w.U*w.a.j;jb=w.S*w.a.l+w.T*w.a.g+w.U*w.a.s;Bb=w.V*w.a.o+w.W*w.a.f+w.X*w.a.h;ob=w.V*w.a.i+w.W*w.a.m+w.X*w.a.j;cb=w.V*w.a.l+w.W*w.a.g+w.X*w.a.s;zb=w.Y*w.a.o+w.Z*w.a.f+w.$*w.a.h;Xa=w.Y*w.a.i+w.Z*w.a.m+w.$*w.a.j;tb=w.Y*w.a.l+w.Z*w.a.g+w.$*w.a.s;w.S=G;w.T=sb;w.U=jb;w.V=Bb;w.W=ob;w.X=cb;w.Y=zb;w.Z=Xa;w.$=tb;w.S*=w.O.x;w.T*=w.O.x;w.U*=w.O.x;w.V*=w.O.y;w.W*=w.O.y;w.X*=w.O.y;w.Y*=w.O.z;w.Z*=w.O.z;w.$*=w.O.z;var v=this.D,W=Math.sqrt(ba*ba+za*za+Ta*Ta),U=.5*W,db,Fb;if(.5>U){var Ra=U*U;db=.5*(1-.16666666666666666*Ra+Ra*Ra*.008333333333333333);Fb=1-.5*Ra+Ra*Ra*.041666666666666664}else db=Math.sin(U)/W,Fb=Math.cos(U);var Ha,rb;Ha=ba*db;rb=za*db;var yb,Cb;yb=Ta*db;Cb=Fb;var la,ra,ga,ma,Ja=v.a.o,$a=v.a.m,Oa=v.a.s,Hb=Ja+$a+Oa,xa;0<Hb?(xa=Math.sqrt(Hb+1),ma=.5*xa,xa=.5/xa,la=(v.a.g-v.a.j)*xa,ra=(v.a.h-v.a.l)*xa,ga=(v.a.i-v.a.f)*xa):Ja>$a?Ja>Oa?(xa=Math.sqrt(Ja-$a-Oa+1),la=.5*xa,xa=.5/xa,ra=(v.a.f+v.a.i)*xa,ga=(v.a.h+v.a.l)*xa,ma=(v.a.g-v.a.j)*xa):(xa=Math.sqrt(Oa-Ja-$a+1),ga=.5*xa,xa=.5/xa,la=(v.a.h+v.a.l)*xa,ra=(v.a.j+v.a.g)*xa,ma=(v.a.i-v.a.f)*xa):$a>Oa?(xa=Math.sqrt($a-Oa-Ja+1),ra=.5*xa,xa=.5/xa,la=(v.a.f+v.a.i)*xa,ga=(v.a.j+v.a.g)*xa,ma=(v.a.h-v.a.l)*xa):(xa=Math.sqrt(Oa-Ja-$a+1),ga=.5*xa,xa=.5/xa,la=(v.a.h+v.a.l)*xa,ra=(v.a.j+v.a.g)*xa,ma=(v.a.i-v.a.f)*xa);la=Cb*la+Ha*ma+rb*ga-yb*ra;ra=Cb*ra-Ha*ga+rb*ma+yb*la;ga=Cb*ga+Ha*ra-rb*la+yb*ma;ma=Cb*ma-Ha*la-rb*ra-yb*ga;var Gb=la*la+ra*ra+ga*ga+ma*ma;1E-32<Gb&&(Gb=1/Math.sqrt(Gb));la*=Gb;ra*=Gb;ga*=Gb;ma*=Gb;var Jb=la,Kb=ra,Qb=ga,Lb=ma,Nb=2*Jb,Mb=2*Kb,Ob=2*Qb,Pb=Jb*Nb,Rb=Kb*Mb,Sb=Qb*Ob,Yb=Jb*Mb,Tb=Kb*Ob,Wb=Jb*Ob,Zb=Lb*Nb,$b=Lb*Mb,ac=Lb*Ob;v.a.o=1-Rb-Sb;v.a.f=Yb-ac;v.a.h=Wb+$b;v.a.i=Yb+ac;v.a.m=1-Pb-Sb;v.a.j=Tb-Zb;v.a.l=Wb-$b;v.a.g=Tb+Zb;v.a.s=1-Pb-Rb;var bc,dc,jc,hc,uc,gc,kc,Eb,lc;bc=v.a.o*v.Sa+v.a.f*v.Va+v.a.h*v.Ya;dc=v.a.o*v.Ta+v.a.f*v.Wa+v.a.h*v.Za;jc=v.a.o*v.Ua+v.a.f*v.Xa+v.a.h*v.$a;hc=v.a.i*v.Sa+v.a.m*v.Va+v.a.j*v.Ya;uc=v.a.i*v.Ta+v.a.m*v.Wa+v.a.j*v.Za;gc=v.a.i*v.Ua+v.a.m*v.Xa+v.a.j*v.$a;kc=v.a.l*v.Sa+v.a.g*v.Va+v.a.s*v.Ya;Eb=v.a.l*v.Ta+v.a.g*v.Wa+v.a.s*v.Za;lc=v.a.l*v.Ua+v.a.g*v.Xa+v.a.s*v.$a;v.S=bc;v.T=dc;v.U=jc;v.V=hc;v.W=uc;v.X=gc;v.Y=kc;v.Z=Eb;v.$=lc;var pc,qc,tc,wc,ic,Pc,Qc,Uc,Wc;pc=v.S*v.a.o+v.T*v.a.f+v.U*v.a.h;qc=v.S*v.a.i+v.T*v.a.m+v.U*v.a.j;tc=v.S*v.a.l+v.T*v.a.g+v.U*v.a.s;wc=v.V*v.a.o+v.W*v.a.f+v.X*v.a.h;ic=v.V*v.a.i+v.W*v.a.m+v.X*v.a.j;Pc=v.V*v.a.l+v.W*v.a.g+v.X*v.a.s;Qc=v.Y*v.a.o+v.Z*v.a.f+v.$*v.a.h;Uc=v.Y*v.a.i+v.Z*v.a.m+v.$*v.a.j;Wc=v.Y*v.a.l+v.Z*v.a.g+v.$*v.a.s;v.S=pc;v.T=qc;v.U=tc;v.V=wc;v.W=ic;v.X=Pc;v.Y=Qc;v.Z=Uc;v.$=Wc;v.S*=v.O.x;v.T*=v.O.x;v.U*=v.O.x;v.V*=v.O.y;v.W*=v.O.y;v.X*=v.O.y;v.Y*=v.O.z;v.Z*=v.O.z;v.$*=v.O.z},postSolve:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.info.Da;k<m;){var p=this.info.rows[k++],r=p.qa,q=p.yg,t=p.Zj,p=p.Yj,n=r.dd,x=r.Kc,u=r.Jc,z,F,D;D=F=z=0;z+=t.sa*x;F+=t.ta*x;D+=t.ua*x;z+=p.sa*u;F+=p.ta*u;D+=p.ua*u;r.mf=z;r.nf=F;r.pf=D;a+=q.sa*n;b+=q.ta*n;e+=q.ua*n;d+=q.aa*n;c+=q.ba*n;f+=q.ca*n;h+=q.da*n;l+=q.ea*n;g+=q.fa*n;a+=t.sa*x;b+=t.ta*x;e+=t.ua*x;d+=t.aa*x;c+=t.ba*x;f+=t.ca*x;h+=t.da*x;l+=t.ea*x;g+=t.fa*x;a+=p.sa*u;b+=p.ta*u;e+=p.ua*u;d+=p.aa*u;c+=p.ba*u;f+=p.ca*u;h+=p.da*u;l+=p.ea*u;g+=p.fa*u}this.C.wh+=a;this.C.xh+=b;this.C.yh+=e;this.C.rh+=d;this.C.sh+=c;this.C.th+=f;this.D.wh-=a;this.D.xh-=b;this.D.yh-=e;this.D.rh-=h;this.D.sh-=l;this.D.th-=g;this.aj.rl()}});Rb.wa=Ob;Rb.prototype=gb(Ob.prototype,{Qh:function(a){this.ga.bd();this.ga.Sd(a,this.info);this.C=this.info.Ye;this.D=this.info.Ze;a=this.C.qb;var b=this.D.qb,e,d,c,f,h,l,g,k,m,p,r,q,t,n,x,u,z,F;e=this.C.S;d=this.C.T;c=this.C.U;f=this.C.V;h=this.C.W;l=this.C.X;g=this.C.Y;k=this.C.Z;m=this.C.$;p=this.D.S;r=this.D.T;q=this.D.U;t=this.D.V;n=this.D.W;x=this.D.X;u=this.D.Y;z=this.D.Z;F=this.D.$;for(var D=0,I=this.info.Da;D<I;){var y=D++,B=this.info.rows[y],y=this.Wb[y],E=B.va;E.bn();E.Cc&1?(y.Kd=E.sa*a,y.Ld=E.ta*a,y.Md=E.ua*a,y.Nd=E.xa*b,y.Od=E.ya*b,y.Pd=E.za*b):(y.Kd=0,y.Ld=0,y.Md=0,y.Nd=0,y.Od=0,y.Pd=0);if(E.Cc&2){var K,H,J;K=e*E.aa+d*E.ba+c*E.ca;H=f*E.aa+h*E.ba+l*E.ca;J=g*E.aa+k*E.ba+m*E.ca;y.Ed=K;y.Fd=H;y.Gd=J;K=p*E.da+r*E.ea+q*E.fa;H=t*E.da+n*E.ea+x*E.fa;J=u*E.da+z*E.ea+F*E.fa;y.Hd=K;y.Id=H;y.Jd=J}else y.Ed=0,y.Fd=0,y.Gd=0,y.Hd=0,y.Id=0,y.Jd=0;y.Zf=y.Kd*E.sa+y.Ld*E.ta+y.Md*E.ua+(y.Nd*E.xa+y.Od*E.ya+y.Pd*E.za)+(y.Ed*E.aa+y.Fd*E.ba+y.Gd*E.ca)+(y.Hd*E.da+y.Id*E.ea+y.Jd*E.fa);y.mass=y.Zf+B.Ka;y.Zf&&(y.Zf=1/y.Zf);0!=y.mass&&(y.mass=1/y.mass)}},Zh:function(a){var b=this.ga.Sg==jc.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Da;b<a;){var e=this.info.rows[b++].qa;e.qa=0;e.Dd=0;e.vb=0}else{var d,c,f,h,l,g,k,m,p,r;a=this.C.jb;e=this.C.kb;d=this.C.lb;c=this.D.jb;f=this.D.kb;h=this.D.lb;l=this.C.nb;g=this.C.ob;k=this.C.pb;m=this.D.nb;p=this.D.ob;r=this.D.pb;for(var q=0,t=this.info.Da;q<t;){var n=q++,x=this.Wb[n],n=this.info.rows[n].qa;n.qa*=b;n.Dd*=b;n=n.qa+n.Dd;a+=x.Kd*n;e+=x.Ld*n;d+=x.Md*n;c+=x.Nd*-n;f+=x.Od*-n;h+=x.Pd*-n;l+=x.Ed*n;g+=x.Fd*n;k+=x.Gd*n;m+=x.Hd*-n;p+=x.Id*-n;r+=x.Jd*-n}this.C.jb=a;this.C.kb=e;this.C.lb=d;this.D.jb=c;this.D.kb=f;this.D.lb=h;this.C.nb=l;this.C.ob=g;this.C.pb=k;this.D.nb=m;this.D.ob=p;this.D.pb=r}},Vh:function(){var a,b,e,d,c,f,h,l,g,k,m,p;a=this.C.jb;b=this.C.kb;e=this.C.lb;d=this.D.jb;c=this.D.kb;f=this.D.lb;h=this.C.nb;l=this.C.ob;g=this.C.pb;k=this.D.nb;m=this.D.ob;p=this.D.pb;for(var r=0,q=this.info.Da;r<q;){var n=r++,x=this.info.rows[n],n=this.Wb[n],F=x.qa,u=x.va;if(0!=x.tb){var z=0,z=z+(a*u.sa+b*u.ta+e*u.ua),z=z-(d*u.xa+c*u.ya+f*u.za),z=z+(h*u.aa+l*u.ba+g*u.ca),z=z-(k*u.da+m*u.ea+p*u.fa),z=(-x.motorSpeed-z)*n.Zf,I=F.Dd;F.Dd+=z;F.Dd<-x.tb?F.Dd=-x.tb:F.Dd>x.tb&&(F.Dd=x.tb);z=F.Dd-I;u.Cc&1&&(a+=n.Kd*z,b+=n.Ld*z,e+=n.Md*z,d+=n.Nd*-z,c+=n.Od*-z,f+=n.Pd*-z);u.Cc&2&&(h+=n.Ed*z,l+=n.Fd*z,g+=n.Gd*z,k+=n.Hd*-z,m+=n.Id*-z,p+=n.Jd*-z)}}r=0;for(q=this.info.Da;r<q;)n=r++,x=this.info.rows[n],n=this.Wb[n],F=x.qa,u=x.va,z=0,z+=a*u.sa+b*u.ta+e*u.ua,z-=d*u.xa+c*u.ya+f*u.za,z+=h*u.aa+l*u.ba+g*u.ca,z-=k*u.da+m*u.ea+p*u.fa,z=(x.Fa-z-F.qa*x.Ka)*n.mass,I=F.qa,F.qa+=z,F.qa<x.Ha?F.qa=x.Ha:F.qa>x.Ga&&(F.qa=x.Ga),z=F.qa-I,u.Cc&1&&(a+=n.Kd*z,b+=n.Ld*z,e+=n.Md*z,d+=n.Nd*-z,c+=n.Od*-z,f+=n.Pd*-z),u.Cc&2&&(h+=n.Ed*z,l+=n.Fd*z,g+=n.Gd*z,k+=n.Hd*-z,m+=n.Id*-z,p+=n.Jd*-z);this.C.jb=a;this.C.kb=b;this.C.lb=e;this.D.jb=d;this.D.kb=c;this.D.lb=f;this.C.nb=h;this.C.ob=l;this.C.pb=g;this.D.nb=k;this.D.ob=m;this.D.pb=p},cj:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Da;l<g;){var k=this.info.rows[l++],m=k.qa,k=k.va;k.Cc&1?(b+=k.sa*m.qa,e+=k.ta*m.qa,d+=k.ua*m.qa):k.Cc&2&&(c+=k.aa*m.qa,f+=k.ba*m.qa,h+=k.ca*m.qa)}this.ga.ej=b*a.invDt;this.ga.fj=e*a.invDt;this.ga.gj=d*a.invDt;this.ga.hj=c*a.invDt;this.ga.ij=f*a.invDt;this.ga.jj=h*a.invDt},jh:function(){this.ga.bd();this.ga.$c(this.info);this.C=this.info.Ye;this.D=this.info.Ze;var a=this.C.qb,b=this.D.qb,e,d,c,f,h,l,g,k,m,p,r,q,n,x,F,u,z,I;e=this.C.S;d=this.C.T;c=this.C.U;f=this.C.V;h=this.C.W;l=this.C.X;g=this.C.Y;k=this.C.Z;m=this.C.$;p=this.D.S;r=this.D.T;q=this.D.U;n=this.D.V;x=this.D.W;F=this.D.X;u=this.D.Y;z=this.D.Z;I=this.D.$;for(var D=0,J=this.info.Da;D<J;){var y=D++,B=this.Wb[y],y=this.info.rows[y].va;B.Kd=y.sa*a;B.Ld=y.ta*a;B.Md=y.ua*a;B.Nd=y.xa*b;B.Od=y.ya*b;B.Pd=y.za*b;var E,K,H;E=e*y.aa+d*y.ba+c*y.ca;K=f*y.aa+h*y.ba+l*y.ca;H=g*y.aa+k*y.ba+m*y.ca;B.Ed=E;B.Fd=K;B.Gd=H;E=p*y.da+r*y.ea+q*y.fa;K=n*y.da+x*y.ea+F*y.fa;H=u*y.da+z*y.ea+I*y.fa;B.Hd=E;B.Id=K;B.Jd=H;B.mass=B.Kd*y.sa+B.Ld*y.ta+B.Md*y.ua+(B.Nd*y.xa+B.Od*y.ya+B.Pd*y.za)+(B.Ed*y.aa+B.Fd*y.ba+B.Gd*y.ca)+(B.Hd*y.da+B.Id*y.ea+B.Jd*y.fa);B.mass&&(B.mass=1/B.mass)}a=0;for(b=this.info.Da;a<b;)this.info.rows[a++].qa.vb=0},Uh:function(){var a,b,e,d,c,f,h,l,g,k,m,p;a=this.C.rd;b=this.C.sd;e=this.C.td;d=this.D.rd;c=this.D.sd;f=this.D.td;h=this.C.gd;l=this.C.hd;g=this.C.jd;k=this.D.gd;m=this.D.hd;p=this.D.jd;for(var r=0,q=this.info.Da;r<q;){var n=r++,x=this.info.rows[n],n=this.Wb[n],I=x.qa,u=x.va,z=0,z=z+(a*u.sa+b*u.ta+e*u.ua),z=z-(d*u.xa+c*u.ya+f*u.za),z=z+(h*u.aa+l*u.ba+g*u.ca),z=z-(k*u.da+m*u.ea+p*u.fa),u=(x.Fa*F.positionSplitImpulseBaumgarte-z)*n.mass,z=I.vb;I.vb+=u;I.vb<x.Ha?I.vb=x.Ha:I.vb>x.Ga&&(I.vb=x.Ga);u=I.vb-z;a+=n.Kd*u;b+=n.Ld*u;e+=n.Md*u;d+=n.Nd*-u;c+=n.Od*-u;f+=n.Pd*-u;h+=n.Ed*u;l+=n.Fd*u;g+=n.Gd*u;k+=n.Hd*-u;m+=n.Id*-u;p+=n.Jd*-u}this.C.rd=a;this.C.sd=b;this.C.td=e;this.D.rd=d;this.D.sd=c;this.D.td=f;this.C.gd=h;this.C.hd=l;this.C.jd=g;this.D.gd=k;this.D.hd=m;this.D.jd=p},Th:function(){this.ga.bd();this.ga.$c(this.info);this.C=this.info.Ye;this.D=this.info.Ze;var a=this.C.qb,b=this.D.qb,e,d,c,f,h,l,g,k,m,p,r,n,t,x,I,u,z,J;e=this.C.S;d=this.C.T;c=this.C.U;f=this.C.V;h=this.C.W;l=this.C.X;g=this.C.Y;k=this.C.Z;m=this.C.$;p=this.D.S;r=this.D.T;n=this.D.U;t=this.D.V;x=this.D.W;I=this.D.X;u=this.D.Y;z=this.D.Z;J=this.D.$;for(var D=0,N=this.info.Da;D<N;){var y=D++,B=this.Wb[y],E=this.info.rows[y].va;B.Kd=E.sa*a;B.Ld=E.ta*a;B.Md=E.ua*a;B.Nd=E.xa*b;B.Od=E.ya*b;B.Pd=E.za*b;var K,H,pa;K=e*E.aa+d*E.ba+c*E.ca;H=f*E.aa+h*E.ba+l*E.ca;pa=g*E.aa+k*E.ba+m*E.ca;B.Ed=K;B.Fd=H;B.Gd=pa;var R,wa,X;R=p*E.da+r*E.ea+n*E.fa;wa=t*E.da+x*E.ea+I*E.fa;X=u*E.da+z*E.ea+J*E.fa;B.Hd=R;B.Id=wa;B.Jd=X;B.mass=B.Kd*E.sa+B.Ld*E.ta+B.Md*E.ua+(B.Nd*E.xa+B.Od*E.ya+B.Pd*E.za)+(B.Ed*E.aa+B.Fd*E.ba+B.Gd*E.ca)+(B.Hd*E.da+B.Id*E.ea+B.Jd*E.fa);B.mass&&(B.mass=1/B.mass)}for(var Ca,Da,qa,Ka,ya,Qa,Ea,O,sa,ba,za,Ta,C=Ta=za=ba=sa=O=Ea=Qa=ya=Ka=qa=Da=Ca=0,Aa=this.info.Da;C<Aa;){var na=C++,La=this.info.rows[na],Ba=this.Wb[na],ta=La.qa,S=La.va,ha=0,ha=ha+(Ca*S.sa+Da*S.ta+qa*S.ua),ha=ha-(Ka*S.xa+ya*S.ya+Qa*S.za),ha=ha+(Ea*S.aa+O*S.ba+sa*S.ca),ha=ha-(ba*S.da+za*S.ea+Ta*S.fa),ea=(La.Fa*F.positionNgsBaumgarte-ha)*Ba.mass,da=ta.vb;ta.vb+=ea;ta.vb<La.Ha?ta.vb=La.Ha:ta.vb>La.Ga&&(ta.vb=La.Ga);ea=ta.vb-da;Ca+=Ba.Kd*ea;Da+=Ba.Ld*ea;qa+=Ba.Md*ea;Ka+=Ba.Nd*-ea;ya+=Ba.Od*-ea;Qa+=Ba.Pd*-ea;Ea+=Ba.Ed*ea;O+=Ba.Fd*ea;sa+=Ba.Gd*ea;ba+=Ba.Hd*-ea;za+=Ba.Id*-ea;Ta+=Ba.Jd*-ea}var M=this.C;M.a.v+=Ca;M.a.A+=Da;M.a.B+=qa;var T=this.D;T.a.v+=Ka;T.a.A+=ya;T.a.B+=Qa;var w=this.C,V=Math.sqrt(Ea*Ea+O*O+sa*sa),ia=.5*V,Y,oa;if(.5>ia){var ua=ia*ia;Y=.5*(1-.16666666666666666*ua+ua*ua*.008333333333333333);oa=1-.5*ua+ua*ua*.041666666666666664}else Y=Math.sin(ia)/V,oa=Math.cos(ia);var ca,Ma;ca=Ea*Y;Ma=O*Y;var va,Z;va=sa*Y;Z=oa;var Pa,Fa,Q,aa,fa=w.a.o,Ua=w.a.m,ja=w.a.s,Ga=fa+Ua+ja,P;0<Ga?(P=Math.sqrt(Ga+1),aa=.5*P,P=.5/P,Pa=(w.a.g-w.a.j)*P,Fa=(w.a.h-w.a.l)*P,Q=(w.a.i-w.a.f)*P):fa>Ua?fa>ja?(P=Math.sqrt(fa-Ua-ja+1),Pa=.5*P,P=.5/P,Fa=(w.a.f+w.a.i)*P,Q=(w.a.h+w.a.l)*P,aa=(w.a.g-w.a.j)*P):(P=Math.sqrt(ja-fa-Ua+1),Q=.5*P,P=.5/P,Pa=(w.a.h+w.a.l)*P,Fa=(w.a.j+w.a.g)*P,aa=(w.a.i-w.a.f)*P):Ua>ja?(P=Math.sqrt(Ua-ja-fa+1),Fa=.5*P,P=.5/P,Pa=(w.a.f+w.a.i)*P,Q=(w.a.j+w.a.g)*P,aa=(w.a.h-w.a.l)*P):(P=Math.sqrt(ja-fa-Ua+1),Q=.5*P,P=.5/P,Pa=(w.a.h+w.a.l)*P,Fa=(w.a.j+w.a.g)*P,aa=(w.a.i-w.a.f)*P);Pa=Z*Pa+ca*aa+Ma*Q-va*Fa;Fa=Z*Fa-ca*Q+Ma*aa+va*Pa;Q=Z*Q+ca*Fa-Ma*Pa+va*aa;aa=Z*aa-ca*Pa-Ma*Fa-va*Q;var Ya=Pa*Pa+Fa*Fa+Q*Q+aa*aa;1E-32<Ya&&(Ya=1/Math.sqrt(Ya));Pa*=Ya;Fa*=Ya;Q*=Ya;aa*=Ya;var eb=Pa,gb=Fa,lb=Q,pb=aa,ub=2*eb,ib=2*gb,hb=2*lb,ka=eb*ub,Ia=gb*ib,ab=lb*hb,bb=eb*ib,Wa=gb*hb,Va=eb*hb,qb=pb*ub,kb=pb*ib,Sa=pb*hb;w.a.o=1-Ia-ab;w.a.f=bb-Sa;w.a.h=Va+kb;w.a.i=bb+Sa;w.a.m=1-ka-ab;w.a.j=Wa-qb;w.a.l=Va-kb;w.a.g=Wa+qb;w.a.s=1-ka-Ia;var Na,Za,vb,mb,xb,nb,fb,Bb,Db;Na=w.a.o*w.Sa+w.a.f*w.Va+w.a.h*w.Ya;Za=w.a.o*w.Ta+w.a.f*w.Wa+w.a.h*w.Za;vb=w.a.o*w.Ua+w.a.f*w.Xa+w.a.h*w.$a;mb=w.a.i*w.Sa+w.a.m*w.Va+w.a.j*w.Ya;xb=w.a.i*w.Ta+w.a.m*w.Wa+w.a.j*w.Za;nb=w.a.i*w.Ua+w.a.m*w.Xa+w.a.j*w.$a;fb=w.a.l*w.Sa+w.a.g*w.Va+w.a.s*w.Ya;Bb=w.a.l*w.Ta+w.a.g*w.Wa+w.a.s*w.Za;Db=w.a.l*w.Ua+w.a.g*w.Xa+w.a.s*w.$a;w.S=Na;w.T=Za;w.U=vb;w.V=mb;w.W=xb;w.X=nb;w.Y=fb;w.Z=Bb;w.$=Db;var G,sb,jb,Fb,ob,cb,zb,Xa,tb;G=w.S*w.a.o+w.T*w.a.f+w.U*w.a.h;sb=w.S*w.a.i+w.T*w.a.m+w.U*w.a.j;jb=w.S*w.a.l+w.T*w.a.g+w.U*w.a.s;Fb=w.V*w.a.o+w.W*w.a.f+w.X*w.a.h;ob=w.V*w.a.i+w.W*w.a.m+w.X*w.a.j;cb=w.V*w.a.l+w.W*w.a.g+w.X*w.a.s;zb=w.Y*w.a.o+w.Z*w.a.f+w.$*w.a.h;Xa=w.Y*w.a.i+w.Z*w.a.m+w.$*w.a.j;tb=w.Y*w.a.l+w.Z*w.a.g+w.$*w.a.s;w.S=G;w.T=sb;w.U=jb;w.V=Fb;w.W=ob;w.X=cb;w.Y=zb;w.Z=Xa;w.$=tb;w.S*=w.O.x;w.T*=w.O.x;w.U*=w.O.x;w.V*=w.O.y;w.W*=w.O.y;w.X*=w.O.y;w.Y*=w.O.z;w.Z*=w.O.z;w.$*=w.O.z;var v=this.D,W=Math.sqrt(ba*ba+za*za+Ta*Ta),U=.5*W,db,Gb;if(.5>U){var Ra=U*U;db=.5*(1-.16666666666666666*Ra+Ra*Ra*.008333333333333333);Gb=1-.5*Ra+Ra*Ra*.041666666666666664}else db=Math.sin(U)/W,Gb=Math.cos(U);var Ha,rb;Ha=ba*db;rb=za*db;var yb,Cb;yb=Ta*db;Cb=Gb;var la,ra,ga,ma,Ja=v.a.o,$a=v.a.m,Oa=v.a.s,Jb=Ja+$a+Oa,xa;0<Jb?(xa=Math.sqrt(Jb+1),ma=.5*xa,xa=.5/xa,la=(v.a.g-v.a.j)*xa,ra=(v.a.h-v.a.l)*xa,ga=(v.a.i-v.a.f)*xa):Ja>$a?Ja>Oa?(xa=Math.sqrt(Ja-$a-Oa+1),la=.5*xa,xa=.5/xa,ra=(v.a.f+v.a.i)*xa,ga=(v.a.h+v.a.l)*xa,ma=(v.a.g-v.a.j)*xa):(xa=Math.sqrt(Oa-Ja-$a+1),ga=.5*xa,xa=.5/xa,la=(v.a.h+v.a.l)*xa,ra=(v.a.j+v.a.g)*xa,ma=(v.a.i-v.a.f)*xa):$a>Oa?(xa=Math.sqrt($a-Oa-Ja+1),ra=.5*xa,xa=.5/xa,la=(v.a.f+v.a.i)*xa,ga=(v.a.j+v.a.g)*xa,ma=(v.a.h-v.a.l)*xa):(xa=Math.sqrt(Oa-Ja-$a+1),ga=.5*xa,xa=.5/xa,la=(v.a.h+v.a.l)*xa,ra=(v.a.j+v.a.g)*xa,ma=(v.a.i-v.a.f)*xa);la=Cb*la+Ha*ma+rb*ga-yb*ra;ra=Cb*ra-Ha*ga+rb*ma+yb*la;ga=Cb*ga+Ha*ra-rb*la+yb*ma;ma=Cb*ma-Ha*la-rb*ra-yb*ga;var Hb=la*la+ra*ra+ga*ga+ma*ma;1E-32<Hb&&(Hb=1/Math.sqrt(Hb));la*=Hb;ra*=Hb;ga*=Hb;ma*=Hb;var Kb=la,Lb=ra,Ob=ga,Mb=ma,Qb=2*Kb,Nb=2*Lb,Pb=2*Ob,Rb=Kb*Qb,Sb=Lb*Nb,Tb=Ob*Pb,Yb=Kb*Nb,Wb=Lb*Pb,Zb=Kb*Pb,$b=Mb*Qb,ac=Mb*Nb,bc=Mb*Pb;v.a.o=1-Sb-Tb;v.a.f=Yb-bc;v.a.h=Zb+ac;v.a.i=Yb+bc;v.a.m=1-Rb-Tb;v.a.j=Wb-$b;v.a.l=Zb-ac;v.a.g=Wb+$b;v.a.s=1-Rb-Sb;var dc,jc,kc,hc,lc,gc,pc,Eb,qc;dc=v.a.o*v.Sa+v.a.f*v.Va+v.a.h*v.Ya;jc=v.a.o*v.Ta+v.a.f*v.Wa+v.a.h*v.Za;kc=v.a.o*v.Ua+v.a.f*v.Xa+v.a.h*v.$a;hc=v.a.i*v.Sa+v.a.m*v.Va+v.a.j*v.Ya;lc=v.a.i*v.Ta+v.a.m*v.Wa+v.a.j*v.Za;gc=v.a.i*v.Ua+v.a.m*v.Xa+v.a.j*v.$a;pc=v.a.l*v.Sa+v.a.g*v.Va+v.a.s*v.Ya;Eb=v.a.l*v.Ta+v.a.g*v.Wa+v.a.s*v.Za;qc=v.a.l*v.Ua+v.a.g*v.Xa+v.a.s*v.$a;v.S=dc;v.T=jc;v.U=kc;v.V=hc;v.W=lc;v.X=gc;v.Y=pc;v.Z=Eb;v.$=qc;var tc,wc,Pc,Qc,ic,Uc,Wc,Hd,Qd;tc=v.S*v.a.o+v.T*v.a.f+v.U*v.a.h;wc=v.S*v.a.i+v.T*v.a.m+v.U*v.a.j;Pc=v.S*v.a.l+v.T*v.a.g+v.U*v.a.s;Qc=v.V*v.a.o+v.W*v.a.f+v.X*v.a.h;ic=v.V*v.a.i+v.W*v.a.m+v.X*v.a.j;Uc=v.V*v.a.l+v.W*v.a.g+v.X*v.a.s;Wc=v.Y*v.a.o+v.Z*v.a.f+v.$*v.a.h;Hd=v.Y*v.a.i+v.Z*v.a.m+v.$*v.a.j;Qd=v.Y*v.a.l+v.Z*v.a.g+v.$*v.a.s;v.S=tc;v.T=wc;v.U=Pc;v.V=Qc;v.W=ic;v.X=Uc;v.Y=Wc;v.Z=Hd;v.$=Qd;v.S*=v.O.x;v.T*=v.O.x;v.U*=v.O.x;v.V*=v.O.y;v.W*=v.O.y;v.X*=v.O.y;v.Y*=v.O.z;v.Z*=v.O.z;v.$*=v.O.z},postSolve:function(){this.ga.bd();this.ga.hm()}});x.prototype={nm:function(a){switch(this.Jb){case 1:this.jd=this.hd=this.gd=this.td=this.sd=this.rd=this.pb=this.ob=this.nb=this.lb=this.kb=this.jb=0;break;case 0:case 2:var b,e,d,c,f;b=this.jb*a;e=this.kb*a;d=this.lb*a;c=this.nb*a;f=this.ob*a;a=this.pb*a;var h=b*b+e*e+d*d,l=c*c+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.jb*=h,this.kb*=h,this.lb*=h,b*=h,e*=h,d*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.nb*=l,this.ob*=l,this.pb*=l,c*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(c*c+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));c*=b;f*=b;a*=b;b=e;e=this.a.o;d=this.a.m;var l=this.a.s,h=e+d+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+c*e+f*d-a*l;l=b*l-c*d+f*e+a*h;d=b*d+c*l-f*h+a*e;e=b*e-c*h-f*l-a*d;a=h*h+l*l+d*d+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;d*=a;b=e*a;var k=2*f;g=2*h;e=2*d;a=f*k;c=h*g;d*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-c-d;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-d;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-c;f=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;b=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;d=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;h=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=f;this.T=a;this.U=c;this.V=b;this.W=e;this.X=d;this.Y=l;this.Z=h;this.$=g;f=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;a=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;c=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;b=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;e=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;d=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;l=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;h=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=f;this.T=a;this.U=c;this.V=b;this.W=e;this.X=d;this.Y=l;this.Z=h;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z}}},Bn:function(){if(this.rd*this.rd+this.sd*this.sd+this.td*this.td||this.gd*this.gd+this.hd*this.hd+this.jd*this.jd)switch(this.Jb){case 1:this.jd=this.hd=this.gd=this.td=this.sd=this.rd=0;break;case 0:case 2:var a,b,e,d,c,f;a=this.rd;b=this.sd;e=this.td;d=this.gd;c=this.hd;f=this.jd;this.jd=this.hd=this.gd=this.td=this.sd=this.rd=0;this.a.v+=a;this.a.A+=b;this.a.B+=e;a=Math.sqrt(d*d+c*c+f*f);b=.5*a;.5>b?(b*=b,a=.5*(1-.16666666666666666*b+b*b*.008333333333333333),b=1-.5*b+b*b*.041666666666666664):(a=Math.sin(b)/a,b=Math.cos(b));d*=a;c*=a;f*=a;a=b;var h,l;b=this.a.o;e=this.a.m;l=this.a.s;h=b+e+l;var g;0<h?(g=Math.sqrt(h+1),b=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,e=(this.a.i-this.a.f)*g):b>e?b>l?(g=Math.sqrt(b-e-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,e=(this.a.h+this.a.l)*g,b=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-b-e+1),e=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,b=(this.a.i-this.a.f)*g):e>l?(g=Math.sqrt(e-l-b+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,e=(this.a.j+this.a.g)*g,b=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-b-e+1),e=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,b=(this.a.i-this.a.f)*g);h=a*h+d*b+c*e-f*l;l=a*l-d*e+c*b+f*h;e=a*e+d*l-c*h+f*b;b=a*b-d*h-c*l-f*e;c=h*h+l*l+e*e+b*b;1E-32<c&&(c=1/Math.sqrt(c));d=h*c;h=l*c;e*=c;a=b*c;var k=2*d;g=2*h;b=2*e;c=d*k;f=h*g;e*=b;l=d*g;h*=b;d*=b;k*=a;g*=a;a*=b;this.a.o=1-f-e;this.a.f=l-a;this.a.h=d+g;this.a.i=l+a;this.a.m=1-c-e;this.a.j=h-k;this.a.l=d-g;this.a.g=h+k;this.a.s=1-c-f;d=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;a=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;b=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;e=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;h=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=d;this.T=c;this.U=f;this.V=a;this.W=b;this.X=e;this.Y=l;this.Z=h;this.$=g;d=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;c=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;f=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;a=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;b=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;e=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;l=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;h=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=d;this.T=c;this.U=f;this.V=a;this.W=b;this.X=e;this.Y=l;this.Z=h;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z}},ck:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.Gc;null!=m;){var p=m.M,r=m.Fb;r.Xe();var n=m.Vk*r.Sf,t,x,F,u,z,I,D,J;t=m.ha.o*r.Dg+m.ha.f*r.Gg+m.ha.h*r.Jg;x=m.ha.o*r.Eg+m.ha.f*r.Hg+m.ha.h*r.Kg;F=m.ha.o*r.Fg+m.ha.f*r.Ig+m.ha.h*r.Lg;u=m.ha.i*r.Dg+m.ha.m*r.Gg+m.ha.j*r.Jg;z=m.ha.i*r.Eg+m.ha.m*r.Hg+m.ha.j*r.Kg;I=m.ha.i*r.Fg+m.ha.m*r.Ig+m.ha.j*r.Lg;D=m.ha.l*r.Dg+m.ha.g*r.Gg+m.ha.s*r.Jg;J=m.ha.l*r.Eg+m.ha.g*r.Hg+m.ha.s*r.Kg;var r=m.ha.l*r.Fg+m.ha.g*r.Ig+m.ha.s*r.Lg,y,B,E,K,H,N;y=t*m.ha.o+x*m.ha.f+F*m.ha.h;B=t*m.ha.i+x*m.ha.m+F*m.ha.j;F=t*m.ha.l+x*m.ha.g+F*m.ha.s;E=u*m.ha.o+z*m.ha.f+I*m.ha.h;K=u*m.ha.i+z*m.ha.m+I*m.ha.j;I=u*m.ha.l+z*m.ha.g+I*m.ha.s;H=D*m.ha.o+J*m.ha.f+r*m.ha.h;N=D*m.ha.i+J*m.ha.m+r*m.ha.j;r=D*m.ha.l+J*m.ha.g+r*m.ha.s;t=y;x=B;u=E;z=K;D=H;J=N;t*=n;x*=n;F*=n;u*=n;z*=n;I*=n;D*=n;J*=n;var r=r*n,R,pa,X;E=m.ha.v*m.ha.v;K=m.ha.A*m.ha.A;R=m.ha.B*m.ha.B;H=-m.ha.v*m.ha.A;N=-m.ha.A*m.ha.B;X=-m.ha.B*m.ha.v;m=K+R;y=H;B=X;R=E+R;pa=N;E+=K;t+=m*n;x+=y*n;F+=B*n;u+=H*n;z+=R*n;I+=pa*n;D+=X*n;J+=N*n;r+=E*n;k+=n;a+=t;b+=x;e+=F;d+=u;c+=z;f+=I;h+=D;l+=J;g+=r;m=p}this.Lf=k;this.Td=a;this.Ud=b;this.Vd=e;this.Wd=d;this.Xd=c;this.Yd=f;this.Zd=h;this.$d=l;this.ae=g;if(0<this.Lf&&0<this.Td*(this.Xd*this.ae-this.Yd*this.$d)-this.Ud*(this.Wd*this.ae-this.Yd*this.Zd)+this.Vd*(this.Wd*this.$d-this.Xd*this.Zd)&&0==this.Jb){this.qb=1/this.Lf;a=this.Xd*this.ae-this.Yd*this.$d;b=this.Wd*this.ae-this.Yd*this.Zd;e=this.Wd*this.$d-this.Xd*this.Zd;d=this.Td*a-this.Ud*b+this.Vd*e;if(-1E-32>d||1E-32<d)d=1/d;this.Sa=a*d;this.Ta=-(this.Ud*this.ae-this.Vd*this.$d)*d;this.Ua=(this.Ud*this.Yd-this.Vd*this.Xd)*d;this.Va=-b*d;this.Wa=(this.Td*this.ae-this.Vd*this.Zd)*d;this.Xa=-(this.Td*this.Yd-this.Vd*this.Wd)*d;this.Ya=e*d;this.Za=-(this.Td*this.$d-this.Ud*this.Zd)*d;this.$a=(this.Td*this.Xd-this.Ud*this.Wd)*d;this.Ki=this.Sa;this.Li=this.Ta;this.Mi=this.Ua;this.Ni=this.Va;this.Oi=this.Wa;this.Pi=this.Xa;this.Qi=this.Ya;this.Ri=this.Za;this.Si=this.$a;this.Sa=this.Ki*this.O.x;this.Ta=this.Li*this.O.x;this.Ua=this.Mi*this.O.x;this.Va=this.Ni*this.O.y;this.Wa=this.Oi*this.O.y;this.Xa=this.Pi*this.O.y;this.Ya=this.Qi*this.O.z;this.Za=this.Ri*this.O.z;this.$a=this.Si*this.O.z}else this.Si=this.Ri=this.Qi=this.Pi=this.Oi=this.Ni=this.Mi=this.Li=this.Ki=this.$a=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.qb=0,0==this.Jb&&(this.Jb=1);a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;b=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;e=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;d=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;c=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;f=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;l=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;this.Bb=!1;this.wb=0},Om:function(){var a=new n;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},Pm:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},Po:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.ja;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Gc;null!=a;){var b=a.M,e=this.ja,d=this.a,c=a.ja,f=a.ha,h,l,g,k,m,p,n,q,t;h=e.o*f.o+e.f*f.i+e.h*f.l;l=e.o*f.f+e.f*f.m+e.h*f.g;g=e.o*f.h+e.f*f.j+e.h*f.s;k=e.i*f.o+e.m*f.i+e.j*f.l;m=e.i*f.f+e.m*f.m+e.j*f.g;p=e.i*f.h+e.m*f.j+e.j*f.s;n=e.l*f.o+e.g*f.i+e.s*f.l;q=e.l*f.f+e.g*f.m+e.s*f.g;t=e.l*f.h+e.g*f.j+e.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=p;c.l=n;c.g=q;c.s=t;h=e.o*f.v+e.f*f.A+e.h*f.B;l=e.i*f.v+e.m*f.A+e.j*f.B;f=e.l*f.v+e.g*f.A+e.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=e.v;c.A+=e.A;c.B+=e.B;e=a.a;c=a.ha;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;p=d.l*c.o+d.g*c.i+d.s*c.l;n=d.l*c.f+d.g*c.m+d.s*c.g;q=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=p;e.g=n;e.s=q;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Fb.Lb(a.u,a.ja);d=a.u.na;e=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=d<a.u.na?d:a.u.na;a.u.oa=e<a.u.oa?e:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.ub&&(d=a.a.v-a.ja.v,e=a.a.A-a.ja.A,c=a.a.B-a.ja.B,f=a.mc,f.x=d,f.y=e,f.z=c,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=b}this.Bb=!1;this.wb=0},cn:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.ja;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Gc;null!=b;){e=b.M;var d=this.ja;a=this.a;var c=b.ja,f=b.ha,h,l,g,k,m,p,n,q,t;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;p=d.i*f.h+d.m*f.j+d.j*f.s;n=d.l*f.o+d.g*f.i+d.s*f.l;q=d.l*f.f+d.g*f.m+d.s*f.g;t=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=p;c.l=n;c.g=q;c.s=t;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;d=b.a;c=b.ha;f=a.o*c.o+a.f*c.i+a.h*c.l;h=a.o*c.f+a.f*c.m+a.h*c.g;l=a.o*c.h+a.f*c.j+a.h*c.s;g=a.i*c.o+a.m*c.i+a.j*c.l;k=a.i*c.f+a.m*c.m+a.j*c.g;m=a.i*c.h+a.m*c.j+a.j*c.s;p=a.l*c.o+a.g*c.i+a.s*c.l;n=a.l*c.f+a.g*c.m+a.s*c.g;q=a.l*c.h+a.g*c.j+a.s*c.s;d.o=f;d.f=h;d.h=l;d.i=g;d.m=k;d.j=m;d.l=p;d.g=n;d.s=q;f=a.o*c.v+a.f*c.A+a.h*c.B;h=a.i*c.v+a.m*c.A+a.j*c.B;c=a.l*c.v+a.g*c.A+a.s*c.B;d.v=f;d.A=h;d.B=c;d.v+=a.v;d.A+=a.A;d.B+=a.B;b.Fb.Lb(b.u,b.ja);a=b.u.na;d=b.u.oa;c=b.u.pa;f=b.u.ka;h=b.u.la;l=b.u.ma;b.Fb.Lb(b.u,b.a);b.u.na=a<b.u.na?a:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.pa=c<b.u.pa?c:b.u.pa;b.u.ka=f>b.u.ka?f:b.u.ka;b.u.la=h>b.u.la?h:b.u.la;b.u.ma=l>b.u.ma?l:b.u.ma;null!=b.ub&&(a=b.a.v-b.ja.v,d=b.a.A-b.ja.A,c=b.a.B-b.ja.B,f=b.mc,f.x=a,f.y=d,f.z=c,b.Vb.jc.hc.Qd(b.ub,b.u,b.mc));b=e}this.Bb=!1;this.wb=0},Vm:function(){var a=new I;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},Wm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},Qo:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,d,c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;b=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;e=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;d=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;c=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;f=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;l=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;a=this.ja;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Gc;null!=a;){b=a.M;d=this.ja;e=this.a;c=a.ja;f=a.ha;var k,m,p,n,q,t;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;p=d.i*f.h+d.m*f.j+d.j*f.s;n=d.l*f.o+d.g*f.i+d.s*f.l;q=d.l*f.f+d.g*f.m+d.s*f.g;t=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=p;c.l=n;c.g=q;c.s=t;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;d=a.a;c=a.ha;f=e.o*c.o+e.f*c.i+e.h*c.l;h=e.o*c.f+e.f*c.m+e.h*c.g;l=e.o*c.h+e.f*c.j+e.h*c.s;g=e.i*c.o+e.m*c.i+e.j*c.l;k=e.i*c.f+e.m*c.m+e.j*c.g;m=e.i*c.h+e.m*c.j+e.j*c.s;p=e.l*c.o+e.g*c.i+e.s*c.l;n=e.l*c.f+e.g*c.m+e.s*c.g;q=e.l*c.h+e.g*c.j+e.s*c.s;d.o=f;d.f=h;d.h=l;d.i=g;d.m=k;d.j=m;d.l=p;d.g=n;d.s=q;f=e.o*c.v+e.f*c.A+e.h*c.B;h=e.i*c.v+e.m*c.A+e.j*c.B;c=e.l*c.v+e.g*c.A+e.s*c.B;d.v=f;d.A=h;d.B=c;d.v+=e.v;d.A+=e.A;d.B+=e.B;a.Fb.Lb(a.u,a.ja);e=a.u.na;d=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.ub&&(e=a.a.v-a.ja.v,d=a.a.A-a.ja.A,c=a.a.B-a.ja.B,f=a.mc,f.x=e,f.y=d,f.z=c,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=b}this.Bb=!1;this.wb=0},Ro:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.a.o=e*d;this.a.f=-e*f;this.a.h=c;this.a.i=b*f+d*a*c;this.a.m=b*d-a*c*f;this.a.j=-e*a;this.a.l=a*f-b*d*c;this.a.g=d*a+b*c*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;b=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=c;this.U=f;this.V=e;this.W=d;this.X=b;this.Y=h;this.Z=l;this.$=g;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;c=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;f=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;e=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;d=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;b=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;l=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=c;this.U=f;this.V=e;this.W=d;this.X=b;this.Y=h;this.Z=l;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;a=this.ja;c=this.a;a.v=c.v;a.A=c.A;a.B=c.B;a.o=c.o;a.f=c.f;a.h=c.h;a.i=c.i;a.m=c.m;a.j=c.j;a.l=c.l;a.g=c.g;a.s=c.s;for(a=this.Gc;null!=a;){c=a.M;e=this.ja;f=this.a;d=a.ja;b=a.ha;var k,m,p,n,q,t;h=e.o*b.o+e.f*b.i+e.h*b.l;l=e.o*b.f+e.f*b.m+e.h*b.g;g=e.o*b.h+e.f*b.j+e.h*b.s;k=e.i*b.o+e.m*b.i+e.j*b.l;m=e.i*b.f+e.m*b.m+e.j*b.g;p=e.i*b.h+e.m*b.j+e.j*b.s;n=e.l*b.o+e.g*b.i+e.s*b.l;q=e.l*b.f+e.g*b.m+e.s*b.g;t=e.l*b.h+e.g*b.j+e.s*b.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=p;d.l=n;d.g=q;d.s=t;h=e.o*b.v+e.f*b.A+e.h*b.B;l=e.i*b.v+e.m*b.A+e.j*b.B;b=e.l*b.v+e.g*b.A+e.s*b.B;d.v=h;d.A=l;d.B=b;d.v+=e.v;d.A+=e.A;d.B+=e.B;e=a.a;d=a.ha;b=f.o*d.o+f.f*d.i+f.h*d.l;h=f.o*d.f+f.f*d.m+f.h*d.g;l=f.o*d.h+f.f*d.j+f.h*d.s;g=f.i*d.o+f.m*d.i+f.j*d.l;k=f.i*d.f+f.m*d.m+f.j*d.g;m=f.i*d.h+f.m*d.j+f.j*d.s;p=f.l*d.o+f.g*d.i+f.s*d.l;n=f.l*d.f+f.g*d.m+f.s*d.g;q=f.l*d.h+f.g*d.j+f.s*d.s;e.o=b;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=p;e.g=n;e.s=q;b=f.o*d.v+f.f*d.A+f.h*d.B;h=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;e.v=b;e.A=h;e.B=d;e.v+=f.v;e.A+=f.A;e.B+=f.B;a.Fb.Lb(a.u,a.ja);f=a.u.na;e=a.u.oa;d=a.u.pa;b=a.u.ka;h=a.u.la;l=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=f<a.u.na?f:a.u.na;a.u.oa=e<a.u.oa?e:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=b>a.u.ka?b:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.ub&&(f=a.a.v-a.ja.v,e=a.a.A-a.ja.A,d=a.a.B-a.ja.B,b=a.mc,b.x=f,b.y=e,b.z=d,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=c}this.Bb=!1;this.wb=0},Ho:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+d*this.a.l;m=b*this.a.f+e*this.a.m+d*this.a.g;b=b*this.a.h+e*this.a.j+d*this.a.s;e=c*this.a.o+f*this.a.i+h*this.a.l;d=c*this.a.f+f*this.a.m+h*this.a.g;c=c*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=d;this.a.j=c;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;g=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;a=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;m=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;c=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;f=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;h=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;b=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=l;this.T=g;this.U=a;this.V=m;this.W=k;this.X=c;this.Y=f;this.Z=h;this.$=b;l=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;g=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;a=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;m=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;k=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;c=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;f=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;h=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;b=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=l;this.T=g;this.U=a;this.V=m;this.W=k;this.X=c;this.Y=f;this.Z=h;this.$=b;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;l=this.ja;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Gc;null!=l;){g=l.M;m=this.ja;a=this.a;k=l.ja;c=l.ha;var p,n,q,t;f=m.o*c.o+m.f*c.i+m.h*c.l;h=m.o*c.f+m.f*c.m+m.h*c.g;b=m.o*c.h+m.f*c.j+m.h*c.s;e=m.i*c.o+m.m*c.i+m.j*c.l;d=m.i*c.f+m.m*c.m+m.j*c.g;p=m.i*c.h+m.m*c.j+m.j*c.s;n=m.l*c.o+m.g*c.i+m.s*c.l;q=m.l*c.f+m.g*c.m+m.s*c.g;t=m.l*c.h+m.g*c.j+m.s*c.s;k.o=f;k.f=h;k.h=b;k.i=e;k.m=d;k.j=p;k.l=n;k.g=q;k.s=t;f=m.o*c.v+m.f*c.A+m.h*c.B;h=m.i*c.v+m.m*c.A+m.j*c.B;c=m.l*c.v+m.g*c.A+m.s*c.B;k.v=f;k.A=h;k.B=c;k.v+=m.v;k.A+=m.A;k.B+=m.B;m=l.a;k=l.ha;c=a.o*k.o+a.f*k.i+a.h*k.l;f=a.o*k.f+a.f*k.m+a.h*k.g;h=a.o*k.h+a.f*k.j+a.h*k.s;b=a.i*k.o+a.m*k.i+a.j*k.l;e=a.i*k.f+a.m*k.m+a.j*k.g;d=a.i*k.h+a.m*k.j+a.j*k.s;p=a.l*k.o+a.g*k.i+a.s*k.l;n=a.l*k.f+a.g*k.m+a.s*k.g;q=a.l*k.h+a.g*k.j+a.s*k.s;m.o=c;m.f=f;m.h=h;m.i=b;m.m=e;m.j=d;m.l=p;m.g=n;m.s=q;c=a.o*k.v+a.f*k.A+a.h*k.B;f=a.i*k.v+a.m*k.A+a.j*k.B;k=a.l*k.v+a.g*k.A+a.s*k.B;m.v=c;m.A=f;m.B=k;m.v+=a.v;m.A+=a.A;m.B+=a.B;l.Fb.Lb(l.u,l.ja);a=l.u.na;m=l.u.oa;k=l.u.pa;c=l.u.ka;f=l.u.la;h=l.u.ma;l.Fb.Lb(l.u,l.a);l.u.na=a<l.u.na?a:l.u.na;l.u.oa=m<l.u.oa?m:l.u.oa;l.u.pa=k<l.u.pa?k:l.u.pa;l.u.ka=c>l.u.ka?c:l.u.ka;l.u.la=f>l.u.la?f:l.u.la;l.u.ma=h>l.u.ma?h:l.u.ma;null!=l.ub&&(a=l.a.v-l.ja.v,m=l.a.A-l.ja.A,k=l.a.B-l.ja.B,c=l.mc,c.x=a,c.y=m,c.z=k,l.Vb.jc.hc.Qd(l.ub,l.u,l.mc));l=g}this.Bb=!1;this.wb=0},Mo:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var p=Math.cos(a);d=l*p;c=-l*k;a=m*k+p*h*g;b=m*p-h*g*k;f=-l*h;e=h*k-m*p*g;h=p*h+m*g*k;l*=m;k=d*this.a.o+c*this.a.i+g*this.a.l;m=d*this.a.f+c*this.a.m+g*this.a.g;g=d*this.a.h+c*this.a.j+g*this.a.s;d=a*this.a.o+b*this.a.i+f*this.a.l;c=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=d;this.a.m=c;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;g=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;k=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;m=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;l=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=e;this.T=a;this.U=b;this.V=f;this.W=h;this.X=g;this.Y=k;this.Z=m;this.$=l;e=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;a=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;b=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;f=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;h=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;g=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;k=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;m=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;l=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=e;this.T=a;this.U=b;this.V=f;this.W=h;this.X=g;this.Y=k;this.Z=m;this.$=l;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;e=this.ja;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Gc;null!=e;){a=e.M;f=this.ja;b=this.a;h=e.ja;var g=e.ha,n,q,t,k=f.o*g.o+f.f*g.i+f.h*g.l,m=f.o*g.f+f.f*g.m+f.h*g.g;l=f.o*g.h+f.f*g.j+f.h*g.s;d=f.i*g.o+f.m*g.i+f.j*g.l;c=f.i*g.f+f.m*g.m+f.j*g.g;p=f.i*g.h+f.m*g.j+f.j*g.s;n=f.l*g.o+f.g*g.i+f.s*g.l;q=f.l*g.f+f.g*g.m+f.s*g.g;t=f.l*g.h+f.g*g.j+f.s*g.s;h.o=k;h.f=m;h.h=l;h.i=d;h.m=c;h.j=p;h.l=n;h.g=q;h.s=t;k=f.o*g.v+f.f*g.A+f.h*g.B;m=f.i*g.v+f.m*g.A+f.j*g.B;g=f.l*g.v+f.g*g.A+f.s*g.B;h.v=k;h.A=m;h.B=g;h.v+=f.v;h.A+=f.A;h.B+=f.B;f=e.a;h=e.ha;g=b.o*h.o+b.f*h.i+b.h*h.l;k=b.o*h.f+b.f*h.m+b.h*h.g;m=b.o*h.h+b.f*h.j+b.h*h.s;l=b.i*h.o+b.m*h.i+b.j*h.l;d=b.i*h.f+b.m*h.m+b.j*h.g;c=b.i*h.h+b.m*h.j+b.j*h.s;p=b.l*h.o+b.g*h.i+b.s*h.l;n=b.l*h.f+b.g*h.m+b.s*h.g;q=b.l*h.h+b.g*h.j+b.s*h.s;f.o=g;f.f=k;f.h=m;f.i=l;f.m=d;f.j=c;f.l=p;f.g=n;f.s=q;g=b.o*h.v+b.f*h.A+b.h*h.B;k=b.i*h.v+b.m*h.A+b.j*h.B;h=b.l*h.v+b.g*h.A+b.s*h.B;f.v=g;f.A=k;f.B=h;f.v+=b.v;f.A+=b.A;f.B+=b.B;e.Fb.Lb(e.u,e.ja);b=e.u.na;f=e.u.oa;h=e.u.pa;g=e.u.ka;k=e.u.la;m=e.u.ma;e.Fb.Lb(e.u,e.a);e.u.na=b<e.u.na?b:e.u.na;e.u.oa=f<e.u.oa?f:e.u.oa;e.u.pa=h<e.u.pa?h:e.u.pa;e.u.ka=g>e.u.ka?g:e.u.ka;e.u.la=k>e.u.la?k:e.u.la;e.u.ma=m>e.u.ma?m:e.u.ma;null!=e.ub&&(b=e.a.v-e.ja.v,f=e.a.A-e.ja.A,h=e.a.B-e.ja.B,g=e.mc,g.x=b,g.y=f,g.z=h,e.Vb.jc.hc.Qd(e.ub,e.u,e.mc));e=a}this.Bb=!1;this.wb=0},Mm:function(){var a=new wa,b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},Nm:function(a){var b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},No:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.a.o=1-g-d;this.a.f=k-c;this.a.h=b+h;this.a.i=k+c;this.a.m=1-a-d;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;g=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;l=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;k=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;e=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;b=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=g;this.U=c;this.V=l;this.W=d;this.X=k;this.Y=h;this.Z=e;this.$=b;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;g=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;c=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;l=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;d=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;k=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;e=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;b=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=g;this.U=c;this.V=l;this.W=d;this.X=k;this.Y=h;this.Z=e;this.$=b;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;a=this.ja;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Gc;null!=a;){g=a.M;l=this.ja;c=this.a;d=a.ja;var k=a.ha,m,p,n,q,t,h=l.o*k.o+l.f*k.i+l.h*k.l;e=l.o*k.f+l.f*k.m+l.h*k.g;b=l.o*k.h+l.f*k.j+l.h*k.s;f=l.i*k.o+l.m*k.i+l.j*k.l;m=l.i*k.f+l.m*k.m+l.j*k.g;p=l.i*k.h+l.m*k.j+l.j*k.s;n=l.l*k.o+l.g*k.i+l.s*k.l;q=l.l*k.f+l.g*k.m+l.s*k.g;t=l.l*k.h+l.g*k.j+l.s*k.s;d.o=h;d.f=e;d.h=b;d.i=f;d.m=m;d.j=p;d.l=n;d.g=q;d.s=t;h=l.o*k.v+l.f*k.A+l.h*k.B;e=l.i*k.v+l.m*k.A+l.j*k.B;k=l.l*k.v+l.g*k.A+l.s*k.B;d.v=h;d.A=e;d.B=k;d.v+=l.v;d.A+=l.A;d.B+=l.B;l=a.a;d=a.ha;k=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;e=c.o*d.h+c.f*d.j+c.h*d.s;b=c.i*d.o+c.m*d.i+c.j*d.l;f=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;p=c.l*d.o+c.g*d.i+c.s*d.l;n=c.l*d.f+c.g*d.m+c.s*d.g;q=c.l*d.h+c.g*d.j+c.s*d.s;l.o=k;l.f=h;l.h=e;l.i=b;l.m=f;l.j=m;l.l=p;l.g=n;l.s=q;k=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;l.v=k;l.A=h;l.B=d;l.v+=c.v;l.A+=c.A;l.B+=c.B;a.Fb.Lb(a.u,a.ja);c=a.u.na;l=a.u.oa;d=a.u.pa;k=a.u.ka;h=a.u.la;e=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=c<a.u.na?c:a.u.na;a.u.oa=l<a.u.oa?l:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=k>a.u.ka?k:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=e>a.u.ma?e:a.u.ma;null!=a.ub&&(c=a.a.v-a.ja.v,l=a.a.A-a.ja.A,d=a.a.B-a.ja.B,k=a.mc,k.x=c,k.y=l,k.z=d,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=g}this.Bb=!1;this.wb=0},Xm:function(){var a=this.a,b=new Ua;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Ym:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},So:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,d,c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;b=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;e=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;d=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;c=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;f=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;l=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;a=this.ja;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Gc;null!=a;){b=a.M;d=this.ja;e=this.a;c=a.ja;f=a.ha;var k,m,p,n,q,t;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;p=d.i*f.h+d.m*f.j+d.j*f.s;n=d.l*f.o+d.g*f.i+d.s*f.l;q=d.l*f.f+d.g*f.m+d.s*f.g;t=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=p;c.l=n;c.g=q;c.s=t;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;d=a.a;c=a.ha;f=e.o*c.o+e.f*c.i+e.h*c.l;h=e.o*c.f+e.f*c.m+e.h*c.g;l=e.o*c.h+e.f*c.j+e.h*c.s;g=e.i*c.o+e.m*c.i+e.j*c.l;k=e.i*c.f+e.m*c.m+e.j*c.g;m=e.i*c.h+e.m*c.j+e.j*c.s;p=e.l*c.o+e.g*c.i+e.s*c.l;n=e.l*c.f+e.g*c.m+e.s*c.g;q=e.l*c.h+e.g*c.j+e.s*c.s;d.o=f;d.f=h;d.h=l;d.i=g;d.m=k;d.j=m;d.l=p;d.g=n;d.s=q;f=e.o*c.v+e.f*c.A+e.h*c.B;h=e.i*c.v+e.m*c.A+e.j*c.B;c=e.l*c.v+e.g*c.A+e.s*c.B;d.v=f;d.A=h;d.B=c;d.v+=e.v;d.A+=e.A;d.B+=e.B;a.Fb.Lb(a.u,a.ja);e=a.u.na;d=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.ub&&(e=a.a.v-a.ja.v,d=a.a.A-a.ja.A,c=a.a.B-a.ja.B,f=a.mc,f.x=e,f.y=d,f.z=c,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=b}this.Bb=!1;this.wb=0},ph:function(){return this.Lf},cf:function(){var a=new I;a.e00=this.Td;a.e01=this.Ud;a.e02=this.Vd;a.e10=this.Wd;a.e11=this.Xd;a.e12=this.Yd;a.e20=this.Zd;a.e21=this.$d;a.e22=this.ae;return a},gg:function(a){a.e00=this.Td;a.e01=this.Ud;a.e02=this.Vd;a.e10=this.Wd;a.e11=this.Xd;a.e12=this.Yd;a.e20=this.Zd;a.e21=this.$d;a.e22=this.ae},Di:function(){var a=new fj;a.mass=this.Lf;var b=a.localInertia;b.e00=this.Td;b.e01=this.Ud;b.e02=this.Vd;b.e10=this.Wd;b.e11=this.Xd;b.e12=this.Yd;b.e20=this.Zd;b.e21=this.$d;b.e22=this.ae;return a},Ei:function(a){a.mass=this.Lf;a=a.localInertia;a.e00=this.Td;a.e01=this.Ud;a.e02=this.Vd;a.e10=this.Wd;a.e11=this.Xd;a.e12=this.Yd;a.e20=this.Zd;a.e21=this.$d;a.e22=this.ae},ln:function(a){this.Lf=a.mass;a=a.localInertia;this.Td=a.e00;this.Ud=a.e01;this.Vd=a.e02;this.Wd=a.e10;this.Xd=a.e11;this.Yd=a.e12;this.Zd=a.e20;this.$d=a.e21;this.ae=a.e22;if(0<this.Lf&&0<this.Td*(this.Xd*this.ae-this.Yd*this.$d)-this.Ud*(this.Wd*this.ae-this.Yd*this.Zd)+this.Vd*(this.Wd*this.$d-this.Xd*this.Zd)&&0==this.Jb){this.qb=1/this.Lf;a=this.Xd*this.ae-this.Yd*this.$d;var b=this.Wd*this.ae-this.Yd*this.Zd,e=this.Wd*this.$d-this.Xd*this.Zd,d=this.Td*a-this.Ud*b+this.Vd*e;if(-1E-32>d||1E-32<d)d=1/d;this.Sa=a*d;this.Ta=-(this.Ud*this.ae-this.Vd*this.$d)*d;this.Ua=(this.Ud*this.Yd-this.Vd*this.Xd)*d;this.Va=-b*d;this.Wa=(this.Td*this.ae-this.Vd*this.Zd)*d;this.Xa=-(this.Td*this.Yd-this.Vd*this.Wd)*d;this.Ya=e*d;this.Za=-(this.Td*this.$d-this.Ud*this.Zd)*d;this.$a=(this.Td*this.Xd-this.Ud*this.Wd)*d;this.Ki=this.Sa;this.Li=this.Ta;this.Mi=this.Ua;this.Ni=this.Va;this.Oi=this.Wa;this.Pi=this.Xa;this.Qi=this.Ya;this.Ri=this.Za;this.Si=this.$a;this.Sa=this.Ki*this.O.x;this.Ta=this.Li*this.O.x;this.Ua=this.Mi*this.O.x;this.Va=this.Ni*this.O.y;this.Wa=this.Oi*this.O.y;this.Xa=this.Pi*this.O.y;this.Ya=this.Qi*this.O.z;this.Za=this.Ri*this.O.z;this.$a=this.Si*this.O.z}else this.Si=this.Ri=this.Qi=this.Pi=this.Oi=this.Ni=this.Mi=this.Li=this.Ki=this.$a=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.qb=0,0==this.Jb&&(this.Jb=1);var c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;b=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;e=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;d=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;c=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;f=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;l=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;this.Bb=!1;this.wb=0},fm:function(){var a=this.O;return new n(a.x,a.y,a.z)},mn:function(a){var b=this.O;b.x=a.x;b.y=a.y;b.z=a.z;var e,d,c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;a=this.S*this.a.o+this.T*this.a.f+this.U*this.a.h;b=this.S*this.a.i+this.T*this.a.m+this.U*this.a.j;e=this.S*this.a.l+this.T*this.a.g+this.U*this.a.s;d=this.V*this.a.o+this.W*this.a.f+this.X*this.a.h;c=this.V*this.a.i+this.W*this.a.m+this.X*this.a.j;f=this.V*this.a.l+this.W*this.a.g+this.X*this.a.s;h=this.Y*this.a.o+this.Z*this.a.f+this.$*this.a.h;l=this.Y*this.a.i+this.Z*this.a.m+this.$*this.a.j;g=this.Y*this.a.l+this.Z*this.a.g+this.$*this.a.s;this.S=a;this.T=b;this.U=e;this.V=d;this.W=c;this.X=f;this.Y=h;this.Z=l;this.$=g;this.S*=this.O.x;this.T*=this.O.x;this.U*=this.O.x;this.V*=this.O.y;this.W*=this.O.y;this.X*=this.O.y;this.Y*=this.O.z;this.Z*=this.O.z;this.$*=this.O.z;this.Bb=!1;this.wb=0},Ke:function(){var a=new n;a.x=this.jb;a.y=this.kb;a.z=this.lb;return a},bf:function(a){a.x=this.jb;a.y=this.kb;a.z=this.lb},kn:function(a){1==this.Jb?this.lb=this.kb=this.jb=0:(this.jb=a.x,this.kb=a.y,this.lb=a.z);this.Bb=!1;this.wb=0},Wc:function(){var a=new n;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},vd:function(a){a.x=this.jb;a.y=this.kb;a.z=this.lb},fn:function(a){1==this.Jb?this.pb=this.ob=this.nb=0:(this.nb=a.x,this.ob=a.y,this.pb=a.z);this.Bb=!1;this.wb=0},mb:function(a){if(1!=this.Jb){var b,e;b=a.x;e=a.y;a=a.z;this.jb+=b;this.kb+=e;this.lb+=a}this.Bb=!1;this.wb=0},wa:function(a){if(1!=this.Jb){var b,e;b=a.x;e=a.y;a=a.z;this.nb+=b;this.ob+=e;this.pb+=a}this.Bb=!1;this.wb=0},wc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.jb+=e*this.qb;this.kb+=d*this.qb;this.lb+=a*this.qb;var c,f,h;c=b.x;f=b.y;h=b.z;c-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*d;a=h*e-c*a;c=c*d-f*e;e=this.S*b+this.T*a+this.U*c;d=this.V*b+this.W*a+this.X*c;b=this.Y*b+this.Z*a+this.$*c;this.nb+=e;this.ob+=d;this.pb+=b;this.Bb=!1;this.wb=0},xc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.jb+=b*this.qb;this.kb+=e*this.qb;this.lb+=a*this.qb;this.Bb=!1;this.wb=0},Kb:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c;a=this.S*b+this.T*e+this.U*d;c=this.V*b+this.W*e+this.X*d;b=this.Y*b+this.Z*e+this.$*d;this.nb+=a;this.ob+=c;this.pb+=b;this.Bb=!1;this.wb=0},kc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.ai+=e;this.bi+=d;this.ci+=a;var c,f;c=b.x;f=b.y;b=b.z;c-=this.a.v;f-=this.a.A;b-=this.a.B;this.Of+=f*a-b*d;this.Pf+=b*e-c*a;this.Qf+=c*d-f*e;this.Bb=!1;this.wb=0},lc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.ai+=b;this.bi+=e;this.ci+=a;this.Bb=!1;this.wb=0},Dc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.Of+=b;this.Pf+=e;this.Qf+=a;this.Bb=!1;this.wb=0},He:function(){var a=new n;a.x=this.wh;a.y=this.xh;a.z=this.yh;return a},Ie:function(a){a.x=this.wh;a.y=this.xh;a.z=this.yh},Hc:function(){var a=new n;a.x=this.rh;a.y=this.sh;a.z=this.th;return a},Uc:function(a){a.x=this.rh;a.y=this.sh;a.z=this.th},Fe:function(){return this.vh},hn:function(a){this.vh=a;this.Bb=!1;this.wb=0},hg:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new n;d.x=b;d.y=e;d.z=a;return d},ig:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;e-=this.a.v;d-=this.a.A;c-=this.a.B;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},jg:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new n;d.x=b;d.y=e;d.z=a;return d},kg:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},um:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d+this.a.v;e=c+this.a.A;a+=this.a.B;d=new n;d.x=b;d.y=e;d.z=a;return d},ym:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;c=this.a.l*e+this.a.g*d+this.a.s*c;e=a+this.a.v;d=f+this.a.A;c+=this.a.B;b.x=e;b.y=d;b.z=c},Am:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d;e=c;d=new n;d.x=b;d.y=e;d.z=a;return d},Bm:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;e=this.a.l*e+this.a.g*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Jm:function(){return this.Rg},sm:function(){return this.Gc},Fi:function(){return this.Ne},ie:function(){return this.Mb},gk:function(){return this.Ah},Ge:function(){return this.Me},Cb:function(a){null==this.Gc?this.Gc=a:(this.Yi.M=a,a.ia=this.Yi);this.Yi=a;this.Rg++;a.Vb=this;if(null!=this.jc){var b=this.jc;a.ub=b.hc.ni(a,a.u);a.Ic=b.om++;b.Rg++}this.ck();for(a=this.Gc;null!=a;){var b=a.M,e=this.ja,d=this.a,c=a.ja,f=a.ha,h,l,g,k,m,p,n,q,t;h=e.o*f.o+e.f*f.i+e.h*f.l;l=e.o*f.f+e.f*f.m+e.h*f.g;g=e.o*f.h+e.f*f.j+e.h*f.s;k=e.i*f.o+e.m*f.i+e.j*f.l;m=e.i*f.f+e.m*f.m+e.j*f.g;p=e.i*f.h+e.m*f.j+e.j*f.s;n=e.l*f.o+e.g*f.i+e.s*f.l;q=e.l*f.f+e.g*f.m+e.s*f.g;t=e.l*f.h+e.g*f.j+e.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=p;c.l=n;c.g=q;c.s=t;h=e.o*f.v+e.f*f.A+e.h*f.B;l=e.i*f.v+e.m*f.A+e.j*f.B;f=e.l*f.v+e.g*f.A+e.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=e.v;c.A+=e.A;c.B+=e.B;e=a.a;c=a.ha;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;p=d.l*c.o+d.g*c.i+d.s*c.l;n=d.l*c.f+d.g*c.m+d.s*c.g;q=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=p;e.g=n;e.s=q;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Fb.Lb(a.u,a.ja);d=a.u.na;e=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=d<a.u.na?d:a.u.na;a.u.oa=e<a.u.oa?e:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.ub&&(d=a.a.v-a.ja.v,e=a.a.A-a.ja.A,c=a.a.B-a.ja.B,f=a.mc,f.x=d,f.y=e,f.z=c,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=b}},dn:function(a){var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Gc&&(this.Gc=this.Gc.M);a==this.Yi&&(this.Yi=this.Yi.ia);a.M=null;a.ia=null;this.Rg--;a.Vb=null;if(null!=this.jc){b=this.jc;b.hc.oi(a.ub);a.ub=null;a.Ic=-1;for(var d=a.Vb.Mb;null!=d;){var e=d.M,c=d.me;if(c.Ec==a||c.Fc==a){d=d.ad;d.Bb=!1;d.wb=0;var d=b.Hi,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.je&&(d.je=d.je.M);c==d.Le&&(d.Le=d.Le.ia);c.M=null;c.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.C.Mb&&(c.C.Mb=c.C.Mb.M);c.rb==c.C.ic&&(c.C.ic=c.C.ic.ia);c.rb.M=null;c.rb.ia=null;f=c.sb.ia;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.sb==c.D.Mb&&(c.D.Mb=c.D.Mb.M);c.sb==c.D.ic&&(c.D.ic=c.D.ic.ia);c.sb.M=null;c.sb.ia=null;c.C.Ne--;c.D.Ne--;c.rb.ad=null;c.sb.ad=null;c.rb.me=null;c.sb.me=null;c.Ec=null;c.Fc=null;c.C=null;c.D=null;c.Hh=!1;c.pj.df();c.Ia.df();c.$h=null;f=c.ef;f.Ec=null;f.Fc=null;f.C=null;f.D=null;f.Ej=null;f.Fj=null;c.M=d.Cg;d.Cg=c;d.Ui--}d=e}b.Rg--}this.ck();for(a=this.Gc;null!=a;){var b=a.M,c=this.ja,e=this.a,d=a.ja,f=a.ha,l,g,k,m,n,r,q,t,h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;r=c.l*f.o+c.g*f.i+c.s*f.l;q=c.l*f.f+c.g*f.m+c.s*f.g;t=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=r;d.g=q;d.s=t;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;c=a.a;d=a.ha;f=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;r=e.l*d.f+e.g*d.m+e.s*d.g;q=e.l*d.h+e.g*d.j+e.s*d.s;c.o=f;c.f=h;c.h=l;c.i=g;c.m=k;c.j=m;c.l=n;c.g=r;c.s=q;f=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;c.v=f;c.A=h;c.B=d;c.v+=e.v;c.A+=e.A;c.B+=e.B;a.Fb.Lb(a.u,a.ja);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Fb.Lb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.ub&&(e=a.a.v-a.ja.v,c=a.a.A-a.ja.A,d=a.a.B-a.ja.B,f=a.mc,f.x=e,f.y=c,f.z=d,a.Vb.jc.hc.Qd(a.ub,a.u,a.mc));a=b}},Eo:function(){return this.Jb},nn:function(a){this.Jb=a;this.ck()},pn:function(){this.Bb=!1;this.wb=0},on:function(){this.Bb=!0;this.wb=0},Dm:function(){return this.Bb},tm:function(){return this.wb},gn:function(a){this.Tk=a;this.Bb=!1;this.wb=0},Je:function(){return this.sk},jn:function(a){this.sk=a},Vc:function(){return this.hk},en:function(a){this.hk=a},Um:function(){return this.ia},Im:function(){return this.M}};Ka.prototype={wc:function(){return this.pk},Ke:function(a){this.pk=a},Uc:function(){return this.Ak},cf:function(a){this.Ak=a},Dc:function(){var a=this.ha,b=new Ua;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Hc:function(a){var b=this.ha;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},ie:function(){var a=this.a,b=new Ua;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Fe:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},bf:function(a){var b=this.ha;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Vb)for(a=this.Vb,a.ck(),b=a.Gc;null!=b;){var e=b.M,d=a.ja,c=a.a,f=b.ja,h=b.ha,l,g,k,m,n,r,q,t,x;l=d.o*h.o+d.f*h.i+d.h*h.l;g=d.o*h.f+d.f*h.m+d.h*h.g;k=d.o*h.h+d.f*h.j+d.h*h.s;m=d.i*h.o+d.m*h.i+d.j*h.l;n=d.i*h.f+d.m*h.m+d.j*h.g;r=d.i*h.h+d.m*h.j+d.j*h.s;q=d.l*h.o+d.g*h.i+d.s*h.l;t=d.l*h.f+d.g*h.m+d.s*h.g;x=d.l*h.h+d.g*h.j+d.s*h.s;f.o=l;f.f=g;f.h=k;f.i=m;f.m=n;f.j=r;f.l=q;f.g=t;f.s=x;l=d.o*h.v+d.f*h.A+d.h*h.B;g=d.i*h.v+d.m*h.A+d.j*h.B;h=d.l*h.v+d.g*h.A+d.s*h.B;f.v=l;f.A=g;f.B=h;f.v+=d.v;f.A+=d.A;f.B+=d.B;d=b.a;f=b.ha;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;r=c.l*f.o+c.g*f.i+c.s*f.l;q=c.l*f.f+c.g*f.m+c.s*f.g;t=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=r;d.g=q;d.s=t;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;b.Fb.Lb(b.u,b.ja);c=b.u.na;d=b.u.oa;f=b.u.pa;h=b.u.ka;l=b.u.la;g=b.u.ma;b.Fb.Lb(b.u,b.a);b.u.na=c<b.u.na?c:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.pa=f<b.u.pa?f:b.u.pa;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;b.u.ma=g>b.u.ma?g:b.u.ma;null!=b.ub&&(c=b.a.v-b.ja.v,d=b.a.A-b.ja.A,f=b.a.B-b.ja.B,h=b.mc,h.x=c,h.y=d,h.z=f,b.Vb.jc.hc.Qd(b.ub,b.u,b.mc));b=e}},lc:function(){return this.Vk},Je:function(a){this.Vk=a;if(null!=this.Vb){a=this.Vb;a.ck();for(var b=a.Gc;null!=b;){var e=b.M,d=a.ja,c=a.a,f=b.ja,h=b.ha,l,g,k,m,n,r,q,t,x;l=d.o*h.o+d.f*h.i+d.h*h.l;g=d.o*h.f+d.f*h.m+d.h*h.g;k=d.o*h.h+d.f*h.j+d.h*h.s;m=d.i*h.o+d.m*h.i+d.j*h.l;n=d.i*h.f+d.m*h.m+d.j*h.g;r=d.i*h.h+d.m*h.j+d.j*h.s;q=d.l*h.o+d.g*h.i+d.s*h.l;t=d.l*h.f+d.g*h.m+d.s*h.g;x=d.l*h.h+d.g*h.j+d.s*h.s;f.o=l;f.f=g;f.h=k;f.i=m;f.m=n;f.j=r;f.l=q;f.g=t;f.s=x;l=d.o*h.v+d.f*h.A+d.h*h.B;g=d.i*h.v+d.m*h.A+d.j*h.B;h=d.l*h.v+d.g*h.A+d.s*h.B;f.v=l;f.A=g;f.B=h;f.v+=d.v;f.A+=d.A;f.B+=d.B;d=b.a;f=b.ha;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;r=c.l*f.o+c.g*f.i+c.s*f.l;q=c.l*f.f+c.g*f.m+c.s*f.g;t=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=r;d.g=q;d.s=t;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;b.Fb.Lb(b.u,b.ja);c=b.u.na;d=b.u.oa;f=b.u.pa;h=b.u.ka;l=b.u.la;g=b.u.ma;b.Fb.Lb(b.u,b.a);b.u.na=c<b.u.na?c:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.pa=f<b.u.pa?f:b.u.pa;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;b.u.ma=g>b.u.ma?g:b.u.ma;null!=b.ub&&(c=b.a.v-b.ja.v,d=b.a.A-b.ja.A,f=b.a.B-b.ja.B,h=b.mc,h.x=c,h.y=d,h.z=f,b.Vb.jc.hc.Qd(b.ub,b.u,b.mc));b=e}}},wa:function(){return this.u.clone()},mb:function(a){a.qe(this.u)},xc:function(){return this.Fb},Vc:function(){return this.Vb},Cb:function(){return this.kk},Ge:function(a){this.kk=a},Kb:function(){return this.lk},He:function(a){this.lk=a},kc:function(){return this.im},Ie:function(a){this.im=a},vd:function(){return this.ia},Wc:function(){return this.M}};pi.gg=1;pi.hg=2;pi.BRUTE_FORCE=1;pi.BVH=2;bc.Pm=0;bc.cf=1;bc.Ei=2;bc.jg=3;bc.ig=4;bc.kg=5;bc.Di=0;bc.ph=5;bc.SPHERE=0;bc.BOX=1;bc.CYLINDER=2;bc.CONE=3;bc.CAPSULE=4;bc.CONVEX_HULL=5;ni.Ie=1;Ee.Kb=0;n.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;lb.mb=new lb;dc.Xm=0;dc.Bm=1;dc.Am=2;dc.um=257;dc.tm=258;dc.sm=259;dc.SUCCEEDED=0;dc.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;dc.GJK_DID_NOT_CONVERGE=2;dc.EPA_FAILED_TO_INIT=257;dc.EPA_FAILED_TO_ADD_VERTEX=258;dc.EPA_DID_NOT_CONVERGE=259;I.numCreations=0;J.numCreations=0;pa.POSITIVE_INFINITY=Infinity;pa.NEGATIVE_INFINITY=-Infinity;pa.PI=3.14159265358979;pa.TWO_PI=6.28318530717958;pa.HALF_PI=1.570796326794895;pa.TO_RADIANS=.017453292519943278;pa.TO_DEGREES=57.29577951308238;wa.numCreations=0;Mg.Je=8;Mg.Ke=4;Mg.He=8;Ce.broadPhaseCollisionTime=0;Ce.narrowPhaseCollisionTime=0;Ce.dynamicsTime=0;Ce.totalTime=0;jc.bf=0;jc.Vm=1;jc.Jm=2;jc.BAUMGARTE=0;jc.SPLIT_IMPULSE=1;jc.NGS=2;gf.Ge=1;gf.Fe=2;Mb.Um=0;Mb.Om=1;Mb.Fi=2;Mb.Mm=3;Mb.Ym=4;Mb.Nm=5;Mb.ym=6;Mb.SPHERICAL=0;Mb.REVOLUTE=1;Mb.CYLINDRICAL=2;Mb.PRISMATIC=3;Mb.UNIVERSAL=4;Mb.RAGDOLL=5;Mb.GENERIC=6;vf.Dm=0;vf.gk=1;vf.ITERATIVE=0;vf.DIRECT=1;Qe.fm=0;Qe.Wm=1;Qe.Im=2;Qe.DYNAMIC=0;Qe.STATIC=1;Qe.KINEMATIC=2;Ij.lc()})({});
